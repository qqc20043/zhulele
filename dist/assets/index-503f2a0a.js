(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function z4(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var B4={exports:{}},y0={},H4={exports:{}},Pt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yd=Symbol.for("react.element"),kN=Symbol.for("react.portal"),UN=Symbol.for("react.fragment"),ON=Symbol.for("react.strict_mode"),FN=Symbol.for("react.profiler"),zN=Symbol.for("react.provider"),BN=Symbol.for("react.context"),HN=Symbol.for("react.forward_ref"),VN=Symbol.for("react.suspense"),GN=Symbol.for("react.memo"),WN=Symbol.for("react.lazy"),Uw=Symbol.iterator;function XN(t){return t===null||typeof t!="object"?null:(t=Uw&&t[Uw]||t["@@iterator"],typeof t=="function"?t:null)}var V4={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G4=Object.assign,W4={};function Ku(t,e,n){this.props=t,this.context=e,this.refs=W4,this.updater=n||V4}Ku.prototype.isReactComponent={};Ku.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ku.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function X4(){}X4.prototype=Ku.prototype;function S2(t,e,n){this.props=t,this.context=e,this.refs=W4,this.updater=n||V4}var M2=S2.prototype=new X4;M2.constructor=S2;G4(M2,Ku.prototype);M2.isPureReactComponent=!0;var Ow=Array.isArray,j4=Object.prototype.hasOwnProperty,w2={current:null},Y4={key:!0,ref:!0,__self:!0,__source:!0};function $4(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)j4.call(e,i)&&!Y4.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var u=Array(a),h=0;h<a;h++)u[h]=arguments[h+2];r.children=u}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:yd,type:t,key:s,ref:o,props:r,_owner:w2.current}}function jN(t,e){return{$$typeof:yd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function E2(t){return typeof t=="object"&&t!==null&&t.$$typeof===yd}function YN(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Fw=/\/+/g;function Fv(t,e){return typeof t=="object"&&t!==null&&t.key!=null?YN(""+t.key):e.toString(36)}function ng(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case yd:case kN:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+Fv(o,0):i,Ow(r)?(n="",t!=null&&(n=t.replace(Fw,"$&/")+"/"),ng(r,e,n,"",function(h){return h})):r!=null&&(E2(r)&&(r=jN(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(Fw,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",Ow(t))for(var a=0;a<t.length;a++){s=t[a];var u=i+Fv(s,a);o+=ng(s,e,n,u,r)}else if(u=XN(t),typeof u=="function")for(t=u.call(t),a=0;!(s=t.next()).done;)s=s.value,u=i+Fv(s,a++),o+=ng(s,e,n,u,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Fp(t,e,n){if(t==null)return t;var i=[],r=0;return ng(t,i,"","",function(s){return e.call(n,s,r++)}),i}function $N(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Yi={current:null},ig={transition:null},qN={ReactCurrentDispatcher:Yi,ReactCurrentBatchConfig:ig,ReactCurrentOwner:w2};function q4(){throw Error("act(...) is not supported in production builds of React.")}Pt.Children={map:Fp,forEach:function(t,e,n){Fp(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Fp(t,function(){e++}),e},toArray:function(t){return Fp(t,function(e){return e})||[]},only:function(t){if(!E2(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Pt.Component=Ku;Pt.Fragment=UN;Pt.Profiler=FN;Pt.PureComponent=S2;Pt.StrictMode=ON;Pt.Suspense=VN;Pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qN;Pt.act=q4;Pt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=G4({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=w2.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)j4.call(e,u)&&!Y4.hasOwnProperty(u)&&(i[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)i.children=n;else if(1<u){a=Array(u);for(var h=0;h<u;h++)a[h]=arguments[h+2];i.children=a}return{$$typeof:yd,type:t.type,key:r,ref:s,props:i,_owner:o}};Pt.createContext=function(t){return t={$$typeof:BN,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:zN,_context:t},t.Consumer=t};Pt.createElement=$4;Pt.createFactory=function(t){var e=$4.bind(null,t);return e.type=t,e};Pt.createRef=function(){return{current:null}};Pt.forwardRef=function(t){return{$$typeof:HN,render:t}};Pt.isValidElement=E2;Pt.lazy=function(t){return{$$typeof:WN,_payload:{_status:-1,_result:t},_init:$N}};Pt.memo=function(t,e){return{$$typeof:GN,type:t,compare:e===void 0?null:e}};Pt.startTransition=function(t){var e=ig.transition;ig.transition={};try{t()}finally{ig.transition=e}};Pt.unstable_act=q4;Pt.useCallback=function(t,e){return Yi.current.useCallback(t,e)};Pt.useContext=function(t){return Yi.current.useContext(t)};Pt.useDebugValue=function(){};Pt.useDeferredValue=function(t){return Yi.current.useDeferredValue(t)};Pt.useEffect=function(t,e){return Yi.current.useEffect(t,e)};Pt.useId=function(){return Yi.current.useId()};Pt.useImperativeHandle=function(t,e,n){return Yi.current.useImperativeHandle(t,e,n)};Pt.useInsertionEffect=function(t,e){return Yi.current.useInsertionEffect(t,e)};Pt.useLayoutEffect=function(t,e){return Yi.current.useLayoutEffect(t,e)};Pt.useMemo=function(t,e){return Yi.current.useMemo(t,e)};Pt.useReducer=function(t,e,n){return Yi.current.useReducer(t,e,n)};Pt.useRef=function(t){return Yi.current.useRef(t)};Pt.useState=function(t){return Yi.current.useState(t)};Pt.useSyncExternalStore=function(t,e,n){return Yi.current.useSyncExternalStore(t,e,n)};Pt.useTransition=function(){return Yi.current.useTransition()};Pt.version="18.3.1";H4.exports=Pt;var _e=H4.exports;const ZN=z4(_e);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KN=_e,JN=Symbol.for("react.element"),QN=Symbol.for("react.fragment"),eD=Object.prototype.hasOwnProperty,tD=KN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,nD={key:!0,ref:!0,__self:!0,__source:!0};function Z4(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)eD.call(e,i)&&!nD.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:JN,type:t,key:s,ref:o,props:r,_owner:tD.current}}y0.Fragment=QN;y0.jsx=Z4;y0.jsxs=Z4;B4.exports=y0;var Te=B4.exports,m_={},K4={exports:{}},Dr={},J4={exports:{}},Q4={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,X){var V=U.length;U.push(X);e:for(;0<V;){var re=V-1>>>1,we=U[re];if(0<r(we,X))U[re]=X,U[V]=we,V=re;else break e}}function n(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var X=U[0],V=U.pop();if(V!==X){U[0]=V;e:for(var re=0,we=U.length,Be=we>>>1;re<Be;){var ee=2*(re+1)-1,xe=U[ee],Ce=ee+1,Me=U[Ce];if(0>r(xe,V))Ce<we&&0>r(Me,xe)?(U[re]=Me,U[Ce]=V,re=Ce):(U[re]=xe,U[ee]=V,re=ee);else if(Ce<we&&0>r(Me,V))U[re]=Me,U[Ce]=V,re=Ce;else break e}}return X}function r(U,X){var V=U.sortIndex-X.sortIndex;return V!==0?V:U.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],h=[],f=1,d=null,p=3,v=!1,y=!1,w=!1,S=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(U){for(var X=n(h);X!==null;){if(X.callback===null)i(h);else if(X.startTime<=U)i(h),X.sortIndex=X.expirationTime,e(u,X);else break;X=n(h)}}function T(U){if(w=!1,M(U),!y)if(n(u)!==null)y=!0,fe(P);else{var X=n(h);X!==null&&ve(T,X.startTime-U)}}function P(U,X){y=!1,w&&(w=!1,g(N),N=-1),v=!0;var V=p;try{for(M(X),d=n(u);d!==null&&(!(d.expirationTime>X)||U&&!O());){var re=d.callback;if(typeof re=="function"){d.callback=null,p=d.priorityLevel;var we=re(d.expirationTime<=X);X=t.unstable_now(),typeof we=="function"?d.callback=we:d===n(u)&&i(u),M(X)}else i(u);d=n(u)}if(d!==null)var Be=!0;else{var ee=n(h);ee!==null&&ve(T,ee.startTime-X),Be=!1}return Be}finally{d=null,p=V,v=!1}}var b=!1,L=null,N=-1,R=5,C=-1;function O(){return!(t.unstable_now()-C<R)}function j(){if(L!==null){var U=t.unstable_now();C=U;var X=!0;try{X=L(!0,U)}finally{X?H():(b=!1,L=null)}}else b=!1}var H;if(typeof x=="function")H=function(){x(j)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,ne=J.port2;J.port1.onmessage=j,H=function(){ne.postMessage(null)}}else H=function(){S(j,0)};function fe(U){L=U,b||(b=!0,H())}function ve(U,X){N=S(function(){U(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){y||v||(y=!0,fe(P))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(U){switch(p){case 1:case 2:case 3:var X=3;break;default:X=p}var V=p;p=X;try{return U()}finally{p=V}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,X){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var V=p;p=U;try{return X()}finally{p=V}},t.unstable_scheduleCallback=function(U,X,V){var re=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?re+V:re):V=re,U){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=V+we,U={id:f++,callback:X,priorityLevel:U,startTime:V,expirationTime:we,sortIndex:-1},V>re?(U.sortIndex=V,e(h,U),n(u)===null&&U===n(h)&&(w?(g(N),N=-1):w=!0,ve(T,V-re))):(U.sortIndex=we,e(u,U),y||v||(y=!0,fe(P))),U},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(U){var X=p;return function(){var V=p;p=X;try{return U.apply(this,arguments)}finally{p=V}}}})(Q4);J4.exports=Q4;var iD=J4.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rD=_e,Pr=iD;function Ee(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var eC=new Set,Pf={};function oc(t,e){Pu(t,e),Pu(t+"Capture",e)}function Pu(t,e){for(Pf[t]=e,t=0;t<e.length;t++)eC.add(e[t])}var Bo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g_=Object.prototype.hasOwnProperty,sD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zw={},Bw={};function oD(t){return g_.call(Bw,t)?!0:g_.call(zw,t)?!1:sD.test(t)?Bw[t]=!0:(zw[t]=!0,!1)}function aD(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function lD(t,e,n,i){if(e===null||typeof e>"u"||aD(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function $i(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var vi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){vi[t]=new $i(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];vi[e]=new $i(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){vi[t]=new $i(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){vi[t]=new $i(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){vi[t]=new $i(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){vi[t]=new $i(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){vi[t]=new $i(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){vi[t]=new $i(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){vi[t]=new $i(t,5,!1,t.toLowerCase(),null,!1,!1)});var T2=/[\-:]([a-z])/g;function A2(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(T2,A2);vi[e]=new $i(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(T2,A2);vi[e]=new $i(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(T2,A2);vi[e]=new $i(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){vi[t]=new $i(t,1,!1,t.toLowerCase(),null,!1,!1)});vi.xlinkHref=new $i("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){vi[t]=new $i(t,1,!1,t.toLowerCase(),null,!0,!0)});function C2(t,e,n,i){var r=vi.hasOwnProperty(e)?vi[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(lD(e,n,r,i)&&(n=null),i||r===null?oD(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var $o=rD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,zp=Symbol.for("react.element"),iu=Symbol.for("react.portal"),ru=Symbol.for("react.fragment"),b2=Symbol.for("react.strict_mode"),v_=Symbol.for("react.profiler"),tC=Symbol.for("react.provider"),nC=Symbol.for("react.context"),R2=Symbol.for("react.forward_ref"),y_=Symbol.for("react.suspense"),__=Symbol.for("react.suspense_list"),P2=Symbol.for("react.memo"),ya=Symbol.for("react.lazy"),iC=Symbol.for("react.offscreen"),Hw=Symbol.iterator;function Nh(t){return t===null||typeof t!="object"?null:(t=Hw&&t[Hw]||t["@@iterator"],typeof t=="function"?t:null)}var En=Object.assign,zv;function nf(t){if(zv===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);zv=e&&e[1]||""}return`
`+zv+t}var Bv=!1;function Hv(t,e){if(!t||Bv)return"";Bv=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var i=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){i=h}t.call(e.prototype)}else{try{throw Error()}catch(h){i=h}t()}}catch(h){if(h&&i&&typeof h.stack=="string"){for(var r=h.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var u=`
`+r[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=a);break}}}finally{Bv=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?nf(t):""}function cD(t){switch(t.tag){case 5:return nf(t.type);case 16:return nf("Lazy");case 13:return nf("Suspense");case 19:return nf("SuspenseList");case 0:case 2:case 15:return t=Hv(t.type,!1),t;case 11:return t=Hv(t.type.render,!1),t;case 1:return t=Hv(t.type,!0),t;default:return""}}function x_(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ru:return"Fragment";case iu:return"Portal";case v_:return"Profiler";case b2:return"StrictMode";case y_:return"Suspense";case __:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case nC:return(t.displayName||"Context")+".Consumer";case tC:return(t._context.displayName||"Context")+".Provider";case R2:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case P2:return e=t.displayName||null,e!==null?e:x_(t.type)||"Memo";case ya:e=t._payload,t=t._init;try{return x_(t(e))}catch{}}return null}function uD(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return x_(e);case 8:return e===b2?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Fa(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function rC(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function hD(t){var e=rC(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Bp(t){t._valueTracker||(t._valueTracker=hD(t))}function sC(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=rC(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Pg(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function S_(t,e){var n=e.checked;return En({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Vw(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Fa(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function oC(t,e){e=e.checked,e!=null&&C2(t,"checked",e,!1)}function M_(t,e){oC(t,e);var n=Fa(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?w_(t,e.type,n):e.hasOwnProperty("defaultValue")&&w_(t,e.type,Fa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Gw(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function w_(t,e,n){(e!=="number"||Pg(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var rf=Array.isArray;function Mu(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Fa(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function E_(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ee(91));return En({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ww(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ee(92));if(rf(n)){if(1<n.length)throw Error(Ee(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Fa(n)}}function aC(t,e){var n=Fa(e.value),i=Fa(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function Xw(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function lC(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function T_(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?lC(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Hp,cC=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Hp=Hp||document.createElement("div"),Hp.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Hp.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Lf(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var hf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fD=["Webkit","ms","Moz","O"];Object.keys(hf).forEach(function(t){fD.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),hf[e]=hf[t]})});function uC(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||hf.hasOwnProperty(t)&&hf[t]?(""+e).trim():e+"px"}function hC(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=uC(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var dD=En({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function A_(t,e){if(e){if(dD[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ee(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ee(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ee(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ee(62))}}function C_(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var b_=null;function L2(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var R_=null,wu=null,Eu=null;function jw(t){if(t=Sd(t)){if(typeof R_!="function")throw Error(Ee(280));var e=t.stateNode;e&&(e=w0(e),R_(t.stateNode,t.type,e))}}function fC(t){wu?Eu?Eu.push(t):Eu=[t]:wu=t}function dC(){if(wu){var t=wu,e=Eu;if(Eu=wu=null,jw(t),e)for(t=0;t<e.length;t++)jw(e[t])}}function pC(t,e){return t(e)}function mC(){}var Vv=!1;function gC(t,e,n){if(Vv)return t(e,n);Vv=!0;try{return pC(t,e,n)}finally{Vv=!1,(wu!==null||Eu!==null)&&(mC(),dC())}}function If(t,e){var n=t.stateNode;if(n===null)return null;var i=w0(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ee(231,e,typeof n));return n}var P_=!1;if(Bo)try{var Dh={};Object.defineProperty(Dh,"passive",{get:function(){P_=!0}}),window.addEventListener("test",Dh,Dh),window.removeEventListener("test",Dh,Dh)}catch{P_=!1}function pD(t,e,n,i,r,s,o,a,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(f){this.onError(f)}}var ff=!1,Lg=null,Ig=!1,L_=null,mD={onError:function(t){ff=!0,Lg=t}};function gD(t,e,n,i,r,s,o,a,u){ff=!1,Lg=null,pD.apply(mD,arguments)}function vD(t,e,n,i,r,s,o,a,u){if(gD.apply(this,arguments),ff){if(ff){var h=Lg;ff=!1,Lg=null}else throw Error(Ee(198));Ig||(Ig=!0,L_=h)}}function ac(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function vC(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Yw(t){if(ac(t)!==t)throw Error(Ee(188))}function yD(t){var e=t.alternate;if(!e){if(e=ac(t),e===null)throw Error(Ee(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return Yw(r),t;if(s===i)return Yw(r),e;s=s.sibling}throw Error(Ee(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(Ee(189))}}if(n.alternate!==i)throw Error(Ee(190))}if(n.tag!==3)throw Error(Ee(188));return n.stateNode.current===n?t:e}function yC(t){return t=yD(t),t!==null?_C(t):null}function _C(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=_C(t);if(e!==null)return e;t=t.sibling}return null}var xC=Pr.unstable_scheduleCallback,$w=Pr.unstable_cancelCallback,_D=Pr.unstable_shouldYield,xD=Pr.unstable_requestPaint,On=Pr.unstable_now,SD=Pr.unstable_getCurrentPriorityLevel,I2=Pr.unstable_ImmediatePriority,SC=Pr.unstable_UserBlockingPriority,Ng=Pr.unstable_NormalPriority,MD=Pr.unstable_LowPriority,MC=Pr.unstable_IdlePriority,_0=null,Js=null;function wD(t){if(Js&&typeof Js.onCommitFiberRoot=="function")try{Js.onCommitFiberRoot(_0,t,void 0,(t.current.flags&128)===128)}catch{}}var ws=Math.clz32?Math.clz32:AD,ED=Math.log,TD=Math.LN2;function AD(t){return t>>>=0,t===0?32:31-(ED(t)/TD|0)|0}var Vp=64,Gp=4194304;function sf(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Dg(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=sf(a):(s&=o,s!==0&&(i=sf(s)))}else o=n&~r,o!==0?i=sf(o):s!==0&&(i=sf(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-ws(e),r=1<<n,i|=t[n],e&=~r;return i}function CD(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bD(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-ws(s),a=1<<o,u=r[o];u===-1?(!(a&n)||a&i)&&(r[o]=CD(a,e)):u<=e&&(t.expiredLanes|=a),s&=~a}}function I_(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function wC(){var t=Vp;return Vp<<=1,!(Vp&4194240)&&(Vp=64),t}function Gv(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function _d(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ws(e),t[e]=n}function RD(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-ws(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function N2(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-ws(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var qt=0;function EC(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var TC,D2,AC,CC,bC,N_=!1,Wp=[],Aa=null,Ca=null,ba=null,Nf=new Map,Df=new Map,xa=[],PD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qw(t,e){switch(t){case"focusin":case"focusout":Aa=null;break;case"dragenter":case"dragleave":Ca=null;break;case"mouseover":case"mouseout":ba=null;break;case"pointerover":case"pointerout":Nf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Df.delete(e.pointerId)}}function kh(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Sd(e),e!==null&&D2(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function LD(t,e,n,i,r){switch(e){case"focusin":return Aa=kh(Aa,t,e,n,i,r),!0;case"dragenter":return Ca=kh(Ca,t,e,n,i,r),!0;case"mouseover":return ba=kh(ba,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return Nf.set(s,kh(Nf.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Df.set(s,kh(Df.get(s)||null,t,e,n,i,r)),!0}return!1}function RC(t){var e=Nl(t.target);if(e!==null){var n=ac(e);if(n!==null){if(e=n.tag,e===13){if(e=vC(n),e!==null){t.blockedOn=e,bC(t.priority,function(){AC(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function rg(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=D_(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);b_=i,n.target.dispatchEvent(i),b_=null}else return e=Sd(n),e!==null&&D2(e),t.blockedOn=n,!1;e.shift()}return!0}function Zw(t,e,n){rg(t)&&n.delete(e)}function ID(){N_=!1,Aa!==null&&rg(Aa)&&(Aa=null),Ca!==null&&rg(Ca)&&(Ca=null),ba!==null&&rg(ba)&&(ba=null),Nf.forEach(Zw),Df.forEach(Zw)}function Uh(t,e){t.blockedOn===e&&(t.blockedOn=null,N_||(N_=!0,Pr.unstable_scheduleCallback(Pr.unstable_NormalPriority,ID)))}function kf(t){function e(r){return Uh(r,t)}if(0<Wp.length){Uh(Wp[0],t);for(var n=1;n<Wp.length;n++){var i=Wp[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Aa!==null&&Uh(Aa,t),Ca!==null&&Uh(Ca,t),ba!==null&&Uh(ba,t),Nf.forEach(e),Df.forEach(e),n=0;n<xa.length;n++)i=xa[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<xa.length&&(n=xa[0],n.blockedOn===null);)RC(n),n.blockedOn===null&&xa.shift()}var Tu=$o.ReactCurrentBatchConfig,kg=!0;function ND(t,e,n,i){var r=qt,s=Tu.transition;Tu.transition=null;try{qt=1,k2(t,e,n,i)}finally{qt=r,Tu.transition=s}}function DD(t,e,n,i){var r=qt,s=Tu.transition;Tu.transition=null;try{qt=4,k2(t,e,n,i)}finally{qt=r,Tu.transition=s}}function k2(t,e,n,i){if(kg){var r=D_(t,e,n,i);if(r===null)Qv(t,e,i,Ug,n),qw(t,i);else if(LD(r,t,e,n,i))i.stopPropagation();else if(qw(t,i),e&4&&-1<PD.indexOf(t)){for(;r!==null;){var s=Sd(r);if(s!==null&&TC(s),s=D_(t,e,n,i),s===null&&Qv(t,e,i,Ug,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else Qv(t,e,i,null,n)}}var Ug=null;function D_(t,e,n,i){if(Ug=null,t=L2(i),t=Nl(t),t!==null)if(e=ac(t),e===null)t=null;else if(n=e.tag,n===13){if(t=vC(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ug=t,null}function PC(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(SD()){case I2:return 1;case SC:return 4;case Ng:case MD:return 16;case MC:return 536870912;default:return 16}default:return 16}}var Ea=null,U2=null,sg=null;function LC(){if(sg)return sg;var t,e=U2,n=e.length,i,r="value"in Ea?Ea.value:Ea.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return sg=r.slice(t,1<i?1-i:void 0)}function og(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Xp(){return!0}function Kw(){return!1}function kr(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Xp:Kw,this.isPropagationStopped=Kw,this}return En(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Xp)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Xp)},persist:function(){},isPersistent:Xp}),e}var Ju={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},O2=kr(Ju),xd=En({},Ju,{view:0,detail:0}),kD=kr(xd),Wv,Xv,Oh,x0=En({},xd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:F2,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Oh&&(Oh&&t.type==="mousemove"?(Wv=t.screenX-Oh.screenX,Xv=t.screenY-Oh.screenY):Xv=Wv=0,Oh=t),Wv)},movementY:function(t){return"movementY"in t?t.movementY:Xv}}),Jw=kr(x0),UD=En({},x0,{dataTransfer:0}),OD=kr(UD),FD=En({},xd,{relatedTarget:0}),jv=kr(FD),zD=En({},Ju,{animationName:0,elapsedTime:0,pseudoElement:0}),BD=kr(zD),HD=En({},Ju,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),VD=kr(HD),GD=En({},Ju,{data:0}),Qw=kr(GD),WD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},XD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function YD(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=jD[t])?!!e[t]:!1}function F2(){return YD}var $D=En({},xd,{key:function(t){if(t.key){var e=WD[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=og(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?XD[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:F2,charCode:function(t){return t.type==="keypress"?og(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?og(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),qD=kr($D),ZD=En({},x0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),eE=kr(ZD),KD=En({},xd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:F2}),JD=kr(KD),QD=En({},Ju,{propertyName:0,elapsedTime:0,pseudoElement:0}),ek=kr(QD),tk=En({},x0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),nk=kr(tk),ik=[9,13,27,32],z2=Bo&&"CompositionEvent"in window,df=null;Bo&&"documentMode"in document&&(df=document.documentMode);var rk=Bo&&"TextEvent"in window&&!df,IC=Bo&&(!z2||df&&8<df&&11>=df),tE=String.fromCharCode(32),nE=!1;function NC(t,e){switch(t){case"keyup":return ik.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function DC(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var su=!1;function sk(t,e){switch(t){case"compositionend":return DC(e);case"keypress":return e.which!==32?null:(nE=!0,tE);case"textInput":return t=e.data,t===tE&&nE?null:t;default:return null}}function ok(t,e){if(su)return t==="compositionend"||!z2&&NC(t,e)?(t=LC(),sg=U2=Ea=null,su=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return IC&&e.locale!=="ko"?null:e.data;default:return null}}var ak={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function iE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ak[t.type]:e==="textarea"}function kC(t,e,n,i){fC(i),e=Og(e,"onChange"),0<e.length&&(n=new O2("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var pf=null,Uf=null;function lk(t){jC(t,0)}function S0(t){var e=lu(t);if(sC(e))return t}function ck(t,e){if(t==="change")return e}var UC=!1;if(Bo){var Yv;if(Bo){var $v="oninput"in document;if(!$v){var rE=document.createElement("div");rE.setAttribute("oninput","return;"),$v=typeof rE.oninput=="function"}Yv=$v}else Yv=!1;UC=Yv&&(!document.documentMode||9<document.documentMode)}function sE(){pf&&(pf.detachEvent("onpropertychange",OC),Uf=pf=null)}function OC(t){if(t.propertyName==="value"&&S0(Uf)){var e=[];kC(e,Uf,t,L2(t)),gC(lk,e)}}function uk(t,e,n){t==="focusin"?(sE(),pf=e,Uf=n,pf.attachEvent("onpropertychange",OC)):t==="focusout"&&sE()}function hk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return S0(Uf)}function fk(t,e){if(t==="click")return S0(e)}function dk(t,e){if(t==="input"||t==="change")return S0(e)}function pk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ts=typeof Object.is=="function"?Object.is:pk;function Of(t,e){if(Ts(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!g_.call(e,r)||!Ts(t[r],e[r]))return!1}return!0}function oE(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function aE(t,e){var n=oE(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=oE(n)}}function FC(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?FC(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function zC(){for(var t=window,e=Pg();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Pg(t.document)}return e}function B2(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function mk(t){var e=zC(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&FC(n.ownerDocument.documentElement,n)){if(i!==null&&B2(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=aE(n,s);var o=aE(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var gk=Bo&&"documentMode"in document&&11>=document.documentMode,ou=null,k_=null,mf=null,U_=!1;function lE(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;U_||ou==null||ou!==Pg(i)||(i=ou,"selectionStart"in i&&B2(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),mf&&Of(mf,i)||(mf=i,i=Og(k_,"onSelect"),0<i.length&&(e=new O2("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=ou)))}function jp(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var au={animationend:jp("Animation","AnimationEnd"),animationiteration:jp("Animation","AnimationIteration"),animationstart:jp("Animation","AnimationStart"),transitionend:jp("Transition","TransitionEnd")},qv={},BC={};Bo&&(BC=document.createElement("div").style,"AnimationEvent"in window||(delete au.animationend.animation,delete au.animationiteration.animation,delete au.animationstart.animation),"TransitionEvent"in window||delete au.transitionend.transition);function M0(t){if(qv[t])return qv[t];if(!au[t])return t;var e=au[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in BC)return qv[t]=e[n];return t}var HC=M0("animationend"),VC=M0("animationiteration"),GC=M0("animationstart"),WC=M0("transitionend"),XC=new Map,cE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ya(t,e){XC.set(t,e),oc(e,[t])}for(var Zv=0;Zv<cE.length;Zv++){var Kv=cE[Zv],vk=Kv.toLowerCase(),yk=Kv[0].toUpperCase()+Kv.slice(1);Ya(vk,"on"+yk)}Ya(HC,"onAnimationEnd");Ya(VC,"onAnimationIteration");Ya(GC,"onAnimationStart");Ya("dblclick","onDoubleClick");Ya("focusin","onFocus");Ya("focusout","onBlur");Ya(WC,"onTransitionEnd");Pu("onMouseEnter",["mouseout","mouseover"]);Pu("onMouseLeave",["mouseout","mouseover"]);Pu("onPointerEnter",["pointerout","pointerover"]);Pu("onPointerLeave",["pointerout","pointerover"]);oc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));oc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));oc("onBeforeInput",["compositionend","keypress","textInput","paste"]);oc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));oc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));oc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var of="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_k=new Set("cancel close invalid load scroll toggle".split(" ").concat(of));function uE(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,vD(i,e,void 0,t),t.currentTarget=null}function jC(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],u=a.instance,h=a.currentTarget;if(a=a.listener,u!==s&&r.isPropagationStopped())break e;uE(r,a,h),s=u}else for(o=0;o<i.length;o++){if(a=i[o],u=a.instance,h=a.currentTarget,a=a.listener,u!==s&&r.isPropagationStopped())break e;uE(r,a,h),s=u}}}if(Ig)throw t=L_,Ig=!1,L_=null,t}function sn(t,e){var n=e[H_];n===void 0&&(n=e[H_]=new Set);var i=t+"__bubble";n.has(i)||(YC(e,t,2,!1),n.add(i))}function Jv(t,e,n){var i=0;e&&(i|=4),YC(n,t,i,e)}var Yp="_reactListening"+Math.random().toString(36).slice(2);function Ff(t){if(!t[Yp]){t[Yp]=!0,eC.forEach(function(n){n!=="selectionchange"&&(_k.has(n)||Jv(n,!1,t),Jv(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Yp]||(e[Yp]=!0,Jv("selectionchange",!1,e))}}function YC(t,e,n,i){switch(PC(e)){case 1:var r=ND;break;case 4:r=DD;break;default:r=k2}n=r.bind(null,e,n,t),r=void 0,!P_||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Qv(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===r||u.nodeType===8&&u.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Nl(a),o===null)return;if(u=o.tag,u===5||u===6){i=s=o;continue e}a=a.parentNode}}i=i.return}gC(function(){var h=s,f=L2(n),d=[];e:{var p=XC.get(t);if(p!==void 0){var v=O2,y=t;switch(t){case"keypress":if(og(n)===0)break e;case"keydown":case"keyup":v=qD;break;case"focusin":y="focus",v=jv;break;case"focusout":y="blur",v=jv;break;case"beforeblur":case"afterblur":v=jv;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Jw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=OD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=JD;break;case HC:case VC:case GC:v=BD;break;case WC:v=ek;break;case"scroll":v=kD;break;case"wheel":v=nk;break;case"copy":case"cut":case"paste":v=VD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=eE}var w=(e&4)!==0,S=!w&&t==="scroll",g=w?p!==null?p+"Capture":null:p;w=[];for(var x=h,M;x!==null;){M=x;var T=M.stateNode;if(M.tag===5&&T!==null&&(M=T,g!==null&&(T=If(x,g),T!=null&&w.push(zf(x,T,M)))),S)break;x=x.return}0<w.length&&(p=new v(p,y,null,n,f),d.push({event:p,listeners:w}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",p&&n!==b_&&(y=n.relatedTarget||n.fromElement)&&(Nl(y)||y[Ho]))break e;if((v||p)&&(p=f.window===f?f:(p=f.ownerDocument)?p.defaultView||p.parentWindow:window,v?(y=n.relatedTarget||n.toElement,v=h,y=y?Nl(y):null,y!==null&&(S=ac(y),y!==S||y.tag!==5&&y.tag!==6)&&(y=null)):(v=null,y=h),v!==y)){if(w=Jw,T="onMouseLeave",g="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(w=eE,T="onPointerLeave",g="onPointerEnter",x="pointer"),S=v==null?p:lu(v),M=y==null?p:lu(y),p=new w(T,x+"leave",v,n,f),p.target=S,p.relatedTarget=M,T=null,Nl(f)===h&&(w=new w(g,x+"enter",y,n,f),w.target=M,w.relatedTarget=S,T=w),S=T,v&&y)t:{for(w=v,g=y,x=0,M=w;M;M=Rc(M))x++;for(M=0,T=g;T;T=Rc(T))M++;for(;0<x-M;)w=Rc(w),x--;for(;0<M-x;)g=Rc(g),M--;for(;x--;){if(w===g||g!==null&&w===g.alternate)break t;w=Rc(w),g=Rc(g)}w=null}else w=null;v!==null&&hE(d,p,v,w,!1),y!==null&&S!==null&&hE(d,S,y,w,!0)}}e:{if(p=h?lu(h):window,v=p.nodeName&&p.nodeName.toLowerCase(),v==="select"||v==="input"&&p.type==="file")var P=ck;else if(iE(p))if(UC)P=dk;else{P=hk;var b=uk}else(v=p.nodeName)&&v.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(P=fk);if(P&&(P=P(t,h))){kC(d,P,n,f);break e}b&&b(t,p,h),t==="focusout"&&(b=p._wrapperState)&&b.controlled&&p.type==="number"&&w_(p,"number",p.value)}switch(b=h?lu(h):window,t){case"focusin":(iE(b)||b.contentEditable==="true")&&(ou=b,k_=h,mf=null);break;case"focusout":mf=k_=ou=null;break;case"mousedown":U_=!0;break;case"contextmenu":case"mouseup":case"dragend":U_=!1,lE(d,n,f);break;case"selectionchange":if(gk)break;case"keydown":case"keyup":lE(d,n,f)}var L;if(z2)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else su?NC(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(IC&&n.locale!=="ko"&&(su||N!=="onCompositionStart"?N==="onCompositionEnd"&&su&&(L=LC()):(Ea=f,U2="value"in Ea?Ea.value:Ea.textContent,su=!0)),b=Og(h,N),0<b.length&&(N=new Qw(N,t,null,n,f),d.push({event:N,listeners:b}),L?N.data=L:(L=DC(n),L!==null&&(N.data=L)))),(L=rk?sk(t,n):ok(t,n))&&(h=Og(h,"onBeforeInput"),0<h.length&&(f=new Qw("onBeforeInput","beforeinput",null,n,f),d.push({event:f,listeners:h}),f.data=L))}jC(d,e)})}function zf(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Og(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=If(t,n),s!=null&&i.unshift(zf(t,s,r)),s=If(t,e),s!=null&&i.push(zf(t,s,r))),t=t.return}return i}function Rc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function hE(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,u=a.alternate,h=a.stateNode;if(u!==null&&u===i)break;a.tag===5&&h!==null&&(a=h,r?(u=If(n,s),u!=null&&o.unshift(zf(n,u,a))):r||(u=If(n,s),u!=null&&o.push(zf(n,u,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var xk=/\r\n?/g,Sk=/\u0000|\uFFFD/g;function fE(t){return(typeof t=="string"?t:""+t).replace(xk,`
`).replace(Sk,"")}function $p(t,e,n){if(e=fE(e),fE(t)!==e&&n)throw Error(Ee(425))}function Fg(){}var O_=null,F_=null;function z_(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var B_=typeof setTimeout=="function"?setTimeout:void 0,Mk=typeof clearTimeout=="function"?clearTimeout:void 0,dE=typeof Promise=="function"?Promise:void 0,wk=typeof queueMicrotask=="function"?queueMicrotask:typeof dE<"u"?function(t){return dE.resolve(null).then(t).catch(Ek)}:B_;function Ek(t){setTimeout(function(){throw t})}function ey(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),kf(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);kf(e)}function Ra(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function pE(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Qu=Math.random().toString(36).slice(2),$s="__reactFiber$"+Qu,Bf="__reactProps$"+Qu,Ho="__reactContainer$"+Qu,H_="__reactEvents$"+Qu,Tk="__reactListeners$"+Qu,Ak="__reactHandles$"+Qu;function Nl(t){var e=t[$s];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ho]||n[$s]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=pE(t);t!==null;){if(n=t[$s])return n;t=pE(t)}return e}t=n,n=t.parentNode}return null}function Sd(t){return t=t[$s]||t[Ho],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function lu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ee(33))}function w0(t){return t[Bf]||null}var V_=[],cu=-1;function $a(t){return{current:t}}function ln(t){0>cu||(t.current=V_[cu],V_[cu]=null,cu--)}function nn(t,e){cu++,V_[cu]=t.current,t.current=e}var za={},Ni=$a(za),ar=$a(!1),Zl=za;function Lu(t,e){var n=t.type.contextTypes;if(!n)return za;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function lr(t){return t=t.childContextTypes,t!=null}function zg(){ln(ar),ln(Ni)}function mE(t,e,n){if(Ni.current!==za)throw Error(Ee(168));nn(Ni,e),nn(ar,n)}function $C(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(Ee(108,uD(t)||"Unknown",r));return En({},n,i)}function Bg(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||za,Zl=Ni.current,nn(Ni,t),nn(ar,ar.current),!0}function gE(t,e,n){var i=t.stateNode;if(!i)throw Error(Ee(169));n?(t=$C(t,e,Zl),i.__reactInternalMemoizedMergedChildContext=t,ln(ar),ln(Ni),nn(Ni,t)):ln(ar),nn(ar,n)}var Ao=null,E0=!1,ty=!1;function qC(t){Ao===null?Ao=[t]:Ao.push(t)}function Ck(t){E0=!0,qC(t)}function qa(){if(!ty&&Ao!==null){ty=!0;var t=0,e=qt;try{var n=Ao;for(qt=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Ao=null,E0=!1}catch(r){throw Ao!==null&&(Ao=Ao.slice(t+1)),xC(I2,qa),r}finally{qt=e,ty=!1}}return null}var uu=[],hu=0,Hg=null,Vg=0,Zr=[],Kr=0,Kl=null,Lo=1,Io="";function Tl(t,e){uu[hu++]=Vg,uu[hu++]=Hg,Hg=t,Vg=e}function ZC(t,e,n){Zr[Kr++]=Lo,Zr[Kr++]=Io,Zr[Kr++]=Kl,Kl=t;var i=Lo;t=Io;var r=32-ws(i)-1;i&=~(1<<r),n+=1;var s=32-ws(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Lo=1<<32-ws(e)+r|n<<r|i,Io=s+t}else Lo=1<<s|n<<r|i,Io=t}function H2(t){t.return!==null&&(Tl(t,1),ZC(t,1,0))}function V2(t){for(;t===Hg;)Hg=uu[--hu],uu[hu]=null,Vg=uu[--hu],uu[hu]=null;for(;t===Kl;)Kl=Zr[--Kr],Zr[Kr]=null,Io=Zr[--Kr],Zr[Kr]=null,Lo=Zr[--Kr],Zr[Kr]=null}var br=null,Cr=null,mn=!1,Ss=null;function KC(t,e){var n=Qr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function vE(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,br=t,Cr=Ra(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,br=t,Cr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Kl!==null?{id:Lo,overflow:Io}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Qr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,br=t,Cr=null,!0):!1;default:return!1}}function G_(t){return(t.mode&1)!==0&&(t.flags&128)===0}function W_(t){if(mn){var e=Cr;if(e){var n=e;if(!vE(t,e)){if(G_(t))throw Error(Ee(418));e=Ra(n.nextSibling);var i=br;e&&vE(t,e)?KC(i,n):(t.flags=t.flags&-4097|2,mn=!1,br=t)}}else{if(G_(t))throw Error(Ee(418));t.flags=t.flags&-4097|2,mn=!1,br=t}}}function yE(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;br=t}function qp(t){if(t!==br)return!1;if(!mn)return yE(t),mn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!z_(t.type,t.memoizedProps)),e&&(e=Cr)){if(G_(t))throw JC(),Error(Ee(418));for(;e;)KC(t,e),e=Ra(e.nextSibling)}if(yE(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ee(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Cr=Ra(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Cr=null}}else Cr=br?Ra(t.stateNode.nextSibling):null;return!0}function JC(){for(var t=Cr;t;)t=Ra(t.nextSibling)}function Iu(){Cr=br=null,mn=!1}function G2(t){Ss===null?Ss=[t]:Ss.push(t)}var bk=$o.ReactCurrentBatchConfig;function Fh(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ee(309));var i=n.stateNode}if(!i)throw Error(Ee(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Ee(284));if(!n._owner)throw Error(Ee(290,t))}return t}function Zp(t,e){throw t=Object.prototype.toString.call(e),Error(Ee(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function _E(t){var e=t._init;return e(t._payload)}function QC(t){function e(g,x){if(t){var M=g.deletions;M===null?(g.deletions=[x],g.flags|=16):M.push(x)}}function n(g,x){if(!t)return null;for(;x!==null;)e(g,x),x=x.sibling;return null}function i(g,x){for(g=new Map;x!==null;)x.key!==null?g.set(x.key,x):g.set(x.index,x),x=x.sibling;return g}function r(g,x){return g=Na(g,x),g.index=0,g.sibling=null,g}function s(g,x,M){return g.index=M,t?(M=g.alternate,M!==null?(M=M.index,M<x?(g.flags|=2,x):M):(g.flags|=2,x)):(g.flags|=1048576,x)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,x,M,T){return x===null||x.tag!==6?(x=ly(M,g.mode,T),x.return=g,x):(x=r(x,M),x.return=g,x)}function u(g,x,M,T){var P=M.type;return P===ru?f(g,x,M.props.children,T,M.key):x!==null&&(x.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===ya&&_E(P)===x.type)?(T=r(x,M.props),T.ref=Fh(g,x,M),T.return=g,T):(T=dg(M.type,M.key,M.props,null,g.mode,T),T.ref=Fh(g,x,M),T.return=g,T)}function h(g,x,M,T){return x===null||x.tag!==4||x.stateNode.containerInfo!==M.containerInfo||x.stateNode.implementation!==M.implementation?(x=cy(M,g.mode,T),x.return=g,x):(x=r(x,M.children||[]),x.return=g,x)}function f(g,x,M,T,P){return x===null||x.tag!==7?(x=Hl(M,g.mode,T,P),x.return=g,x):(x=r(x,M),x.return=g,x)}function d(g,x,M){if(typeof x=="string"&&x!==""||typeof x=="number")return x=ly(""+x,g.mode,M),x.return=g,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case zp:return M=dg(x.type,x.key,x.props,null,g.mode,M),M.ref=Fh(g,null,x),M.return=g,M;case iu:return x=cy(x,g.mode,M),x.return=g,x;case ya:var T=x._init;return d(g,T(x._payload),M)}if(rf(x)||Nh(x))return x=Hl(x,g.mode,M,null),x.return=g,x;Zp(g,x)}return null}function p(g,x,M,T){var P=x!==null?x.key:null;if(typeof M=="string"&&M!==""||typeof M=="number")return P!==null?null:a(g,x,""+M,T);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case zp:return M.key===P?u(g,x,M,T):null;case iu:return M.key===P?h(g,x,M,T):null;case ya:return P=M._init,p(g,x,P(M._payload),T)}if(rf(M)||Nh(M))return P!==null?null:f(g,x,M,T,null);Zp(g,M)}return null}function v(g,x,M,T,P){if(typeof T=="string"&&T!==""||typeof T=="number")return g=g.get(M)||null,a(x,g,""+T,P);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case zp:return g=g.get(T.key===null?M:T.key)||null,u(x,g,T,P);case iu:return g=g.get(T.key===null?M:T.key)||null,h(x,g,T,P);case ya:var b=T._init;return v(g,x,M,b(T._payload),P)}if(rf(T)||Nh(T))return g=g.get(M)||null,f(x,g,T,P,null);Zp(x,T)}return null}function y(g,x,M,T){for(var P=null,b=null,L=x,N=x=0,R=null;L!==null&&N<M.length;N++){L.index>N?(R=L,L=null):R=L.sibling;var C=p(g,L,M[N],T);if(C===null){L===null&&(L=R);break}t&&L&&C.alternate===null&&e(g,L),x=s(C,x,N),b===null?P=C:b.sibling=C,b=C,L=R}if(N===M.length)return n(g,L),mn&&Tl(g,N),P;if(L===null){for(;N<M.length;N++)L=d(g,M[N],T),L!==null&&(x=s(L,x,N),b===null?P=L:b.sibling=L,b=L);return mn&&Tl(g,N),P}for(L=i(g,L);N<M.length;N++)R=v(L,g,N,M[N],T),R!==null&&(t&&R.alternate!==null&&L.delete(R.key===null?N:R.key),x=s(R,x,N),b===null?P=R:b.sibling=R,b=R);return t&&L.forEach(function(O){return e(g,O)}),mn&&Tl(g,N),P}function w(g,x,M,T){var P=Nh(M);if(typeof P!="function")throw Error(Ee(150));if(M=P.call(M),M==null)throw Error(Ee(151));for(var b=P=null,L=x,N=x=0,R=null,C=M.next();L!==null&&!C.done;N++,C=M.next()){L.index>N?(R=L,L=null):R=L.sibling;var O=p(g,L,C.value,T);if(O===null){L===null&&(L=R);break}t&&L&&O.alternate===null&&e(g,L),x=s(O,x,N),b===null?P=O:b.sibling=O,b=O,L=R}if(C.done)return n(g,L),mn&&Tl(g,N),P;if(L===null){for(;!C.done;N++,C=M.next())C=d(g,C.value,T),C!==null&&(x=s(C,x,N),b===null?P=C:b.sibling=C,b=C);return mn&&Tl(g,N),P}for(L=i(g,L);!C.done;N++,C=M.next())C=v(L,g,N,C.value,T),C!==null&&(t&&C.alternate!==null&&L.delete(C.key===null?N:C.key),x=s(C,x,N),b===null?P=C:b.sibling=C,b=C);return t&&L.forEach(function(j){return e(g,j)}),mn&&Tl(g,N),P}function S(g,x,M,T){if(typeof M=="object"&&M!==null&&M.type===ru&&M.key===null&&(M=M.props.children),typeof M=="object"&&M!==null){switch(M.$$typeof){case zp:e:{for(var P=M.key,b=x;b!==null;){if(b.key===P){if(P=M.type,P===ru){if(b.tag===7){n(g,b.sibling),x=r(b,M.props.children),x.return=g,g=x;break e}}else if(b.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===ya&&_E(P)===b.type){n(g,b.sibling),x=r(b,M.props),x.ref=Fh(g,b,M),x.return=g,g=x;break e}n(g,b);break}else e(g,b);b=b.sibling}M.type===ru?(x=Hl(M.props.children,g.mode,T,M.key),x.return=g,g=x):(T=dg(M.type,M.key,M.props,null,g.mode,T),T.ref=Fh(g,x,M),T.return=g,g=T)}return o(g);case iu:e:{for(b=M.key;x!==null;){if(x.key===b)if(x.tag===4&&x.stateNode.containerInfo===M.containerInfo&&x.stateNode.implementation===M.implementation){n(g,x.sibling),x=r(x,M.children||[]),x.return=g,g=x;break e}else{n(g,x);break}else e(g,x);x=x.sibling}x=cy(M,g.mode,T),x.return=g,g=x}return o(g);case ya:return b=M._init,S(g,x,b(M._payload),T)}if(rf(M))return y(g,x,M,T);if(Nh(M))return w(g,x,M,T);Zp(g,M)}return typeof M=="string"&&M!==""||typeof M=="number"?(M=""+M,x!==null&&x.tag===6?(n(g,x.sibling),x=r(x,M),x.return=g,g=x):(n(g,x),x=ly(M,g.mode,T),x.return=g,g=x),o(g)):n(g,x)}return S}var Nu=QC(!0),eb=QC(!1),Gg=$a(null),Wg=null,fu=null,W2=null;function X2(){W2=fu=Wg=null}function j2(t){var e=Gg.current;ln(Gg),t._currentValue=e}function X_(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Au(t,e){Wg=t,W2=fu=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(sr=!0),t.firstContext=null)}function rs(t){var e=t._currentValue;if(W2!==t)if(t={context:t,memoizedValue:e,next:null},fu===null){if(Wg===null)throw Error(Ee(308));fu=t,Wg.dependencies={lanes:0,firstContext:t}}else fu=fu.next=t;return e}var Dl=null;function Y2(t){Dl===null?Dl=[t]:Dl.push(t)}function tb(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,Y2(e)):(n.next=r.next,r.next=n),e.interleaved=n,Vo(t,i)}function Vo(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var _a=!1;function $2(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nb(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ko(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Pa(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Ut&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Vo(t,n)}return r=i.interleaved,r===null?(e.next=e,Y2(i)):(e.next=r.next,r.next=e),i.interleaved=e,Vo(t,n)}function ag(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,N2(t,n)}}function xE(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Xg(t,e,n,i){var r=t.updateQueue;_a=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var u=a,h=u.next;u.next=null,o===null?s=h:o.next=h,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==o&&(a===null?f.firstBaseUpdate=h:a.next=h,f.lastBaseUpdate=u))}if(s!==null){var d=r.baseState;o=0,f=h=u=null,a=s;do{var p=a.lane,v=a.eventTime;if((i&p)===p){f!==null&&(f=f.next={eventTime:v,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,w=a;switch(p=e,v=n,w.tag){case 1:if(y=w.payload,typeof y=="function"){d=y.call(v,d,p);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=w.payload,p=typeof y=="function"?y.call(v,d,p):y,p==null)break e;d=En({},d,p);break e;case 2:_a=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=r.effects,p===null?r.effects=[a]:p.push(a))}else v={eventTime:v,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(h=f=v,u=d):f=f.next=v,o|=p;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;p=a,a=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(1);if(f===null&&(u=d),r.baseState=u,r.firstBaseUpdate=h,r.lastBaseUpdate=f,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Ql|=o,t.lanes=o,t.memoizedState=d}}function SE(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(Ee(191,r));r.call(i)}}}var Md={},Qs=$a(Md),Hf=$a(Md),Vf=$a(Md);function kl(t){if(t===Md)throw Error(Ee(174));return t}function q2(t,e){switch(nn(Vf,e),nn(Hf,t),nn(Qs,Md),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:T_(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=T_(e,t)}ln(Qs),nn(Qs,e)}function Du(){ln(Qs),ln(Hf),ln(Vf)}function ib(t){kl(Vf.current);var e=kl(Qs.current),n=T_(e,t.type);e!==n&&(nn(Hf,t),nn(Qs,n))}function Z2(t){Hf.current===t&&(ln(Qs),ln(Hf))}var Sn=$a(0);function jg(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ny=[];function K2(){for(var t=0;t<ny.length;t++)ny[t]._workInProgressVersionPrimary=null;ny.length=0}var lg=$o.ReactCurrentDispatcher,iy=$o.ReactCurrentBatchConfig,Jl=0,wn=null,ei=null,hi=null,Yg=!1,gf=!1,Gf=0,Rk=0;function wi(){throw Error(Ee(321))}function J2(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ts(t[n],e[n]))return!1;return!0}function Q2(t,e,n,i,r,s){if(Jl=s,wn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,lg.current=t===null||t.memoizedState===null?Nk:Dk,t=n(i,r),gf){s=0;do{if(gf=!1,Gf=0,25<=s)throw Error(Ee(301));s+=1,hi=ei=null,e.updateQueue=null,lg.current=kk,t=n(i,r)}while(gf)}if(lg.current=$g,e=ei!==null&&ei.next!==null,Jl=0,hi=ei=wn=null,Yg=!1,e)throw Error(Ee(300));return t}function eS(){var t=Gf!==0;return Gf=0,t}function js(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hi===null?wn.memoizedState=hi=t:hi=hi.next=t,hi}function ss(){if(ei===null){var t=wn.alternate;t=t!==null?t.memoizedState:null}else t=ei.next;var e=hi===null?wn.memoizedState:hi.next;if(e!==null)hi=e,ei=t;else{if(t===null)throw Error(Ee(310));ei=t,t={memoizedState:ei.memoizedState,baseState:ei.baseState,baseQueue:ei.baseQueue,queue:ei.queue,next:null},hi===null?wn.memoizedState=hi=t:hi=hi.next=t}return hi}function Wf(t,e){return typeof e=="function"?e(t):e}function ry(t){var e=ss(),n=e.queue;if(n===null)throw Error(Ee(311));n.lastRenderedReducer=t;var i=ei,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,u=null,h=s;do{var f=h.lane;if((Jl&f)===f)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),i=h.hasEagerState?h.eagerState:t(i,h.action);else{var d={lane:f,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(a=u=d,o=i):u=u.next=d,wn.lanes|=f,Ql|=f}h=h.next}while(h!==null&&h!==s);u===null?o=i:u.next=a,Ts(i,e.memoizedState)||(sr=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=u,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,wn.lanes|=s,Ql|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function sy(t){var e=ss(),n=e.queue;if(n===null)throw Error(Ee(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);Ts(s,e.memoizedState)||(sr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function rb(){}function sb(t,e){var n=wn,i=ss(),r=e(),s=!Ts(i.memoizedState,r);if(s&&(i.memoizedState=r,sr=!0),i=i.queue,tS(lb.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||hi!==null&&hi.memoizedState.tag&1){if(n.flags|=2048,Xf(9,ab.bind(null,n,i,r,e),void 0,null),di===null)throw Error(Ee(349));Jl&30||ob(n,e,r)}return r}function ob(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=wn.updateQueue,e===null?(e={lastEffect:null,stores:null},wn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function ab(t,e,n,i){e.value=n,e.getSnapshot=i,cb(e)&&ub(t)}function lb(t,e,n){return n(function(){cb(e)&&ub(t)})}function cb(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ts(t,n)}catch{return!0}}function ub(t){var e=Vo(t,1);e!==null&&Es(e,t,1,-1)}function ME(t){var e=js();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wf,lastRenderedState:t},e.queue=t,t=t.dispatch=Ik.bind(null,wn,t),[e.memoizedState,t]}function Xf(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=wn.updateQueue,e===null?(e={lastEffect:null,stores:null},wn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function hb(){return ss().memoizedState}function cg(t,e,n,i){var r=js();wn.flags|=t,r.memoizedState=Xf(1|e,n,void 0,i===void 0?null:i)}function T0(t,e,n,i){var r=ss();i=i===void 0?null:i;var s=void 0;if(ei!==null){var o=ei.memoizedState;if(s=o.destroy,i!==null&&J2(i,o.deps)){r.memoizedState=Xf(e,n,s,i);return}}wn.flags|=t,r.memoizedState=Xf(1|e,n,s,i)}function wE(t,e){return cg(8390656,8,t,e)}function tS(t,e){return T0(2048,8,t,e)}function fb(t,e){return T0(4,2,t,e)}function db(t,e){return T0(4,4,t,e)}function pb(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function mb(t,e,n){return n=n!=null?n.concat([t]):null,T0(4,4,pb.bind(null,e,t),n)}function nS(){}function gb(t,e){var n=ss();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&J2(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function vb(t,e){var n=ss();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&J2(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function yb(t,e,n){return Jl&21?(Ts(n,e)||(n=wC(),wn.lanes|=n,Ql|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,sr=!0),t.memoizedState=n)}function Pk(t,e){var n=qt;qt=n!==0&&4>n?n:4,t(!0);var i=iy.transition;iy.transition={};try{t(!1),e()}finally{qt=n,iy.transition=i}}function _b(){return ss().memoizedState}function Lk(t,e,n){var i=Ia(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},xb(t))Sb(e,n);else if(n=tb(t,e,n,i),n!==null){var r=Wi();Es(n,t,i,r),Mb(n,e,i)}}function Ik(t,e,n){var i=Ia(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(xb(t))Sb(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,Ts(a,o)){var u=e.interleaved;u===null?(r.next=r,Y2(e)):(r.next=u.next,u.next=r),e.interleaved=r;return}}catch{}finally{}n=tb(t,e,r,i),n!==null&&(r=Wi(),Es(n,t,i,r),Mb(n,e,i))}}function xb(t){var e=t.alternate;return t===wn||e!==null&&e===wn}function Sb(t,e){gf=Yg=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Mb(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,N2(t,n)}}var $g={readContext:rs,useCallback:wi,useContext:wi,useEffect:wi,useImperativeHandle:wi,useInsertionEffect:wi,useLayoutEffect:wi,useMemo:wi,useReducer:wi,useRef:wi,useState:wi,useDebugValue:wi,useDeferredValue:wi,useTransition:wi,useMutableSource:wi,useSyncExternalStore:wi,useId:wi,unstable_isNewReconciler:!1},Nk={readContext:rs,useCallback:function(t,e){return js().memoizedState=[t,e===void 0?null:e],t},useContext:rs,useEffect:wE,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,cg(4194308,4,pb.bind(null,e,t),n)},useLayoutEffect:function(t,e){return cg(4194308,4,t,e)},useInsertionEffect:function(t,e){return cg(4,2,t,e)},useMemo:function(t,e){var n=js();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=js();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=Lk.bind(null,wn,t),[i.memoizedState,t]},useRef:function(t){var e=js();return t={current:t},e.memoizedState=t},useState:ME,useDebugValue:nS,useDeferredValue:function(t){return js().memoizedState=t},useTransition:function(){var t=ME(!1),e=t[0];return t=Pk.bind(null,t[1]),js().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=wn,r=js();if(mn){if(n===void 0)throw Error(Ee(407));n=n()}else{if(n=e(),di===null)throw Error(Ee(349));Jl&30||ob(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,wE(lb.bind(null,i,s,t),[t]),i.flags|=2048,Xf(9,ab.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=js(),e=di.identifierPrefix;if(mn){var n=Io,i=Lo;n=(i&~(1<<32-ws(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Gf++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Rk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Dk={readContext:rs,useCallback:gb,useContext:rs,useEffect:tS,useImperativeHandle:mb,useInsertionEffect:fb,useLayoutEffect:db,useMemo:vb,useReducer:ry,useRef:hb,useState:function(){return ry(Wf)},useDebugValue:nS,useDeferredValue:function(t){var e=ss();return yb(e,ei.memoizedState,t)},useTransition:function(){var t=ry(Wf)[0],e=ss().memoizedState;return[t,e]},useMutableSource:rb,useSyncExternalStore:sb,useId:_b,unstable_isNewReconciler:!1},kk={readContext:rs,useCallback:gb,useContext:rs,useEffect:tS,useImperativeHandle:mb,useInsertionEffect:fb,useLayoutEffect:db,useMemo:vb,useReducer:sy,useRef:hb,useState:function(){return sy(Wf)},useDebugValue:nS,useDeferredValue:function(t){var e=ss();return ei===null?e.memoizedState=t:yb(e,ei.memoizedState,t)},useTransition:function(){var t=sy(Wf)[0],e=ss().memoizedState;return[t,e]},useMutableSource:rb,useSyncExternalStore:sb,useId:_b,unstable_isNewReconciler:!1};function ys(t,e){if(t&&t.defaultProps){e=En({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function j_(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:En({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var A0={isMounted:function(t){return(t=t._reactInternals)?ac(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Wi(),r=Ia(t),s=ko(i,r);s.payload=e,n!=null&&(s.callback=n),e=Pa(t,s,r),e!==null&&(Es(e,t,r,i),ag(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Wi(),r=Ia(t),s=ko(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Pa(t,s,r),e!==null&&(Es(e,t,r,i),ag(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Wi(),i=Ia(t),r=ko(n,i);r.tag=2,e!=null&&(r.callback=e),e=Pa(t,r,i),e!==null&&(Es(e,t,i,n),ag(e,t,i))}};function EE(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!Of(n,i)||!Of(r,s):!0}function wb(t,e,n){var i=!1,r=za,s=e.contextType;return typeof s=="object"&&s!==null?s=rs(s):(r=lr(e)?Zl:Ni.current,i=e.contextTypes,s=(i=i!=null)?Lu(t,r):za),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=A0,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function TE(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&A0.enqueueReplaceState(e,e.state,null)}function Y_(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},$2(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=rs(s):(s=lr(e)?Zl:Ni.current,r.context=Lu(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(j_(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&A0.enqueueReplaceState(r,r.state,null),Xg(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function ku(t,e){try{var n="",i=e;do n+=cD(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function oy(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function $_(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Uk=typeof WeakMap=="function"?WeakMap:Map;function Eb(t,e,n){n=ko(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Zg||(Zg=!0,rx=i),$_(t,e)},n}function Tb(t,e,n){n=ko(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){$_(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){$_(t,e),typeof i!="function"&&(La===null?La=new Set([this]):La.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function AE(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new Uk;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=Zk.bind(null,t,e,n),e.then(t,t))}function CE(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function bE(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ko(-1,1),e.tag=2,Pa(n,e,1))),n.lanes|=1),t)}var Ok=$o.ReactCurrentOwner,sr=!1;function Vi(t,e,n,i){e.child=t===null?eb(e,null,n,i):Nu(e,t.child,n,i)}function RE(t,e,n,i,r){n=n.render;var s=e.ref;return Au(e,r),i=Q2(t,e,n,i,s,r),n=eS(),t!==null&&!sr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Go(t,e,r)):(mn&&n&&H2(e),e.flags|=1,Vi(t,e,i,r),e.child)}function PE(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!uS(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Ab(t,e,s,i,r)):(t=dg(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Of,n(o,i)&&t.ref===e.ref)return Go(t,e,r)}return e.flags|=1,t=Na(s,i),t.ref=e.ref,t.return=e,e.child=t}function Ab(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(Of(s,i)&&t.ref===e.ref)if(sr=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(sr=!0);else return e.lanes=t.lanes,Go(t,e,r)}return q_(t,e,n,i,r)}function Cb(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},nn(pu,Er),Er|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,nn(pu,Er),Er|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,nn(pu,Er),Er|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,nn(pu,Er),Er|=i;return Vi(t,e,r,n),e.child}function bb(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function q_(t,e,n,i,r){var s=lr(n)?Zl:Ni.current;return s=Lu(e,s),Au(e,r),n=Q2(t,e,n,i,s,r),i=eS(),t!==null&&!sr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Go(t,e,r)):(mn&&i&&H2(e),e.flags|=1,Vi(t,e,n,r),e.child)}function LE(t,e,n,i,r){if(lr(n)){var s=!0;Bg(e)}else s=!1;if(Au(e,r),e.stateNode===null)ug(t,e),wb(e,n,i),Y_(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=rs(h):(h=lr(n)?Zl:Ni.current,h=Lu(e,h));var f=n.getDerivedStateFromProps,d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||u!==h)&&TE(e,o,i,h),_a=!1;var p=e.memoizedState;o.state=p,Xg(e,i,o,r),u=e.memoizedState,a!==i||p!==u||ar.current||_a?(typeof f=="function"&&(j_(e,n,f,i),u=e.memoizedState),(a=_a||EE(e,n,a,i,p,u,h))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=u),o.props=i,o.state=u,o.context=h,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,nb(t,e),a=e.memoizedProps,h=e.type===e.elementType?a:ys(e.type,a),o.props=h,d=e.pendingProps,p=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=rs(u):(u=lr(n)?Zl:Ni.current,u=Lu(e,u));var v=n.getDerivedStateFromProps;(f=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||p!==u)&&TE(e,o,i,u),_a=!1,p=e.memoizedState,o.state=p,Xg(e,i,o,r);var y=e.memoizedState;a!==d||p!==y||ar.current||_a?(typeof v=="function"&&(j_(e,n,v,i),y=e.memoizedState),(h=_a||EE(e,n,h,i,p,y,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,y,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,y,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=y),o.props=i,o.state=y,o.context=u,i=h):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),i=!1)}return Z_(t,e,n,i,s,r)}function Z_(t,e,n,i,r,s){bb(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&gE(e,n,!1),Go(t,e,s);i=e.stateNode,Ok.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=Nu(e,t.child,null,s),e.child=Nu(e,null,a,s)):Vi(t,e,a,s),e.memoizedState=i.state,r&&gE(e,n,!0),e.child}function Rb(t){var e=t.stateNode;e.pendingContext?mE(t,e.pendingContext,e.pendingContext!==e.context):e.context&&mE(t,e.context,!1),q2(t,e.containerInfo)}function IE(t,e,n,i,r){return Iu(),G2(r),e.flags|=256,Vi(t,e,n,i),e.child}var K_={dehydrated:null,treeContext:null,retryLane:0};function J_(t){return{baseLanes:t,cachePool:null,transitions:null}}function Pb(t,e,n){var i=e.pendingProps,r=Sn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),nn(Sn,r&1),t===null)return W_(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=R0(o,i,0,null),t=Hl(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=J_(n),e.memoizedState=K_,t):iS(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return Fk(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var u={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=u,e.deletions=null):(i=Na(r,u),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=Na(a,s):(s=Hl(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?J_(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=K_,i}return s=t.child,t=s.sibling,i=Na(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function iS(t,e){return e=R0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Kp(t,e,n,i){return i!==null&&G2(i),Nu(e,t.child,null,n),t=iS(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Fk(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=oy(Error(Ee(422))),Kp(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=R0({mode:"visible",children:i.children},r,0,null),s=Hl(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Nu(e,t.child,null,o),e.child.memoizedState=J_(o),e.memoizedState=K_,s);if(!(e.mode&1))return Kp(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(Ee(419)),i=oy(s,i,void 0),Kp(t,e,o,i)}if(a=(o&t.childLanes)!==0,sr||a){if(i=di,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Vo(t,r),Es(i,t,r,-1))}return cS(),i=oy(Error(Ee(421))),Kp(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=Kk.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,Cr=Ra(r.nextSibling),br=e,mn=!0,Ss=null,t!==null&&(Zr[Kr++]=Lo,Zr[Kr++]=Io,Zr[Kr++]=Kl,Lo=t.id,Io=t.overflow,Kl=e),e=iS(e,i.children),e.flags|=4096,e)}function NE(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),X_(t.return,e,n)}function ay(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function Lb(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Vi(t,e,i.children,n),i=Sn.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&NE(t,n,e);else if(t.tag===19)NE(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(nn(Sn,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&jg(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),ay(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&jg(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}ay(e,!0,n,null,s);break;case"together":ay(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ug(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Go(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ql|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ee(153));if(e.child!==null){for(t=e.child,n=Na(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Na(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function zk(t,e,n){switch(e.tag){case 3:Rb(e),Iu();break;case 5:ib(e);break;case 1:lr(e.type)&&Bg(e);break;case 4:q2(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;nn(Gg,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(nn(Sn,Sn.current&1),e.flags|=128,null):n&e.child.childLanes?Pb(t,e,n):(nn(Sn,Sn.current&1),t=Go(t,e,n),t!==null?t.sibling:null);nn(Sn,Sn.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return Lb(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),nn(Sn,Sn.current),i)break;return null;case 22:case 23:return e.lanes=0,Cb(t,e,n)}return Go(t,e,n)}var Ib,Q_,Nb,Db;Ib=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Q_=function(){};Nb=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,kl(Qs.current);var s=null;switch(n){case"input":r=S_(t,r),i=S_(t,i),s=[];break;case"select":r=En({},r,{value:void 0}),i=En({},i,{value:void 0}),s=[];break;case"textarea":r=E_(t,r),i=E_(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Fg)}A_(n,i);var o;n=null;for(h in r)if(!i.hasOwnProperty(h)&&r.hasOwnProperty(h)&&r[h]!=null)if(h==="style"){var a=r[h];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Pf.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in i){var u=i[h];if(a=r!=null?r[h]:void 0,i.hasOwnProperty(h)&&u!==a&&(u!=null||a!=null))if(h==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Pf.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&sn("scroll",t),s||a===u||(s=[])):(s=s||[]).push(h,u))}n&&(s=s||[]).push("style",n);var h=s;(e.updateQueue=h)&&(e.flags|=4)}};Db=function(t,e,n,i){n!==i&&(e.flags|=4)};function zh(t,e){if(!mn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Ei(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function Bk(t,e,n){var i=e.pendingProps;switch(V2(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ei(e),null;case 1:return lr(e.type)&&zg(),Ei(e),null;case 3:return i=e.stateNode,Du(),ln(ar),ln(Ni),K2(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(qp(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ss!==null&&(ax(Ss),Ss=null))),Q_(t,e),Ei(e),null;case 5:Z2(e);var r=kl(Vf.current);if(n=e.type,t!==null&&e.stateNode!=null)Nb(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Ee(166));return Ei(e),null}if(t=kl(Qs.current),qp(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[$s]=e,i[Bf]=s,t=(e.mode&1)!==0,n){case"dialog":sn("cancel",i),sn("close",i);break;case"iframe":case"object":case"embed":sn("load",i);break;case"video":case"audio":for(r=0;r<of.length;r++)sn(of[r],i);break;case"source":sn("error",i);break;case"img":case"image":case"link":sn("error",i),sn("load",i);break;case"details":sn("toggle",i);break;case"input":Vw(i,s),sn("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},sn("invalid",i);break;case"textarea":Ww(i,s),sn("invalid",i)}A_(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&$p(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&$p(i.textContent,a,t),r=["children",""+a]):Pf.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&sn("scroll",i)}switch(n){case"input":Bp(i),Gw(i,s,!0);break;case"textarea":Bp(i),Xw(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Fg)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=lC(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[$s]=e,t[Bf]=i,Ib(t,e,!1,!1),e.stateNode=t;e:{switch(o=C_(n,i),n){case"dialog":sn("cancel",t),sn("close",t),r=i;break;case"iframe":case"object":case"embed":sn("load",t),r=i;break;case"video":case"audio":for(r=0;r<of.length;r++)sn(of[r],t);r=i;break;case"source":sn("error",t),r=i;break;case"img":case"image":case"link":sn("error",t),sn("load",t),r=i;break;case"details":sn("toggle",t),r=i;break;case"input":Vw(t,i),r=S_(t,i),sn("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=En({},i,{value:void 0}),sn("invalid",t);break;case"textarea":Ww(t,i),r=E_(t,i),sn("invalid",t);break;default:r=i}A_(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?hC(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&cC(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Lf(t,u):typeof u=="number"&&Lf(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Pf.hasOwnProperty(s)?u!=null&&s==="onScroll"&&sn("scroll",t):u!=null&&C2(t,s,u,o))}switch(n){case"input":Bp(t),Gw(t,i,!1);break;case"textarea":Bp(t),Xw(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Fa(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?Mu(t,!!i.multiple,s,!1):i.defaultValue!=null&&Mu(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Fg)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ei(e),null;case 6:if(t&&e.stateNode!=null)Db(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Ee(166));if(n=kl(Vf.current),kl(Qs.current),qp(e)){if(i=e.stateNode,n=e.memoizedProps,i[$s]=e,(s=i.nodeValue!==n)&&(t=br,t!==null))switch(t.tag){case 3:$p(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&$p(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[$s]=e,e.stateNode=i}return Ei(e),null;case 13:if(ln(Sn),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(mn&&Cr!==null&&e.mode&1&&!(e.flags&128))JC(),Iu(),e.flags|=98560,s=!1;else if(s=qp(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(Ee(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ee(317));s[$s]=e}else Iu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ei(e),s=!1}else Ss!==null&&(ax(Ss),Ss=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Sn.current&1?ti===0&&(ti=3):cS())),e.updateQueue!==null&&(e.flags|=4),Ei(e),null);case 4:return Du(),Q_(t,e),t===null&&Ff(e.stateNode.containerInfo),Ei(e),null;case 10:return j2(e.type._context),Ei(e),null;case 17:return lr(e.type)&&zg(),Ei(e),null;case 19:if(ln(Sn),s=e.memoizedState,s===null)return Ei(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)zh(s,!1);else{if(ti!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=jg(t),o!==null){for(e.flags|=128,zh(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return nn(Sn,Sn.current&1|2),e.child}t=t.sibling}s.tail!==null&&On()>Uu&&(e.flags|=128,i=!0,zh(s,!1),e.lanes=4194304)}else{if(!i)if(t=jg(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),zh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!mn)return Ei(e),null}else 2*On()-s.renderingStartTime>Uu&&n!==1073741824&&(e.flags|=128,i=!0,zh(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=On(),e.sibling=null,n=Sn.current,nn(Sn,i?n&1|2:n&1),e):(Ei(e),null);case 22:case 23:return lS(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Er&1073741824&&(Ei(e),e.subtreeFlags&6&&(e.flags|=8192)):Ei(e),null;case 24:return null;case 25:return null}throw Error(Ee(156,e.tag))}function Hk(t,e){switch(V2(e),e.tag){case 1:return lr(e.type)&&zg(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Du(),ln(ar),ln(Ni),K2(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Z2(e),null;case 13:if(ln(Sn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ee(340));Iu()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ln(Sn),null;case 4:return Du(),null;case 10:return j2(e.type._context),null;case 22:case 23:return lS(),null;case 24:return null;default:return null}}var Jp=!1,Ri=!1,Vk=typeof WeakSet=="function"?WeakSet:Set,Ve=null;function du(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){bn(t,e,i)}else n.current=null}function ex(t,e,n){try{n()}catch(i){bn(t,e,i)}}var DE=!1;function Gk(t,e){if(O_=kg,t=zC(),B2(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,h=0,f=0,d=t,p=null;t:for(;;){for(var v;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(u=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(v=d.firstChild)!==null;)p=d,d=v;for(;;){if(d===t)break t;if(p===n&&++h===r&&(a=o),p===s&&++f===i&&(u=o),(v=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=v}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(F_={focusedElem:t,selectionRange:n},kg=!1,Ve=e;Ve!==null;)if(e=Ve,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ve=t;else for(;Ve!==null;){e=Ve;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var w=y.memoizedProps,S=y.memoizedState,g=e.stateNode,x=g.getSnapshotBeforeUpdate(e.elementType===e.type?w:ys(e.type,w),S);g.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var M=e.stateNode.containerInfo;M.nodeType===1?M.textContent="":M.nodeType===9&&M.documentElement&&M.removeChild(M.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ee(163))}}catch(T){bn(e,e.return,T)}if(t=e.sibling,t!==null){t.return=e.return,Ve=t;break}Ve=e.return}return y=DE,DE=!1,y}function vf(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&ex(e,n,s)}r=r.next}while(r!==i)}}function C0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function tx(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function kb(t){var e=t.alternate;e!==null&&(t.alternate=null,kb(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[$s],delete e[Bf],delete e[H_],delete e[Tk],delete e[Ak])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Ub(t){return t.tag===5||t.tag===3||t.tag===4}function kE(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ub(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function nx(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Fg));else if(i!==4&&(t=t.child,t!==null))for(nx(t,e,n),t=t.sibling;t!==null;)nx(t,e,n),t=t.sibling}function ix(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(ix(t,e,n),t=t.sibling;t!==null;)ix(t,e,n),t=t.sibling}var mi=null,xs=!1;function aa(t,e,n){for(n=n.child;n!==null;)Ob(t,e,n),n=n.sibling}function Ob(t,e,n){if(Js&&typeof Js.onCommitFiberUnmount=="function")try{Js.onCommitFiberUnmount(_0,n)}catch{}switch(n.tag){case 5:Ri||du(n,e);case 6:var i=mi,r=xs;mi=null,aa(t,e,n),mi=i,xs=r,mi!==null&&(xs?(t=mi,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):mi.removeChild(n.stateNode));break;case 18:mi!==null&&(xs?(t=mi,n=n.stateNode,t.nodeType===8?ey(t.parentNode,n):t.nodeType===1&&ey(t,n),kf(t)):ey(mi,n.stateNode));break;case 4:i=mi,r=xs,mi=n.stateNode.containerInfo,xs=!0,aa(t,e,n),mi=i,xs=r;break;case 0:case 11:case 14:case 15:if(!Ri&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&ex(n,e,o),r=r.next}while(r!==i)}aa(t,e,n);break;case 1:if(!Ri&&(du(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){bn(n,e,a)}aa(t,e,n);break;case 21:aa(t,e,n);break;case 22:n.mode&1?(Ri=(i=Ri)||n.memoizedState!==null,aa(t,e,n),Ri=i):aa(t,e,n);break;default:aa(t,e,n)}}function UE(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Vk),e.forEach(function(i){var r=Jk.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function ps(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:mi=a.stateNode,xs=!1;break e;case 3:mi=a.stateNode.containerInfo,xs=!0;break e;case 4:mi=a.stateNode.containerInfo,xs=!0;break e}a=a.return}if(mi===null)throw Error(Ee(160));Ob(s,o,r),mi=null,xs=!1;var u=r.alternate;u!==null&&(u.return=null),r.return=null}catch(h){bn(r,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Fb(e,t),e=e.sibling}function Fb(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ps(e,t),Vs(t),i&4){try{vf(3,t,t.return),C0(3,t)}catch(w){bn(t,t.return,w)}try{vf(5,t,t.return)}catch(w){bn(t,t.return,w)}}break;case 1:ps(e,t),Vs(t),i&512&&n!==null&&du(n,n.return);break;case 5:if(ps(e,t),Vs(t),i&512&&n!==null&&du(n,n.return),t.flags&32){var r=t.stateNode;try{Lf(r,"")}catch(w){bn(t,t.return,w)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&oC(r,s),C_(a,o);var h=C_(a,s);for(o=0;o<u.length;o+=2){var f=u[o],d=u[o+1];f==="style"?hC(r,d):f==="dangerouslySetInnerHTML"?cC(r,d):f==="children"?Lf(r,d):C2(r,f,d,h)}switch(a){case"input":M_(r,s);break;case"textarea":aC(r,s);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var v=s.value;v!=null?Mu(r,!!s.multiple,v,!1):p!==!!s.multiple&&(s.defaultValue!=null?Mu(r,!!s.multiple,s.defaultValue,!0):Mu(r,!!s.multiple,s.multiple?[]:"",!1))}r[Bf]=s}catch(w){bn(t,t.return,w)}}break;case 6:if(ps(e,t),Vs(t),i&4){if(t.stateNode===null)throw Error(Ee(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(w){bn(t,t.return,w)}}break;case 3:if(ps(e,t),Vs(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{kf(e.containerInfo)}catch(w){bn(t,t.return,w)}break;case 4:ps(e,t),Vs(t);break;case 13:ps(e,t),Vs(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(oS=On())),i&4&&UE(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Ri=(h=Ri)||f,ps(e,t),Ri=h):ps(e,t),Vs(t),i&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!f&&t.mode&1)for(Ve=t,f=t.child;f!==null;){for(d=Ve=f;Ve!==null;){switch(p=Ve,v=p.child,p.tag){case 0:case 11:case 14:case 15:vf(4,p,p.return);break;case 1:du(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){i=p,n=p.return;try{e=i,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(w){bn(i,n,w)}}break;case 5:du(p,p.return);break;case 22:if(p.memoizedState!==null){FE(d);continue}}v!==null?(v.return=p,Ve=v):FE(d)}f=f.sibling}e:for(f=null,d=t;;){if(d.tag===5){if(f===null){f=d;try{r=d.stateNode,h?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,u=d.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=uC("display",o))}catch(w){bn(t,t.return,w)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=h?"":d.memoizedProps}catch(w){bn(t,t.return,w)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ps(e,t),Vs(t),i&4&&UE(t);break;case 21:break;default:ps(e,t),Vs(t)}}function Vs(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Ub(n)){var i=n;break e}n=n.return}throw Error(Ee(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Lf(r,""),i.flags&=-33);var s=kE(t);ix(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=kE(t);nx(t,a,o);break;default:throw Error(Ee(161))}}catch(u){bn(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Wk(t,e,n){Ve=t,zb(t)}function zb(t,e,n){for(var i=(t.mode&1)!==0;Ve!==null;){var r=Ve,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Jp;if(!o){var a=r.alternate,u=a!==null&&a.memoizedState!==null||Ri;a=Jp;var h=Ri;if(Jp=o,(Ri=u)&&!h)for(Ve=r;Ve!==null;)o=Ve,u=o.child,o.tag===22&&o.memoizedState!==null?zE(r):u!==null?(u.return=o,Ve=u):zE(r);for(;s!==null;)Ve=s,zb(s),s=s.sibling;Ve=r,Jp=a,Ri=h}OE(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,Ve=s):OE(t)}}function OE(t){for(;Ve!==null;){var e=Ve;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ri||C0(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Ri)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:ys(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&SE(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}SE(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var f=h.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&kf(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ee(163))}Ri||e.flags&512&&tx(e)}catch(p){bn(e,e.return,p)}}if(e===t){Ve=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ve=n;break}Ve=e.return}}function FE(t){for(;Ve!==null;){var e=Ve;if(e===t){Ve=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ve=n;break}Ve=e.return}}function zE(t){for(;Ve!==null;){var e=Ve;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{C0(4,e)}catch(u){bn(e,n,u)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(u){bn(e,r,u)}}var s=e.return;try{tx(e)}catch(u){bn(e,s,u)}break;case 5:var o=e.return;try{tx(e)}catch(u){bn(e,o,u)}}}catch(u){bn(e,e.return,u)}if(e===t){Ve=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ve=a;break}Ve=e.return}}var Xk=Math.ceil,qg=$o.ReactCurrentDispatcher,rS=$o.ReactCurrentOwner,is=$o.ReactCurrentBatchConfig,Ut=0,di=null,$n=null,gi=0,Er=0,pu=$a(0),ti=0,jf=null,Ql=0,b0=0,sS=0,yf=null,rr=null,oS=0,Uu=1/0,To=null,Zg=!1,rx=null,La=null,Qp=!1,Ta=null,Kg=0,_f=0,sx=null,hg=-1,fg=0;function Wi(){return Ut&6?On():hg!==-1?hg:hg=On()}function Ia(t){return t.mode&1?Ut&2&&gi!==0?gi&-gi:bk.transition!==null?(fg===0&&(fg=wC()),fg):(t=qt,t!==0||(t=window.event,t=t===void 0?16:PC(t.type)),t):1}function Es(t,e,n,i){if(50<_f)throw _f=0,sx=null,Error(Ee(185));_d(t,n,i),(!(Ut&2)||t!==di)&&(t===di&&(!(Ut&2)&&(b0|=n),ti===4&&Sa(t,gi)),cr(t,i),n===1&&Ut===0&&!(e.mode&1)&&(Uu=On()+500,E0&&qa()))}function cr(t,e){var n=t.callbackNode;bD(t,e);var i=Dg(t,t===di?gi:0);if(i===0)n!==null&&$w(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&$w(n),e===1)t.tag===0?Ck(BE.bind(null,t)):qC(BE.bind(null,t)),wk(function(){!(Ut&6)&&qa()}),n=null;else{switch(EC(i)){case 1:n=I2;break;case 4:n=SC;break;case 16:n=Ng;break;case 536870912:n=MC;break;default:n=Ng}n=Yb(n,Bb.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Bb(t,e){if(hg=-1,fg=0,Ut&6)throw Error(Ee(327));var n=t.callbackNode;if(Cu()&&t.callbackNode!==n)return null;var i=Dg(t,t===di?gi:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Jg(t,i);else{e=i;var r=Ut;Ut|=2;var s=Vb();(di!==t||gi!==e)&&(To=null,Uu=On()+500,Bl(t,e));do try{$k();break}catch(a){Hb(t,a)}while(1);X2(),qg.current=s,Ut=r,$n!==null?e=0:(di=null,gi=0,e=ti)}if(e!==0){if(e===2&&(r=I_(t),r!==0&&(i=r,e=ox(t,r))),e===1)throw n=jf,Bl(t,0),Sa(t,i),cr(t,On()),n;if(e===6)Sa(t,i);else{if(r=t.current.alternate,!(i&30)&&!jk(r)&&(e=Jg(t,i),e===2&&(s=I_(t),s!==0&&(i=s,e=ox(t,s))),e===1))throw n=jf,Bl(t,0),Sa(t,i),cr(t,On()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(Ee(345));case 2:Al(t,rr,To);break;case 3:if(Sa(t,i),(i&130023424)===i&&(e=oS+500-On(),10<e)){if(Dg(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Wi(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=B_(Al.bind(null,t,rr,To),e);break}Al(t,rr,To);break;case 4:if(Sa(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-ws(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=On()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Xk(i/1960))-i,10<i){t.timeoutHandle=B_(Al.bind(null,t,rr,To),i);break}Al(t,rr,To);break;case 5:Al(t,rr,To);break;default:throw Error(Ee(329))}}}return cr(t,On()),t.callbackNode===n?Bb.bind(null,t):null}function ox(t,e){var n=yf;return t.current.memoizedState.isDehydrated&&(Bl(t,e).flags|=256),t=Jg(t,e),t!==2&&(e=rr,rr=n,e!==null&&ax(e)),t}function ax(t){rr===null?rr=t:rr.push.apply(rr,t)}function jk(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Ts(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Sa(t,e){for(e&=~sS,e&=~b0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ws(e),i=1<<n;t[n]=-1,e&=~i}}function BE(t){if(Ut&6)throw Error(Ee(327));Cu();var e=Dg(t,0);if(!(e&1))return cr(t,On()),null;var n=Jg(t,e);if(t.tag!==0&&n===2){var i=I_(t);i!==0&&(e=i,n=ox(t,i))}if(n===1)throw n=jf,Bl(t,0),Sa(t,e),cr(t,On()),n;if(n===6)throw Error(Ee(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Al(t,rr,To),cr(t,On()),null}function aS(t,e){var n=Ut;Ut|=1;try{return t(e)}finally{Ut=n,Ut===0&&(Uu=On()+500,E0&&qa())}}function ec(t){Ta!==null&&Ta.tag===0&&!(Ut&6)&&Cu();var e=Ut;Ut|=1;var n=is.transition,i=qt;try{if(is.transition=null,qt=1,t)return t()}finally{qt=i,is.transition=n,Ut=e,!(Ut&6)&&qa()}}function lS(){Er=pu.current,ln(pu)}function Bl(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Mk(n)),$n!==null)for(n=$n.return;n!==null;){var i=n;switch(V2(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&zg();break;case 3:Du(),ln(ar),ln(Ni),K2();break;case 5:Z2(i);break;case 4:Du();break;case 13:ln(Sn);break;case 19:ln(Sn);break;case 10:j2(i.type._context);break;case 22:case 23:lS()}n=n.return}if(di=t,$n=t=Na(t.current,null),gi=Er=e,ti=0,jf=null,sS=b0=Ql=0,rr=yf=null,Dl!==null){for(e=0;e<Dl.length;e++)if(n=Dl[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}Dl=null}return t}function Hb(t,e){do{var n=$n;try{if(X2(),lg.current=$g,Yg){for(var i=wn.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Yg=!1}if(Jl=0,hi=ei=wn=null,gf=!1,Gf=0,rS.current=null,n===null||n.return===null){ti=1,jf=e,$n=null;break}e:{var s=t,o=n.return,a=n,u=e;if(e=gi,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,f=a,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var v=CE(o);if(v!==null){v.flags&=-257,bE(v,o,a,s,e),v.mode&1&&AE(s,h,e),e=v,u=h;var y=e.updateQueue;if(y===null){var w=new Set;w.add(u),e.updateQueue=w}else y.add(u);break e}else{if(!(e&1)){AE(s,h,e),cS();break e}u=Error(Ee(426))}}else if(mn&&a.mode&1){var S=CE(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),bE(S,o,a,s,e),G2(ku(u,a));break e}}s=u=ku(u,a),ti!==4&&(ti=2),yf===null?yf=[s]:yf.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=Eb(s,u,e);xE(s,g);break e;case 1:a=u;var x=s.type,M=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||M!==null&&typeof M.componentDidCatch=="function"&&(La===null||!La.has(M)))){s.flags|=65536,e&=-e,s.lanes|=e;var T=Tb(s,a,e);xE(s,T);break e}}s=s.return}while(s!==null)}Wb(n)}catch(P){e=P,$n===n&&n!==null&&($n=n=n.return);continue}break}while(1)}function Vb(){var t=qg.current;return qg.current=$g,t===null?$g:t}function cS(){(ti===0||ti===3||ti===2)&&(ti=4),di===null||!(Ql&268435455)&&!(b0&268435455)||Sa(di,gi)}function Jg(t,e){var n=Ut;Ut|=2;var i=Vb();(di!==t||gi!==e)&&(To=null,Bl(t,e));do try{Yk();break}catch(r){Hb(t,r)}while(1);if(X2(),Ut=n,qg.current=i,$n!==null)throw Error(Ee(261));return di=null,gi=0,ti}function Yk(){for(;$n!==null;)Gb($n)}function $k(){for(;$n!==null&&!_D();)Gb($n)}function Gb(t){var e=jb(t.alternate,t,Er);t.memoizedProps=t.pendingProps,e===null?Wb(t):$n=e,rS.current=null}function Wb(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Hk(n,e),n!==null){n.flags&=32767,$n=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ti=6,$n=null;return}}else if(n=Bk(n,e,Er),n!==null){$n=n;return}if(e=e.sibling,e!==null){$n=e;return}$n=e=t}while(e!==null);ti===0&&(ti=5)}function Al(t,e,n){var i=qt,r=is.transition;try{is.transition=null,qt=1,qk(t,e,n,i)}finally{is.transition=r,qt=i}return null}function qk(t,e,n,i){do Cu();while(Ta!==null);if(Ut&6)throw Error(Ee(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ee(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(RD(t,s),t===di&&($n=di=null,gi=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Qp||(Qp=!0,Yb(Ng,function(){return Cu(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=is.transition,is.transition=null;var o=qt;qt=1;var a=Ut;Ut|=4,rS.current=null,Gk(t,n),Fb(n,t),mk(F_),kg=!!O_,F_=O_=null,t.current=n,Wk(n),xD(),Ut=a,qt=o,is.transition=s}else t.current=n;if(Qp&&(Qp=!1,Ta=t,Kg=r),s=t.pendingLanes,s===0&&(La=null),wD(n.stateNode),cr(t,On()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Zg)throw Zg=!1,t=rx,rx=null,t;return Kg&1&&t.tag!==0&&Cu(),s=t.pendingLanes,s&1?t===sx?_f++:(_f=0,sx=t):_f=0,qa(),null}function Cu(){if(Ta!==null){var t=EC(Kg),e=is.transition,n=qt;try{if(is.transition=null,qt=16>t?16:t,Ta===null)var i=!1;else{if(t=Ta,Ta=null,Kg=0,Ut&6)throw Error(Ee(331));var r=Ut;for(Ut|=4,Ve=t.current;Ve!==null;){var s=Ve,o=s.child;if(Ve.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var h=a[u];for(Ve=h;Ve!==null;){var f=Ve;switch(f.tag){case 0:case 11:case 15:vf(8,f,s)}var d=f.child;if(d!==null)d.return=f,Ve=d;else for(;Ve!==null;){f=Ve;var p=f.sibling,v=f.return;if(kb(f),f===h){Ve=null;break}if(p!==null){p.return=v,Ve=p;break}Ve=v}}}var y=s.alternate;if(y!==null){var w=y.child;if(w!==null){y.child=null;do{var S=w.sibling;w.sibling=null,w=S}while(w!==null)}}Ve=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Ve=o;else e:for(;Ve!==null;){if(s=Ve,s.flags&2048)switch(s.tag){case 0:case 11:case 15:vf(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,Ve=g;break e}Ve=s.return}}var x=t.current;for(Ve=x;Ve!==null;){o=Ve;var M=o.child;if(o.subtreeFlags&2064&&M!==null)M.return=o,Ve=M;else e:for(o=x;Ve!==null;){if(a=Ve,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:C0(9,a)}}catch(P){bn(a,a.return,P)}if(a===o){Ve=null;break e}var T=a.sibling;if(T!==null){T.return=a.return,Ve=T;break e}Ve=a.return}}if(Ut=r,qa(),Js&&typeof Js.onPostCommitFiberRoot=="function")try{Js.onPostCommitFiberRoot(_0,t)}catch{}i=!0}return i}finally{qt=n,is.transition=e}}return!1}function HE(t,e,n){e=ku(n,e),e=Eb(t,e,1),t=Pa(t,e,1),e=Wi(),t!==null&&(_d(t,1,e),cr(t,e))}function bn(t,e,n){if(t.tag===3)HE(t,t,n);else for(;e!==null;){if(e.tag===3){HE(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(La===null||!La.has(i))){t=ku(n,t),t=Tb(e,t,1),e=Pa(e,t,1),t=Wi(),e!==null&&(_d(e,1,t),cr(e,t));break}}e=e.return}}function Zk(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Wi(),t.pingedLanes|=t.suspendedLanes&n,di===t&&(gi&n)===n&&(ti===4||ti===3&&(gi&130023424)===gi&&500>On()-oS?Bl(t,0):sS|=n),cr(t,e)}function Xb(t,e){e===0&&(t.mode&1?(e=Gp,Gp<<=1,!(Gp&130023424)&&(Gp=4194304)):e=1);var n=Wi();t=Vo(t,e),t!==null&&(_d(t,e,n),cr(t,n))}function Kk(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Xb(t,n)}function Jk(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(Ee(314))}i!==null&&i.delete(e),Xb(t,n)}var jb;jb=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ar.current)sr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return sr=!1,zk(t,e,n);sr=!!(t.flags&131072)}else sr=!1,mn&&e.flags&1048576&&ZC(e,Vg,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;ug(t,e),t=e.pendingProps;var r=Lu(e,Ni.current);Au(e,n),r=Q2(null,e,i,t,r,n);var s=eS();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,lr(i)?(s=!0,Bg(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,$2(e),r.updater=A0,e.stateNode=r,r._reactInternals=e,Y_(e,i,t,n),e=Z_(null,e,i,!0,s,n)):(e.tag=0,mn&&s&&H2(e),Vi(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(ug(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=eU(i),t=ys(i,t),r){case 0:e=q_(null,e,i,t,n);break e;case 1:e=LE(null,e,i,t,n);break e;case 11:e=RE(null,e,i,t,n);break e;case 14:e=PE(null,e,i,ys(i.type,t),n);break e}throw Error(Ee(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ys(i,r),q_(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ys(i,r),LE(t,e,i,r,n);case 3:e:{if(Rb(e),t===null)throw Error(Ee(387));i=e.pendingProps,s=e.memoizedState,r=s.element,nb(t,e),Xg(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=ku(Error(Ee(423)),e),e=IE(t,e,i,n,r);break e}else if(i!==r){r=ku(Error(Ee(424)),e),e=IE(t,e,i,n,r);break e}else for(Cr=Ra(e.stateNode.containerInfo.firstChild),br=e,mn=!0,Ss=null,n=eb(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Iu(),i===r){e=Go(t,e,n);break e}Vi(t,e,i,n)}e=e.child}return e;case 5:return ib(e),t===null&&W_(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,z_(i,r)?o=null:s!==null&&z_(i,s)&&(e.flags|=32),bb(t,e),Vi(t,e,o,n),e.child;case 6:return t===null&&W_(e),null;case 13:return Pb(t,e,n);case 4:return q2(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Nu(e,null,i,n):Vi(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ys(i,r),RE(t,e,i,r,n);case 7:return Vi(t,e,e.pendingProps,n),e.child;case 8:return Vi(t,e,e.pendingProps.children,n),e.child;case 12:return Vi(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,nn(Gg,i._currentValue),i._currentValue=o,s!==null)if(Ts(s.value,o)){if(s.children===r.children&&!ar.current){e=Go(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===i){if(s.tag===1){u=ko(-1,n&-n),u.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var f=h.pending;f===null?u.next=u:(u.next=f.next,f.next=u),h.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),X_(s.return,n,e),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Ee(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),X_(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Vi(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Au(e,n),r=rs(r),i=i(r),e.flags|=1,Vi(t,e,i,n),e.child;case 14:return i=e.type,r=ys(i,e.pendingProps),r=ys(i.type,r),PE(t,e,i,r,n);case 15:return Ab(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ys(i,r),ug(t,e),e.tag=1,lr(i)?(t=!0,Bg(e)):t=!1,Au(e,n),wb(e,i,r),Y_(e,i,r,n),Z_(null,e,i,!0,t,n);case 19:return Lb(t,e,n);case 22:return Cb(t,e,n)}throw Error(Ee(156,e.tag))};function Yb(t,e){return xC(t,e)}function Qk(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qr(t,e,n,i){return new Qk(t,e,n,i)}function uS(t){return t=t.prototype,!(!t||!t.isReactComponent)}function eU(t){if(typeof t=="function")return uS(t)?1:0;if(t!=null){if(t=t.$$typeof,t===R2)return 11;if(t===P2)return 14}return 2}function Na(t,e){var n=t.alternate;return n===null?(n=Qr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function dg(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")uS(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ru:return Hl(n.children,r,s,e);case b2:o=8,r|=8;break;case v_:return t=Qr(12,n,e,r|2),t.elementType=v_,t.lanes=s,t;case y_:return t=Qr(13,n,e,r),t.elementType=y_,t.lanes=s,t;case __:return t=Qr(19,n,e,r),t.elementType=__,t.lanes=s,t;case iC:return R0(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case tC:o=10;break e;case nC:o=9;break e;case R2:o=11;break e;case P2:o=14;break e;case ya:o=16,i=null;break e}throw Error(Ee(130,t==null?t:typeof t,""))}return e=Qr(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function Hl(t,e,n,i){return t=Qr(7,t,i,e),t.lanes=n,t}function R0(t,e,n,i){return t=Qr(22,t,i,e),t.elementType=iC,t.lanes=n,t.stateNode={isHidden:!1},t}function ly(t,e,n){return t=Qr(6,t,null,e),t.lanes=n,t}function cy(t,e,n){return e=Qr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function tU(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Gv(0),this.expirationTimes=Gv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gv(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function hS(t,e,n,i,r,s,o,a,u){return t=new tU(t,e,n,a,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Qr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},$2(s),t}function nU(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:iu,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function $b(t){if(!t)return za;t=t._reactInternals;e:{if(ac(t)!==t||t.tag!==1)throw Error(Ee(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(lr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ee(171))}if(t.tag===1){var n=t.type;if(lr(n))return $C(t,n,e)}return e}function qb(t,e,n,i,r,s,o,a,u){return t=hS(n,i,!0,t,r,s,o,a,u),t.context=$b(null),n=t.current,i=Wi(),r=Ia(n),s=ko(i,r),s.callback=e??null,Pa(n,s,r),t.current.lanes=r,_d(t,r,i),cr(t,i),t}function P0(t,e,n,i){var r=e.current,s=Wi(),o=Ia(r);return n=$b(n),e.context===null?e.context=n:e.pendingContext=n,e=ko(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Pa(r,e,o),t!==null&&(Es(t,r,o,s),ag(t,r,o)),o}function Qg(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function VE(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function fS(t,e){VE(t,e),(t=t.alternate)&&VE(t,e)}function iU(){return null}var Zb=typeof reportError=="function"?reportError:function(t){console.error(t)};function dS(t){this._internalRoot=t}L0.prototype.render=dS.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ee(409));P0(t,e,null,null)};L0.prototype.unmount=dS.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ec(function(){P0(null,t,null,null)}),e[Ho]=null}};function L0(t){this._internalRoot=t}L0.prototype.unstable_scheduleHydration=function(t){if(t){var e=CC();t={blockedOn:null,target:t,priority:e};for(var n=0;n<xa.length&&e!==0&&e<xa[n].priority;n++);xa.splice(n,0,t),n===0&&RC(t)}};function pS(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function I0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function GE(){}function rU(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var h=Qg(o);s.call(h)}}var o=qb(e,i,t,0,null,!1,!1,"",GE);return t._reactRootContainer=o,t[Ho]=o.current,Ff(t.nodeType===8?t.parentNode:t),ec(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var h=Qg(u);a.call(h)}}var u=hS(t,0,!1,null,null,!1,!1,"",GE);return t._reactRootContainer=u,t[Ho]=u.current,Ff(t.nodeType===8?t.parentNode:t),ec(function(){P0(e,u,n,i)}),u}function N0(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var u=Qg(o);a.call(u)}}P0(e,o,t,r)}else o=rU(n,e,t,r,i);return Qg(o)}TC=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=sf(e.pendingLanes);n!==0&&(N2(e,n|1),cr(e,On()),!(Ut&6)&&(Uu=On()+500,qa()))}break;case 13:ec(function(){var i=Vo(t,1);if(i!==null){var r=Wi();Es(i,t,1,r)}}),fS(t,1)}};D2=function(t){if(t.tag===13){var e=Vo(t,134217728);if(e!==null){var n=Wi();Es(e,t,134217728,n)}fS(t,134217728)}};AC=function(t){if(t.tag===13){var e=Ia(t),n=Vo(t,e);if(n!==null){var i=Wi();Es(n,t,e,i)}fS(t,e)}};CC=function(){return qt};bC=function(t,e){var n=qt;try{return qt=t,e()}finally{qt=n}};R_=function(t,e,n){switch(e){case"input":if(M_(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=w0(i);if(!r)throw Error(Ee(90));sC(i),M_(i,r)}}}break;case"textarea":aC(t,n);break;case"select":e=n.value,e!=null&&Mu(t,!!n.multiple,e,!1)}};pC=aS;mC=ec;var sU={usingClientEntryPoint:!1,Events:[Sd,lu,w0,fC,dC,aS]},Bh={findFiberByHostInstance:Nl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},oU={bundleType:Bh.bundleType,version:Bh.version,rendererPackageName:Bh.rendererPackageName,rendererConfig:Bh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$o.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=yC(t),t===null?null:t.stateNode},findFiberByHostInstance:Bh.findFiberByHostInstance||iU,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var em=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!em.isDisabled&&em.supportsFiber)try{_0=em.inject(oU),Js=em}catch{}}Dr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sU;Dr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pS(e))throw Error(Ee(200));return nU(t,e,null,n)};Dr.createRoot=function(t,e){if(!pS(t))throw Error(Ee(299));var n=!1,i="",r=Zb;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=hS(t,1,!1,null,null,n,!1,i,r),t[Ho]=e.current,Ff(t.nodeType===8?t.parentNode:t),new dS(e)};Dr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ee(188)):(t=Object.keys(t).join(","),Error(Ee(268,t)));return t=yC(e),t=t===null?null:t.stateNode,t};Dr.flushSync=function(t){return ec(t)};Dr.hydrate=function(t,e,n){if(!I0(e))throw Error(Ee(200));return N0(null,t,e,!0,n)};Dr.hydrateRoot=function(t,e,n){if(!pS(t))throw Error(Ee(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=Zb;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=qb(e,null,t,1,n??null,r,!1,s,o),t[Ho]=e.current,Ff(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new L0(e)};Dr.render=function(t,e,n){if(!I0(e))throw Error(Ee(200));return N0(null,t,e,!1,n)};Dr.unmountComponentAtNode=function(t){if(!I0(t))throw Error(Ee(40));return t._reactRootContainer?(ec(function(){N0(null,null,t,!1,function(){t._reactRootContainer=null,t[Ho]=null})}),!0):!1};Dr.unstable_batchedUpdates=aS;Dr.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!I0(n))throw Error(Ee(200));if(t==null||t._reactInternals===void 0)throw Error(Ee(38));return N0(t,e,n,!1,i)};Dr.version="18.3.1-next-f1338f8080-20240426";function Kb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Kb)}catch(t){console.error(t)}}Kb(),K4.exports=Dr;var aU=K4.exports,WE=aU;m_.createRoot=WE.createRoot,m_.hydrateRoot=WE.hydrateRoot;/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const D0="164",Cl={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},bl={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Jb=0,lx=1,Qb=2,lU=3,eR=0,k0=1,xf=2,_s=3,Wo=0,Xi=1,qs=2,Uo=0,Da=1,e0=2,cx=3,ux=4,tR=5,Ma=100,nR=101,iR=102,rR=103,sR=104,oR=200,aR=201,lR=202,cR=203,t0=204,n0=205,uR=206,hR=207,fR=208,dR=209,pR=210,mR=211,gR=212,vR=213,yR=214,_R=0,xR=1,SR=2,Yf=3,MR=4,wR=5,ER=6,TR=7,wd=0,AR=1,CR=2,eo=0,bR=1,RR=2,PR=3,mS=4,LR=5,IR=6,NR=7,hx="attached",DR="detached",U0=300,Xo=301,Ba=302,$f=303,qf=304,eh=306,Zf=1e3,es=1001,Kf=1002,fi=1003,gS=1004,cU=1004,mu=1005,uU=1005,qn=1006,Sf=1007,hU=1007,Zs=1008,fU=1008,no=1009,kR=1010,UR=1011,vS=1012,yS=1013,tc=1014,ts=1015,Ed=1016,_S=1017,xS=1018,th=1020,OR=35902,FR=1021,zR=1022,or=1023,BR=1024,HR=1025,Vl=1026,Ou=1027,SS=1028,MS=1029,VR=1030,wS=1031,ES=1033,pg=33776,mg=33777,gg=33778,vg=33779,fx=35840,dx=35841,px=35842,mx=35843,gx=36196,vx=37492,yx=37496,_x=37808,xx=37809,Sx=37810,Mx=37811,wx=37812,Ex=37813,Tx=37814,Ax=37815,Cx=37816,bx=37817,Rx=37818,Px=37819,Lx=37820,Ix=37821,yg=36492,Nx=36494,Dx=36495,GR=36283,kx=36284,Ux=36285,Ox=36286,WR=2200,XR=2201,jR=2202,Jf=2300,Qf=2301,_g=2302,Ul=2400,Ol=2401,ed=2402,O0=2500,TS=2501,dU=0,pU=1,mU=2,YR=3200,$R=3201,Za=0,qR=1,bo="",Tr="srgb",qo="srgb-linear",F0="display-p3",Td="display-p3-linear",td="linear",en="srgb",nd="rec709",id="p3",gU=0,Rl=7680,vU=7681,yU=7682,_U=7683,xU=34055,SU=34056,MU=5386,wU=512,EU=513,TU=514,AU=515,CU=516,bU=517,RU=518,Fx=519,ZR=512,KR=513,JR=514,AS=515,QR=516,eP=517,tP=518,nP=519,rd=35044,PU=35048,LU=35040,IU=35045,NU=35049,DU=35041,kU=35046,UU=35050,OU=35042,FU="100",zx="300 es",Ks=2e3,sd=2001;let Zo=class{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(n)===-1&&i[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(n);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}};const Ti=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let XE=1234567;const Gl=Math.PI/180,Fu=180/Math.PI;function Rr(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Ti[t&255]+Ti[t>>8&255]+Ti[t>>16&255]+Ti[t>>24&255]+"-"+Ti[e&255]+Ti[e>>8&255]+"-"+Ti[e>>16&15|64]+Ti[e>>24&255]+"-"+Ti[n&63|128]+Ti[n>>8&255]+"-"+Ti[n>>16&255]+Ti[n>>24&255]+Ti[i&255]+Ti[i>>8&255]+Ti[i>>16&255]+Ti[i>>24&255]).toLowerCase()}function Rn(t,e,n){return Math.max(e,Math.min(n,t))}function CS(t,e){return(t%e+e)%e}function zU(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)}function BU(t,e,n){return t!==e?(n-t)/(e-t):0}function Mf(t,e,n){return(1-n)*t+n*e}function HU(t,e,n,i){return Mf(t,e,1-Math.exp(-n*i))}function VU(t,e=1){return e-Math.abs(CS(t,e*2)-e)}function GU(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function WU(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function XU(t,e){return t+Math.floor(Math.random()*(e-t+1))}function jU(t,e){return t+Math.random()*(e-t)}function YU(t){return t*(.5-Math.random())}function $U(t){t!==void 0&&(XE=t);let e=XE+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function qU(t){return t*Gl}function ZU(t){return t*Fu}function KU(t){return(t&t-1)===0&&t!==0}function JU(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function QU(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function eO(t,e,n,i,r){const s=Math.cos,o=Math.sin,a=s(n/2),u=o(n/2),h=s((e+i)/2),f=o((e+i)/2),d=s((e-i)/2),p=o((e-i)/2),v=s((i-e)/2),y=o((i-e)/2);switch(r){case"XYX":t.set(a*f,u*d,u*p,a*h);break;case"YZY":t.set(u*p,a*f,u*d,a*h);break;case"ZXZ":t.set(u*d,u*p,a*f,a*h);break;case"XZX":t.set(a*f,u*y,u*v,a*h);break;case"YXY":t.set(u*v,a*f,u*y,a*h);break;case"ZYZ":t.set(u*y,u*v,a*f,a*h);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Gi(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function St(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const No={DEG2RAD:Gl,RAD2DEG:Fu,generateUUID:Rr,clamp:Rn,euclideanModulo:CS,mapLinear:zU,inverseLerp:BU,lerp:Mf,damp:HU,pingpong:VU,smoothstep:GU,smootherstep:WU,randInt:XU,randFloat:jU,randFloatSpread:YU,seededRandom:$U,degToRad:qU,radToDeg:ZU,isPowerOfTwo:KU,ceilPowerOfTwo:JU,floorPowerOfTwo:QU,setQuaternionFromProperEuler:eO,normalize:St,denormalize:Gi};class he{constructor(e=0,n=0){he.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,i=this.y,r=e.elements;return this.x=r[0]*n+r[3]*i+r[6],this.y=r[1]*n+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(e)/n;return Math.acos(Rn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y;return n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const i=Math.cos(n),r=Math.sin(n),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class xt{constructor(e,n,i,r,s,o,a,u,h){xt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,i,r,s,o,a,u,h)}set(e,n,i,r,s,o,a,u,h){const f=this.elements;return f[0]=e,f[1]=r,f[2]=a,f[3]=n,f[4]=s,f[5]=u,f[6]=i,f[7]=o,f[8]=h,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],this}extractBasis(e,n,i){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,r=n.elements,s=this.elements,o=i[0],a=i[3],u=i[6],h=i[1],f=i[4],d=i[7],p=i[2],v=i[5],y=i[8],w=r[0],S=r[3],g=r[6],x=r[1],M=r[4],T=r[7],P=r[2],b=r[5],L=r[8];return s[0]=o*w+a*x+u*P,s[3]=o*S+a*M+u*b,s[6]=o*g+a*T+u*L,s[1]=h*w+f*x+d*P,s[4]=h*S+f*M+d*b,s[7]=h*g+f*T+d*L,s[2]=p*w+v*x+y*P,s[5]=p*S+v*M+y*b,s[8]=p*g+v*T+y*L,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],u=e[6],h=e[7],f=e[8];return n*o*f-n*a*h-i*s*f+i*a*u+r*s*h-r*o*u}invert(){const e=this.elements,n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],u=e[6],h=e[7],f=e[8],d=f*o-a*h,p=a*u-f*s,v=h*s-o*u,y=n*d+i*p+r*v;if(y===0)return this.set(0,0,0,0,0,0,0,0,0);const w=1/y;return e[0]=d*w,e[1]=(r*h-f*i)*w,e[2]=(a*i-r*o)*w,e[3]=p*w,e[4]=(f*n-r*u)*w,e[5]=(r*s-a*n)*w,e[6]=v*w,e[7]=(i*u-h*n)*w,e[8]=(o*n-i*s)*w,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,i,r,s,o,a){const u=Math.cos(s),h=Math.sin(s);return this.set(i*u,i*h,-i*(u*o+h*a)+o+e,-r*h,r*u,-r*(-h*o+u*a)+a+n,0,0,1),this}scale(e,n){return this.premultiply(uy.makeScale(e,n)),this}rotate(e){return this.premultiply(uy.makeRotation(-e)),this}translate(e,n){return this.premultiply(uy.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,i,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,i=e.elements;for(let r=0;r<9;r++)if(n[r]!==i[r])return!1;return!0}fromArray(e,n=0){for(let i=0;i<9;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const uy=new xt;function iP(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}const tO={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function gu(t,e){return new tO[t](e)}function od(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function rP(){const t=od("canvas");return t.style.display="block",t}const jE={};function sP(t){t in jE||(jE[t]=!0,console.warn(t))}const YE=new xt().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),$E=new xt().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),tm={[qo]:{transfer:td,primaries:nd,toReference:t=>t,fromReference:t=>t},[Tr]:{transfer:en,primaries:nd,toReference:t=>t.convertSRGBToLinear(),fromReference:t=>t.convertLinearToSRGB()},[Td]:{transfer:td,primaries:id,toReference:t=>t.applyMatrix3($E),fromReference:t=>t.applyMatrix3(YE)},[F0]:{transfer:en,primaries:id,toReference:t=>t.convertSRGBToLinear().applyMatrix3($E),fromReference:t=>t.applyMatrix3(YE).convertLinearToSRGB()}},nO=new Set([qo,Td]),Yt={enabled:!0,_workingColorSpace:qo,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(t){if(!nO.has(t))throw new Error(`Unsupported working color space, "${t}".`);this._workingColorSpace=t},convert:function(t,e,n){if(this.enabled===!1||e===n||!e||!n)return t;const i=tm[e].toReference,r=tm[n].fromReference;return r(i(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this._workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this._workingColorSpace)},getPrimaries:function(t){return tm[t].primaries},getTransfer:function(t){return t===bo?td:tm[t].transfer}};function bu(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function hy(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}let Pc;class oP{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{Pc===void 0&&(Pc=od("canvas")),Pc.width=e.width,Pc.height=e.height;const i=Pc.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),n=Pc}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=od("canvas");n.width=e.width,n.height=e.height;const i=n.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=bu(s[o]/255)*255;return i.putImageData(r,0,0),n}else if(e.data){const n=e.data.slice(0);for(let i=0;i<n.length;i++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[i]=Math.floor(bu(n[i]/255)*255):n[i]=bu(n[i]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let iO=0;class Fl{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:iO++}),this.uuid=Rr(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(fy(r[o].image)):s.push(fy(r[o]))}else s=fy(r);i.url=s}return n||(e.images[this.uuid]=i),i}}function fy(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?oP.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let rO=0;class Ln extends Zo{constructor(e=Ln.DEFAULT_IMAGE,n=Ln.DEFAULT_MAPPING,i=es,r=es,s=qn,o=Zs,a=or,u=no,h=Ln.DEFAULT_ANISOTROPY,f=bo){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:rO++}),this.uuid=Rr(),this.name="",this.source=new Fl(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=h,this.format=a,this.internalFormat=null,this.type=u,this.offset=new he(0,0),this.repeat=new he(1,1),this.center=new he(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new xt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=f,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),n||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==U0)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Zf:e.x=e.x-Math.floor(e.x);break;case es:e.x=e.x<0?0:1;break;case Kf:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Zf:e.y=e.y-Math.floor(e.y);break;case es:e.y=e.y<0?0:1;break;case Kf:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Ln.DEFAULT_IMAGE=null;Ln.DEFAULT_MAPPING=U0;Ln.DEFAULT_ANISOTROPY=1;class $t{constructor(e=0,n=0,i=0,r=1){$t.prototype.isVector4=!0,this.x=e,this.y=n,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,i,r){return this.x=e,this.y=n,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*n+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*n+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*n+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*n+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,i,r,s;const u=e.elements,h=u[0],f=u[4],d=u[8],p=u[1],v=u[5],y=u[9],w=u[2],S=u[6],g=u[10];if(Math.abs(f-p)<.01&&Math.abs(d-w)<.01&&Math.abs(y-S)<.01){if(Math.abs(f+p)<.1&&Math.abs(d+w)<.1&&Math.abs(y+S)<.1&&Math.abs(h+v+g-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const M=(h+1)/2,T=(v+1)/2,P=(g+1)/2,b=(f+p)/4,L=(d+w)/4,N=(y+S)/4;return M>T&&M>P?M<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(M),r=b/i,s=L/i):T>P?T<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(T),i=b/r,s=N/r):P<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(P),i=L/s,r=N/s),this.set(i,r,s,n),this}let x=Math.sqrt((S-y)*(S-y)+(d-w)*(d-w)+(p-f)*(p-f));return Math.abs(x)<.001&&(x=1),this.x=(S-y)/x,this.y=(d-w)/x,this.z=(p-f)/x,this.w=Math.acos((h+v+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this.w=e.w+(n.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class aP extends Zo{constructor(e=1,n=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new $t(0,0,e,n),this.scissorTest=!1,this.viewport=new $t(0,0,e,n);const r={width:e,height:n,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:qn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const s=new Ln(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);s.flipY=!1,s.generateMipmaps=i.generateMipmaps,s.internalFormat=i.internalFormat,this.textures=[];const o=i.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,n,i=1){if(this.width!==e||this.height!==n||this.depth!==i){this.width=e,this.height=n,this.depth=i;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=n,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,r=e.textures.length;i<r;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new Fl(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class As extends aP{constructor(e=1,n=1,i={}){super(e,n,i),this.isWebGLRenderTarget=!0}}class z0 extends Ln{constructor(e=null,n=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:i,depth:r},this.magFilter=fi,this.minFilter=fi,this.wrapR=es,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class sO extends As{constructor(e=1,n=1,i=1,r={}){super(e,n,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new z0(null,e,n,i),this.texture.isRenderTargetTexture=!0}}class bS extends Ln{constructor(e=null,n=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:i,depth:r},this.magFilter=fi,this.minFilter=fi,this.wrapR=es,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class oO extends As{constructor(e=1,n=1,i=1,r={}){super(e,n,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new bS(null,e,n,i),this.texture.isRenderTargetTexture=!0}}class Pi{constructor(e=0,n=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=i,this._w=r}static slerpFlat(e,n,i,r,s,o,a){let u=i[r+0],h=i[r+1],f=i[r+2],d=i[r+3];const p=s[o+0],v=s[o+1],y=s[o+2],w=s[o+3];if(a===0){e[n+0]=u,e[n+1]=h,e[n+2]=f,e[n+3]=d;return}if(a===1){e[n+0]=p,e[n+1]=v,e[n+2]=y,e[n+3]=w;return}if(d!==w||u!==p||h!==v||f!==y){let S=1-a;const g=u*p+h*v+f*y+d*w,x=g>=0?1:-1,M=1-g*g;if(M>Number.EPSILON){const P=Math.sqrt(M),b=Math.atan2(P,g*x);S=Math.sin(S*b)/P,a=Math.sin(a*b)/P}const T=a*x;if(u=u*S+p*T,h=h*S+v*T,f=f*S+y*T,d=d*S+w*T,S===1-a){const P=1/Math.sqrt(u*u+h*h+f*f+d*d);u*=P,h*=P,f*=P,d*=P}}e[n]=u,e[n+1]=h,e[n+2]=f,e[n+3]=d}static multiplyQuaternionsFlat(e,n,i,r,s,o){const a=i[r],u=i[r+1],h=i[r+2],f=i[r+3],d=s[o],p=s[o+1],v=s[o+2],y=s[o+3];return e[n]=a*y+f*d+u*v-h*p,e[n+1]=u*y+f*p+h*d-a*v,e[n+2]=h*y+f*v+a*p-u*d,e[n+3]=f*y-a*d-u*p-h*v,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,i,r){return this._x=e,this._y=n,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,u=Math.sin,h=a(i/2),f=a(r/2),d=a(s/2),p=u(i/2),v=u(r/2),y=u(s/2);switch(o){case"XYZ":this._x=p*f*d+h*v*y,this._y=h*v*d-p*f*y,this._z=h*f*y+p*v*d,this._w=h*f*d-p*v*y;break;case"YXZ":this._x=p*f*d+h*v*y,this._y=h*v*d-p*f*y,this._z=h*f*y-p*v*d,this._w=h*f*d+p*v*y;break;case"ZXY":this._x=p*f*d-h*v*y,this._y=h*v*d+p*f*y,this._z=h*f*y+p*v*d,this._w=h*f*d-p*v*y;break;case"ZYX":this._x=p*f*d-h*v*y,this._y=h*v*d+p*f*y,this._z=h*f*y-p*v*d,this._w=h*f*d+p*v*y;break;case"YZX":this._x=p*f*d+h*v*y,this._y=h*v*d+p*f*y,this._z=h*f*y-p*v*d,this._w=h*f*d-p*v*y;break;case"XZY":this._x=p*f*d-h*v*y,this._y=h*v*d-p*f*y,this._z=h*f*y+p*v*d,this._w=h*f*d+p*v*y;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const i=n/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,i=n[0],r=n[4],s=n[8],o=n[1],a=n[5],u=n[9],h=n[2],f=n[6],d=n[10],p=i+a+d;if(p>0){const v=.5/Math.sqrt(p+1);this._w=.25/v,this._x=(f-u)*v,this._y=(s-h)*v,this._z=(o-r)*v}else if(i>a&&i>d){const v=2*Math.sqrt(1+i-a-d);this._w=(f-u)/v,this._x=.25*v,this._y=(r+o)/v,this._z=(s+h)/v}else if(a>d){const v=2*Math.sqrt(1+a-i-d);this._w=(s-h)/v,this._x=(r+o)/v,this._y=.25*v,this._z=(u+f)/v}else{const v=2*Math.sqrt(1+d-i-a);this._w=(o-r)/v,this._x=(s+h)/v,this._y=(u+f)/v,this._z=.25*v}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let i=e.dot(n)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Rn(this.dot(e),-1,1)))}rotateTowards(e,n){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,n/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const i=e._x,r=e._y,s=e._z,o=e._w,a=n._x,u=n._y,h=n._z,f=n._w;return this._x=i*f+o*a+r*h-s*u,this._y=r*f+o*u+s*a-i*h,this._z=s*f+o*h+i*u-r*a,this._w=o*f-i*a-r*u-s*h,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const u=1-a*a;if(u<=Number.EPSILON){const v=1-n;return this._w=v*o+n*this._w,this._x=v*i+n*this._x,this._y=v*r+n*this._y,this._z=v*s+n*this._z,this.normalize(),this}const h=Math.sqrt(u),f=Math.atan2(h,a),d=Math.sin((1-n)*f)/h,p=Math.sin(n*f)/h;return this._w=o*d+this._w*p,this._x=i*d+this._x*p,this._y=r*d+this._y*p,this._z=s*d+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,n,i){return this.copy(e).slerp(n,i)}random(){const e=2*Math.PI*Math.random(),n=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(n),s*Math.cos(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class k{constructor(e=0,n=0,i=0){k.prototype.isVector3=!0,this.x=e,this.y=n,this.z=i}set(e,n,i){return i===void 0&&(i=this.z),this.x=e,this.y=n,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(qE.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(qE.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*n+s[3]*i+s[6]*r,this.y=s[1]*n+s[4]*i+s[7]*r,this.z=s[2]*n+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*n+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*n+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*n+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*n+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const n=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,u=e.w,h=2*(o*r-a*i),f=2*(a*n-s*r),d=2*(s*i-o*n);return this.x=n+u*h+o*d-a*f,this.y=i+u*f+a*h-s*d,this.z=r+u*d+s*f-o*h,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*n+s[4]*i+s[8]*r,this.y=s[1]*n+s[5]*i+s[9]*r,this.z=s[2]*n+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const i=e.x,r=e.y,s=e.z,o=n.x,a=n.y,u=n.z;return this.x=r*u-s*a,this.y=s*o-i*u,this.z=i*a-r*o,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const i=e.dot(this)/n;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return dy.copy(this).projectOnVector(e),this.sub(dy)}reflect(e){return this.sub(dy.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(e)/n;return Math.acos(Rn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return n*n+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,i){const r=Math.sin(n)*e;return this.x=r*Math.sin(i),this.y=Math.cos(n)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,i){return this.x=e*Math.sin(n),this.y=i,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=i,this.z=r,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,n=Math.random()*2-1,i=Math.sqrt(1-n*n);return this.x=i*Math.cos(e),this.y=n,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const dy=new k,qE=new Pi;class ji{constructor(e=new k(1/0,1/0,1/0),n=new k(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n+=3)this.expandByPoint(ms.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,i=e.count;n<i;n++)this.expandByPoint(ms.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const i=ms.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(n===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,ms):ms.fromBufferAttribute(s,o),ms.applyMatrix4(e.matrixWorld),this.expandByPoint(ms);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),nm.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),nm.copy(i.boundingBox)),nm.applyMatrix4(e.matrixWorld),this.union(nm)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],n);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,ms),ms.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,i;return e.normal.x>0?(n=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),n<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Hh),im.subVectors(this.max,Hh),Lc.subVectors(e.a,Hh),Ic.subVectors(e.b,Hh),Nc.subVectors(e.c,Hh),la.subVectors(Ic,Lc),ca.subVectors(Nc,Ic),fl.subVectors(Lc,Nc);let n=[0,-la.z,la.y,0,-ca.z,ca.y,0,-fl.z,fl.y,la.z,0,-la.x,ca.z,0,-ca.x,fl.z,0,-fl.x,-la.y,la.x,0,-ca.y,ca.x,0,-fl.y,fl.x,0];return!py(n,Lc,Ic,Nc,im)||(n=[1,0,0,0,1,0,0,0,1],!py(n,Lc,Ic,Nc,im))?!1:(rm.crossVectors(la,ca),n=[rm.x,rm.y,rm.z],py(n,Lc,Ic,Nc,im))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ms).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(ms).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(_o[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),_o[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),_o[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),_o[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),_o[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),_o[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),_o[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),_o[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(_o),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const _o=[new k,new k,new k,new k,new k,new k,new k,new k],ms=new k,nm=new ji,Lc=new k,Ic=new k,Nc=new k,la=new k,ca=new k,fl=new k,Hh=new k,im=new k,rm=new k,dl=new k;function py(t,e,n,i,r){for(let s=0,o=t.length-3;s<=o;s+=3){dl.fromArray(t,s);const a=r.x*Math.abs(dl.x)+r.y*Math.abs(dl.y)+r.z*Math.abs(dl.z),u=e.dot(dl),h=n.dot(dl),f=i.dot(dl);if(Math.max(-Math.max(u,h,f),Math.min(u,h,f))>a)return!1}return!0}const aO=new ji,Vh=new k,my=new k;class Li{constructor(e=new k,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const i=this.center;n!==void 0?i.copy(n):aO.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const i=this.center.distanceToSquared(e);return n.copy(e),i>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Vh.subVectors(e,this.center);const n=Vh.lengthSq();if(n>this.radius*this.radius){const i=Math.sqrt(n),r=(i-this.radius)*.5;this.center.addScaledVector(Vh,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(my.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Vh.copy(e.center).add(my)),this.expandByPoint(Vh.copy(e.center).sub(my))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const xo=new k,gy=new k,sm=new k,ua=new k,vy=new k,om=new k,yy=new k;class lc{constructor(e=new k,n=new k(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,xo)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const i=n.dot(this.direction);return i<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=xo.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(xo.copy(this.origin).addScaledVector(this.direction,n),xo.distanceToSquared(e))}distanceSqToSegment(e,n,i,r){gy.copy(e).add(n).multiplyScalar(.5),sm.copy(n).sub(e).normalize(),ua.copy(this.origin).sub(gy);const s=e.distanceTo(n)*.5,o=-this.direction.dot(sm),a=ua.dot(this.direction),u=-ua.dot(sm),h=ua.lengthSq(),f=Math.abs(1-o*o);let d,p,v,y;if(f>0)if(d=o*u-a,p=o*a-u,y=s*f,d>=0)if(p>=-y)if(p<=y){const w=1/f;d*=w,p*=w,v=d*(d+o*p+2*a)+p*(o*d+p+2*u)+h}else p=s,d=Math.max(0,-(o*p+a)),v=-d*d+p*(p+2*u)+h;else p=-s,d=Math.max(0,-(o*p+a)),v=-d*d+p*(p+2*u)+h;else p<=-y?(d=Math.max(0,-(-o*s+a)),p=d>0?-s:Math.min(Math.max(-s,-u),s),v=-d*d+p*(p+2*u)+h):p<=y?(d=0,p=Math.min(Math.max(-s,-u),s),v=p*(p+2*u)+h):(d=Math.max(0,-(o*s+a)),p=d>0?s:Math.min(Math.max(-s,-u),s),v=-d*d+p*(p+2*u)+h);else p=o>0?-s:s,d=Math.max(0,-(o*p+a)),v=-d*d+p*(p+2*u)+h;return i&&i.copy(this.origin).addScaledVector(this.direction,d),r&&r.copy(gy).addScaledVector(sm,p),v}intersectSphere(e,n){xo.subVectors(e.center,this.origin);const i=xo.dot(this.direction),r=xo.dot(xo)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,u=i+o;return u<0?null:a<0?this.at(u,n):this.at(a,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/n;return i>=0?i:null}intersectPlane(e,n){const i=this.distanceToPlane(e);return i===null?null:this.at(i,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let i,r,s,o,a,u;const h=1/this.direction.x,f=1/this.direction.y,d=1/this.direction.z,p=this.origin;return h>=0?(i=(e.min.x-p.x)*h,r=(e.max.x-p.x)*h):(i=(e.max.x-p.x)*h,r=(e.min.x-p.x)*h),f>=0?(s=(e.min.y-p.y)*f,o=(e.max.y-p.y)*f):(s=(e.max.y-p.y)*f,o=(e.min.y-p.y)*f),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),d>=0?(a=(e.min.z-p.z)*d,u=(e.max.z-p.z)*d):(a=(e.max.z-p.z)*d,u=(e.min.z-p.z)*d),i>u||a>r)||((a>i||i!==i)&&(i=a),(u<r||r!==r)&&(r=u),r<0)?null:this.at(i>=0?i:r,n)}intersectsBox(e){return this.intersectBox(e,xo)!==null}intersectTriangle(e,n,i,r,s){vy.subVectors(n,e),om.subVectors(i,e),yy.crossVectors(vy,om);let o=this.direction.dot(yy),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;ua.subVectors(this.origin,e);const u=a*this.direction.dot(om.crossVectors(ua,om));if(u<0)return null;const h=a*this.direction.dot(vy.cross(ua));if(h<0||u+h>o)return null;const f=-a*ua.dot(yy);return f<0?null:this.at(f/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class ct{constructor(e,n,i,r,s,o,a,u,h,f,d,p,v,y,w,S){ct.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,i,r,s,o,a,u,h,f,d,p,v,y,w,S)}set(e,n,i,r,s,o,a,u,h,f,d,p,v,y,w,S){const g=this.elements;return g[0]=e,g[4]=n,g[8]=i,g[12]=r,g[1]=s,g[5]=o,g[9]=a,g[13]=u,g[2]=h,g[6]=f,g[10]=d,g[14]=p,g[3]=v,g[7]=y,g[11]=w,g[15]=S,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new ct().fromArray(this.elements)}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],this}copyPosition(e){const n=this.elements,i=e.elements;return n[12]=i[12],n[13]=i[13],n[14]=i[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,i){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,n,i){return this.set(e.x,n.x,i.x,0,e.y,n.y,i.y,0,e.z,n.z,i.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,i=e.elements,r=1/Dc.setFromMatrixColumn(e,0).length(),s=1/Dc.setFromMatrixColumn(e,1).length(),o=1/Dc.setFromMatrixColumn(e,2).length();return n[0]=i[0]*r,n[1]=i[1]*r,n[2]=i[2]*r,n[3]=0,n[4]=i[4]*s,n[5]=i[5]*s,n[6]=i[6]*s,n[7]=0,n[8]=i[8]*o,n[9]=i[9]*o,n[10]=i[10]*o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),u=Math.cos(r),h=Math.sin(r),f=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){const p=o*f,v=o*d,y=a*f,w=a*d;n[0]=u*f,n[4]=-u*d,n[8]=h,n[1]=v+y*h,n[5]=p-w*h,n[9]=-a*u,n[2]=w-p*h,n[6]=y+v*h,n[10]=o*u}else if(e.order==="YXZ"){const p=u*f,v=u*d,y=h*f,w=h*d;n[0]=p+w*a,n[4]=y*a-v,n[8]=o*h,n[1]=o*d,n[5]=o*f,n[9]=-a,n[2]=v*a-y,n[6]=w+p*a,n[10]=o*u}else if(e.order==="ZXY"){const p=u*f,v=u*d,y=h*f,w=h*d;n[0]=p-w*a,n[4]=-o*d,n[8]=y+v*a,n[1]=v+y*a,n[5]=o*f,n[9]=w-p*a,n[2]=-o*h,n[6]=a,n[10]=o*u}else if(e.order==="ZYX"){const p=o*f,v=o*d,y=a*f,w=a*d;n[0]=u*f,n[4]=y*h-v,n[8]=p*h+w,n[1]=u*d,n[5]=w*h+p,n[9]=v*h-y,n[2]=-h,n[6]=a*u,n[10]=o*u}else if(e.order==="YZX"){const p=o*u,v=o*h,y=a*u,w=a*h;n[0]=u*f,n[4]=w-p*d,n[8]=y*d+v,n[1]=d,n[5]=o*f,n[9]=-a*f,n[2]=-h*f,n[6]=v*d+y,n[10]=p-w*d}else if(e.order==="XZY"){const p=o*u,v=o*h,y=a*u,w=a*h;n[0]=u*f,n[4]=-d,n[8]=h*f,n[1]=p*d+w,n[5]=o*f,n[9]=v*d-y,n[2]=y*d-v,n[6]=a*f,n[10]=w*d+p}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(lO,e,cO)}lookAt(e,n,i){const r=this.elements;return _r.subVectors(e,n),_r.lengthSq()===0&&(_r.z=1),_r.normalize(),ha.crossVectors(i,_r),ha.lengthSq()===0&&(Math.abs(i.z)===1?_r.x+=1e-4:_r.z+=1e-4,_r.normalize(),ha.crossVectors(i,_r)),ha.normalize(),am.crossVectors(_r,ha),r[0]=ha.x,r[4]=am.x,r[8]=_r.x,r[1]=ha.y,r[5]=am.y,r[9]=_r.y,r[2]=ha.z,r[6]=am.z,r[10]=_r.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,r=n.elements,s=this.elements,o=i[0],a=i[4],u=i[8],h=i[12],f=i[1],d=i[5],p=i[9],v=i[13],y=i[2],w=i[6],S=i[10],g=i[14],x=i[3],M=i[7],T=i[11],P=i[15],b=r[0],L=r[4],N=r[8],R=r[12],C=r[1],O=r[5],j=r[9],H=r[13],J=r[2],ne=r[6],fe=r[10],ve=r[14],U=r[3],X=r[7],V=r[11],re=r[15];return s[0]=o*b+a*C+u*J+h*U,s[4]=o*L+a*O+u*ne+h*X,s[8]=o*N+a*j+u*fe+h*V,s[12]=o*R+a*H+u*ve+h*re,s[1]=f*b+d*C+p*J+v*U,s[5]=f*L+d*O+p*ne+v*X,s[9]=f*N+d*j+p*fe+v*V,s[13]=f*R+d*H+p*ve+v*re,s[2]=y*b+w*C+S*J+g*U,s[6]=y*L+w*O+S*ne+g*X,s[10]=y*N+w*j+S*fe+g*V,s[14]=y*R+w*H+S*ve+g*re,s[3]=x*b+M*C+T*J+P*U,s[7]=x*L+M*O+T*ne+P*X,s[11]=x*N+M*j+T*fe+P*V,s[15]=x*R+M*H+T*ve+P*re,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],u=e[9],h=e[13],f=e[2],d=e[6],p=e[10],v=e[14],y=e[3],w=e[7],S=e[11],g=e[15];return y*(+s*u*d-r*h*d-s*a*p+i*h*p+r*a*v-i*u*v)+w*(+n*u*v-n*h*p+s*o*p-r*o*v+r*h*f-s*u*f)+S*(+n*h*d-n*a*v-s*o*d+i*o*v+s*a*f-i*h*f)+g*(-r*a*f-n*u*d+n*a*p+r*o*d-i*o*p+i*u*f)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=n,r[14]=i),this}invert(){const e=this.elements,n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],u=e[6],h=e[7],f=e[8],d=e[9],p=e[10],v=e[11],y=e[12],w=e[13],S=e[14],g=e[15],x=d*S*h-w*p*h+w*u*v-a*S*v-d*u*g+a*p*g,M=y*p*h-f*S*h-y*u*v+o*S*v+f*u*g-o*p*g,T=f*w*h-y*d*h+y*a*v-o*w*v-f*a*g+o*d*g,P=y*d*u-f*w*u-y*a*p+o*w*p+f*a*S-o*d*S,b=n*x+i*M+r*T+s*P;if(b===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const L=1/b;return e[0]=x*L,e[1]=(w*p*s-d*S*s-w*r*v+i*S*v+d*r*g-i*p*g)*L,e[2]=(a*S*s-w*u*s+w*r*h-i*S*h-a*r*g+i*u*g)*L,e[3]=(d*u*s-a*p*s-d*r*h+i*p*h+a*r*v-i*u*v)*L,e[4]=M*L,e[5]=(f*S*s-y*p*s+y*r*v-n*S*v-f*r*g+n*p*g)*L,e[6]=(y*u*s-o*S*s-y*r*h+n*S*h+o*r*g-n*u*g)*L,e[7]=(o*p*s-f*u*s+f*r*h-n*p*h-o*r*v+n*u*v)*L,e[8]=T*L,e[9]=(y*d*s-f*w*s-y*i*v+n*w*v+f*i*g-n*d*g)*L,e[10]=(o*w*s-y*a*s+y*i*h-n*w*h-o*i*g+n*a*g)*L,e[11]=(f*a*s-o*d*s-f*i*h+n*d*h+o*i*v-n*a*v)*L,e[12]=P*L,e[13]=(f*w*r-y*d*r+y*i*p-n*w*p-f*i*S+n*d*S)*L,e[14]=(y*a*r-o*w*r-y*i*u+n*w*u+o*i*S-n*a*S)*L,e[15]=(o*d*r-f*a*r+f*i*u-n*d*u-o*i*p+n*a*p)*L,this}scale(e){const n=this.elements,i=e.x,r=e.y,s=e.z;return n[0]*=i,n[4]*=r,n[8]*=s,n[1]*=i,n[5]*=r,n[9]*=s,n[2]*=i,n[6]*=r,n[10]*=s,n[3]*=i,n[7]*=r,n[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,i,r))}makeTranslation(e,n,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,i,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,n,-i,0,0,i,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,0,i,0,0,1,0,0,-i,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,0,i,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const i=Math.cos(n),r=Math.sin(n),s=1-i,o=e.x,a=e.y,u=e.z,h=s*o,f=s*a;return this.set(h*o+i,h*a-r*u,h*u+r*a,0,h*a+r*u,f*a+i,f*u-r*o,0,h*u-r*a,f*u+r*o,s*u*u+i,0,0,0,0,1),this}makeScale(e,n,i){return this.set(e,0,0,0,0,n,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,n,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,n,r,1,0,0,0,0,1),this}compose(e,n,i){const r=this.elements,s=n._x,o=n._y,a=n._z,u=n._w,h=s+s,f=o+o,d=a+a,p=s*h,v=s*f,y=s*d,w=o*f,S=o*d,g=a*d,x=u*h,M=u*f,T=u*d,P=i.x,b=i.y,L=i.z;return r[0]=(1-(w+g))*P,r[1]=(v+T)*P,r[2]=(y-M)*P,r[3]=0,r[4]=(v-T)*b,r[5]=(1-(p+g))*b,r[6]=(S+x)*b,r[7]=0,r[8]=(y+M)*L,r[9]=(S-x)*L,r[10]=(1-(p+w))*L,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,n,i){const r=this.elements;let s=Dc.set(r[0],r[1],r[2]).length();const o=Dc.set(r[4],r[5],r[6]).length(),a=Dc.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],gs.copy(this);const h=1/s,f=1/o,d=1/a;return gs.elements[0]*=h,gs.elements[1]*=h,gs.elements[2]*=h,gs.elements[4]*=f,gs.elements[5]*=f,gs.elements[6]*=f,gs.elements[8]*=d,gs.elements[9]*=d,gs.elements[10]*=d,n.setFromRotationMatrix(gs),i.x=s,i.y=o,i.z=a,this}makePerspective(e,n,i,r,s,o,a=Ks){const u=this.elements,h=2*s/(n-e),f=2*s/(i-r),d=(n+e)/(n-e),p=(i+r)/(i-r);let v,y;if(a===Ks)v=-(o+s)/(o-s),y=-2*o*s/(o-s);else if(a===sd)v=-o/(o-s),y=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return u[0]=h,u[4]=0,u[8]=d,u[12]=0,u[1]=0,u[5]=f,u[9]=p,u[13]=0,u[2]=0,u[6]=0,u[10]=v,u[14]=y,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}makeOrthographic(e,n,i,r,s,o,a=Ks){const u=this.elements,h=1/(n-e),f=1/(i-r),d=1/(o-s),p=(n+e)*h,v=(i+r)*f;let y,w;if(a===Ks)y=(o+s)*d,w=-2*d;else if(a===sd)y=s*d,w=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return u[0]=2*h,u[4]=0,u[8]=0,u[12]=-p,u[1]=0,u[5]=2*f,u[9]=0,u[13]=-v,u[2]=0,u[6]=0,u[10]=w,u[14]=-y,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}equals(e){const n=this.elements,i=e.elements;for(let r=0;r<16;r++)if(n[r]!==i[r])return!1;return!0}fromArray(e,n=0){for(let i=0;i<16;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e[n+9]=i[9],e[n+10]=i[10],e[n+11]=i[11],e[n+12]=i[12],e[n+13]=i[13],e[n+14]=i[14],e[n+15]=i[15],e}}const Dc=new k,gs=new ct,lO=new k(0,0,0),cO=new k(1,1,1),ha=new k,am=new k,_r=new k,ZE=new ct,KE=new Pi;class Lr{constructor(e=0,n=0,i=0,r=Lr.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,i,r=this._order){return this._x=e,this._y=n,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],u=r[1],h=r[5],f=r[9],d=r[2],p=r[6],v=r[10];switch(n){case"XYZ":this._y=Math.asin(Rn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-f,v),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(p,h),this._z=0);break;case"YXZ":this._x=Math.asin(-Rn(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(a,v),this._z=Math.atan2(u,h)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(Rn(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-d,v),this._z=Math.atan2(-o,h)):(this._y=0,this._z=Math.atan2(u,s));break;case"ZYX":this._y=Math.asin(-Rn(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(p,v),this._z=Math.atan2(u,s)):(this._x=0,this._z=Math.atan2(-o,h));break;case"YZX":this._z=Math.asin(Rn(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-f,h),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(a,v));break;case"XZY":this._z=Math.asin(-Rn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,h),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-f,v),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,i){return ZE.makeRotationFromQuaternion(e),this.setFromRotationMatrix(ZE,n,i)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return KE.setFromEuler(this),this.setFromQuaternion(KE,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Lr.DEFAULT_ORDER="XYZ";class Wl{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let uO=0;const JE=new k,kc=new Pi,So=new ct,lm=new k,Gh=new k,hO=new k,fO=new Pi,QE=new k(1,0,0),eT=new k(0,1,0),tT=new k(0,0,1),nT={type:"added"},dO={type:"removed"},Uc={type:"childadded",child:null},_y={type:"childremoved",child:null};class Vt extends Zo{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:uO++}),this.uuid=Rr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Vt.DEFAULT_UP.clone();const e=new k,n=new Lr,i=new Pi,r=new k(1,1,1);function s(){i.setFromEuler(n,!1)}function o(){n.setFromQuaternion(i,void 0,!1)}n._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new ct},normalMatrix:{value:new xt}}),this.matrix=new ct,this.matrixWorld=new ct,this.matrixAutoUpdate=Vt.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Vt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Wl,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return kc.setFromAxisAngle(e,n),this.quaternion.multiply(kc),this}rotateOnWorldAxis(e,n){return kc.setFromAxisAngle(e,n),this.quaternion.premultiply(kc),this}rotateX(e){return this.rotateOnAxis(QE,e)}rotateY(e){return this.rotateOnAxis(eT,e)}rotateZ(e){return this.rotateOnAxis(tT,e)}translateOnAxis(e,n){return JE.copy(e).applyQuaternion(this.quaternion),this.position.add(JE.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(QE,e)}translateY(e){return this.translateOnAxis(eT,e)}translateZ(e){return this.translateOnAxis(tT,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(So.copy(this.matrixWorld).invert())}lookAt(e,n,i){e.isVector3?lm.copy(e):lm.set(e,n,i);const r=this.parent;this.updateWorldMatrix(!0,!1),Gh.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?So.lookAt(Gh,lm,this.up):So.lookAt(lm,Gh,this.up),this.quaternion.setFromRotationMatrix(So),r&&(So.extractRotation(r.matrixWorld),kc.setFromRotationMatrix(So),this.quaternion.premultiply(kc.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(nT),Uc.child=e,this.dispatchEvent(Uc),Uc.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(dO),_y.child=e,this.dispatchEvent(_y),_y.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),So.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),So.multiply(e.parent.matrixWorld)),e.applyMatrix4(So),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(nT),Uc.child=e,this.dispatchEvent(Uc),Uc.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,n);if(o!==void 0)return o}}getObjectsByProperty(e,n,i=[]){this[e]===n&&i.push(this);const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].getObjectsByProperty(e,n,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Gh,e,hO),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Gh,fO,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let i=0,r=n.length;i<r;i++)n[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let i=0,r=n.length;i<r;i++)n[i].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let i=0,r=n.length;i<r;i++){const s=n[i];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++){const a=r[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=e===void 0||typeof e=="string",i={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),r.maxGeometryCount=this._maxGeometryCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()}));function s(a,u){return a[u.uuid]===void 0&&(a[u.uuid]=u.toJSON(e)),u.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const u=a.shapes;if(Array.isArray(u))for(let h=0,f=u.length;h<f;h++){const d=u[h];s(e.shapes,d)}else s(e.shapes,u)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let u=0,h=this.material.length;u<h;u++)a.push(s(e.materials,this.material[u]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const u=this.animations[a];r.animations.push(s(e.animations,u))}}if(n){const a=o(e.geometries),u=o(e.materials),h=o(e.textures),f=o(e.images),d=o(e.shapes),p=o(e.skeletons),v=o(e.animations),y=o(e.nodes);a.length>0&&(i.geometries=a),u.length>0&&(i.materials=u),h.length>0&&(i.textures=h),f.length>0&&(i.images=f),d.length>0&&(i.shapes=d),p.length>0&&(i.skeletons=p),v.length>0&&(i.animations=v),y.length>0&&(i.nodes=y)}return i.object=r,i;function o(a){const u=[];for(const h in a){const f=a[h];delete f.metadata,u.push(f)}return u}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}Vt.DEFAULT_UP=new k(0,1,0);Vt.DEFAULT_MATRIX_AUTO_UPDATE=!0;Vt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const vs=new k,Mo=new k,xy=new k,wo=new k,Oc=new k,Fc=new k,iT=new k,Sy=new k,My=new k,wy=new k;class Ar{constructor(e=new k,n=new k,i=new k){this.a=e,this.b=n,this.c=i}static getNormal(e,n,i,r){r.subVectors(i,n),vs.subVectors(e,n),r.cross(vs);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,n,i,r,s){vs.subVectors(r,n),Mo.subVectors(i,n),xy.subVectors(e,n);const o=vs.dot(vs),a=vs.dot(Mo),u=vs.dot(xy),h=Mo.dot(Mo),f=Mo.dot(xy),d=o*h-a*a;if(d===0)return s.set(0,0,0),null;const p=1/d,v=(h*u-a*f)*p,y=(o*f-a*u)*p;return s.set(1-v-y,y,v)}static containsPoint(e,n,i,r){return this.getBarycoord(e,n,i,r,wo)===null?!1:wo.x>=0&&wo.y>=0&&wo.x+wo.y<=1}static getInterpolation(e,n,i,r,s,o,a,u){return this.getBarycoord(e,n,i,r,wo)===null?(u.x=0,u.y=0,"z"in u&&(u.z=0),"w"in u&&(u.w=0),null):(u.setScalar(0),u.addScaledVector(s,wo.x),u.addScaledVector(o,wo.y),u.addScaledVector(a,wo.z),u)}static isFrontFacing(e,n,i,r){return vs.subVectors(i,n),Mo.subVectors(e,n),vs.cross(Mo).dot(r)<0}set(e,n,i){return this.a.copy(e),this.b.copy(n),this.c.copy(i),this}setFromPointsAndIndices(e,n,i,r){return this.a.copy(e[n]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,n,i,r){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return vs.subVectors(this.c,this.b),Mo.subVectors(this.a,this.b),vs.cross(Mo).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ar.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return Ar.getBarycoord(e,this.a,this.b,this.c,n)}getInterpolation(e,n,i,r,s){return Ar.getInterpolation(e,this.a,this.b,this.c,n,i,r,s)}containsPoint(e){return Ar.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ar.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const i=this.a,r=this.b,s=this.c;let o,a;Oc.subVectors(r,i),Fc.subVectors(s,i),Sy.subVectors(e,i);const u=Oc.dot(Sy),h=Fc.dot(Sy);if(u<=0&&h<=0)return n.copy(i);My.subVectors(e,r);const f=Oc.dot(My),d=Fc.dot(My);if(f>=0&&d<=f)return n.copy(r);const p=u*d-f*h;if(p<=0&&u>=0&&f<=0)return o=u/(u-f),n.copy(i).addScaledVector(Oc,o);wy.subVectors(e,s);const v=Oc.dot(wy),y=Fc.dot(wy);if(y>=0&&v<=y)return n.copy(s);const w=v*h-u*y;if(w<=0&&h>=0&&y<=0)return a=h/(h-y),n.copy(i).addScaledVector(Fc,a);const S=f*y-v*d;if(S<=0&&d-f>=0&&v-y>=0)return iT.subVectors(s,r),a=(d-f)/(d-f+(v-y)),n.copy(r).addScaledVector(iT,a);const g=1/(S+w+p);return o=w*g,a=p*g,n.copy(i).addScaledVector(Oc,o).addScaledVector(Fc,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const lP={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},fa={h:0,s:0,l:0},cm={h:0,s:0,l:0};function Ey(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}class ze{constructor(e,n,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,i)}set(e,n,i){if(n===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,n,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=Tr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Yt.toWorkingColorSpace(this,n),this}setRGB(e,n,i,r=Yt.workingColorSpace){return this.r=e,this.g=n,this.b=i,Yt.toWorkingColorSpace(this,r),this}setHSL(e,n,i,r=Yt.workingColorSpace){if(e=CS(e,1),n=Rn(n,0,1),i=Rn(i,0,1),n===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+n):i+n-i*n,o=2*i-s;this.r=Ey(o,s,e+1/3),this.g=Ey(o,s,e),this.b=Ey(o,s,e-1/3)}return Yt.toWorkingColorSpace(this,r),this}setStyle(e,n=Tr){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,n);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,n);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,n);if(o===6)return this.setHex(parseInt(s,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=Tr){const i=lP[e.toLowerCase()];return i!==void 0?this.setHex(i,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=bu(e.r),this.g=bu(e.g),this.b=bu(e.b),this}copyLinearToSRGB(e){return this.r=hy(e.r),this.g=hy(e.g),this.b=hy(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Tr){return Yt.fromWorkingColorSpace(Ai.copy(this),e),Math.round(Rn(Ai.r*255,0,255))*65536+Math.round(Rn(Ai.g*255,0,255))*256+Math.round(Rn(Ai.b*255,0,255))}getHexString(e=Tr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=Yt.workingColorSpace){Yt.fromWorkingColorSpace(Ai.copy(this),n);const i=Ai.r,r=Ai.g,s=Ai.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let u,h;const f=(a+o)/2;if(a===o)u=0,h=0;else{const d=o-a;switch(h=f<=.5?d/(o+a):d/(2-o-a),o){case i:u=(r-s)/d+(r<s?6:0);break;case r:u=(s-i)/d+2;break;case s:u=(i-r)/d+4;break}u/=6}return e.h=u,e.s=h,e.l=f,e}getRGB(e,n=Yt.workingColorSpace){return Yt.fromWorkingColorSpace(Ai.copy(this),n),e.r=Ai.r,e.g=Ai.g,e.b=Ai.b,e}getStyle(e=Tr){Yt.fromWorkingColorSpace(Ai.copy(this),e);const n=Ai.r,i=Ai.g,r=Ai.b;return e!==Tr?`color(${e} ${n.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,n,i){return this.getHSL(fa),this.setHSL(fa.h+e,fa.s+n,fa.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,i){return this.r=e.r+(n.r-e.r)*i,this.g=e.g+(n.g-e.g)*i,this.b=e.b+(n.b-e.b)*i,this}lerpHSL(e,n){this.getHSL(fa),e.getHSL(cm);const i=Mf(fa.h,cm.h,n),r=Mf(fa.s,cm.s,n),s=Mf(fa.l,cm.l,n);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*n+s[3]*i+s[6]*r,this.g=s[1]*n+s[4]*i+s[7]*r,this.b=s[2]*n+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Ai=new ze;ze.NAMES=lP;let pO=0;class ki extends Zo{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:pO++}),this.uuid=Rr(),this.name="",this.type="Material",this.blending=Da,this.side=Wo,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=t0,this.blendDst=n0,this.blendEquation=Ma,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new ze(0,0,0),this.blendAlpha=0,this.depthFunc=Yf,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Fx,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Rl,this.stencilZFail=Rl,this.stencilZPass=Rl,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const i=e[n];if(i===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const r=this[n];if(r===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[n]=i}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Da&&(i.blending=this.blending),this.side!==Wo&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==t0&&(i.blendSrc=this.blendSrc),this.blendDst!==n0&&(i.blendDst=this.blendDst),this.blendEquation!==Ma&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Yf&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==Fx&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Rl&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Rl&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Rl&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const o=[];for(const a in s){const u=s[a];delete u.metadata,o.push(u)}return o}if(n){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let i=null;if(n!==null){const r=n.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=n[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Ka extends ki{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ze(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Lr,this.combine=wd,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Ro=mO();function mO(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),i=new Uint32Array(512),r=new Uint32Array(512);for(let u=0;u<256;++u){const h=u-127;h<-27?(i[u]=0,i[u|256]=32768,r[u]=24,r[u|256]=24):h<-14?(i[u]=1024>>-h-14,i[u|256]=1024>>-h-14|32768,r[u]=-h-1,r[u|256]=-h-1):h<=15?(i[u]=h+15<<10,i[u|256]=h+15<<10|32768,r[u]=13,r[u|256]=13):h<128?(i[u]=31744,i[u|256]=64512,r[u]=24,r[u|256]=24):(i[u]=31744,i[u|256]=64512,r[u]=13,r[u|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let u=1;u<1024;++u){let h=u<<13,f=0;for(;!(h&8388608);)h<<=1,f-=8388608;h&=-8388609,f+=947912704,s[u]=h|f}for(let u=1024;u<2048;++u)s[u]=939524096+(u-1024<<13);for(let u=1;u<31;++u)o[u]=u<<23;o[31]=1199570944,o[32]=2147483648;for(let u=33;u<63;++u)o[u]=2147483648+(u-32<<23);o[63]=3347054592;for(let u=1;u<64;++u)u!==32&&(a[u]=1024);return{floatView:e,uint32View:n,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function tr(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=Rn(t,-65504,65504),Ro.floatView[0]=t;const e=Ro.uint32View[0],n=e>>23&511;return Ro.baseTable[n]+((e&8388607)>>Ro.shiftTable[n])}function af(t){const e=t>>10;return Ro.uint32View[0]=Ro.mantissaTable[Ro.offsetTable[e]+(t&1023)]+Ro.exponentTable[e],Ro.floatView[0]}const gO={toHalfFloat:tr,fromHalfFloat:af},Xn=new k,um=new he;class Xt{constructor(e,n,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=i,this.usage=rd,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=ts,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return sP("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,i){e*=this.itemSize,i*=n.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=n.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,i=this.count;n<i;n++)um.fromBufferAttribute(this,n),um.applyMatrix3(e),this.setXY(n,um.x,um.y);else if(this.itemSize===3)for(let n=0,i=this.count;n<i;n++)Xn.fromBufferAttribute(this,n),Xn.applyMatrix3(e),this.setXYZ(n,Xn.x,Xn.y,Xn.z);return this}applyMatrix4(e){for(let n=0,i=this.count;n<i;n++)Xn.fromBufferAttribute(this,n),Xn.applyMatrix4(e),this.setXYZ(n,Xn.x,Xn.y,Xn.z);return this}applyNormalMatrix(e){for(let n=0,i=this.count;n<i;n++)Xn.fromBufferAttribute(this,n),Xn.applyNormalMatrix(e),this.setXYZ(n,Xn.x,Xn.y,Xn.z);return this}transformDirection(e){for(let n=0,i=this.count;n<i;n++)Xn.fromBufferAttribute(this,n),Xn.transformDirection(e),this.setXYZ(n,Xn.x,Xn.y,Xn.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let i=this.array[e*this.itemSize+n];return this.normalized&&(i=Gi(i,this.array)),i}setComponent(e,n,i){return this.normalized&&(i=St(i,this.array)),this.array[e*this.itemSize+n]=i,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=Gi(n,this.array)),n}setX(e,n){return this.normalized&&(n=St(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=Gi(n,this.array)),n}setY(e,n){return this.normalized&&(n=St(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=Gi(n,this.array)),n}setZ(e,n){return this.normalized&&(n=St(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=Gi(n,this.array)),n}setW(e,n){return this.normalized&&(n=St(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,i){return e*=this.itemSize,this.normalized&&(n=St(n,this.array),i=St(i,this.array)),this.array[e+0]=n,this.array[e+1]=i,this}setXYZ(e,n,i,r){return e*=this.itemSize,this.normalized&&(n=St(n,this.array),i=St(i,this.array),r=St(r,this.array)),this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,n,i,r,s){return e*=this.itemSize,this.normalized&&(n=St(n,this.array),i=St(i,this.array),r=St(r,this.array),s=St(s,this.array)),this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==rd&&(e.usage=this.usage),e}}class vO extends Xt{constructor(e,n,i){super(new Int8Array(e),n,i)}}class yO extends Xt{constructor(e,n,i){super(new Uint8Array(e),n,i)}}class _O extends Xt{constructor(e,n,i){super(new Uint8ClampedArray(e),n,i)}}class xO extends Xt{constructor(e,n,i){super(new Int16Array(e),n,i)}}class RS extends Xt{constructor(e,n,i){super(new Uint16Array(e),n,i)}}class SO extends Xt{constructor(e,n,i){super(new Int32Array(e),n,i)}}class PS extends Xt{constructor(e,n,i){super(new Uint32Array(e),n,i)}}class MO extends Xt{constructor(e,n,i){super(new Uint16Array(e),n,i),this.isFloat16BufferAttribute=!0}getX(e){let n=af(this.array[e*this.itemSize]);return this.normalized&&(n=Gi(n,this.array)),n}setX(e,n){return this.normalized&&(n=St(n,this.array)),this.array[e*this.itemSize]=tr(n),this}getY(e){let n=af(this.array[e*this.itemSize+1]);return this.normalized&&(n=Gi(n,this.array)),n}setY(e,n){return this.normalized&&(n=St(n,this.array)),this.array[e*this.itemSize+1]=tr(n),this}getZ(e){let n=af(this.array[e*this.itemSize+2]);return this.normalized&&(n=Gi(n,this.array)),n}setZ(e,n){return this.normalized&&(n=St(n,this.array)),this.array[e*this.itemSize+2]=tr(n),this}getW(e){let n=af(this.array[e*this.itemSize+3]);return this.normalized&&(n=Gi(n,this.array)),n}setW(e,n){return this.normalized&&(n=St(n,this.array)),this.array[e*this.itemSize+3]=tr(n),this}setXY(e,n,i){return e*=this.itemSize,this.normalized&&(n=St(n,this.array),i=St(i,this.array)),this.array[e+0]=tr(n),this.array[e+1]=tr(i),this}setXYZ(e,n,i,r){return e*=this.itemSize,this.normalized&&(n=St(n,this.array),i=St(i,this.array),r=St(r,this.array)),this.array[e+0]=tr(n),this.array[e+1]=tr(i),this.array[e+2]=tr(r),this}setXYZW(e,n,i,r,s){return e*=this.itemSize,this.normalized&&(n=St(n,this.array),i=St(i,this.array),r=St(r,this.array),s=St(s,this.array)),this.array[e+0]=tr(n),this.array[e+1]=tr(i),this.array[e+2]=tr(r),this.array[e+3]=tr(s),this}}class Xe extends Xt{constructor(e,n,i){super(new Float32Array(e),n,i)}}let wO=0;const jr=new ct,Ty=new Vt,zc=new k,xr=new ji,Wh=new ji,li=new k;class At extends Zo{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:wO++}),this.uuid=Rr(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(iP(e)?PS:RS)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,i=0){this.groups.push({start:e,count:n,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new xt().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return jr.makeRotationFromQuaternion(e),this.applyMatrix4(jr),this}rotateX(e){return jr.makeRotationX(e),this.applyMatrix4(jr),this}rotateY(e){return jr.makeRotationY(e),this.applyMatrix4(jr),this}rotateZ(e){return jr.makeRotationZ(e),this.applyMatrix4(jr),this}translate(e,n,i){return jr.makeTranslation(e,n,i),this.applyMatrix4(jr),this}scale(e,n,i){return jr.makeScale(e,n,i),this.applyMatrix4(jr),this}lookAt(e){return Ty.lookAt(e),Ty.updateMatrix(),this.applyMatrix4(Ty.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(zc).negate(),this.translate(zc.x,zc.y,zc.z),this}setFromPoints(e){const n=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];n.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Xe(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ji);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new k(-1/0,-1/0,-1/0),new k(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let i=0,r=n.length;i<r;i++){const s=n[i];xr.setFromBufferAttribute(s),this.morphTargetsRelative?(li.addVectors(this.boundingBox.min,xr.min),this.boundingBox.expandByPoint(li),li.addVectors(this.boundingBox.max,xr.max),this.boundingBox.expandByPoint(li)):(this.boundingBox.expandByPoint(xr.min),this.boundingBox.expandByPoint(xr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Li);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new k,1/0);return}if(e){const i=this.boundingSphere.center;if(xr.setFromBufferAttribute(e),n)for(let s=0,o=n.length;s<o;s++){const a=n[s];Wh.setFromBufferAttribute(a),this.morphTargetsRelative?(li.addVectors(xr.min,Wh.min),xr.expandByPoint(li),li.addVectors(xr.max,Wh.max),xr.expandByPoint(li)):(xr.expandByPoint(Wh.min),xr.expandByPoint(Wh.max))}xr.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)li.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(li));if(n)for(let s=0,o=n.length;s<o;s++){const a=n[s],u=this.morphTargetsRelative;for(let h=0,f=a.count;h<f;h++)li.fromBufferAttribute(a,h),u&&(zc.fromBufferAttribute(e,h),li.add(zc)),r=Math.max(r,i.distanceToSquared(li))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=n.position,r=n.normal,s=n.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Xt(new Float32Array(4*i.count),4));const o=this.getAttribute("tangent"),a=[],u=[];for(let N=0;N<i.count;N++)a[N]=new k,u[N]=new k;const h=new k,f=new k,d=new k,p=new he,v=new he,y=new he,w=new k,S=new k;function g(N,R,C){h.fromBufferAttribute(i,N),f.fromBufferAttribute(i,R),d.fromBufferAttribute(i,C),p.fromBufferAttribute(s,N),v.fromBufferAttribute(s,R),y.fromBufferAttribute(s,C),f.sub(h),d.sub(h),v.sub(p),y.sub(p);const O=1/(v.x*y.y-y.x*v.y);isFinite(O)&&(w.copy(f).multiplyScalar(y.y).addScaledVector(d,-v.y).multiplyScalar(O),S.copy(d).multiplyScalar(v.x).addScaledVector(f,-y.x).multiplyScalar(O),a[N].add(w),a[R].add(w),a[C].add(w),u[N].add(S),u[R].add(S),u[C].add(S))}let x=this.groups;x.length===0&&(x=[{start:0,count:e.count}]);for(let N=0,R=x.length;N<R;++N){const C=x[N],O=C.start,j=C.count;for(let H=O,J=O+j;H<J;H+=3)g(e.getX(H+0),e.getX(H+1),e.getX(H+2))}const M=new k,T=new k,P=new k,b=new k;function L(N){P.fromBufferAttribute(r,N),b.copy(P);const R=a[N];M.copy(R),M.sub(P.multiplyScalar(P.dot(R))).normalize(),T.crossVectors(b,R);const O=T.dot(u[N])<0?-1:1;o.setXYZW(N,M.x,M.y,M.z,O)}for(let N=0,R=x.length;N<R;++N){const C=x[N],O=C.start,j=C.count;for(let H=O,J=O+j;H<J;H+=3)L(e.getX(H+0)),L(e.getX(H+1)),L(e.getX(H+2))}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Xt(new Float32Array(n.count*3),3),this.setAttribute("normal",i);else for(let p=0,v=i.count;p<v;p++)i.setXYZ(p,0,0,0);const r=new k,s=new k,o=new k,a=new k,u=new k,h=new k,f=new k,d=new k;if(e)for(let p=0,v=e.count;p<v;p+=3){const y=e.getX(p+0),w=e.getX(p+1),S=e.getX(p+2);r.fromBufferAttribute(n,y),s.fromBufferAttribute(n,w),o.fromBufferAttribute(n,S),f.subVectors(o,s),d.subVectors(r,s),f.cross(d),a.fromBufferAttribute(i,y),u.fromBufferAttribute(i,w),h.fromBufferAttribute(i,S),a.add(f),u.add(f),h.add(f),i.setXYZ(y,a.x,a.y,a.z),i.setXYZ(w,u.x,u.y,u.z),i.setXYZ(S,h.x,h.y,h.z)}else for(let p=0,v=n.count;p<v;p+=3)r.fromBufferAttribute(n,p+0),s.fromBufferAttribute(n,p+1),o.fromBufferAttribute(n,p+2),f.subVectors(o,s),d.subVectors(r,s),f.cross(d),i.setXYZ(p+0,f.x,f.y,f.z),i.setXYZ(p+1,f.x,f.y,f.z),i.setXYZ(p+2,f.x,f.y,f.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,i=e.count;n<i;n++)li.fromBufferAttribute(e,n),li.normalize(),e.setXYZ(n,li.x,li.y,li.z)}toNonIndexed(){function e(a,u){const h=a.array,f=a.itemSize,d=a.normalized,p=new h.constructor(u.length*f);let v=0,y=0;for(let w=0,S=u.length;w<S;w++){a.isInterleavedBufferAttribute?v=u[w]*a.data.stride+a.offset:v=u[w]*f;for(let g=0;g<f;g++)p[y++]=h[v++]}return new Xt(p,f,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new At,i=this.index.array,r=this.attributes;for(const a in r){const u=r[a],h=e(u,i);n.setAttribute(a,h)}const s=this.morphAttributes;for(const a in s){const u=[],h=s[a];for(let f=0,d=h.length;f<d;f++){const p=h[f],v=e(p,i);u.push(v)}n.morphAttributes[a]=u}n.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,u=o.length;a<u;a++){const h=o[a];n.addGroup(h.start,h.count,h.materialIndex)}return n}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const u=this.parameters;for(const h in u)u[h]!==void 0&&(e[h]=u[h]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const i=this.attributes;for(const u in i){const h=i[u];e.data.attributes[u]=h.toJSON(e.data)}const r={};let s=!1;for(const u in this.morphAttributes){const h=this.morphAttributes[u],f=[];for(let d=0,p=h.length;d<p;d++){const v=h[d];f.push(v.toJSON(e.data))}f.length>0&&(r[u]=f,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(n));const r=e.attributes;for(const h in r){const f=r[h];this.setAttribute(h,f.clone(n))}const s=e.morphAttributes;for(const h in s){const f=[],d=s[h];for(let p=0,v=d.length;p<v;p++)f.push(d[p].clone(n));this.morphAttributes[h]=f}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let h=0,f=o.length;h<f;h++){const d=o[h];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const u=e.boundingSphere;return u!==null&&(this.boundingSphere=u.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const rT=new ct,pl=new lc,hm=new Li,sT=new k,Bc=new k,Hc=new k,Vc=new k,Ay=new k,fm=new k,dm=new he,pm=new he,mm=new he,oT=new k,aT=new k,lT=new k,gm=new k,vm=new k;class Zn extends Vt{constructor(e=new At,n=new Ka){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,n){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;n.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){fm.set(0,0,0);for(let u=0,h=s.length;u<h;u++){const f=a[u],d=s[u];f!==0&&(Ay.fromBufferAttribute(d,e),o?fm.addScaledVector(Ay,f):fm.addScaledVector(Ay.sub(n),f))}n.add(fm)}return n}raycast(e,n){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),hm.copy(i.boundingSphere),hm.applyMatrix4(s),pl.copy(e.ray).recast(e.near),!(hm.containsPoint(pl.origin)===!1&&(pl.intersectSphere(hm,sT)===null||pl.origin.distanceToSquared(sT)>(e.far-e.near)**2))&&(rT.copy(s).invert(),pl.copy(e.ray).applyMatrix4(rT),!(i.boundingBox!==null&&pl.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,n,pl)))}_computeIntersections(e,n,i){let r;const s=this.geometry,o=this.material,a=s.index,u=s.attributes.position,h=s.attributes.uv,f=s.attributes.uv1,d=s.attributes.normal,p=s.groups,v=s.drawRange;if(a!==null)if(Array.isArray(o))for(let y=0,w=p.length;y<w;y++){const S=p[y],g=o[S.materialIndex],x=Math.max(S.start,v.start),M=Math.min(a.count,Math.min(S.start+S.count,v.start+v.count));for(let T=x,P=M;T<P;T+=3){const b=a.getX(T),L=a.getX(T+1),N=a.getX(T+2);r=ym(this,g,e,i,h,f,d,b,L,N),r&&(r.faceIndex=Math.floor(T/3),r.face.materialIndex=S.materialIndex,n.push(r))}}else{const y=Math.max(0,v.start),w=Math.min(a.count,v.start+v.count);for(let S=y,g=w;S<g;S+=3){const x=a.getX(S),M=a.getX(S+1),T=a.getX(S+2);r=ym(this,o,e,i,h,f,d,x,M,T),r&&(r.faceIndex=Math.floor(S/3),n.push(r))}}else if(u!==void 0)if(Array.isArray(o))for(let y=0,w=p.length;y<w;y++){const S=p[y],g=o[S.materialIndex],x=Math.max(S.start,v.start),M=Math.min(u.count,Math.min(S.start+S.count,v.start+v.count));for(let T=x,P=M;T<P;T+=3){const b=T,L=T+1,N=T+2;r=ym(this,g,e,i,h,f,d,b,L,N),r&&(r.faceIndex=Math.floor(T/3),r.face.materialIndex=S.materialIndex,n.push(r))}}else{const y=Math.max(0,v.start),w=Math.min(u.count,v.start+v.count);for(let S=y,g=w;S<g;S+=3){const x=S,M=S+1,T=S+2;r=ym(this,o,e,i,h,f,d,x,M,T),r&&(r.faceIndex=Math.floor(S/3),n.push(r))}}}}function EO(t,e,n,i,r,s,o,a){let u;if(e.side===Xi?u=i.intersectTriangle(o,s,r,!0,a):u=i.intersectTriangle(r,s,o,e.side===Wo,a),u===null)return null;vm.copy(a),vm.applyMatrix4(t.matrixWorld);const h=n.ray.origin.distanceTo(vm);return h<n.near||h>n.far?null:{distance:h,point:vm.clone(),object:t}}function ym(t,e,n,i,r,s,o,a,u,h){t.getVertexPosition(a,Bc),t.getVertexPosition(u,Hc),t.getVertexPosition(h,Vc);const f=EO(t,e,n,i,Bc,Hc,Vc,gm);if(f){r&&(dm.fromBufferAttribute(r,a),pm.fromBufferAttribute(r,u),mm.fromBufferAttribute(r,h),f.uv=Ar.getInterpolation(gm,Bc,Hc,Vc,dm,pm,mm,new he)),s&&(dm.fromBufferAttribute(s,a),pm.fromBufferAttribute(s,u),mm.fromBufferAttribute(s,h),f.uv1=Ar.getInterpolation(gm,Bc,Hc,Vc,dm,pm,mm,new he)),o&&(oT.fromBufferAttribute(o,a),aT.fromBufferAttribute(o,u),lT.fromBufferAttribute(o,h),f.normal=Ar.getInterpolation(gm,Bc,Hc,Vc,oT,aT,lT,new k),f.normal.dot(i.direction)>0&&f.normal.multiplyScalar(-1));const d={a,b:u,c:h,normal:new k,materialIndex:0};Ar.getNormal(Bc,Hc,Vc,d.normal),f.face=d}return f}class cc extends At{constructor(e=1,n=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const u=[],h=[],f=[],d=[];let p=0,v=0;y("z","y","x",-1,-1,i,n,e,o,s,0),y("z","y","x",1,-1,i,n,-e,o,s,1),y("x","z","y",1,1,e,i,n,r,o,2),y("x","z","y",1,-1,e,i,-n,r,o,3),y("x","y","z",1,-1,e,n,i,r,s,4),y("x","y","z",-1,-1,e,n,-i,r,s,5),this.setIndex(u),this.setAttribute("position",new Xe(h,3)),this.setAttribute("normal",new Xe(f,3)),this.setAttribute("uv",new Xe(d,2));function y(w,S,g,x,M,T,P,b,L,N,R){const C=T/L,O=P/N,j=T/2,H=P/2,J=b/2,ne=L+1,fe=N+1;let ve=0,U=0;const X=new k;for(let V=0;V<fe;V++){const re=V*O-H;for(let we=0;we<ne;we++){const Be=we*C-j;X[w]=Be*x,X[S]=re*M,X[g]=J,h.push(X.x,X.y,X.z),X[w]=0,X[S]=0,X[g]=b>0?1:-1,f.push(X.x,X.y,X.z),d.push(we/L),d.push(1-V/N),ve+=1}}for(let V=0;V<N;V++)for(let re=0;re<L;re++){const we=p+re+ne*V,Be=p+re+ne*(V+1),ee=p+(re+1)+ne*(V+1),xe=p+(re+1)+ne*V;u.push(we,Be,xe),u.push(Be,ee,xe),U+=6}a.addGroup(v,U,R),v+=U,p+=ve}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new cc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function zu(t){const e={};for(const n in t){e[n]={};for(const i in t[n]){const r=t[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][i]=null):e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}}return e}function Hi(t){const e={};for(let n=0;n<t.length;n++){const i=zu(t[n]);for(const r in i)e[r]=i[r]}return e}function TO(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function cP(t){const e=t.getRenderTarget();return e===null?t.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Yt.workingColorSpace}const uP={clone:zu,merge:Hi};var AO=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,CO=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Cs extends ki{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=AO,this.fragmentShader=CO,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=zu(e.uniforms),this.uniformsGroups=TO(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?n.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?n.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?n.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?n.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?n.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?n.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?n.uniforms[r]={type:"m4",value:o.toArray()}:n.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(n.extensions=i),n}}let Ad=class extends Vt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ct,this.projectionMatrix=new ct,this.projectionMatrixInverse=new ct,this.coordinateSystem=Ks}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}};const da=new k,cT=new he,uT=new he;class Fn extends Ad{constructor(e=50,n=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=Fu*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Gl*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Fu*2*Math.atan(Math.tan(Gl*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,n,i){da.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(da.x,da.y).multiplyScalar(-e/da.z),da.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(da.x,da.y).multiplyScalar(-e/da.z)}getViewSize(e,n){return this.getViewBounds(e,cT,uT),n.subVectors(uT,cT)}setViewOffset(e,n,i,r,s,o){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(Gl*.5*this.fov)/this.zoom,i=2*n,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const u=o.fullWidth,h=o.fullHeight;s+=o.offsetX*r/u,n-=o.offsetY*i/h,r*=o.width/u,i*=o.height/h}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,n,n-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const Gc=-90,Wc=1;class hP extends Vt{constructor(e,n,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new Fn(Gc,Wc,e,n);r.layers=this.layers,this.add(r);const s=new Fn(Gc,Wc,e,n);s.layers=this.layers,this.add(s);const o=new Fn(Gc,Wc,e,n);o.layers=this.layers,this.add(o);const a=new Fn(Gc,Wc,e,n);a.layers=this.layers,this.add(a);const u=new Fn(Gc,Wc,e,n);u.layers=this.layers,this.add(u);const h=new Fn(Gc,Wc,e,n);h.layers=this.layers,this.add(h)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[i,r,s,o,a,u]=n;for(const h of n)this.remove(h);if(e===Ks)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),u.up.set(0,1,0),u.lookAt(0,0,-1);else if(e===sd)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),u.up.set(0,-1,0),u.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const h of n)this.add(h),h.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,u,h,f]=this.children,d=e.getRenderTarget(),p=e.getActiveCubeFace(),v=e.getActiveMipmapLevel(),y=e.xr.enabled;e.xr.enabled=!1;const w=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(n,s),e.setRenderTarget(i,1,r),e.render(n,o),e.setRenderTarget(i,2,r),e.render(n,a),e.setRenderTarget(i,3,r),e.render(n,u),e.setRenderTarget(i,4,r),e.render(n,h),i.texture.generateMipmaps=w,e.setRenderTarget(i,5,r),e.render(n,f),e.setRenderTarget(d,p,v),e.xr.enabled=y,i.texture.needsPMREMUpdate=!0}}class Cd extends Ln{constructor(e,n,i,r,s,o,a,u,h,f){e=e!==void 0?e:[],n=n!==void 0?n:Xo,super(e,n,i,r,s,o,a,u,h,f),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class fP extends As{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new Cd(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:qn}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new cc(5,5,5),s=new Cs({name:"CubemapFromEquirect",uniforms:zu(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Xi,blending:Uo});s.uniforms.tEquirect.value=n;const o=new Zn(r,s),a=n.minFilter;return n.minFilter===Zs&&(n.minFilter=qn),new hP(1,10,this).update(e,o),n.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,n,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(n,i,r);e.setRenderTarget(s)}}const Cy=new k,bO=new k,RO=new xt;class Co{constructor(e=new k(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,i,r){return this.normal.set(e,n,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,i){const r=Cy.subVectors(i,n).cross(bO.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const i=e.delta(Cy),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:n.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const n=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return n<0&&i>0||i<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const i=n||RO.getNormalMatrix(e),r=this.coplanarPoint(Cy).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const ml=new Li,_m=new k;class bd{constructor(e=new Co,n=new Co,i=new Co,r=new Co,s=new Co,o=new Co){this.planes=[e,n,i,r,s,o]}set(e,n,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(n),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const n=this.planes;for(let i=0;i<6;i++)n[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,n=Ks){const i=this.planes,r=e.elements,s=r[0],o=r[1],a=r[2],u=r[3],h=r[4],f=r[5],d=r[6],p=r[7],v=r[8],y=r[9],w=r[10],S=r[11],g=r[12],x=r[13],M=r[14],T=r[15];if(i[0].setComponents(u-s,p-h,S-v,T-g).normalize(),i[1].setComponents(u+s,p+h,S+v,T+g).normalize(),i[2].setComponents(u+o,p+f,S+y,T+x).normalize(),i[3].setComponents(u-o,p-f,S-y,T-x).normalize(),i[4].setComponents(u-a,p-d,S-w,T-M).normalize(),n===Ks)i[5].setComponents(u+a,p+d,S+w,T+M).normalize();else if(n===sd)i[5].setComponents(a,d,w,M).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),ml.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),ml.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(ml)}intersectsSprite(e){return ml.center.set(0,0,0),ml.radius=.7071067811865476,ml.applyMatrix4(e.matrixWorld),this.intersectsSphere(ml)}intersectsSphere(e){const n=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(n[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const n=this.planes;for(let i=0;i<6;i++){const r=n[i];if(_m.x=r.normal.x>0?e.max.x:e.min.x,_m.y=r.normal.y>0?e.max.y:e.min.y,_m.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(_m)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let i=0;i<6;i++)if(n[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function dP(){let t=null,e=!1,n=null,i=null;function r(s,o){n(s,o),i=t.requestAnimationFrame(r)}return{start:function(){e!==!0&&n!==null&&(i=t.requestAnimationFrame(r),e=!0)},stop:function(){t.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){n=s},setContext:function(s){t=s}}}function PO(t){const e=new WeakMap;function n(a,u){const h=a.array,f=a.usage,d=h.byteLength,p=t.createBuffer();t.bindBuffer(u,p),t.bufferData(u,h,f),a.onUploadCallback();let v;if(h instanceof Float32Array)v=t.FLOAT;else if(h instanceof Uint16Array)a.isFloat16BufferAttribute?v=t.HALF_FLOAT:v=t.UNSIGNED_SHORT;else if(h instanceof Int16Array)v=t.SHORT;else if(h instanceof Uint32Array)v=t.UNSIGNED_INT;else if(h instanceof Int32Array)v=t.INT;else if(h instanceof Int8Array)v=t.BYTE;else if(h instanceof Uint8Array)v=t.UNSIGNED_BYTE;else if(h instanceof Uint8ClampedArray)v=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);return{buffer:p,type:v,bytesPerElement:h.BYTES_PER_ELEMENT,version:a.version,size:d}}function i(a,u,h){const f=u.array,d=u._updateRange,p=u.updateRanges;if(t.bindBuffer(h,a),d.count===-1&&p.length===0&&t.bufferSubData(h,0,f),p.length!==0){for(let v=0,y=p.length;v<y;v++){const w=p[v];t.bufferSubData(h,w.start*f.BYTES_PER_ELEMENT,f,w.start,w.count)}u.clearUpdateRanges()}d.count!==-1&&(t.bufferSubData(h,d.offset*f.BYTES_PER_ELEMENT,f,d.offset,d.count),d.count=-1),u.onUploadCallback()}function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const u=e.get(a);u&&(t.deleteBuffer(u.buffer),e.delete(a))}function o(a,u){if(a.isGLBufferAttribute){const f=e.get(a);(!f||f.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}a.isInterleavedBufferAttribute&&(a=a.data);const h=e.get(a);if(h===void 0)e.set(a,n(a,u));else if(h.version<a.version){if(h.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(h.buffer,a,u),h.version=a.version}}return{get:r,remove:s,update:o}}class nh extends At{constructor(e=1,n=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:i,heightSegments:r};const s=e/2,o=n/2,a=Math.floor(i),u=Math.floor(r),h=a+1,f=u+1,d=e/a,p=n/u,v=[],y=[],w=[],S=[];for(let g=0;g<f;g++){const x=g*p-o;for(let M=0;M<h;M++){const T=M*d-s;y.push(T,-x,0),w.push(0,0,1),S.push(M/a),S.push(1-g/u)}}for(let g=0;g<u;g++)for(let x=0;x<a;x++){const M=x+h*g,T=x+h*(g+1),P=x+1+h*(g+1),b=x+1+h*g;v.push(M,T,b),v.push(T,P,b)}this.setIndex(v),this.setAttribute("position",new Xe(y,3)),this.setAttribute("normal",new Xe(w,3)),this.setAttribute("uv",new Xe(S,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new nh(e.width,e.height,e.widthSegments,e.heightSegments)}}var LO=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,IO=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,NO=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,DO=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,kO=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,UO=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,OO=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,FO=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,zO=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,BO=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,HO=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,VO=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,GO=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,WO=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,XO=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,jO=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,YO=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,$O=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,qO=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,ZO=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,KO=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,JO=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,QO=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,e6=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,t6=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,n6=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,i6=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,r6=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,s6=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,o6=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,a6="gl_FragColor = linearToOutputTexel( gl_FragColor );",l6=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,c6=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,u6=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,h6=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,f6=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,d6=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,p6=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,m6=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,g6=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,v6=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,y6=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,_6=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,x6=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,S6=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,M6=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,w6=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,E6=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,T6=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,A6=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,C6=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,b6=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,R6=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,P6=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,L6=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,I6=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,N6=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,D6=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,k6=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,U6=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,O6=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,F6=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,z6=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,B6=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,H6=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,V6=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,G6=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[MORPHTARGETS_COUNT];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,W6=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,X6=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,j6=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
	#endif
	#ifdef MORPHTARGETS_TEXTURE
		#ifndef USE_INSTANCING_MORPH
			uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		#endif
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,Y6=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,$6=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,q6=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Z6=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,K6=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,J6=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Q6=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,eF=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,tF=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,nF=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,iF=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,rF=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,sF=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,oF=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,aF=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,lF=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,cF=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,uF=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,hF=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,fF=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return shadow;
	}
#endif`,dF=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,pF=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,mF=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,gF=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,vF=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,yF=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,_F=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,xF=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,SF=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,MF=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,wF=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,EF=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,TF=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,AF=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,CF=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,bF=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,RF=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const PF=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,LF=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,IF=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,NF=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,DF=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,kF=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,UF=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,OF=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,FF=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,zF=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,BF=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,HF=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,VF=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,GF=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,WF=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,XF=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,jF=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,YF=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$F=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,qF=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ZF=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,KF=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,JF=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,QF=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,e8=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,t8=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,n8=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,i8=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,r8=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,s8=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,o8=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,a8=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,l8=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,c8=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Et={alphahash_fragment:LO,alphahash_pars_fragment:IO,alphamap_fragment:NO,alphamap_pars_fragment:DO,alphatest_fragment:kO,alphatest_pars_fragment:UO,aomap_fragment:OO,aomap_pars_fragment:FO,batching_pars_vertex:zO,batching_vertex:BO,begin_vertex:HO,beginnormal_vertex:VO,bsdfs:GO,iridescence_fragment:WO,bumpmap_pars_fragment:XO,clipping_planes_fragment:jO,clipping_planes_pars_fragment:YO,clipping_planes_pars_vertex:$O,clipping_planes_vertex:qO,color_fragment:ZO,color_pars_fragment:KO,color_pars_vertex:JO,color_vertex:QO,common:e6,cube_uv_reflection_fragment:t6,defaultnormal_vertex:n6,displacementmap_pars_vertex:i6,displacementmap_vertex:r6,emissivemap_fragment:s6,emissivemap_pars_fragment:o6,colorspace_fragment:a6,colorspace_pars_fragment:l6,envmap_fragment:c6,envmap_common_pars_fragment:u6,envmap_pars_fragment:h6,envmap_pars_vertex:f6,envmap_physical_pars_fragment:w6,envmap_vertex:d6,fog_vertex:p6,fog_pars_vertex:m6,fog_fragment:g6,fog_pars_fragment:v6,gradientmap_pars_fragment:y6,lightmap_pars_fragment:_6,lights_lambert_fragment:x6,lights_lambert_pars_fragment:S6,lights_pars_begin:M6,lights_toon_fragment:E6,lights_toon_pars_fragment:T6,lights_phong_fragment:A6,lights_phong_pars_fragment:C6,lights_physical_fragment:b6,lights_physical_pars_fragment:R6,lights_fragment_begin:P6,lights_fragment_maps:L6,lights_fragment_end:I6,logdepthbuf_fragment:N6,logdepthbuf_pars_fragment:D6,logdepthbuf_pars_vertex:k6,logdepthbuf_vertex:U6,map_fragment:O6,map_pars_fragment:F6,map_particle_fragment:z6,map_particle_pars_fragment:B6,metalnessmap_fragment:H6,metalnessmap_pars_fragment:V6,morphinstance_vertex:G6,morphcolor_vertex:W6,morphnormal_vertex:X6,morphtarget_pars_vertex:j6,morphtarget_vertex:Y6,normal_fragment_begin:$6,normal_fragment_maps:q6,normal_pars_fragment:Z6,normal_pars_vertex:K6,normal_vertex:J6,normalmap_pars_fragment:Q6,clearcoat_normal_fragment_begin:eF,clearcoat_normal_fragment_maps:tF,clearcoat_pars_fragment:nF,iridescence_pars_fragment:iF,opaque_fragment:rF,packing:sF,premultiplied_alpha_fragment:oF,project_vertex:aF,dithering_fragment:lF,dithering_pars_fragment:cF,roughnessmap_fragment:uF,roughnessmap_pars_fragment:hF,shadowmap_pars_fragment:fF,shadowmap_pars_vertex:dF,shadowmap_vertex:pF,shadowmask_pars_fragment:mF,skinbase_vertex:gF,skinning_pars_vertex:vF,skinning_vertex:yF,skinnormal_vertex:_F,specularmap_fragment:xF,specularmap_pars_fragment:SF,tonemapping_fragment:MF,tonemapping_pars_fragment:wF,transmission_fragment:EF,transmission_pars_fragment:TF,uv_pars_fragment:AF,uv_pars_vertex:CF,uv_vertex:bF,worldpos_vertex:RF,background_vert:PF,background_frag:LF,backgroundCube_vert:IF,backgroundCube_frag:NF,cube_vert:DF,cube_frag:kF,depth_vert:UF,depth_frag:OF,distanceRGBA_vert:FF,distanceRGBA_frag:zF,equirect_vert:BF,equirect_frag:HF,linedashed_vert:VF,linedashed_frag:GF,meshbasic_vert:WF,meshbasic_frag:XF,meshlambert_vert:jF,meshlambert_frag:YF,meshmatcap_vert:$F,meshmatcap_frag:qF,meshnormal_vert:ZF,meshnormal_frag:KF,meshphong_vert:JF,meshphong_frag:QF,meshphysical_vert:e8,meshphysical_frag:t8,meshtoon_vert:n8,meshtoon_frag:i8,points_vert:r8,points_frag:s8,shadow_vert:o8,shadow_frag:a8,sprite_vert:l8,sprite_frag:c8},De={common:{diffuse:{value:new ze(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new xt},alphaMap:{value:null},alphaMapTransform:{value:new xt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new xt}},envmap:{envMap:{value:null},envMapRotation:{value:new xt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new xt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new xt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new xt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new xt},normalScale:{value:new he(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new xt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new xt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new xt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new xt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ze(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ze(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new xt},alphaTest:{value:0},uvTransform:{value:new xt}},sprite:{diffuse:{value:new ze(16777215)},opacity:{value:1},center:{value:new he(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new xt},alphaMap:{value:null},alphaMapTransform:{value:new xt},alphaTest:{value:0}}},Ms={basic:{uniforms:Hi([De.common,De.specularmap,De.envmap,De.aomap,De.lightmap,De.fog]),vertexShader:Et.meshbasic_vert,fragmentShader:Et.meshbasic_frag},lambert:{uniforms:Hi([De.common,De.specularmap,De.envmap,De.aomap,De.lightmap,De.emissivemap,De.bumpmap,De.normalmap,De.displacementmap,De.fog,De.lights,{emissive:{value:new ze(0)}}]),vertexShader:Et.meshlambert_vert,fragmentShader:Et.meshlambert_frag},phong:{uniforms:Hi([De.common,De.specularmap,De.envmap,De.aomap,De.lightmap,De.emissivemap,De.bumpmap,De.normalmap,De.displacementmap,De.fog,De.lights,{emissive:{value:new ze(0)},specular:{value:new ze(1118481)},shininess:{value:30}}]),vertexShader:Et.meshphong_vert,fragmentShader:Et.meshphong_frag},standard:{uniforms:Hi([De.common,De.envmap,De.aomap,De.lightmap,De.emissivemap,De.bumpmap,De.normalmap,De.displacementmap,De.roughnessmap,De.metalnessmap,De.fog,De.lights,{emissive:{value:new ze(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Et.meshphysical_vert,fragmentShader:Et.meshphysical_frag},toon:{uniforms:Hi([De.common,De.aomap,De.lightmap,De.emissivemap,De.bumpmap,De.normalmap,De.displacementmap,De.gradientmap,De.fog,De.lights,{emissive:{value:new ze(0)}}]),vertexShader:Et.meshtoon_vert,fragmentShader:Et.meshtoon_frag},matcap:{uniforms:Hi([De.common,De.bumpmap,De.normalmap,De.displacementmap,De.fog,{matcap:{value:null}}]),vertexShader:Et.meshmatcap_vert,fragmentShader:Et.meshmatcap_frag},points:{uniforms:Hi([De.points,De.fog]),vertexShader:Et.points_vert,fragmentShader:Et.points_frag},dashed:{uniforms:Hi([De.common,De.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Et.linedashed_vert,fragmentShader:Et.linedashed_frag},depth:{uniforms:Hi([De.common,De.displacementmap]),vertexShader:Et.depth_vert,fragmentShader:Et.depth_frag},normal:{uniforms:Hi([De.common,De.bumpmap,De.normalmap,De.displacementmap,{opacity:{value:1}}]),vertexShader:Et.meshnormal_vert,fragmentShader:Et.meshnormal_frag},sprite:{uniforms:Hi([De.sprite,De.fog]),vertexShader:Et.sprite_vert,fragmentShader:Et.sprite_frag},background:{uniforms:{uvTransform:{value:new xt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Et.background_vert,fragmentShader:Et.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new xt}},vertexShader:Et.backgroundCube_vert,fragmentShader:Et.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Et.cube_vert,fragmentShader:Et.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Et.equirect_vert,fragmentShader:Et.equirect_frag},distanceRGBA:{uniforms:Hi([De.common,De.displacementmap,{referencePosition:{value:new k},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Et.distanceRGBA_vert,fragmentShader:Et.distanceRGBA_frag},shadow:{uniforms:Hi([De.lights,De.fog,{color:{value:new ze(0)},opacity:{value:1}}]),vertexShader:Et.shadow_vert,fragmentShader:Et.shadow_frag}};Ms.physical={uniforms:Hi([Ms.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new xt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new xt},clearcoatNormalScale:{value:new he(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new xt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new xt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new xt},sheen:{value:0},sheenColor:{value:new ze(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new xt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new xt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new xt},transmissionSamplerSize:{value:new he},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new xt},attenuationDistance:{value:0},attenuationColor:{value:new ze(0)},specularColor:{value:new ze(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new xt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new xt},anisotropyVector:{value:new he},anisotropyMap:{value:null},anisotropyMapTransform:{value:new xt}}]),vertexShader:Et.meshphysical_vert,fragmentShader:Et.meshphysical_frag};const xm={r:0,b:0,g:0},gl=new Lr,u8=new ct;function h8(t,e,n,i,r,s,o){const a=new ze(0);let u=s===!0?0:1,h,f,d=null,p=0,v=null;function y(x){let M=x.isScene===!0?x.background:null;return M&&M.isTexture&&(M=(x.backgroundBlurriness>0?n:e).get(M)),M}function w(x){let M=!1;const T=y(x);T===null?g(a,u):T&&T.isColor&&(g(T,1),M=!0);const P=t.xr.getEnvironmentBlendMode();P==="additive"?i.buffers.color.setClear(0,0,0,1,o):P==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,o),(t.autoClear||M)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil)}function S(x,M){const T=y(M);T&&(T.isCubeTexture||T.mapping===eh)?(f===void 0&&(f=new Zn(new cc(1,1,1),new Cs({name:"BackgroundCubeMaterial",uniforms:zu(Ms.backgroundCube.uniforms),vertexShader:Ms.backgroundCube.vertexShader,fragmentShader:Ms.backgroundCube.fragmentShader,side:Xi,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),f.geometry.deleteAttribute("uv"),f.onBeforeRender=function(P,b,L){this.matrixWorld.copyPosition(L.matrixWorld)},Object.defineProperty(f.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(f)),gl.copy(M.backgroundRotation),gl.x*=-1,gl.y*=-1,gl.z*=-1,T.isCubeTexture&&T.isRenderTargetTexture===!1&&(gl.y*=-1,gl.z*=-1),f.material.uniforms.envMap.value=T,f.material.uniforms.flipEnvMap.value=T.isCubeTexture&&T.isRenderTargetTexture===!1?-1:1,f.material.uniforms.backgroundBlurriness.value=M.backgroundBlurriness,f.material.uniforms.backgroundIntensity.value=M.backgroundIntensity,f.material.uniforms.backgroundRotation.value.setFromMatrix4(u8.makeRotationFromEuler(gl)),f.material.toneMapped=Yt.getTransfer(T.colorSpace)!==en,(d!==T||p!==T.version||v!==t.toneMapping)&&(f.material.needsUpdate=!0,d=T,p=T.version,v=t.toneMapping),f.layers.enableAll(),x.unshift(f,f.geometry,f.material,0,0,null)):T&&T.isTexture&&(h===void 0&&(h=new Zn(new nh(2,2),new Cs({name:"BackgroundMaterial",uniforms:zu(Ms.background.uniforms),vertexShader:Ms.background.vertexShader,fragmentShader:Ms.background.fragmentShader,side:Wo,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),Object.defineProperty(h.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(h)),h.material.uniforms.t2D.value=T,h.material.uniforms.backgroundIntensity.value=M.backgroundIntensity,h.material.toneMapped=Yt.getTransfer(T.colorSpace)!==en,T.matrixAutoUpdate===!0&&T.updateMatrix(),h.material.uniforms.uvTransform.value.copy(T.matrix),(d!==T||p!==T.version||v!==t.toneMapping)&&(h.material.needsUpdate=!0,d=T,p=T.version,v=t.toneMapping),h.layers.enableAll(),x.unshift(h,h.geometry,h.material,0,0,null))}function g(x,M){x.getRGB(xm,cP(t)),i.buffers.color.setClear(xm.r,xm.g,xm.b,M,o)}return{getClearColor:function(){return a},setClearColor:function(x,M=1){a.set(x),u=M,g(a,u)},getClearAlpha:function(){return u},setClearAlpha:function(x){u=x,g(a,u)},render:w,addToRenderList:S}}function f8(t,e){const n=t.getParameter(t.MAX_VERTEX_ATTRIBS),i={},r=p(null);let s=r,o=!1;function a(C,O,j,H,J){let ne=!1;const fe=d(H,j,O);s!==fe&&(s=fe,h(s.object)),ne=v(C,H,j,J),ne&&y(C,H,j,J),J!==null&&e.update(J,t.ELEMENT_ARRAY_BUFFER),(ne||o)&&(o=!1,T(C,O,j,H),J!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.get(J).buffer))}function u(){return t.createVertexArray()}function h(C){return t.bindVertexArray(C)}function f(C){return t.deleteVertexArray(C)}function d(C,O,j){const H=j.wireframe===!0;let J=i[C.id];J===void 0&&(J={},i[C.id]=J);let ne=J[O.id];ne===void 0&&(ne={},J[O.id]=ne);let fe=ne[H];return fe===void 0&&(fe=p(u()),ne[H]=fe),fe}function p(C){const O=[],j=[],H=[];for(let J=0;J<n;J++)O[J]=0,j[J]=0,H[J]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:O,enabledAttributes:j,attributeDivisors:H,object:C,attributes:{},index:null}}function v(C,O,j,H){const J=s.attributes,ne=O.attributes;let fe=0;const ve=j.getAttributes();for(const U in ve)if(ve[U].location>=0){const V=J[U];let re=ne[U];if(re===void 0&&(U==="instanceMatrix"&&C.instanceMatrix&&(re=C.instanceMatrix),U==="instanceColor"&&C.instanceColor&&(re=C.instanceColor)),V===void 0||V.attribute!==re||re&&V.data!==re.data)return!0;fe++}return s.attributesNum!==fe||s.index!==H}function y(C,O,j,H){const J={},ne=O.attributes;let fe=0;const ve=j.getAttributes();for(const U in ve)if(ve[U].location>=0){let V=ne[U];V===void 0&&(U==="instanceMatrix"&&C.instanceMatrix&&(V=C.instanceMatrix),U==="instanceColor"&&C.instanceColor&&(V=C.instanceColor));const re={};re.attribute=V,V&&V.data&&(re.data=V.data),J[U]=re,fe++}s.attributes=J,s.attributesNum=fe,s.index=H}function w(){const C=s.newAttributes;for(let O=0,j=C.length;O<j;O++)C[O]=0}function S(C){g(C,0)}function g(C,O){const j=s.newAttributes,H=s.enabledAttributes,J=s.attributeDivisors;j[C]=1,H[C]===0&&(t.enableVertexAttribArray(C),H[C]=1),J[C]!==O&&(t.vertexAttribDivisor(C,O),J[C]=O)}function x(){const C=s.newAttributes,O=s.enabledAttributes;for(let j=0,H=O.length;j<H;j++)O[j]!==C[j]&&(t.disableVertexAttribArray(j),O[j]=0)}function M(C,O,j,H,J,ne,fe){fe===!0?t.vertexAttribIPointer(C,O,j,J,ne):t.vertexAttribPointer(C,O,j,H,J,ne)}function T(C,O,j,H){w();const J=H.attributes,ne=j.getAttributes(),fe=O.defaultAttributeValues;for(const ve in ne){const U=ne[ve];if(U.location>=0){let X=J[ve];if(X===void 0&&(ve==="instanceMatrix"&&C.instanceMatrix&&(X=C.instanceMatrix),ve==="instanceColor"&&C.instanceColor&&(X=C.instanceColor)),X!==void 0){const V=X.normalized,re=X.itemSize,we=e.get(X);if(we===void 0)continue;const Be=we.buffer,ee=we.type,xe=we.bytesPerElement,Ce=ee===t.INT||ee===t.UNSIGNED_INT||X.gpuType===yS;if(X.isInterleavedBufferAttribute){const Me=X.data,ft=Me.stride,vt=X.offset;if(Me.isInstancedInterleavedBuffer){for(let $=0;$<U.locationSize;$++)g(U.location+$,Me.meshPerAttribute);C.isInstancedMesh!==!0&&H._maxInstanceCount===void 0&&(H._maxInstanceCount=Me.meshPerAttribute*Me.count)}else for(let $=0;$<U.locationSize;$++)S(U.location+$);t.bindBuffer(t.ARRAY_BUFFER,Be);for(let $=0;$<U.locationSize;$++)M(U.location+$,re/U.locationSize,ee,V,ft*xe,(vt+re/U.locationSize*$)*xe,Ce)}else{if(X.isInstancedBufferAttribute){for(let Me=0;Me<U.locationSize;Me++)g(U.location+Me,X.meshPerAttribute);C.isInstancedMesh!==!0&&H._maxInstanceCount===void 0&&(H._maxInstanceCount=X.meshPerAttribute*X.count)}else for(let Me=0;Me<U.locationSize;Me++)S(U.location+Me);t.bindBuffer(t.ARRAY_BUFFER,Be);for(let Me=0;Me<U.locationSize;Me++)M(U.location+Me,re/U.locationSize,ee,V,re*xe,re/U.locationSize*Me*xe,Ce)}}else if(fe!==void 0){const V=fe[ve];if(V!==void 0)switch(V.length){case 2:t.vertexAttrib2fv(U.location,V);break;case 3:t.vertexAttrib3fv(U.location,V);break;case 4:t.vertexAttrib4fv(U.location,V);break;default:t.vertexAttrib1fv(U.location,V)}}}}x()}function P(){N();for(const C in i){const O=i[C];for(const j in O){const H=O[j];for(const J in H)f(H[J].object),delete H[J];delete O[j]}delete i[C]}}function b(C){if(i[C.id]===void 0)return;const O=i[C.id];for(const j in O){const H=O[j];for(const J in H)f(H[J].object),delete H[J];delete O[j]}delete i[C.id]}function L(C){for(const O in i){const j=i[O];if(j[C.id]===void 0)continue;const H=j[C.id];for(const J in H)f(H[J].object),delete H[J];delete j[C.id]}}function N(){R(),o=!0,s!==r&&(s=r,h(s.object))}function R(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:a,reset:N,resetDefaultState:R,dispose:P,releaseStatesOfGeometry:b,releaseStatesOfProgram:L,initAttributes:w,enableAttribute:S,disableUnusedAttributes:x}}function d8(t,e,n){let i;function r(h){i=h}function s(h,f){t.drawArrays(i,h,f),n.update(f,i,1)}function o(h,f,d){d!==0&&(t.drawArraysInstanced(i,h,f,d),n.update(f,i,d))}function a(h,f,d){if(d===0)return;const p=e.get("WEBGL_multi_draw");if(p===null)for(let v=0;v<d;v++)this.render(h[v],f[v]);else{p.multiDrawArraysWEBGL(i,h,0,f,0,d);let v=0;for(let y=0;y<d;y++)v+=f[y];n.update(v,i,1)}}function u(h,f,d,p){if(d===0)return;const v=e.get("WEBGL_multi_draw");if(v===null)for(let y=0;y<h.length;y++)o(h[y],f[y],p[y]);else{v.multiDrawArraysInstancedWEBGL(i,h,0,f,0,p,0,d);let y=0;for(let w=0;w<d;w++)y+=f[w];for(let w=0;w<p.length;w++)n.update(y,i,p[w])}}this.setMode=r,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=u}function p8(t,e,n,i){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const b=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(b.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(b){return!(b!==or&&i.convert(b)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(b){const L=b===Ed&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(b!==no&&i.convert(b)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_TYPE)&&b!==ts&&!L)}function u(b){if(b==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";b="mediump"}return b==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let h=n.precision!==void 0?n.precision:"highp";const f=u(h);f!==h&&(console.warn("THREE.WebGLRenderer:",h,"not supported, using",f,"instead."),h=f);const d=n.logarithmicDepthBuffer===!0,p=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),v=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),y=t.getParameter(t.MAX_TEXTURE_SIZE),w=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),S=t.getParameter(t.MAX_VERTEX_ATTRIBS),g=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),x=t.getParameter(t.MAX_VARYING_VECTORS),M=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),T=v>0,P=t.getParameter(t.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:u,textureFormatReadable:o,textureTypeReadable:a,precision:h,logarithmicDepthBuffer:d,maxTextures:p,maxVertexTextures:v,maxTextureSize:y,maxCubemapSize:w,maxAttributes:S,maxVertexUniforms:g,maxVaryings:x,maxFragmentUniforms:M,vertexTextures:T,maxSamples:P}}function m8(t){const e=this;let n=null,i=0,r=!1,s=!1;const o=new Co,a=new xt,u={value:null,needsUpdate:!1};this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(d,p){const v=d.length!==0||p||i!==0||r;return r=p,i=d.length,v},this.beginShadows=function(){s=!0,f(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,p){n=f(d,p,0)},this.setState=function(d,p,v){const y=d.clippingPlanes,w=d.clipIntersection,S=d.clipShadows,g=t.get(d);if(!r||y===null||y.length===0||s&&!S)s?f(null):h();else{const x=s?0:i,M=x*4;let T=g.clippingState||null;u.value=T,T=f(y,p,M,v);for(let P=0;P!==M;++P)T[P]=n[P];g.clippingState=T,this.numIntersection=w?this.numPlanes:0,this.numPlanes+=x}};function h(){u.value!==n&&(u.value=n,u.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function f(d,p,v,y){const w=d!==null?d.length:0;let S=null;if(w!==0){if(S=u.value,y!==!0||S===null){const g=v+w*4,x=p.matrixWorldInverse;a.getNormalMatrix(x),(S===null||S.length<g)&&(S=new Float32Array(g));for(let M=0,T=v;M!==w;++M,T+=4)o.copy(d[M]).applyMatrix4(x,a),o.normal.toArray(S,T),S[T+3]=o.constant}u.value=S,u.needsUpdate=!0}return e.numPlanes=w,e.numIntersection=0,S}}function g8(t){let e=new WeakMap;function n(o,a){return a===$f?o.mapping=Xo:a===qf&&(o.mapping=Ba),o}function i(o){if(o&&o.isTexture){const a=o.mapping;if(a===$f||a===qf)if(e.has(o)){const u=e.get(o).texture;return n(u,o.mapping)}else{const u=o.image;if(u&&u.height>0){const h=new fP(u.height);return h.fromEquirectangularTexture(t,o),e.set(o,h),o.addEventListener("dispose",r),n(h.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const u=e.get(a);u!==void 0&&(e.delete(a),u.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class ka extends Ad{constructor(e=-1,n=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+n,u=r-n;if(this.view!==null&&this.view.enabled){const h=(this.right-this.left)/this.view.fullWidth/this.zoom,f=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=h*this.view.offsetX,o=s+h*this.view.width,a-=f*this.view.offsetY,u=a-f*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,u,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const vu=4,hT=[.125,.215,.35,.446,.526,.582],Il=20,by=new ka,fT=new ze;let Ry=null,Py=0,Ly=0,Iy=!1;const Pl=(1+Math.sqrt(5))/2,Xc=1/Pl,dT=[new k(-Pl,Xc,0),new k(Pl,Xc,0),new k(-Xc,0,Pl),new k(Xc,0,Pl),new k(0,Pl,-Xc),new k(0,Pl,Xc),new k(-1,1,-1),new k(1,1,-1),new k(-1,1,1),new k(1,1,1)];class Bx{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,i=.1,r=100){Ry=this._renderer.getRenderTarget(),Py=this._renderer.getActiveCubeFace(),Ly=this._renderer.getActiveMipmapLevel(),Iy=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),n>0&&this._blur(s,0,0,n),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=gT(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=mT(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Ry,Py,Ly),this._renderer.xr.enabled=Iy,e.scissorTest=!1,Sm(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===Xo||e.mapping===Ba?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Ry=this._renderer.getRenderTarget(),Py=this._renderer.getActiveCubeFace(),Ly=this._renderer.getActiveMipmapLevel(),Iy=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=n||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,i={magFilter:qn,minFilter:qn,generateMipmaps:!1,type:Ed,format:or,colorSpace:qo,depthBuffer:!1},r=pT(e,n,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=pT(e,n,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=v8(s)),this._blurMaterial=y8(s,e,n)}return r}_compileMaterial(e){const n=new Zn(this._lodPlanes[0],e);this._renderer.compile(n,by)}_sceneToCubeUV(e,n,i,r){const a=new Fn(90,1,n,i),u=[1,-1,1,1,1,1],h=[1,1,1,-1,-1,-1],f=this._renderer,d=f.autoClear,p=f.toneMapping;f.getClearColor(fT),f.toneMapping=eo,f.autoClear=!1;const v=new Ka({name:"PMREM.Background",side:Xi,depthWrite:!1,depthTest:!1}),y=new Zn(new cc,v);let w=!1;const S=e.background;S?S.isColor&&(v.color.copy(S),e.background=null,w=!0):(v.color.copy(fT),w=!0);for(let g=0;g<6;g++){const x=g%3;x===0?(a.up.set(0,u[g],0),a.lookAt(h[g],0,0)):x===1?(a.up.set(0,0,u[g]),a.lookAt(0,h[g],0)):(a.up.set(0,u[g],0),a.lookAt(0,0,h[g]));const M=this._cubeSize;Sm(r,x*M,g>2?M:0,M,M),f.setRenderTarget(r),w&&f.render(y,a),f.render(e,a)}y.geometry.dispose(),y.material.dispose(),f.toneMapping=p,f.autoClear=d,e.background=S}_textureToCubeUV(e,n){const i=this._renderer,r=e.mapping===Xo||e.mapping===Ba;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=gT()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=mT());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Zn(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const u=this._cubeSize;Sm(n,0,0,3*u,2*u),i.setRenderTarget(n),i.render(o,by)}_applyPMREM(e){const n=this._renderer,i=n.autoClear;n.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=dT[(r-s-1)%dT.length];this._blur(e,s-1,s,o,a)}n.autoClear=i}_blur(e,n,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,n,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,n,i,r,s,o,a){const u=this._renderer,h=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const f=3,d=new Zn(this._lodPlanes[r],h),p=h.uniforms,v=this._sizeLods[i]-1,y=isFinite(s)?Math.PI/(2*v):2*Math.PI/(2*Il-1),w=s/y,S=isFinite(s)?1+Math.floor(f*w):Il;S>Il&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${S} samples when the maximum is set to ${Il}`);const g=[];let x=0;for(let L=0;L<Il;++L){const N=L/w,R=Math.exp(-N*N/2);g.push(R),L===0?x+=R:L<S&&(x+=2*R)}for(let L=0;L<g.length;L++)g[L]=g[L]/x;p.envMap.value=e.texture,p.samples.value=S,p.weights.value=g,p.latitudinal.value=o==="latitudinal",a&&(p.poleAxis.value=a);const{_lodMax:M}=this;p.dTheta.value=y,p.mipInt.value=M-i;const T=this._sizeLods[r],P=3*T*(r>M-vu?r-M+vu:0),b=4*(this._cubeSize-T);Sm(n,P,b,3*T,2*T),u.setRenderTarget(n),u.render(d,by)}}function v8(t){const e=[],n=[],i=[];let r=t;const s=t-vu+1+hT.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);n.push(a);let u=1/a;o>t-vu?u=hT[o-t+vu-1]:o===0&&(u=0),i.push(u);const h=1/(a-2),f=-h,d=1+h,p=[f,f,d,f,d,d,f,f,d,d,f,d],v=6,y=6,w=3,S=2,g=1,x=new Float32Array(w*y*v),M=new Float32Array(S*y*v),T=new Float32Array(g*y*v);for(let b=0;b<v;b++){const L=b%3*2/3-1,N=b>2?0:-1,R=[L,N,0,L+2/3,N,0,L+2/3,N+1,0,L,N,0,L+2/3,N+1,0,L,N+1,0];x.set(R,w*y*b),M.set(p,S*y*b);const C=[b,b,b,b,b,b];T.set(C,g*y*b)}const P=new At;P.setAttribute("position",new Xt(x,w)),P.setAttribute("uv",new Xt(M,S)),P.setAttribute("faceIndex",new Xt(T,g)),e.push(P),r>vu&&r--}return{lodPlanes:e,sizeLods:n,sigmas:i}}function pT(t,e,n){const i=new As(t,e,n);return i.texture.mapping=eh,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Sm(t,e,n,i,r){t.viewport.set(e,n,i,r),t.scissor.set(e,n,i,r)}function y8(t,e,n){const i=new Float32Array(Il),r=new k(0,1,0);return new Cs({name:"SphericalGaussianBlur",defines:{n:Il,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:LS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Uo,depthTest:!1,depthWrite:!1})}function mT(){return new Cs({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:LS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Uo,depthTest:!1,depthWrite:!1})}function gT(){return new Cs({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:LS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Uo,depthTest:!1,depthWrite:!1})}function LS(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function _8(t){let e=new WeakMap,n=null;function i(a){if(a&&a.isTexture){const u=a.mapping,h=u===$f||u===qf,f=u===Xo||u===Ba;if(h||f){let d=e.get(a);const p=d!==void 0?d.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==p)return n===null&&(n=new Bx(t)),d=h?n.fromEquirectangular(a,d):n.fromCubemap(a,d),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),d.texture;if(d!==void 0)return d.texture;{const v=a.image;return h&&v&&v.height>0||f&&v&&r(v)?(n===null&&(n=new Bx(t)),d=h?n.fromEquirectangular(a):n.fromCubemap(a),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),a.addEventListener("dispose",s),d.texture):null}}}return a}function r(a){let u=0;const h=6;for(let f=0;f<h;f++)a[f]!==void 0&&u++;return u===h}function s(a){const u=a.target;u.removeEventListener("dispose",s);const h=e.get(u);h!==void 0&&(e.delete(u),h.dispose())}function o(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:i,dispose:o}}function x8(t){const e={};function n(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(i)}return e[i]=r,r}return{has:function(i){return n(i)!==null},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(i){const r=n(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function S8(t,e,n,i){const r={},s=new WeakMap;function o(d){const p=d.target;p.index!==null&&e.remove(p.index);for(const y in p.attributes)e.remove(p.attributes[y]);for(const y in p.morphAttributes){const w=p.morphAttributes[y];for(let S=0,g=w.length;S<g;S++)e.remove(w[S])}p.removeEventListener("dispose",o),delete r[p.id];const v=s.get(p);v&&(e.remove(v),s.delete(p)),i.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,n.memory.geometries--}function a(d,p){return r[p.id]===!0||(p.addEventListener("dispose",o),r[p.id]=!0,n.memory.geometries++),p}function u(d){const p=d.attributes;for(const y in p)e.update(p[y],t.ARRAY_BUFFER);const v=d.morphAttributes;for(const y in v){const w=v[y];for(let S=0,g=w.length;S<g;S++)e.update(w[S],t.ARRAY_BUFFER)}}function h(d){const p=[],v=d.index,y=d.attributes.position;let w=0;if(v!==null){const x=v.array;w=v.version;for(let M=0,T=x.length;M<T;M+=3){const P=x[M+0],b=x[M+1],L=x[M+2];p.push(P,b,b,L,L,P)}}else if(y!==void 0){const x=y.array;w=y.version;for(let M=0,T=x.length/3-1;M<T;M+=3){const P=M+0,b=M+1,L=M+2;p.push(P,b,b,L,L,P)}}else return;const S=new(iP(p)?PS:RS)(p,1);S.version=w;const g=s.get(d);g&&e.remove(g),s.set(d,S)}function f(d){const p=s.get(d);if(p){const v=d.index;v!==null&&p.version<v.version&&h(d)}else h(d);return s.get(d)}return{get:a,update:u,getWireframeAttribute:f}}function M8(t,e,n){let i;function r(p){i=p}let s,o;function a(p){s=p.type,o=p.bytesPerElement}function u(p,v){t.drawElements(i,v,s,p*o),n.update(v,i,1)}function h(p,v,y){y!==0&&(t.drawElementsInstanced(i,v,s,p*o,y),n.update(v,i,y))}function f(p,v,y){if(y===0)return;const w=e.get("WEBGL_multi_draw");if(w===null)for(let S=0;S<y;S++)this.render(p[S]/o,v[S]);else{w.multiDrawElementsWEBGL(i,v,0,s,p,0,y);let S=0;for(let g=0;g<y;g++)S+=v[g];n.update(S,i,1)}}function d(p,v,y,w){if(y===0)return;const S=e.get("WEBGL_multi_draw");if(S===null)for(let g=0;g<p.length;g++)h(p[g]/o,v[g],w[g]);else{S.multiDrawElementsInstancedWEBGL(i,v,0,s,p,0,w,0,y);let g=0;for(let x=0;x<y;x++)g+=v[x];for(let x=0;x<w.length;x++)n.update(g,i,w[x])}}this.setMode=r,this.setIndex=a,this.render=u,this.renderInstances=h,this.renderMultiDraw=f,this.renderMultiDrawInstances=d}function w8(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(n.calls++,o){case t.TRIANGLES:n.triangles+=a*(s/3);break;case t.LINES:n.lines+=a*(s/2);break;case t.LINE_STRIP:n.lines+=a*(s-1);break;case t.LINE_LOOP:n.lines+=a*s;break;case t.POINTS:n.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:r,update:i}}function E8(t,e,n){const i=new WeakMap,r=new $t;function s(o,a,u){const h=o.morphTargetInfluences,f=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,d=f!==void 0?f.length:0;let p=i.get(a);if(p===void 0||p.count!==d){let C=function(){N.dispose(),i.delete(a),a.removeEventListener("dispose",C)};var v=C;p!==void 0&&p.texture.dispose();const y=a.morphAttributes.position!==void 0,w=a.morphAttributes.normal!==void 0,S=a.morphAttributes.color!==void 0,g=a.morphAttributes.position||[],x=a.morphAttributes.normal||[],M=a.morphAttributes.color||[];let T=0;y===!0&&(T=1),w===!0&&(T=2),S===!0&&(T=3);let P=a.attributes.position.count*T,b=1;P>e.maxTextureSize&&(b=Math.ceil(P/e.maxTextureSize),P=e.maxTextureSize);const L=new Float32Array(P*b*4*d),N=new z0(L,P,b,d);N.type=ts,N.needsUpdate=!0;const R=T*4;for(let O=0;O<d;O++){const j=g[O],H=x[O],J=M[O],ne=P*b*4*O;for(let fe=0;fe<j.count;fe++){const ve=fe*R;y===!0&&(r.fromBufferAttribute(j,fe),L[ne+ve+0]=r.x,L[ne+ve+1]=r.y,L[ne+ve+2]=r.z,L[ne+ve+3]=0),w===!0&&(r.fromBufferAttribute(H,fe),L[ne+ve+4]=r.x,L[ne+ve+5]=r.y,L[ne+ve+6]=r.z,L[ne+ve+7]=0),S===!0&&(r.fromBufferAttribute(J,fe),L[ne+ve+8]=r.x,L[ne+ve+9]=r.y,L[ne+ve+10]=r.z,L[ne+ve+11]=J.itemSize===4?r.w:1)}}p={count:d,texture:N,size:new he(P,b)},i.set(a,p),a.addEventListener("dispose",C)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)u.getUniforms().setValue(t,"morphTexture",o.morphTexture,n);else{let y=0;for(let S=0;S<h.length;S++)y+=h[S];const w=a.morphTargetsRelative?1:1-y;u.getUniforms().setValue(t,"morphTargetBaseInfluence",w),u.getUniforms().setValue(t,"morphTargetInfluences",h)}u.getUniforms().setValue(t,"morphTargetsTexture",p.texture,n),u.getUniforms().setValue(t,"morphTargetsTextureSize",p.size)}return{update:s}}function T8(t,e,n,i){let r=new WeakMap;function s(u){const h=i.render.frame,f=u.geometry,d=e.get(u,f);if(r.get(d)!==h&&(e.update(d),r.set(d,h)),u.isInstancedMesh&&(u.hasEventListener("dispose",a)===!1&&u.addEventListener("dispose",a),r.get(u)!==h&&(n.update(u.instanceMatrix,t.ARRAY_BUFFER),u.instanceColor!==null&&n.update(u.instanceColor,t.ARRAY_BUFFER),r.set(u,h))),u.isSkinnedMesh){const p=u.skeleton;r.get(p)!==h&&(p.update(),r.set(p,h))}return d}function o(){r=new WeakMap}function a(u){const h=u.target;h.removeEventListener("dispose",a),n.remove(h.instanceMatrix),h.instanceColor!==null&&n.remove(h.instanceColor)}return{update:s,dispose:o}}class IS extends Ln{constructor(e,n,i,r,s,o,a,u,h,f){if(f=f!==void 0?f:Vl,f!==Vl&&f!==Ou)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&f===Vl&&(i=tc),i===void 0&&f===Ou&&(i=th),super(null,r,s,o,a,u,f,i,h),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=a!==void 0?a:fi,this.minFilter=u!==void 0?u:fi,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}const pP=new Ln,mP=new IS(1,1);mP.compareFunction=AS;const gP=new z0,vP=new bS,yP=new Cd,vT=[],yT=[],_T=new Float32Array(16),xT=new Float32Array(9),ST=new Float32Array(4);function ih(t,e,n){const i=t[0];if(i<=0||i>0)return t;const r=e*n;let s=vT[r];if(s===void 0&&(s=new Float32Array(r),vT[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=n,t[o].toArray(s,a)}return s}function ni(t,e){if(t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function ii(t,e){for(let n=0,i=e.length;n<i;n++)t[n]=e[n]}function B0(t,e){let n=yT[e];n===void 0&&(n=new Int32Array(e),yT[e]=n);for(let i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function A8(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function C8(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(ni(n,e))return;t.uniform2fv(this.addr,e),ii(n,e)}}function b8(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(ni(n,e))return;t.uniform3fv(this.addr,e),ii(n,e)}}function R8(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(ni(n,e))return;t.uniform4fv(this.addr,e),ii(n,e)}}function P8(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(ni(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),ii(n,e)}else{if(ni(n,i))return;ST.set(i),t.uniformMatrix2fv(this.addr,!1,ST),ii(n,i)}}function L8(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(ni(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),ii(n,e)}else{if(ni(n,i))return;xT.set(i),t.uniformMatrix3fv(this.addr,!1,xT),ii(n,i)}}function I8(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(ni(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),ii(n,e)}else{if(ni(n,i))return;_T.set(i),t.uniformMatrix4fv(this.addr,!1,_T),ii(n,i)}}function N8(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function D8(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(ni(n,e))return;t.uniform2iv(this.addr,e),ii(n,e)}}function k8(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(ni(n,e))return;t.uniform3iv(this.addr,e),ii(n,e)}}function U8(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(ni(n,e))return;t.uniform4iv(this.addr,e),ii(n,e)}}function O8(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function F8(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(ni(n,e))return;t.uniform2uiv(this.addr,e),ii(n,e)}}function z8(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(ni(n,e))return;t.uniform3uiv(this.addr,e),ii(n,e)}}function B8(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(ni(n,e))return;t.uniform4uiv(this.addr,e),ii(n,e)}}function H8(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r);const s=this.type===t.SAMPLER_2D_SHADOW?mP:pP;n.setTexture2D(e||s,r)}function V8(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(e||vP,r)}function G8(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(e||yP,r)}function W8(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(e||gP,r)}function X8(t){switch(t){case 5126:return A8;case 35664:return C8;case 35665:return b8;case 35666:return R8;case 35674:return P8;case 35675:return L8;case 35676:return I8;case 5124:case 35670:return N8;case 35667:case 35671:return D8;case 35668:case 35672:return k8;case 35669:case 35673:return U8;case 5125:return O8;case 36294:return F8;case 36295:return z8;case 36296:return B8;case 35678:case 36198:case 36298:case 36306:case 35682:return H8;case 35679:case 36299:case 36307:return V8;case 35680:case 36300:case 36308:case 36293:return G8;case 36289:case 36303:case 36311:case 36292:return W8}}function j8(t,e){t.uniform1fv(this.addr,e)}function Y8(t,e){const n=ih(e,this.size,2);t.uniform2fv(this.addr,n)}function $8(t,e){const n=ih(e,this.size,3);t.uniform3fv(this.addr,n)}function q8(t,e){const n=ih(e,this.size,4);t.uniform4fv(this.addr,n)}function Z8(t,e){const n=ih(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function K8(t,e){const n=ih(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function J8(t,e){const n=ih(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function Q8(t,e){t.uniform1iv(this.addr,e)}function ez(t,e){t.uniform2iv(this.addr,e)}function tz(t,e){t.uniform3iv(this.addr,e)}function nz(t,e){t.uniform4iv(this.addr,e)}function iz(t,e){t.uniform1uiv(this.addr,e)}function rz(t,e){t.uniform2uiv(this.addr,e)}function sz(t,e){t.uniform3uiv(this.addr,e)}function oz(t,e){t.uniform4uiv(this.addr,e)}function az(t,e,n){const i=this.cache,r=e.length,s=B0(n,r);ni(i,s)||(t.uniform1iv(this.addr,s),ii(i,s));for(let o=0;o!==r;++o)n.setTexture2D(e[o]||pP,s[o])}function lz(t,e,n){const i=this.cache,r=e.length,s=B0(n,r);ni(i,s)||(t.uniform1iv(this.addr,s),ii(i,s));for(let o=0;o!==r;++o)n.setTexture3D(e[o]||vP,s[o])}function cz(t,e,n){const i=this.cache,r=e.length,s=B0(n,r);ni(i,s)||(t.uniform1iv(this.addr,s),ii(i,s));for(let o=0;o!==r;++o)n.setTextureCube(e[o]||yP,s[o])}function uz(t,e,n){const i=this.cache,r=e.length,s=B0(n,r);ni(i,s)||(t.uniform1iv(this.addr,s),ii(i,s));for(let o=0;o!==r;++o)n.setTexture2DArray(e[o]||gP,s[o])}function hz(t){switch(t){case 5126:return j8;case 35664:return Y8;case 35665:return $8;case 35666:return q8;case 35674:return Z8;case 35675:return K8;case 35676:return J8;case 5124:case 35670:return Q8;case 35667:case 35671:return ez;case 35668:case 35672:return tz;case 35669:case 35673:return nz;case 5125:return iz;case 36294:return rz;case 36295:return sz;case 36296:return oz;case 35678:case 36198:case 36298:case 36306:case 35682:return az;case 35679:case 36299:case 36307:return lz;case 35680:case 36300:case 36308:case 36293:return cz;case 36289:case 36303:case 36311:case 36292:return uz}}class fz{constructor(e,n,i){this.id=e,this.addr=i,this.cache=[],this.type=n.type,this.setValue=X8(n.type)}}class dz{constructor(e,n,i){this.id=e,this.addr=i,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=hz(n.type)}}class pz{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,n[a.id],i)}}}const Ny=/(\w+)(\])?(\[|\.)?/g;function MT(t,e){t.seq.push(e),t.map[e.id]=e}function mz(t,e,n){const i=t.name,r=i.length;for(Ny.lastIndex=0;;){const s=Ny.exec(i),o=Ny.lastIndex;let a=s[1];const u=s[2]==="]",h=s[3];if(u&&(a=a|0),h===void 0||h==="["&&o+2===r){MT(n,h===void 0?new fz(a,t,e):new dz(a,t,e));break}else{let d=n.map[a];d===void 0&&(d=new pz(a),MT(n,d)),n=d}}}class xg{constructor(e,n){this.seq=[],this.map={};const i=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(n,r),o=e.getUniformLocation(n,s.name);mz(s,o,this)}}setValue(e,n,i,r){const s=this.map[n];s!==void 0&&s.setValue(e,i,r)}setOptional(e,n,i){const r=n[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,n,i,r){for(let s=0,o=n.length;s!==o;++s){const a=n[s],u=i[a.id];u.needsUpdate!==!1&&a.setValue(e,u.value,r)}}static seqWithValue(e,n){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in n&&i.push(o)}return i}}function wT(t,e,n){const i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}const gz=37297;let vz=0;function yz(t,e){const n=t.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,n.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${n[o]}`)}return i.join(`
`)}function _z(t){const e=Yt.getPrimaries(Yt.workingColorSpace),n=Yt.getPrimaries(t);let i;switch(e===n?i="":e===id&&n===nd?i="LinearDisplayP3ToLinearSRGB":e===nd&&n===id&&(i="LinearSRGBToLinearDisplayP3"),t){case qo:case Td:return[i,"LinearTransferOETF"];case Tr:case F0:return[i,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",t),[i,"LinearTransferOETF"]}}function ET(t,e,n){const i=t.getShaderParameter(e,t.COMPILE_STATUS),r=t.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return n.toUpperCase()+`

`+r+`

`+yz(t.getShaderSource(e),o)}else return r}function xz(t,e){const n=_z(e);return`vec4 ${t}( vec4 value ) { return ${n[0]}( ${n[1]}( value ) ); }`}function Sz(t,e){let n;switch(e){case bR:n="Linear";break;case RR:n="Reinhard";break;case PR:n="OptimizedCineon";break;case mS:n="ACESFilmic";break;case IR:n="AgX";break;case NR:n="Neutral";break;case LR:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Mz(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",t.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(lf).join(`
`)}function wz(t){const e=[];for(const n in t){const i=t[n];i!==!1&&e.push("#define "+n+" "+i)}return e.join(`
`)}function Ez(t,e){const n={},i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=t.getActiveAttrib(e,r),o=s.name;let a=1;s.type===t.FLOAT_MAT2&&(a=2),s.type===t.FLOAT_MAT3&&(a=3),s.type===t.FLOAT_MAT4&&(a=4),n[o]={type:s.type,location:t.getAttribLocation(e,o),locationSize:a}}return n}function lf(t){return t!==""}function TT(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function AT(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Tz=/^[ \t]*#include +<([\w\d./]+)>/gm;function Hx(t){return t.replace(Tz,Cz)}const Az=new Map;function Cz(t,e){let n=Et[e];if(n===void 0){const i=Az.get(e);if(i!==void 0)n=Et[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return Hx(n)}const bz=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function CT(t){return t.replace(bz,Rz)}function Rz(t,e,n,i){let r="";for(let s=parseInt(e);s<parseInt(n);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function bT(t){let e=`precision ${t.precision} float;
	precision ${t.precision} int;
	precision ${t.precision} sampler2D;
	precision ${t.precision} samplerCube;
	precision ${t.precision} sampler3D;
	precision ${t.precision} sampler2DArray;
	precision ${t.precision} sampler2DShadow;
	precision ${t.precision} samplerCubeShadow;
	precision ${t.precision} sampler2DArrayShadow;
	precision ${t.precision} isampler2D;
	precision ${t.precision} isampler3D;
	precision ${t.precision} isamplerCube;
	precision ${t.precision} isampler2DArray;
	precision ${t.precision} usampler2D;
	precision ${t.precision} usampler3D;
	precision ${t.precision} usamplerCube;
	precision ${t.precision} usampler2DArray;
	`;return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Pz(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===k0?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===xf?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===_s&&(e="SHADOWMAP_TYPE_VSM"),e}function Lz(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case Xo:case Ba:e="ENVMAP_TYPE_CUBE";break;case eh:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Iz(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case Ba:e="ENVMAP_MODE_REFRACTION";break}return e}function Nz(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case wd:e="ENVMAP_BLENDING_MULTIPLY";break;case AR:e="ENVMAP_BLENDING_MIX";break;case CR:e="ENVMAP_BLENDING_ADD";break}return e}function Dz(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:i,maxMip:n}}function kz(t,e,n,i){const r=t.getContext(),s=n.defines;let o=n.vertexShader,a=n.fragmentShader;const u=Pz(n),h=Lz(n),f=Iz(n),d=Nz(n),p=Dz(n),v=Mz(n),y=wz(s),w=r.createProgram();let S,g,x=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(S=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,y].filter(lf).join(`
`),S.length>0&&(S+=`
`),g=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,y].filter(lf).join(`
`),g.length>0&&(g+=`
`)):(S=[bT(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,y,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+f:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+u:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(lf).join(`
`),g=[bT(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,y,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.envMap?"#define "+f:"",n.envMap?"#define "+d:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+u:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==eo?"#define TONE_MAPPING":"",n.toneMapping!==eo?Et.tonemapping_pars_fragment:"",n.toneMapping!==eo?Sz("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Et.colorspace_pars_fragment,xz("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(lf).join(`
`)),o=Hx(o),o=TT(o,n),o=AT(o,n),a=Hx(a),a=TT(a,n),a=AT(a,n),o=CT(o),a=CT(a),n.isRawShaderMaterial!==!0&&(x=`#version 300 es
`,S=[v,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+S,g=["#define varying in",n.glslVersion===zx?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===zx?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const M=x+S+o,T=x+g+a,P=wT(r,r.VERTEX_SHADER,M),b=wT(r,r.FRAGMENT_SHADER,T);r.attachShader(w,P),r.attachShader(w,b),n.index0AttributeName!==void 0?r.bindAttribLocation(w,0,n.index0AttributeName):n.morphTargets===!0&&r.bindAttribLocation(w,0,"position"),r.linkProgram(w);function L(O){if(t.debug.checkShaderErrors){const j=r.getProgramInfoLog(w).trim(),H=r.getShaderInfoLog(P).trim(),J=r.getShaderInfoLog(b).trim();let ne=!0,fe=!0;if(r.getProgramParameter(w,r.LINK_STATUS)===!1)if(ne=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(r,w,P,b);else{const ve=ET(r,P,"vertex"),U=ET(r,b,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(w,r.VALIDATE_STATUS)+`

Material Name: `+O.name+`
Material Type: `+O.type+`

Program Info Log: `+j+`
`+ve+`
`+U)}else j!==""?console.warn("THREE.WebGLProgram: Program Info Log:",j):(H===""||J==="")&&(fe=!1);fe&&(O.diagnostics={runnable:ne,programLog:j,vertexShader:{log:H,prefix:S},fragmentShader:{log:J,prefix:g}})}r.deleteShader(P),r.deleteShader(b),N=new xg(r,w),R=Ez(r,w)}let N;this.getUniforms=function(){return N===void 0&&L(this),N};let R;this.getAttributes=function(){return R===void 0&&L(this),R};let C=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return C===!1&&(C=r.getProgramParameter(w,gz)),C},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(w),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=vz++,this.cacheKey=e,this.usedTimes=1,this.program=w,this.vertexShader=P,this.fragmentShader=b,this}let Uz=0;class Oz{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(n),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const i of n)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let i=n.get(e);return i===void 0&&(i=new Set,n.set(e,i)),i}_getShaderStage(e){const n=this.shaderCache;let i=n.get(e);return i===void 0&&(i=new Fz(e),n.set(e,i)),i}}class Fz{constructor(e){this.id=Uz++,this.code=e,this.usedTimes=0}}function zz(t,e,n,i,r,s,o){const a=new Wl,u=new Oz,h=new Set,f=[],d=r.logarithmicDepthBuffer,p=r.vertexTextures;let v=r.precision;const y={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function w(R){return h.add(R),R===0?"uv":`uv${R}`}function S(R,C,O,j,H){const J=j.fog,ne=H.geometry,fe=R.isMeshStandardMaterial?j.environment:null,ve=(R.isMeshStandardMaterial?n:e).get(R.envMap||fe),U=ve&&ve.mapping===eh?ve.image.height:null,X=y[R.type];R.precision!==null&&(v=r.getMaxPrecision(R.precision),v!==R.precision&&console.warn("THREE.WebGLProgram.getParameters:",R.precision,"not supported, using",v,"instead."));const V=ne.morphAttributes.position||ne.morphAttributes.normal||ne.morphAttributes.color,re=V!==void 0?V.length:0;let we=0;ne.morphAttributes.position!==void 0&&(we=1),ne.morphAttributes.normal!==void 0&&(we=2),ne.morphAttributes.color!==void 0&&(we=3);let Be,ee,xe,Ce;if(X){const bt=Ms[X];Be=bt.vertexShader,ee=bt.fragmentShader}else Be=R.vertexShader,ee=R.fragmentShader,u.update(R),xe=u.getVertexShaderID(R),Ce=u.getFragmentShaderID(R);const Me=t.getRenderTarget(),ft=H.isInstancedMesh===!0,vt=H.isBatchedMesh===!0,$=!!R.map,ut=!!R.matcap,ce=!!ve,ge=!!R.aoMap,pe=!!R.lightMap,Pe=!!R.bumpMap,Se=!!R.normalMap,Fe=!!R.displacementMap,Qe=!!R.emissiveMap,z=!!R.metalnessMap,I=!!R.roughnessMap,Z=R.anisotropy>0,de=R.clearcoat>0,ye=R.dispersion>0,me=R.iridescence>0,Ze=R.sheen>0,Ie=R.transmission>0,Le=Z&&!!R.anisotropyMap,ht=de&&!!R.clearcoatMap,be=de&&!!R.clearcoatNormalMap,$e=de&&!!R.clearcoatRoughnessMap,Mt=me&&!!R.iridescenceMap,it=me&&!!R.iridescenceThicknessMap,He=Ze&&!!R.sheenColorMap,dt=Ze&&!!R.sheenRoughnessMap,wt=!!R.specularMap,G=!!R.specularColorMap,ue=!!R.specularIntensityMap,B=Ie&&!!R.transmissionMap,oe=Ie&&!!R.thicknessMap,ae=!!R.gradientMap,Re=!!R.alphaMap,Ne=R.alphaTest>0,It=!!R.alphaHash,Gt=!!R.extensions;let Nt=eo;R.toneMapped&&(Me===null||Me.isXRRenderTarget===!0)&&(Nt=t.toneMapping);const Zt={shaderID:X,shaderType:R.type,shaderName:R.name,vertexShader:Be,fragmentShader:ee,defines:R.defines,customVertexShaderID:xe,customFragmentShaderID:Ce,isRawShaderMaterial:R.isRawShaderMaterial===!0,glslVersion:R.glslVersion,precision:v,batching:vt,instancing:ft,instancingColor:ft&&H.instanceColor!==null,instancingMorph:ft&&H.morphTexture!==null,supportsVertexTextures:p,outputColorSpace:Me===null?t.outputColorSpace:Me.isXRRenderTarget===!0?Me.texture.colorSpace:qo,alphaToCoverage:!!R.alphaToCoverage,map:$,matcap:ut,envMap:ce,envMapMode:ce&&ve.mapping,envMapCubeUVHeight:U,aoMap:ge,lightMap:pe,bumpMap:Pe,normalMap:Se,displacementMap:p&&Fe,emissiveMap:Qe,normalMapObjectSpace:Se&&R.normalMapType===qR,normalMapTangentSpace:Se&&R.normalMapType===Za,metalnessMap:z,roughnessMap:I,anisotropy:Z,anisotropyMap:Le,clearcoat:de,clearcoatMap:ht,clearcoatNormalMap:be,clearcoatRoughnessMap:$e,dispersion:ye,iridescence:me,iridescenceMap:Mt,iridescenceThicknessMap:it,sheen:Ze,sheenColorMap:He,sheenRoughnessMap:dt,specularMap:wt,specularColorMap:G,specularIntensityMap:ue,transmission:Ie,transmissionMap:B,thicknessMap:oe,gradientMap:ae,opaque:R.transparent===!1&&R.blending===Da&&R.alphaToCoverage===!1,alphaMap:Re,alphaTest:Ne,alphaHash:It,combine:R.combine,mapUv:$&&w(R.map.channel),aoMapUv:ge&&w(R.aoMap.channel),lightMapUv:pe&&w(R.lightMap.channel),bumpMapUv:Pe&&w(R.bumpMap.channel),normalMapUv:Se&&w(R.normalMap.channel),displacementMapUv:Fe&&w(R.displacementMap.channel),emissiveMapUv:Qe&&w(R.emissiveMap.channel),metalnessMapUv:z&&w(R.metalnessMap.channel),roughnessMapUv:I&&w(R.roughnessMap.channel),anisotropyMapUv:Le&&w(R.anisotropyMap.channel),clearcoatMapUv:ht&&w(R.clearcoatMap.channel),clearcoatNormalMapUv:be&&w(R.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:$e&&w(R.clearcoatRoughnessMap.channel),iridescenceMapUv:Mt&&w(R.iridescenceMap.channel),iridescenceThicknessMapUv:it&&w(R.iridescenceThicknessMap.channel),sheenColorMapUv:He&&w(R.sheenColorMap.channel),sheenRoughnessMapUv:dt&&w(R.sheenRoughnessMap.channel),specularMapUv:wt&&w(R.specularMap.channel),specularColorMapUv:G&&w(R.specularColorMap.channel),specularIntensityMapUv:ue&&w(R.specularIntensityMap.channel),transmissionMapUv:B&&w(R.transmissionMap.channel),thicknessMapUv:oe&&w(R.thicknessMap.channel),alphaMapUv:Re&&w(R.alphaMap.channel),vertexTangents:!!ne.attributes.tangent&&(Se||Z),vertexColors:R.vertexColors,vertexAlphas:R.vertexColors===!0&&!!ne.attributes.color&&ne.attributes.color.itemSize===4,pointsUvs:H.isPoints===!0&&!!ne.attributes.uv&&($||Re),fog:!!J,useFog:R.fog===!0,fogExp2:!!J&&J.isFogExp2,flatShading:R.flatShading===!0,sizeAttenuation:R.sizeAttenuation===!0,logarithmicDepthBuffer:d,skinning:H.isSkinnedMesh===!0,morphTargets:ne.morphAttributes.position!==void 0,morphNormals:ne.morphAttributes.normal!==void 0,morphColors:ne.morphAttributes.color!==void 0,morphTargetsCount:re,morphTextureStride:we,numDirLights:C.directional.length,numPointLights:C.point.length,numSpotLights:C.spot.length,numSpotLightMaps:C.spotLightMap.length,numRectAreaLights:C.rectArea.length,numHemiLights:C.hemi.length,numDirLightShadows:C.directionalShadowMap.length,numPointLightShadows:C.pointShadowMap.length,numSpotLightShadows:C.spotShadowMap.length,numSpotLightShadowsWithMaps:C.numSpotLightShadowsWithMaps,numLightProbes:C.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:R.dithering,shadowMapEnabled:t.shadowMap.enabled&&O.length>0,shadowMapType:t.shadowMap.type,toneMapping:Nt,useLegacyLights:t._useLegacyLights,decodeVideoTexture:$&&R.map.isVideoTexture===!0&&Yt.getTransfer(R.map.colorSpace)===en,premultipliedAlpha:R.premultipliedAlpha,doubleSided:R.side===qs,flipSided:R.side===Xi,useDepthPacking:R.depthPacking>=0,depthPacking:R.depthPacking||0,index0AttributeName:R.index0AttributeName,extensionClipCullDistance:Gt&&R.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:Gt&&R.extensions.multiDraw===!0&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:R.customProgramCacheKey()};return Zt.vertexUv1s=h.has(1),Zt.vertexUv2s=h.has(2),Zt.vertexUv3s=h.has(3),h.clear(),Zt}function g(R){const C=[];if(R.shaderID?C.push(R.shaderID):(C.push(R.customVertexShaderID),C.push(R.customFragmentShaderID)),R.defines!==void 0)for(const O in R.defines)C.push(O),C.push(R.defines[O]);return R.isRawShaderMaterial===!1&&(x(C,R),M(C,R),C.push(t.outputColorSpace)),C.push(R.customProgramCacheKey),C.join()}function x(R,C){R.push(C.precision),R.push(C.outputColorSpace),R.push(C.envMapMode),R.push(C.envMapCubeUVHeight),R.push(C.mapUv),R.push(C.alphaMapUv),R.push(C.lightMapUv),R.push(C.aoMapUv),R.push(C.bumpMapUv),R.push(C.normalMapUv),R.push(C.displacementMapUv),R.push(C.emissiveMapUv),R.push(C.metalnessMapUv),R.push(C.roughnessMapUv),R.push(C.anisotropyMapUv),R.push(C.clearcoatMapUv),R.push(C.clearcoatNormalMapUv),R.push(C.clearcoatRoughnessMapUv),R.push(C.iridescenceMapUv),R.push(C.iridescenceThicknessMapUv),R.push(C.sheenColorMapUv),R.push(C.sheenRoughnessMapUv),R.push(C.specularMapUv),R.push(C.specularColorMapUv),R.push(C.specularIntensityMapUv),R.push(C.transmissionMapUv),R.push(C.thicknessMapUv),R.push(C.combine),R.push(C.fogExp2),R.push(C.sizeAttenuation),R.push(C.morphTargetsCount),R.push(C.morphAttributeCount),R.push(C.numDirLights),R.push(C.numPointLights),R.push(C.numSpotLights),R.push(C.numSpotLightMaps),R.push(C.numHemiLights),R.push(C.numRectAreaLights),R.push(C.numDirLightShadows),R.push(C.numPointLightShadows),R.push(C.numSpotLightShadows),R.push(C.numSpotLightShadowsWithMaps),R.push(C.numLightProbes),R.push(C.shadowMapType),R.push(C.toneMapping),R.push(C.numClippingPlanes),R.push(C.numClipIntersection),R.push(C.depthPacking)}function M(R,C){a.disableAll(),C.supportsVertexTextures&&a.enable(0),C.instancing&&a.enable(1),C.instancingColor&&a.enable(2),C.instancingMorph&&a.enable(3),C.matcap&&a.enable(4),C.envMap&&a.enable(5),C.normalMapObjectSpace&&a.enable(6),C.normalMapTangentSpace&&a.enable(7),C.clearcoat&&a.enable(8),C.iridescence&&a.enable(9),C.alphaTest&&a.enable(10),C.vertexColors&&a.enable(11),C.vertexAlphas&&a.enable(12),C.vertexUv1s&&a.enable(13),C.vertexUv2s&&a.enable(14),C.vertexUv3s&&a.enable(15),C.vertexTangents&&a.enable(16),C.anisotropy&&a.enable(17),C.alphaHash&&a.enable(18),C.batching&&a.enable(19),C.dispersion&&a.enable(20),R.push(a.mask),a.disableAll(),C.fog&&a.enable(0),C.useFog&&a.enable(1),C.flatShading&&a.enable(2),C.logarithmicDepthBuffer&&a.enable(3),C.skinning&&a.enable(4),C.morphTargets&&a.enable(5),C.morphNormals&&a.enable(6),C.morphColors&&a.enable(7),C.premultipliedAlpha&&a.enable(8),C.shadowMapEnabled&&a.enable(9),C.useLegacyLights&&a.enable(10),C.doubleSided&&a.enable(11),C.flipSided&&a.enable(12),C.useDepthPacking&&a.enable(13),C.dithering&&a.enable(14),C.transmission&&a.enable(15),C.sheen&&a.enable(16),C.opaque&&a.enable(17),C.pointsUvs&&a.enable(18),C.decodeVideoTexture&&a.enable(19),C.alphaToCoverage&&a.enable(20),R.push(a.mask)}function T(R){const C=y[R.type];let O;if(C){const j=Ms[C];O=uP.clone(j.uniforms)}else O=R.uniforms;return O}function P(R,C){let O;for(let j=0,H=f.length;j<H;j++){const J=f[j];if(J.cacheKey===C){O=J,++O.usedTimes;break}}return O===void 0&&(O=new kz(t,C,R,s),f.push(O)),O}function b(R){if(--R.usedTimes===0){const C=f.indexOf(R);f[C]=f[f.length-1],f.pop(),R.destroy()}}function L(R){u.remove(R)}function N(){u.dispose()}return{getParameters:S,getProgramCacheKey:g,getUniforms:T,acquireProgram:P,releaseProgram:b,releaseShaderCache:L,programs:f,dispose:N}}function Bz(){let t=new WeakMap;function e(s){let o=t.get(s);return o===void 0&&(o={},t.set(s,o)),o}function n(s){t.delete(s)}function i(s,o,a){t.get(s)[o]=a}function r(){t=new WeakMap}return{get:e,remove:n,update:i,dispose:r}}function Hz(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function RT(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function PT(){const t=[];let e=0;const n=[],i=[],r=[];function s(){e=0,n.length=0,i.length=0,r.length=0}function o(d,p,v,y,w,S){let g=t[e];return g===void 0?(g={id:d.id,object:d,geometry:p,material:v,groupOrder:y,renderOrder:d.renderOrder,z:w,group:S},t[e]=g):(g.id=d.id,g.object=d,g.geometry=p,g.material=v,g.groupOrder=y,g.renderOrder=d.renderOrder,g.z=w,g.group=S),e++,g}function a(d,p,v,y,w,S){const g=o(d,p,v,y,w,S);v.transmission>0?i.push(g):v.transparent===!0?r.push(g):n.push(g)}function u(d,p,v,y,w,S){const g=o(d,p,v,y,w,S);v.transmission>0?i.unshift(g):v.transparent===!0?r.unshift(g):n.unshift(g)}function h(d,p){n.length>1&&n.sort(d||Hz),i.length>1&&i.sort(p||RT),r.length>1&&r.sort(p||RT)}function f(){for(let d=e,p=t.length;d<p;d++){const v=t[d];if(v.id===null)break;v.id=null,v.object=null,v.geometry=null,v.material=null,v.group=null}}return{opaque:n,transmissive:i,transparent:r,init:s,push:a,unshift:u,finish:f,sort:h}}function Vz(){let t=new WeakMap;function e(i,r){const s=t.get(i);let o;return s===void 0?(o=new PT,t.set(i,[o])):r>=s.length?(o=new PT,s.push(o)):o=s[r],o}function n(){t=new WeakMap}return{get:e,dispose:n}}function Gz(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new k,color:new ze};break;case"SpotLight":n={position:new k,direction:new k,color:new ze,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new k,color:new ze,distance:0,decay:0};break;case"HemisphereLight":n={direction:new k,skyColor:new ze,groundColor:new ze};break;case"RectAreaLight":n={color:new ze,position:new k,halfWidth:new k,halfHeight:new k};break}return t[e.id]=n,n}}}function Wz(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new he};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new he};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new he,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let Xz=0;function jz(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function Yz(t){const e=new Gz,n=Wz(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let h=0;h<9;h++)i.probe.push(new k);const r=new k,s=new ct,o=new ct;function a(h,f){let d=0,p=0,v=0;for(let O=0;O<9;O++)i.probe[O].set(0,0,0);let y=0,w=0,S=0,g=0,x=0,M=0,T=0,P=0,b=0,L=0,N=0;h.sort(jz);const R=f===!0?Math.PI:1;for(let O=0,j=h.length;O<j;O++){const H=h[O],J=H.color,ne=H.intensity,fe=H.distance,ve=H.shadow&&H.shadow.map?H.shadow.map.texture:null;if(H.isAmbientLight)d+=J.r*ne*R,p+=J.g*ne*R,v+=J.b*ne*R;else if(H.isLightProbe){for(let U=0;U<9;U++)i.probe[U].addScaledVector(H.sh.coefficients[U],ne);N++}else if(H.isDirectionalLight){const U=e.get(H);if(U.color.copy(H.color).multiplyScalar(H.intensity*R),H.castShadow){const X=H.shadow,V=n.get(H);V.shadowBias=X.bias,V.shadowNormalBias=X.normalBias,V.shadowRadius=X.radius,V.shadowMapSize=X.mapSize,i.directionalShadow[y]=V,i.directionalShadowMap[y]=ve,i.directionalShadowMatrix[y]=H.shadow.matrix,M++}i.directional[y]=U,y++}else if(H.isSpotLight){const U=e.get(H);U.position.setFromMatrixPosition(H.matrixWorld),U.color.copy(J).multiplyScalar(ne*R),U.distance=fe,U.coneCos=Math.cos(H.angle),U.penumbraCos=Math.cos(H.angle*(1-H.penumbra)),U.decay=H.decay,i.spot[S]=U;const X=H.shadow;if(H.map&&(i.spotLightMap[b]=H.map,b++,X.updateMatrices(H),H.castShadow&&L++),i.spotLightMatrix[S]=X.matrix,H.castShadow){const V=n.get(H);V.shadowBias=X.bias,V.shadowNormalBias=X.normalBias,V.shadowRadius=X.radius,V.shadowMapSize=X.mapSize,i.spotShadow[S]=V,i.spotShadowMap[S]=ve,P++}S++}else if(H.isRectAreaLight){const U=e.get(H);U.color.copy(J).multiplyScalar(ne),U.halfWidth.set(H.width*.5,0,0),U.halfHeight.set(0,H.height*.5,0),i.rectArea[g]=U,g++}else if(H.isPointLight){const U=e.get(H);if(U.color.copy(H.color).multiplyScalar(H.intensity*R),U.distance=H.distance,U.decay=H.decay,H.castShadow){const X=H.shadow,V=n.get(H);V.shadowBias=X.bias,V.shadowNormalBias=X.normalBias,V.shadowRadius=X.radius,V.shadowMapSize=X.mapSize,V.shadowCameraNear=X.camera.near,V.shadowCameraFar=X.camera.far,i.pointShadow[w]=V,i.pointShadowMap[w]=ve,i.pointShadowMatrix[w]=H.shadow.matrix,T++}i.point[w]=U,w++}else if(H.isHemisphereLight){const U=e.get(H);U.skyColor.copy(H.color).multiplyScalar(ne*R),U.groundColor.copy(H.groundColor).multiplyScalar(ne*R),i.hemi[x]=U,x++}}g>0&&(t.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=De.LTC_FLOAT_1,i.rectAreaLTC2=De.LTC_FLOAT_2):(i.rectAreaLTC1=De.LTC_HALF_1,i.rectAreaLTC2=De.LTC_HALF_2)),i.ambient[0]=d,i.ambient[1]=p,i.ambient[2]=v;const C=i.hash;(C.directionalLength!==y||C.pointLength!==w||C.spotLength!==S||C.rectAreaLength!==g||C.hemiLength!==x||C.numDirectionalShadows!==M||C.numPointShadows!==T||C.numSpotShadows!==P||C.numSpotMaps!==b||C.numLightProbes!==N)&&(i.directional.length=y,i.spot.length=S,i.rectArea.length=g,i.point.length=w,i.hemi.length=x,i.directionalShadow.length=M,i.directionalShadowMap.length=M,i.pointShadow.length=T,i.pointShadowMap.length=T,i.spotShadow.length=P,i.spotShadowMap.length=P,i.directionalShadowMatrix.length=M,i.pointShadowMatrix.length=T,i.spotLightMatrix.length=P+b-L,i.spotLightMap.length=b,i.numSpotLightShadowsWithMaps=L,i.numLightProbes=N,C.directionalLength=y,C.pointLength=w,C.spotLength=S,C.rectAreaLength=g,C.hemiLength=x,C.numDirectionalShadows=M,C.numPointShadows=T,C.numSpotShadows=P,C.numSpotMaps=b,C.numLightProbes=N,i.version=Xz++)}function u(h,f){let d=0,p=0,v=0,y=0,w=0;const S=f.matrixWorldInverse;for(let g=0,x=h.length;g<x;g++){const M=h[g];if(M.isDirectionalLight){const T=i.directional[d];T.direction.setFromMatrixPosition(M.matrixWorld),r.setFromMatrixPosition(M.target.matrixWorld),T.direction.sub(r),T.direction.transformDirection(S),d++}else if(M.isSpotLight){const T=i.spot[v];T.position.setFromMatrixPosition(M.matrixWorld),T.position.applyMatrix4(S),T.direction.setFromMatrixPosition(M.matrixWorld),r.setFromMatrixPosition(M.target.matrixWorld),T.direction.sub(r),T.direction.transformDirection(S),v++}else if(M.isRectAreaLight){const T=i.rectArea[y];T.position.setFromMatrixPosition(M.matrixWorld),T.position.applyMatrix4(S),o.identity(),s.copy(M.matrixWorld),s.premultiply(S),o.extractRotation(s),T.halfWidth.set(M.width*.5,0,0),T.halfHeight.set(0,M.height*.5,0),T.halfWidth.applyMatrix4(o),T.halfHeight.applyMatrix4(o),y++}else if(M.isPointLight){const T=i.point[p];T.position.setFromMatrixPosition(M.matrixWorld),T.position.applyMatrix4(S),p++}else if(M.isHemisphereLight){const T=i.hemi[w];T.direction.setFromMatrixPosition(M.matrixWorld),T.direction.transformDirection(S),w++}}}return{setup:a,setupView:u,state:i}}function LT(t){const e=new Yz(t),n=[],i=[];function r(f){h.camera=f,n.length=0,i.length=0}function s(f){n.push(f)}function o(f){i.push(f)}function a(f){e.setup(n,f)}function u(f){e.setupView(n,f)}const h={lightsArray:n,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:h,setupLights:a,setupLightsView:u,pushLight:s,pushShadow:o}}function $z(t){let e=new WeakMap;function n(r,s=0){const o=e.get(r);let a;return o===void 0?(a=new LT(t),e.set(r,[a])):s>=o.length?(a=new LT(t),o.push(a)):a=o[s],a}function i(){e=new WeakMap}return{get:n,dispose:i}}class NS extends ki{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=YR,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class DS extends ki{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const qz=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Zz=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Kz(t,e,n){let i=new bd;const r=new he,s=new he,o=new $t,a=new NS({depthPacking:$R}),u=new DS,h={},f=n.maxTextureSize,d={[Wo]:Xi,[Xi]:Wo,[qs]:qs},p=new Cs({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new he},radius:{value:4}},vertexShader:qz,fragmentShader:Zz}),v=p.clone();v.defines.HORIZONTAL_PASS=1;const y=new At;y.setAttribute("position",new Xt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const w=new Zn(y,p),S=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=k0;let g=this.type;this.render=function(b,L,N){if(S.enabled===!1||S.autoUpdate===!1&&S.needsUpdate===!1||b.length===0)return;const R=t.getRenderTarget(),C=t.getActiveCubeFace(),O=t.getActiveMipmapLevel(),j=t.state;j.setBlending(Uo),j.buffers.color.setClear(1,1,1,1),j.buffers.depth.setTest(!0),j.setScissorTest(!1);const H=g!==_s&&this.type===_s,J=g===_s&&this.type!==_s;for(let ne=0,fe=b.length;ne<fe;ne++){const ve=b[ne],U=ve.shadow;if(U===void 0){console.warn("THREE.WebGLShadowMap:",ve,"has no shadow.");continue}if(U.autoUpdate===!1&&U.needsUpdate===!1)continue;r.copy(U.mapSize);const X=U.getFrameExtents();if(r.multiply(X),s.copy(U.mapSize),(r.x>f||r.y>f)&&(r.x>f&&(s.x=Math.floor(f/X.x),r.x=s.x*X.x,U.mapSize.x=s.x),r.y>f&&(s.y=Math.floor(f/X.y),r.y=s.y*X.y,U.mapSize.y=s.y)),U.map===null||H===!0||J===!0){const re=this.type!==_s?{minFilter:fi,magFilter:fi}:{};U.map!==null&&U.map.dispose(),U.map=new As(r.x,r.y,re),U.map.texture.name=ve.name+".shadowMap",U.camera.updateProjectionMatrix()}t.setRenderTarget(U.map),t.clear();const V=U.getViewportCount();for(let re=0;re<V;re++){const we=U.getViewport(re);o.set(s.x*we.x,s.y*we.y,s.x*we.z,s.y*we.w),j.viewport(o),U.updateMatrices(ve,re),i=U.getFrustum(),T(L,N,U.camera,ve,this.type)}U.isPointLightShadow!==!0&&this.type===_s&&x(U,N),U.needsUpdate=!1}g=this.type,S.needsUpdate=!1,t.setRenderTarget(R,C,O)};function x(b,L){const N=e.update(w);p.defines.VSM_SAMPLES!==b.blurSamples&&(p.defines.VSM_SAMPLES=b.blurSamples,v.defines.VSM_SAMPLES=b.blurSamples,p.needsUpdate=!0,v.needsUpdate=!0),b.mapPass===null&&(b.mapPass=new As(r.x,r.y)),p.uniforms.shadow_pass.value=b.map.texture,p.uniforms.resolution.value=b.mapSize,p.uniforms.radius.value=b.radius,t.setRenderTarget(b.mapPass),t.clear(),t.renderBufferDirect(L,null,N,p,w,null),v.uniforms.shadow_pass.value=b.mapPass.texture,v.uniforms.resolution.value=b.mapSize,v.uniforms.radius.value=b.radius,t.setRenderTarget(b.map),t.clear(),t.renderBufferDirect(L,null,N,v,w,null)}function M(b,L,N,R){let C=null;const O=N.isPointLight===!0?b.customDistanceMaterial:b.customDepthMaterial;if(O!==void 0)C=O;else if(C=N.isPointLight===!0?u:a,t.localClippingEnabled&&L.clipShadows===!0&&Array.isArray(L.clippingPlanes)&&L.clippingPlanes.length!==0||L.displacementMap&&L.displacementScale!==0||L.alphaMap&&L.alphaTest>0||L.map&&L.alphaTest>0){const j=C.uuid,H=L.uuid;let J=h[j];J===void 0&&(J={},h[j]=J);let ne=J[H];ne===void 0&&(ne=C.clone(),J[H]=ne,L.addEventListener("dispose",P)),C=ne}if(C.visible=L.visible,C.wireframe=L.wireframe,R===_s?C.side=L.shadowSide!==null?L.shadowSide:L.side:C.side=L.shadowSide!==null?L.shadowSide:d[L.side],C.alphaMap=L.alphaMap,C.alphaTest=L.alphaTest,C.map=L.map,C.clipShadows=L.clipShadows,C.clippingPlanes=L.clippingPlanes,C.clipIntersection=L.clipIntersection,C.displacementMap=L.displacementMap,C.displacementScale=L.displacementScale,C.displacementBias=L.displacementBias,C.wireframeLinewidth=L.wireframeLinewidth,C.linewidth=L.linewidth,N.isPointLight===!0&&C.isMeshDistanceMaterial===!0){const j=t.properties.get(C);j.light=N}return C}function T(b,L,N,R,C){if(b.visible===!1)return;if(b.layers.test(L.layers)&&(b.isMesh||b.isLine||b.isPoints)&&(b.castShadow||b.receiveShadow&&C===_s)&&(!b.frustumCulled||i.intersectsObject(b))){b.modelViewMatrix.multiplyMatrices(N.matrixWorldInverse,b.matrixWorld);const H=e.update(b),J=b.material;if(Array.isArray(J)){const ne=H.groups;for(let fe=0,ve=ne.length;fe<ve;fe++){const U=ne[fe],X=J[U.materialIndex];if(X&&X.visible){const V=M(b,X,R,C);b.onBeforeShadow(t,b,L,N,H,V,U),t.renderBufferDirect(N,null,H,V,b,U),b.onAfterShadow(t,b,L,N,H,V,U)}}}else if(J.visible){const ne=M(b,J,R,C);b.onBeforeShadow(t,b,L,N,H,ne,null),t.renderBufferDirect(N,null,H,ne,b,null),b.onAfterShadow(t,b,L,N,H,ne,null)}}const j=b.children;for(let H=0,J=j.length;H<J;H++)T(j[H],L,N,R,C)}function P(b){b.target.removeEventListener("dispose",P);for(const N in h){const R=h[N],C=b.target.uuid;C in R&&(R[C].dispose(),delete R[C])}}}function Jz(t){function e(){let B=!1;const oe=new $t;let ae=null;const Re=new $t(0,0,0,0);return{setMask:function(Ne){ae!==Ne&&!B&&(t.colorMask(Ne,Ne,Ne,Ne),ae=Ne)},setLocked:function(Ne){B=Ne},setClear:function(Ne,It,Gt,Nt,Zt){Zt===!0&&(Ne*=Nt,It*=Nt,Gt*=Nt),oe.set(Ne,It,Gt,Nt),Re.equals(oe)===!1&&(t.clearColor(Ne,It,Gt,Nt),Re.copy(oe))},reset:function(){B=!1,ae=null,Re.set(-1,0,0,0)}}}function n(){let B=!1,oe=null,ae=null,Re=null;return{setTest:function(Ne){Ne?Ce(t.DEPTH_TEST):Me(t.DEPTH_TEST)},setMask:function(Ne){oe!==Ne&&!B&&(t.depthMask(Ne),oe=Ne)},setFunc:function(Ne){if(ae!==Ne){switch(Ne){case _R:t.depthFunc(t.NEVER);break;case xR:t.depthFunc(t.ALWAYS);break;case SR:t.depthFunc(t.LESS);break;case Yf:t.depthFunc(t.LEQUAL);break;case MR:t.depthFunc(t.EQUAL);break;case wR:t.depthFunc(t.GEQUAL);break;case ER:t.depthFunc(t.GREATER);break;case TR:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}ae=Ne}},setLocked:function(Ne){B=Ne},setClear:function(Ne){Re!==Ne&&(t.clearDepth(Ne),Re=Ne)},reset:function(){B=!1,oe=null,ae=null,Re=null}}}function i(){let B=!1,oe=null,ae=null,Re=null,Ne=null,It=null,Gt=null,Nt=null,Zt=null;return{setTest:function(bt){B||(bt?Ce(t.STENCIL_TEST):Me(t.STENCIL_TEST))},setMask:function(bt){oe!==bt&&!B&&(t.stencilMask(bt),oe=bt)},setFunc:function(bt,Kn,hn){(ae!==bt||Re!==Kn||Ne!==hn)&&(t.stencilFunc(bt,Kn,hn),ae=bt,Re=Kn,Ne=hn)},setOp:function(bt,Kn,hn){(It!==bt||Gt!==Kn||Nt!==hn)&&(t.stencilOp(bt,Kn,hn),It=bt,Gt=Kn,Nt=hn)},setLocked:function(bt){B=bt},setClear:function(bt){Zt!==bt&&(t.clearStencil(bt),Zt=bt)},reset:function(){B=!1,oe=null,ae=null,Re=null,Ne=null,It=null,Gt=null,Nt=null,Zt=null}}}const r=new e,s=new n,o=new i,a=new WeakMap,u=new WeakMap;let h={},f={},d=new WeakMap,p=[],v=null,y=!1,w=null,S=null,g=null,x=null,M=null,T=null,P=null,b=new ze(0,0,0),L=0,N=!1,R=null,C=null,O=null,j=null,H=null;const J=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let ne=!1,fe=0;const ve=t.getParameter(t.VERSION);ve.indexOf("WebGL")!==-1?(fe=parseFloat(/^WebGL (\d)/.exec(ve)[1]),ne=fe>=1):ve.indexOf("OpenGL ES")!==-1&&(fe=parseFloat(/^OpenGL ES (\d)/.exec(ve)[1]),ne=fe>=2);let U=null,X={};const V=t.getParameter(t.SCISSOR_BOX),re=t.getParameter(t.VIEWPORT),we=new $t().fromArray(V),Be=new $t().fromArray(re);function ee(B,oe,ae,Re){const Ne=new Uint8Array(4),It=t.createTexture();t.bindTexture(B,It),t.texParameteri(B,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(B,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let Gt=0;Gt<ae;Gt++)B===t.TEXTURE_3D||B===t.TEXTURE_2D_ARRAY?t.texImage3D(oe,0,t.RGBA,1,1,Re,0,t.RGBA,t.UNSIGNED_BYTE,Ne):t.texImage2D(oe+Gt,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,Ne);return It}const xe={};xe[t.TEXTURE_2D]=ee(t.TEXTURE_2D,t.TEXTURE_2D,1),xe[t.TEXTURE_CUBE_MAP]=ee(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),xe[t.TEXTURE_2D_ARRAY]=ee(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),xe[t.TEXTURE_3D]=ee(t.TEXTURE_3D,t.TEXTURE_3D,1,1),r.setClear(0,0,0,1),s.setClear(1),o.setClear(0),Ce(t.DEPTH_TEST),s.setFunc(Yf),Pe(!1),Se(lx),Ce(t.CULL_FACE),ge(Uo);function Ce(B){h[B]!==!0&&(t.enable(B),h[B]=!0)}function Me(B){h[B]!==!1&&(t.disable(B),h[B]=!1)}function ft(B,oe){return f[B]!==oe?(t.bindFramebuffer(B,oe),f[B]=oe,B===t.DRAW_FRAMEBUFFER&&(f[t.FRAMEBUFFER]=oe),B===t.FRAMEBUFFER&&(f[t.DRAW_FRAMEBUFFER]=oe),!0):!1}function vt(B,oe){let ae=p,Re=!1;if(B){ae=d.get(oe),ae===void 0&&(ae=[],d.set(oe,ae));const Ne=B.textures;if(ae.length!==Ne.length||ae[0]!==t.COLOR_ATTACHMENT0){for(let It=0,Gt=Ne.length;It<Gt;It++)ae[It]=t.COLOR_ATTACHMENT0+It;ae.length=Ne.length,Re=!0}}else ae[0]!==t.BACK&&(ae[0]=t.BACK,Re=!0);Re&&t.drawBuffers(ae)}function $(B){return v!==B?(t.useProgram(B),v=B,!0):!1}const ut={[Ma]:t.FUNC_ADD,[nR]:t.FUNC_SUBTRACT,[iR]:t.FUNC_REVERSE_SUBTRACT};ut[rR]=t.MIN,ut[sR]=t.MAX;const ce={[oR]:t.ZERO,[aR]:t.ONE,[lR]:t.SRC_COLOR,[t0]:t.SRC_ALPHA,[pR]:t.SRC_ALPHA_SATURATE,[fR]:t.DST_COLOR,[uR]:t.DST_ALPHA,[cR]:t.ONE_MINUS_SRC_COLOR,[n0]:t.ONE_MINUS_SRC_ALPHA,[dR]:t.ONE_MINUS_DST_COLOR,[hR]:t.ONE_MINUS_DST_ALPHA,[mR]:t.CONSTANT_COLOR,[gR]:t.ONE_MINUS_CONSTANT_COLOR,[vR]:t.CONSTANT_ALPHA,[yR]:t.ONE_MINUS_CONSTANT_ALPHA};function ge(B,oe,ae,Re,Ne,It,Gt,Nt,Zt,bt){if(B===Uo){y===!0&&(Me(t.BLEND),y=!1);return}if(y===!1&&(Ce(t.BLEND),y=!0),B!==tR){if(B!==w||bt!==N){if((S!==Ma||M!==Ma)&&(t.blendEquation(t.FUNC_ADD),S=Ma,M=Ma),bt)switch(B){case Da:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case e0:t.blendFunc(t.ONE,t.ONE);break;case cx:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case ux:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",B);break}else switch(B){case Da:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case e0:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case cx:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case ux:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",B);break}g=null,x=null,T=null,P=null,b.set(0,0,0),L=0,w=B,N=bt}return}Ne=Ne||oe,It=It||ae,Gt=Gt||Re,(oe!==S||Ne!==M)&&(t.blendEquationSeparate(ut[oe],ut[Ne]),S=oe,M=Ne),(ae!==g||Re!==x||It!==T||Gt!==P)&&(t.blendFuncSeparate(ce[ae],ce[Re],ce[It],ce[Gt]),g=ae,x=Re,T=It,P=Gt),(Nt.equals(b)===!1||Zt!==L)&&(t.blendColor(Nt.r,Nt.g,Nt.b,Zt),b.copy(Nt),L=Zt),w=B,N=!1}function pe(B,oe){B.side===qs?Me(t.CULL_FACE):Ce(t.CULL_FACE);let ae=B.side===Xi;oe&&(ae=!ae),Pe(ae),B.blending===Da&&B.transparent===!1?ge(Uo):ge(B.blending,B.blendEquation,B.blendSrc,B.blendDst,B.blendEquationAlpha,B.blendSrcAlpha,B.blendDstAlpha,B.blendColor,B.blendAlpha,B.premultipliedAlpha),s.setFunc(B.depthFunc),s.setTest(B.depthTest),s.setMask(B.depthWrite),r.setMask(B.colorWrite);const Re=B.stencilWrite;o.setTest(Re),Re&&(o.setMask(B.stencilWriteMask),o.setFunc(B.stencilFunc,B.stencilRef,B.stencilFuncMask),o.setOp(B.stencilFail,B.stencilZFail,B.stencilZPass)),Qe(B.polygonOffset,B.polygonOffsetFactor,B.polygonOffsetUnits),B.alphaToCoverage===!0?Ce(t.SAMPLE_ALPHA_TO_COVERAGE):Me(t.SAMPLE_ALPHA_TO_COVERAGE)}function Pe(B){R!==B&&(B?t.frontFace(t.CW):t.frontFace(t.CCW),R=B)}function Se(B){B!==Jb?(Ce(t.CULL_FACE),B!==C&&(B===lx?t.cullFace(t.BACK):B===Qb?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):Me(t.CULL_FACE),C=B}function Fe(B){B!==O&&(ne&&t.lineWidth(B),O=B)}function Qe(B,oe,ae){B?(Ce(t.POLYGON_OFFSET_FILL),(j!==oe||H!==ae)&&(t.polygonOffset(oe,ae),j=oe,H=ae)):Me(t.POLYGON_OFFSET_FILL)}function z(B){B?Ce(t.SCISSOR_TEST):Me(t.SCISSOR_TEST)}function I(B){B===void 0&&(B=t.TEXTURE0+J-1),U!==B&&(t.activeTexture(B),U=B)}function Z(B,oe,ae){ae===void 0&&(U===null?ae=t.TEXTURE0+J-1:ae=U);let Re=X[ae];Re===void 0&&(Re={type:void 0,texture:void 0},X[ae]=Re),(Re.type!==B||Re.texture!==oe)&&(U!==ae&&(t.activeTexture(ae),U=ae),t.bindTexture(B,oe||xe[B]),Re.type=B,Re.texture=oe)}function de(){const B=X[U];B!==void 0&&B.type!==void 0&&(t.bindTexture(B.type,null),B.type=void 0,B.texture=void 0)}function ye(){try{t.compressedTexImage2D.apply(t,arguments)}catch(B){console.error("THREE.WebGLState:",B)}}function me(){try{t.compressedTexImage3D.apply(t,arguments)}catch(B){console.error("THREE.WebGLState:",B)}}function Ze(){try{t.texSubImage2D.apply(t,arguments)}catch(B){console.error("THREE.WebGLState:",B)}}function Ie(){try{t.texSubImage3D.apply(t,arguments)}catch(B){console.error("THREE.WebGLState:",B)}}function Le(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(B){console.error("THREE.WebGLState:",B)}}function ht(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(B){console.error("THREE.WebGLState:",B)}}function be(){try{t.texStorage2D.apply(t,arguments)}catch(B){console.error("THREE.WebGLState:",B)}}function $e(){try{t.texStorage3D.apply(t,arguments)}catch(B){console.error("THREE.WebGLState:",B)}}function Mt(){try{t.texImage2D.apply(t,arguments)}catch(B){console.error("THREE.WebGLState:",B)}}function it(){try{t.texImage3D.apply(t,arguments)}catch(B){console.error("THREE.WebGLState:",B)}}function He(B){we.equals(B)===!1&&(t.scissor(B.x,B.y,B.z,B.w),we.copy(B))}function dt(B){Be.equals(B)===!1&&(t.viewport(B.x,B.y,B.z,B.w),Be.copy(B))}function wt(B,oe){let ae=u.get(oe);ae===void 0&&(ae=new WeakMap,u.set(oe,ae));let Re=ae.get(B);Re===void 0&&(Re=t.getUniformBlockIndex(oe,B.name),ae.set(B,Re))}function G(B,oe){const Re=u.get(oe).get(B);a.get(oe)!==Re&&(t.uniformBlockBinding(oe,Re,B.__bindingPointIndex),a.set(oe,Re))}function ue(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),h={},U=null,X={},f={},d=new WeakMap,p=[],v=null,y=!1,w=null,S=null,g=null,x=null,M=null,T=null,P=null,b=new ze(0,0,0),L=0,N=!1,R=null,C=null,O=null,j=null,H=null,we.set(0,0,t.canvas.width,t.canvas.height),Be.set(0,0,t.canvas.width,t.canvas.height),r.reset(),s.reset(),o.reset()}return{buffers:{color:r,depth:s,stencil:o},enable:Ce,disable:Me,bindFramebuffer:ft,drawBuffers:vt,useProgram:$,setBlending:ge,setMaterial:pe,setFlipSided:Pe,setCullFace:Se,setLineWidth:Fe,setPolygonOffset:Qe,setScissorTest:z,activeTexture:I,bindTexture:Z,unbindTexture:de,compressedTexImage2D:ye,compressedTexImage3D:me,texImage2D:Mt,texImage3D:it,updateUBOMapping:wt,uniformBlockBinding:G,texStorage2D:be,texStorage3D:$e,texSubImage2D:Ze,texSubImage3D:Ie,compressedTexSubImage2D:Le,compressedTexSubImage3D:ht,scissor:He,viewport:dt,reset:ue}}function Qz(t,e,n,i,r,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,u=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),h=new he,f=new WeakMap;let d;const p=new WeakMap;let v=!1;try{v=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function y(z,I){return v?new OffscreenCanvas(z,I):od("canvas")}function w(z,I,Z){let de=1;const ye=Qe(z);if((ye.width>Z||ye.height>Z)&&(de=Z/Math.max(ye.width,ye.height)),de<1)if(typeof HTMLImageElement<"u"&&z instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&z instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&z instanceof ImageBitmap||typeof VideoFrame<"u"&&z instanceof VideoFrame){const me=Math.floor(de*ye.width),Ze=Math.floor(de*ye.height);d===void 0&&(d=y(me,Ze));const Ie=I?y(me,Ze):d;return Ie.width=me,Ie.height=Ze,Ie.getContext("2d").drawImage(z,0,0,me,Ze),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ye.width+"x"+ye.height+") to ("+me+"x"+Ze+")."),Ie}else return"data"in z&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ye.width+"x"+ye.height+")."),z;return z}function S(z){return z.generateMipmaps&&z.minFilter!==fi&&z.minFilter!==qn}function g(z){t.generateMipmap(z)}function x(z,I,Z,de,ye=!1){if(z!==null){if(t[z]!==void 0)return t[z];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+z+"'")}let me=I;if(I===t.RED&&(Z===t.FLOAT&&(me=t.R32F),Z===t.HALF_FLOAT&&(me=t.R16F),Z===t.UNSIGNED_BYTE&&(me=t.R8)),I===t.RED_INTEGER&&(Z===t.UNSIGNED_BYTE&&(me=t.R8UI),Z===t.UNSIGNED_SHORT&&(me=t.R16UI),Z===t.UNSIGNED_INT&&(me=t.R32UI),Z===t.BYTE&&(me=t.R8I),Z===t.SHORT&&(me=t.R16I),Z===t.INT&&(me=t.R32I)),I===t.RG&&(Z===t.FLOAT&&(me=t.RG32F),Z===t.HALF_FLOAT&&(me=t.RG16F),Z===t.UNSIGNED_BYTE&&(me=t.RG8)),I===t.RG_INTEGER&&(Z===t.UNSIGNED_BYTE&&(me=t.RG8UI),Z===t.UNSIGNED_SHORT&&(me=t.RG16UI),Z===t.UNSIGNED_INT&&(me=t.RG32UI),Z===t.BYTE&&(me=t.RG8I),Z===t.SHORT&&(me=t.RG16I),Z===t.INT&&(me=t.RG32I)),I===t.RGB&&Z===t.UNSIGNED_INT_5_9_9_9_REV&&(me=t.RGB9_E5),I===t.RGBA){const Ze=ye?td:Yt.getTransfer(de);Z===t.FLOAT&&(me=t.RGBA32F),Z===t.HALF_FLOAT&&(me=t.RGBA16F),Z===t.UNSIGNED_BYTE&&(me=Ze===en?t.SRGB8_ALPHA8:t.RGBA8),Z===t.UNSIGNED_SHORT_4_4_4_4&&(me=t.RGBA4),Z===t.UNSIGNED_SHORT_5_5_5_1&&(me=t.RGB5_A1)}return(me===t.R16F||me===t.R32F||me===t.RG16F||me===t.RG32F||me===t.RGBA16F||me===t.RGBA32F)&&e.get("EXT_color_buffer_float"),me}function M(z,I){return S(z)===!0||z.isFramebufferTexture&&z.minFilter!==fi&&z.minFilter!==qn?Math.log2(Math.max(I.width,I.height))+1:z.mipmaps!==void 0&&z.mipmaps.length>0?z.mipmaps.length:z.isCompressedTexture&&Array.isArray(z.image)?I.mipmaps.length:1}function T(z){const I=z.target;I.removeEventListener("dispose",T),b(I),I.isVideoTexture&&f.delete(I)}function P(z){const I=z.target;I.removeEventListener("dispose",P),N(I)}function b(z){const I=i.get(z);if(I.__webglInit===void 0)return;const Z=z.source,de=p.get(Z);if(de){const ye=de[I.__cacheKey];ye.usedTimes--,ye.usedTimes===0&&L(z),Object.keys(de).length===0&&p.delete(Z)}i.remove(z)}function L(z){const I=i.get(z);t.deleteTexture(I.__webglTexture);const Z=z.source,de=p.get(Z);delete de[I.__cacheKey],o.memory.textures--}function N(z){const I=i.get(z);if(z.depthTexture&&z.depthTexture.dispose(),z.isWebGLCubeRenderTarget)for(let de=0;de<6;de++){if(Array.isArray(I.__webglFramebuffer[de]))for(let ye=0;ye<I.__webglFramebuffer[de].length;ye++)t.deleteFramebuffer(I.__webglFramebuffer[de][ye]);else t.deleteFramebuffer(I.__webglFramebuffer[de]);I.__webglDepthbuffer&&t.deleteRenderbuffer(I.__webglDepthbuffer[de])}else{if(Array.isArray(I.__webglFramebuffer))for(let de=0;de<I.__webglFramebuffer.length;de++)t.deleteFramebuffer(I.__webglFramebuffer[de]);else t.deleteFramebuffer(I.__webglFramebuffer);if(I.__webglDepthbuffer&&t.deleteRenderbuffer(I.__webglDepthbuffer),I.__webglMultisampledFramebuffer&&t.deleteFramebuffer(I.__webglMultisampledFramebuffer),I.__webglColorRenderbuffer)for(let de=0;de<I.__webglColorRenderbuffer.length;de++)I.__webglColorRenderbuffer[de]&&t.deleteRenderbuffer(I.__webglColorRenderbuffer[de]);I.__webglDepthRenderbuffer&&t.deleteRenderbuffer(I.__webglDepthRenderbuffer)}const Z=z.textures;for(let de=0,ye=Z.length;de<ye;de++){const me=i.get(Z[de]);me.__webglTexture&&(t.deleteTexture(me.__webglTexture),o.memory.textures--),i.remove(Z[de])}i.remove(z)}let R=0;function C(){R=0}function O(){const z=R;return z>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+z+" texture units while this GPU supports only "+r.maxTextures),R+=1,z}function j(z){const I=[];return I.push(z.wrapS),I.push(z.wrapT),I.push(z.wrapR||0),I.push(z.magFilter),I.push(z.minFilter),I.push(z.anisotropy),I.push(z.internalFormat),I.push(z.format),I.push(z.type),I.push(z.generateMipmaps),I.push(z.premultiplyAlpha),I.push(z.flipY),I.push(z.unpackAlignment),I.push(z.colorSpace),I.join()}function H(z,I){const Z=i.get(z);if(z.isVideoTexture&&Se(z),z.isRenderTargetTexture===!1&&z.version>0&&Z.__version!==z.version){const de=z.image;if(de===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(de.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{we(Z,z,I);return}}n.bindTexture(t.TEXTURE_2D,Z.__webglTexture,t.TEXTURE0+I)}function J(z,I){const Z=i.get(z);if(z.version>0&&Z.__version!==z.version){we(Z,z,I);return}n.bindTexture(t.TEXTURE_2D_ARRAY,Z.__webglTexture,t.TEXTURE0+I)}function ne(z,I){const Z=i.get(z);if(z.version>0&&Z.__version!==z.version){we(Z,z,I);return}n.bindTexture(t.TEXTURE_3D,Z.__webglTexture,t.TEXTURE0+I)}function fe(z,I){const Z=i.get(z);if(z.version>0&&Z.__version!==z.version){Be(Z,z,I);return}n.bindTexture(t.TEXTURE_CUBE_MAP,Z.__webglTexture,t.TEXTURE0+I)}const ve={[Zf]:t.REPEAT,[es]:t.CLAMP_TO_EDGE,[Kf]:t.MIRRORED_REPEAT},U={[fi]:t.NEAREST,[gS]:t.NEAREST_MIPMAP_NEAREST,[mu]:t.NEAREST_MIPMAP_LINEAR,[qn]:t.LINEAR,[Sf]:t.LINEAR_MIPMAP_NEAREST,[Zs]:t.LINEAR_MIPMAP_LINEAR},X={[ZR]:t.NEVER,[nP]:t.ALWAYS,[KR]:t.LESS,[AS]:t.LEQUAL,[JR]:t.EQUAL,[tP]:t.GEQUAL,[QR]:t.GREATER,[eP]:t.NOTEQUAL};function V(z,I){if(I.type===ts&&e.has("OES_texture_float_linear")===!1&&(I.magFilter===qn||I.magFilter===Sf||I.magFilter===mu||I.magFilter===Zs||I.minFilter===qn||I.minFilter===Sf||I.minFilter===mu||I.minFilter===Zs)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),t.texParameteri(z,t.TEXTURE_WRAP_S,ve[I.wrapS]),t.texParameteri(z,t.TEXTURE_WRAP_T,ve[I.wrapT]),(z===t.TEXTURE_3D||z===t.TEXTURE_2D_ARRAY)&&t.texParameteri(z,t.TEXTURE_WRAP_R,ve[I.wrapR]),t.texParameteri(z,t.TEXTURE_MAG_FILTER,U[I.magFilter]),t.texParameteri(z,t.TEXTURE_MIN_FILTER,U[I.minFilter]),I.compareFunction&&(t.texParameteri(z,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(z,t.TEXTURE_COMPARE_FUNC,X[I.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(I.magFilter===fi||I.minFilter!==mu&&I.minFilter!==Zs||I.type===ts&&e.has("OES_texture_float_linear")===!1)return;if(I.anisotropy>1||i.get(I).__currentAnisotropy){const Z=e.get("EXT_texture_filter_anisotropic");t.texParameterf(z,Z.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(I.anisotropy,r.getMaxAnisotropy())),i.get(I).__currentAnisotropy=I.anisotropy}}}function re(z,I){let Z=!1;z.__webglInit===void 0&&(z.__webglInit=!0,I.addEventListener("dispose",T));const de=I.source;let ye=p.get(de);ye===void 0&&(ye={},p.set(de,ye));const me=j(I);if(me!==z.__cacheKey){ye[me]===void 0&&(ye[me]={texture:t.createTexture(),usedTimes:0},o.memory.textures++,Z=!0),ye[me].usedTimes++;const Ze=ye[z.__cacheKey];Ze!==void 0&&(ye[z.__cacheKey].usedTimes--,Ze.usedTimes===0&&L(I)),z.__cacheKey=me,z.__webglTexture=ye[me].texture}return Z}function we(z,I,Z){let de=t.TEXTURE_2D;(I.isDataArrayTexture||I.isCompressedArrayTexture)&&(de=t.TEXTURE_2D_ARRAY),I.isData3DTexture&&(de=t.TEXTURE_3D);const ye=re(z,I),me=I.source;n.bindTexture(de,z.__webglTexture,t.TEXTURE0+Z);const Ze=i.get(me);if(me.version!==Ze.__version||ye===!0){n.activeTexture(t.TEXTURE0+Z);const Ie=Yt.getPrimaries(Yt.workingColorSpace),Le=I.colorSpace===bo?null:Yt.getPrimaries(I.colorSpace),ht=I.colorSpace===bo||Ie===Le?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,I.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,I.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,I.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,ht);let be=w(I.image,!1,r.maxTextureSize);be=Fe(I,be);const $e=s.convert(I.format,I.colorSpace),Mt=s.convert(I.type);let it=x(I.internalFormat,$e,Mt,I.colorSpace,I.isVideoTexture);V(de,I);let He;const dt=I.mipmaps,wt=I.isVideoTexture!==!0,G=Ze.__version===void 0||ye===!0,ue=me.dataReady,B=M(I,be);if(I.isDepthTexture)it=t.DEPTH_COMPONENT16,I.type===ts?it=t.DEPTH_COMPONENT32F:I.type===tc?it=t.DEPTH_COMPONENT24:I.type===th&&(it=t.DEPTH24_STENCIL8),G&&(wt?n.texStorage2D(t.TEXTURE_2D,1,it,be.width,be.height):n.texImage2D(t.TEXTURE_2D,0,it,be.width,be.height,0,$e,Mt,null));else if(I.isDataTexture)if(dt.length>0){wt&&G&&n.texStorage2D(t.TEXTURE_2D,B,it,dt[0].width,dt[0].height);for(let oe=0,ae=dt.length;oe<ae;oe++)He=dt[oe],wt?ue&&n.texSubImage2D(t.TEXTURE_2D,oe,0,0,He.width,He.height,$e,Mt,He.data):n.texImage2D(t.TEXTURE_2D,oe,it,He.width,He.height,0,$e,Mt,He.data);I.generateMipmaps=!1}else wt?(G&&n.texStorage2D(t.TEXTURE_2D,B,it,be.width,be.height),ue&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,be.width,be.height,$e,Mt,be.data)):n.texImage2D(t.TEXTURE_2D,0,it,be.width,be.height,0,$e,Mt,be.data);else if(I.isCompressedTexture)if(I.isCompressedArrayTexture){wt&&G&&n.texStorage3D(t.TEXTURE_2D_ARRAY,B,it,dt[0].width,dt[0].height,be.depth);for(let oe=0,ae=dt.length;oe<ae;oe++)He=dt[oe],I.format!==or?$e!==null?wt?ue&&n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,oe,0,0,0,He.width,He.height,be.depth,$e,He.data,0,0):n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,oe,it,He.width,He.height,be.depth,0,He.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):wt?ue&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,oe,0,0,0,He.width,He.height,be.depth,$e,Mt,He.data):n.texImage3D(t.TEXTURE_2D_ARRAY,oe,it,He.width,He.height,be.depth,0,$e,Mt,He.data)}else{wt&&G&&n.texStorage2D(t.TEXTURE_2D,B,it,dt[0].width,dt[0].height);for(let oe=0,ae=dt.length;oe<ae;oe++)He=dt[oe],I.format!==or?$e!==null?wt?ue&&n.compressedTexSubImage2D(t.TEXTURE_2D,oe,0,0,He.width,He.height,$e,He.data):n.compressedTexImage2D(t.TEXTURE_2D,oe,it,He.width,He.height,0,He.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):wt?ue&&n.texSubImage2D(t.TEXTURE_2D,oe,0,0,He.width,He.height,$e,Mt,He.data):n.texImage2D(t.TEXTURE_2D,oe,it,He.width,He.height,0,$e,Mt,He.data)}else if(I.isDataArrayTexture)wt?(G&&n.texStorage3D(t.TEXTURE_2D_ARRAY,B,it,be.width,be.height,be.depth),ue&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,be.width,be.height,be.depth,$e,Mt,be.data)):n.texImage3D(t.TEXTURE_2D_ARRAY,0,it,be.width,be.height,be.depth,0,$e,Mt,be.data);else if(I.isData3DTexture)wt?(G&&n.texStorage3D(t.TEXTURE_3D,B,it,be.width,be.height,be.depth),ue&&n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,be.width,be.height,be.depth,$e,Mt,be.data)):n.texImage3D(t.TEXTURE_3D,0,it,be.width,be.height,be.depth,0,$e,Mt,be.data);else if(I.isFramebufferTexture){if(G)if(wt)n.texStorage2D(t.TEXTURE_2D,B,it,be.width,be.height);else{let oe=be.width,ae=be.height;for(let Re=0;Re<B;Re++)n.texImage2D(t.TEXTURE_2D,Re,it,oe,ae,0,$e,Mt,null),oe>>=1,ae>>=1}}else if(dt.length>0){if(wt&&G){const oe=Qe(dt[0]);n.texStorage2D(t.TEXTURE_2D,B,it,oe.width,oe.height)}for(let oe=0,ae=dt.length;oe<ae;oe++)He=dt[oe],wt?ue&&n.texSubImage2D(t.TEXTURE_2D,oe,0,0,$e,Mt,He):n.texImage2D(t.TEXTURE_2D,oe,it,$e,Mt,He);I.generateMipmaps=!1}else if(wt){if(G){const oe=Qe(be);n.texStorage2D(t.TEXTURE_2D,B,it,oe.width,oe.height)}ue&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,$e,Mt,be)}else n.texImage2D(t.TEXTURE_2D,0,it,$e,Mt,be);S(I)&&g(de),Ze.__version=me.version,I.onUpdate&&I.onUpdate(I)}z.__version=I.version}function Be(z,I,Z){if(I.image.length!==6)return;const de=re(z,I),ye=I.source;n.bindTexture(t.TEXTURE_CUBE_MAP,z.__webglTexture,t.TEXTURE0+Z);const me=i.get(ye);if(ye.version!==me.__version||de===!0){n.activeTexture(t.TEXTURE0+Z);const Ze=Yt.getPrimaries(Yt.workingColorSpace),Ie=I.colorSpace===bo?null:Yt.getPrimaries(I.colorSpace),Le=I.colorSpace===bo||Ze===Ie?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,I.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,I.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,I.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,Le);const ht=I.isCompressedTexture||I.image[0].isCompressedTexture,be=I.image[0]&&I.image[0].isDataTexture,$e=[];for(let ae=0;ae<6;ae++)!ht&&!be?$e[ae]=w(I.image[ae],!0,r.maxCubemapSize):$e[ae]=be?I.image[ae].image:I.image[ae],$e[ae]=Fe(I,$e[ae]);const Mt=$e[0],it=s.convert(I.format,I.colorSpace),He=s.convert(I.type),dt=x(I.internalFormat,it,He,I.colorSpace),wt=I.isVideoTexture!==!0,G=me.__version===void 0||de===!0,ue=ye.dataReady;let B=M(I,Mt);V(t.TEXTURE_CUBE_MAP,I);let oe;if(ht){wt&&G&&n.texStorage2D(t.TEXTURE_CUBE_MAP,B,dt,Mt.width,Mt.height);for(let ae=0;ae<6;ae++){oe=$e[ae].mipmaps;for(let Re=0;Re<oe.length;Re++){const Ne=oe[Re];I.format!==or?it!==null?wt?ue&&n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ae,Re,0,0,Ne.width,Ne.height,it,Ne.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ae,Re,dt,Ne.width,Ne.height,0,Ne.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):wt?ue&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ae,Re,0,0,Ne.width,Ne.height,it,He,Ne.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ae,Re,dt,Ne.width,Ne.height,0,it,He,Ne.data)}}}else{if(oe=I.mipmaps,wt&&G){oe.length>0&&B++;const ae=Qe($e[0]);n.texStorage2D(t.TEXTURE_CUBE_MAP,B,dt,ae.width,ae.height)}for(let ae=0;ae<6;ae++)if(be){wt?ue&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ae,0,0,0,$e[ae].width,$e[ae].height,it,He,$e[ae].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ae,0,dt,$e[ae].width,$e[ae].height,0,it,He,$e[ae].data);for(let Re=0;Re<oe.length;Re++){const It=oe[Re].image[ae].image;wt?ue&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ae,Re+1,0,0,It.width,It.height,it,He,It.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ae,Re+1,dt,It.width,It.height,0,it,He,It.data)}}else{wt?ue&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ae,0,0,0,it,He,$e[ae]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ae,0,dt,it,He,$e[ae]);for(let Re=0;Re<oe.length;Re++){const Ne=oe[Re];wt?ue&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ae,Re+1,0,0,it,He,Ne.image[ae]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ae,Re+1,dt,it,He,Ne.image[ae])}}}S(I)&&g(t.TEXTURE_CUBE_MAP),me.__version=ye.version,I.onUpdate&&I.onUpdate(I)}z.__version=I.version}function ee(z,I,Z,de,ye,me){const Ze=s.convert(Z.format,Z.colorSpace),Ie=s.convert(Z.type),Le=x(Z.internalFormat,Ze,Ie,Z.colorSpace);if(!i.get(I).__hasExternalTextures){const be=Math.max(1,I.width>>me),$e=Math.max(1,I.height>>me);ye===t.TEXTURE_3D||ye===t.TEXTURE_2D_ARRAY?n.texImage3D(ye,me,Le,be,$e,I.depth,0,Ze,Ie,null):n.texImage2D(ye,me,Le,be,$e,0,Ze,Ie,null)}n.bindFramebuffer(t.FRAMEBUFFER,z),Pe(I)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,de,ye,i.get(Z).__webglTexture,0,pe(I)):(ye===t.TEXTURE_2D||ye>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&ye<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,de,ye,i.get(Z).__webglTexture,me),n.bindFramebuffer(t.FRAMEBUFFER,null)}function xe(z,I,Z){if(t.bindRenderbuffer(t.RENDERBUFFER,z),I.depthBuffer&&!I.stencilBuffer){let de=t.DEPTH_COMPONENT24;if(Z||Pe(I)){const ye=I.depthTexture;ye&&ye.isDepthTexture&&(ye.type===ts?de=t.DEPTH_COMPONENT32F:ye.type===tc&&(de=t.DEPTH_COMPONENT24));const me=pe(I);Pe(I)?a.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,me,de,I.width,I.height):t.renderbufferStorageMultisample(t.RENDERBUFFER,me,de,I.width,I.height)}else t.renderbufferStorage(t.RENDERBUFFER,de,I.width,I.height);t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,z)}else if(I.depthBuffer&&I.stencilBuffer){const de=pe(I);Z&&Pe(I)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,de,t.DEPTH24_STENCIL8,I.width,I.height):Pe(I)?a.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,de,t.DEPTH24_STENCIL8,I.width,I.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,I.width,I.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,z)}else{const de=I.textures;for(let ye=0;ye<de.length;ye++){const me=de[ye],Ze=s.convert(me.format,me.colorSpace),Ie=s.convert(me.type),Le=x(me.internalFormat,Ze,Ie,me.colorSpace),ht=pe(I);Z&&Pe(I)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,ht,Le,I.width,I.height):Pe(I)?a.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,ht,Le,I.width,I.height):t.renderbufferStorage(t.RENDERBUFFER,Le,I.width,I.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function Ce(z,I){if(I&&I.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,z),!(I.depthTexture&&I.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(I.depthTexture).__webglTexture||I.depthTexture.image.width!==I.width||I.depthTexture.image.height!==I.height)&&(I.depthTexture.image.width=I.width,I.depthTexture.image.height=I.height,I.depthTexture.needsUpdate=!0),H(I.depthTexture,0);const de=i.get(I.depthTexture).__webglTexture,ye=pe(I);if(I.depthTexture.format===Vl)Pe(I)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,de,0,ye):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,de,0);else if(I.depthTexture.format===Ou)Pe(I)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,de,0,ye):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,de,0);else throw new Error("Unknown depthTexture format")}function Me(z){const I=i.get(z),Z=z.isWebGLCubeRenderTarget===!0;if(z.depthTexture&&!I.__autoAllocateDepthBuffer){if(Z)throw new Error("target.depthTexture not supported in Cube render targets");Ce(I.__webglFramebuffer,z)}else if(Z){I.__webglDepthbuffer=[];for(let de=0;de<6;de++)n.bindFramebuffer(t.FRAMEBUFFER,I.__webglFramebuffer[de]),I.__webglDepthbuffer[de]=t.createRenderbuffer(),xe(I.__webglDepthbuffer[de],z,!1)}else n.bindFramebuffer(t.FRAMEBUFFER,I.__webglFramebuffer),I.__webglDepthbuffer=t.createRenderbuffer(),xe(I.__webglDepthbuffer,z,!1);n.bindFramebuffer(t.FRAMEBUFFER,null)}function ft(z,I,Z){const de=i.get(z);I!==void 0&&ee(de.__webglFramebuffer,z,z.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),Z!==void 0&&Me(z)}function vt(z){const I=z.texture,Z=i.get(z),de=i.get(I);z.addEventListener("dispose",P);const ye=z.textures,me=z.isWebGLCubeRenderTarget===!0,Ze=ye.length>1;if(Ze||(de.__webglTexture===void 0&&(de.__webglTexture=t.createTexture()),de.__version=I.version,o.memory.textures++),me){Z.__webglFramebuffer=[];for(let Ie=0;Ie<6;Ie++)if(I.mipmaps&&I.mipmaps.length>0){Z.__webglFramebuffer[Ie]=[];for(let Le=0;Le<I.mipmaps.length;Le++)Z.__webglFramebuffer[Ie][Le]=t.createFramebuffer()}else Z.__webglFramebuffer[Ie]=t.createFramebuffer()}else{if(I.mipmaps&&I.mipmaps.length>0){Z.__webglFramebuffer=[];for(let Ie=0;Ie<I.mipmaps.length;Ie++)Z.__webglFramebuffer[Ie]=t.createFramebuffer()}else Z.__webglFramebuffer=t.createFramebuffer();if(Ze)for(let Ie=0,Le=ye.length;Ie<Le;Ie++){const ht=i.get(ye[Ie]);ht.__webglTexture===void 0&&(ht.__webglTexture=t.createTexture(),o.memory.textures++)}if(z.samples>0&&Pe(z)===!1){Z.__webglMultisampledFramebuffer=t.createFramebuffer(),Z.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,Z.__webglMultisampledFramebuffer);for(let Ie=0;Ie<ye.length;Ie++){const Le=ye[Ie];Z.__webglColorRenderbuffer[Ie]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,Z.__webglColorRenderbuffer[Ie]);const ht=s.convert(Le.format,Le.colorSpace),be=s.convert(Le.type),$e=x(Le.internalFormat,ht,be,Le.colorSpace,z.isXRRenderTarget===!0),Mt=pe(z);t.renderbufferStorageMultisample(t.RENDERBUFFER,Mt,$e,z.width,z.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Ie,t.RENDERBUFFER,Z.__webglColorRenderbuffer[Ie])}t.bindRenderbuffer(t.RENDERBUFFER,null),z.depthBuffer&&(Z.__webglDepthRenderbuffer=t.createRenderbuffer(),xe(Z.__webglDepthRenderbuffer,z,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(me){n.bindTexture(t.TEXTURE_CUBE_MAP,de.__webglTexture),V(t.TEXTURE_CUBE_MAP,I);for(let Ie=0;Ie<6;Ie++)if(I.mipmaps&&I.mipmaps.length>0)for(let Le=0;Le<I.mipmaps.length;Le++)ee(Z.__webglFramebuffer[Ie][Le],z,I,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,Le);else ee(Z.__webglFramebuffer[Ie],z,I,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,0);S(I)&&g(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(Ze){for(let Ie=0,Le=ye.length;Ie<Le;Ie++){const ht=ye[Ie],be=i.get(ht);n.bindTexture(t.TEXTURE_2D,be.__webglTexture),V(t.TEXTURE_2D,ht),ee(Z.__webglFramebuffer,z,ht,t.COLOR_ATTACHMENT0+Ie,t.TEXTURE_2D,0),S(ht)&&g(t.TEXTURE_2D)}n.unbindTexture()}else{let Ie=t.TEXTURE_2D;if((z.isWebGL3DRenderTarget||z.isWebGLArrayRenderTarget)&&(Ie=z.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),n.bindTexture(Ie,de.__webglTexture),V(Ie,I),I.mipmaps&&I.mipmaps.length>0)for(let Le=0;Le<I.mipmaps.length;Le++)ee(Z.__webglFramebuffer[Le],z,I,t.COLOR_ATTACHMENT0,Ie,Le);else ee(Z.__webglFramebuffer,z,I,t.COLOR_ATTACHMENT0,Ie,0);S(I)&&g(Ie),n.unbindTexture()}z.depthBuffer&&Me(z)}function $(z){const I=z.textures;for(let Z=0,de=I.length;Z<de;Z++){const ye=I[Z];if(S(ye)){const me=z.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,Ze=i.get(ye).__webglTexture;n.bindTexture(me,Ze),g(me),n.unbindTexture()}}}const ut=[],ce=[];function ge(z){if(z.samples>0){if(Pe(z)===!1){const I=z.textures,Z=z.width,de=z.height;let ye=t.COLOR_BUFFER_BIT;const me=z.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Ze=i.get(z),Ie=I.length>1;if(Ie)for(let Le=0;Le<I.length;Le++)n.bindFramebuffer(t.FRAMEBUFFER,Ze.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Le,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,Ze.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Le,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,Ze.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Ze.__webglFramebuffer);for(let Le=0;Le<I.length;Le++){if(z.resolveDepthBuffer&&(z.depthBuffer&&(ye|=t.DEPTH_BUFFER_BIT),z.stencilBuffer&&z.resolveStencilBuffer&&(ye|=t.STENCIL_BUFFER_BIT)),Ie){t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,Ze.__webglColorRenderbuffer[Le]);const ht=i.get(I[Le]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,ht,0)}t.blitFramebuffer(0,0,Z,de,0,0,Z,de,ye,t.NEAREST),u===!0&&(ut.length=0,ce.length=0,ut.push(t.COLOR_ATTACHMENT0+Le),z.depthBuffer&&z.resolveDepthBuffer===!1&&(ut.push(me),ce.push(me),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,ce)),t.invalidateFramebuffer(t.READ_FRAMEBUFFER,ut))}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),Ie)for(let Le=0;Le<I.length;Le++){n.bindFramebuffer(t.FRAMEBUFFER,Ze.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Le,t.RENDERBUFFER,Ze.__webglColorRenderbuffer[Le]);const ht=i.get(I[Le]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,Ze.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Le,t.TEXTURE_2D,ht,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Ze.__webglMultisampledFramebuffer)}else if(z.depthBuffer&&z.resolveDepthBuffer===!1&&u){const I=z.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[I])}}}function pe(z){return Math.min(r.maxSamples,z.samples)}function Pe(z){const I=i.get(z);return z.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&I.__useRenderToTexture!==!1}function Se(z){const I=o.render.frame;f.get(z)!==I&&(f.set(z,I),z.update())}function Fe(z,I){const Z=z.colorSpace,de=z.format,ye=z.type;return z.isCompressedTexture===!0||z.isVideoTexture===!0||Z!==qo&&Z!==bo&&(Yt.getTransfer(Z)===en?(de!==or||ye!==no)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Z)),I}function Qe(z){return typeof HTMLImageElement<"u"&&z instanceof HTMLImageElement?(h.width=z.naturalWidth||z.width,h.height=z.naturalHeight||z.height):typeof VideoFrame<"u"&&z instanceof VideoFrame?(h.width=z.displayWidth,h.height=z.displayHeight):(h.width=z.width,h.height=z.height),h}this.allocateTextureUnit=O,this.resetTextureUnits=C,this.setTexture2D=H,this.setTexture2DArray=J,this.setTexture3D=ne,this.setTextureCube=fe,this.rebindTextures=ft,this.setupRenderTarget=vt,this.updateRenderTargetMipmap=$,this.updateMultisampleRenderTarget=ge,this.setupDepthRenderbuffer=Me,this.setupFrameBufferTexture=ee,this.useMultisampledRTT=Pe}function _P(t,e){function n(i,r=bo){let s;const o=Yt.getTransfer(r);if(i===no)return t.UNSIGNED_BYTE;if(i===_S)return t.UNSIGNED_SHORT_4_4_4_4;if(i===xS)return t.UNSIGNED_SHORT_5_5_5_1;if(i===OR)return t.UNSIGNED_INT_5_9_9_9_REV;if(i===kR)return t.BYTE;if(i===UR)return t.SHORT;if(i===vS)return t.UNSIGNED_SHORT;if(i===yS)return t.INT;if(i===tc)return t.UNSIGNED_INT;if(i===ts)return t.FLOAT;if(i===Ed)return t.HALF_FLOAT;if(i===FR)return t.ALPHA;if(i===zR)return t.RGB;if(i===or)return t.RGBA;if(i===BR)return t.LUMINANCE;if(i===HR)return t.LUMINANCE_ALPHA;if(i===Vl)return t.DEPTH_COMPONENT;if(i===Ou)return t.DEPTH_STENCIL;if(i===SS)return t.RED;if(i===MS)return t.RED_INTEGER;if(i===VR)return t.RG;if(i===wS)return t.RG_INTEGER;if(i===ES)return t.RGBA_INTEGER;if(i===pg||i===mg||i===gg||i===vg)if(o===en)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(i===pg)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===mg)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===gg)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===vg)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(i===pg)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===mg)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===gg)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===vg)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===fx||i===dx||i===px||i===mx)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(i===fx)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===dx)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===px)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===mx)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===gx||i===vx||i===yx)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(i===gx||i===vx)return o===en?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===yx)return o===en?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===_x||i===xx||i===Sx||i===Mx||i===wx||i===Ex||i===Tx||i===Ax||i===Cx||i===bx||i===Rx||i===Px||i===Lx||i===Ix)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(i===_x)return o===en?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===xx)return o===en?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===Sx)return o===en?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===Mx)return o===en?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===wx)return o===en?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===Ex)return o===en?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===Tx)return o===en?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===Ax)return o===en?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===Cx)return o===en?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===bx)return o===en?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===Rx)return o===en?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===Px)return o===en?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===Lx)return o===en?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===Ix)return o===en?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===yg||i===Nx||i===Dx)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(i===yg)return o===en?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===Nx)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===Dx)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===GR||i===kx||i===Ux||i===Ox)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(i===yg)return s.COMPRESSED_RED_RGTC1_EXT;if(i===kx)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===Ux)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===Ox)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===th?t.UNSIGNED_INT_24_8:t[i]!==void 0?t[i]:null}return{convert:n}}class xP extends Fn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class yu extends Vt{constructor(){super(),this.isGroup=!0,this.type="Group"}}const eB={type:"move"};class Dy{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new yu,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new yu,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new k,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new k),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new yu,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new k,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new k),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const i of e.hand.values())this._getHandJoint(n,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,i){let r=null,s=null,o=null;const a=this._targetRay,u=this._grip,h=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(h&&e.hand){o=!0;for(const w of e.hand.values()){const S=n.getJointPose(w,i),g=this._getHandJoint(h,w);S!==null&&(g.matrix.fromArray(S.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=S.radius),g.visible=S!==null}const f=h.joints["index-finger-tip"],d=h.joints["thumb-tip"],p=f.position.distanceTo(d.position),v=.02,y=.005;h.inputState.pinching&&p>v+y?(h.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!h.inputState.pinching&&p<=v-y&&(h.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else u!==null&&e.gripSpace&&(s=n.getPose(e.gripSpace,i),s!==null&&(u.matrix.fromArray(s.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.matrixWorldNeedsUpdate=!0,s.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(s.linearVelocity)):u.hasLinearVelocity=!1,s.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(s.angularVelocity)):u.hasAngularVelocity=!1));a!==null&&(r=n.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(eB)))}return a!==null&&(a.visible=r!==null),u!==null&&(u.visible=s!==null),h!==null&&(h.visible=o!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const i=new yu;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[n.jointName]=i,e.add(i)}return e.joints[n.jointName]}}const tB=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,nB=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class iB{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,n,i){if(this.texture===null){const r=new Ln,s=e.properties.get(r);s.__webglTexture=n.texture,(n.depthNear!=i.depthNear||n.depthFar!=i.depthFar)&&(this.depthNear=n.depthNear,this.depthFar=n.depthFar),this.texture=r}}render(e,n){if(this.texture!==null){if(this.mesh===null){const i=n.cameras[0].viewport,r=new Cs({vertexShader:tB,fragmentShader:nB,uniforms:{depthColor:{value:this.texture},depthWidth:{value:i.z},depthHeight:{value:i.w}}});this.mesh=new Zn(new nh(20,20),r)}e.render(this.mesh,n)}}reset(){this.texture=null,this.mesh=null}}class rB extends Zo{constructor(e,n){super();const i=this;let r=null,s=1,o=null,a="local-floor",u=1,h=null,f=null,d=null,p=null,v=null,y=null;const w=new iB,S=n.getContextAttributes();let g=null,x=null;const M=[],T=[],P=new he;let b=null;const L=new Fn;L.layers.enable(1),L.viewport=new $t;const N=new Fn;N.layers.enable(2),N.viewport=new $t;const R=[L,N],C=new xP;C.layers.enable(1),C.layers.enable(2);let O=null,j=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ee){let xe=M[ee];return xe===void 0&&(xe=new Dy,M[ee]=xe),xe.getTargetRaySpace()},this.getControllerGrip=function(ee){let xe=M[ee];return xe===void 0&&(xe=new Dy,M[ee]=xe),xe.getGripSpace()},this.getHand=function(ee){let xe=M[ee];return xe===void 0&&(xe=new Dy,M[ee]=xe),xe.getHandSpace()};function H(ee){const xe=T.indexOf(ee.inputSource);if(xe===-1)return;const Ce=M[xe];Ce!==void 0&&(Ce.update(ee.inputSource,ee.frame,h||o),Ce.dispatchEvent({type:ee.type,data:ee.inputSource}))}function J(){r.removeEventListener("select",H),r.removeEventListener("selectstart",H),r.removeEventListener("selectend",H),r.removeEventListener("squeeze",H),r.removeEventListener("squeezestart",H),r.removeEventListener("squeezeend",H),r.removeEventListener("end",J),r.removeEventListener("inputsourceschange",ne);for(let ee=0;ee<M.length;ee++){const xe=T[ee];xe!==null&&(T[ee]=null,M[ee].disconnect(xe))}O=null,j=null,w.reset(),e.setRenderTarget(g),v=null,p=null,d=null,r=null,x=null,Be.stop(),i.isPresenting=!1,e.setPixelRatio(b),e.setSize(P.width,P.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ee){s=ee,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ee){a=ee,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return h||o},this.setReferenceSpace=function(ee){h=ee},this.getBaseLayer=function(){return p!==null?p:v},this.getBinding=function(){return d},this.getFrame=function(){return y},this.getSession=function(){return r},this.setSession=async function(ee){if(r=ee,r!==null){if(g=e.getRenderTarget(),r.addEventListener("select",H),r.addEventListener("selectstart",H),r.addEventListener("selectend",H),r.addEventListener("squeeze",H),r.addEventListener("squeezestart",H),r.addEventListener("squeezeend",H),r.addEventListener("end",J),r.addEventListener("inputsourceschange",ne),S.xrCompatible!==!0&&await n.makeXRCompatible(),b=e.getPixelRatio(),e.getSize(P),r.renderState.layers===void 0){const xe={antialias:S.antialias,alpha:!0,depth:S.depth,stencil:S.stencil,framebufferScaleFactor:s};v=new XRWebGLLayer(r,n,xe),r.updateRenderState({baseLayer:v}),e.setPixelRatio(1),e.setSize(v.framebufferWidth,v.framebufferHeight,!1),x=new As(v.framebufferWidth,v.framebufferHeight,{format:or,type:no,colorSpace:e.outputColorSpace,stencilBuffer:S.stencil})}else{let xe=null,Ce=null,Me=null;S.depth&&(Me=S.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,xe=S.stencil?Ou:Vl,Ce=S.stencil?th:tc);const ft={colorFormat:n.RGBA8,depthFormat:Me,scaleFactor:s};d=new XRWebGLBinding(r,n),p=d.createProjectionLayer(ft),r.updateRenderState({layers:[p]}),e.setPixelRatio(1),e.setSize(p.textureWidth,p.textureHeight,!1),x=new As(p.textureWidth,p.textureHeight,{format:or,type:no,depthTexture:new IS(p.textureWidth,p.textureHeight,Ce,void 0,void 0,void 0,void 0,void 0,void 0,xe),stencilBuffer:S.stencil,colorSpace:e.outputColorSpace,samples:S.antialias?4:0,resolveDepthBuffer:p.ignoreDepthValues===!1})}x.isXRRenderTarget=!0,this.setFoveation(u),h=null,o=await r.requestReferenceSpace(a),Be.setContext(r),Be.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode};function ne(ee){for(let xe=0;xe<ee.removed.length;xe++){const Ce=ee.removed[xe],Me=T.indexOf(Ce);Me>=0&&(T[Me]=null,M[Me].disconnect(Ce))}for(let xe=0;xe<ee.added.length;xe++){const Ce=ee.added[xe];let Me=T.indexOf(Ce);if(Me===-1){for(let vt=0;vt<M.length;vt++)if(vt>=T.length){T.push(Ce),Me=vt;break}else if(T[vt]===null){T[vt]=Ce,Me=vt;break}if(Me===-1)break}const ft=M[Me];ft&&ft.connect(Ce)}}const fe=new k,ve=new k;function U(ee,xe,Ce){fe.setFromMatrixPosition(xe.matrixWorld),ve.setFromMatrixPosition(Ce.matrixWorld);const Me=fe.distanceTo(ve),ft=xe.projectionMatrix.elements,vt=Ce.projectionMatrix.elements,$=ft[14]/(ft[10]-1),ut=ft[14]/(ft[10]+1),ce=(ft[9]+1)/ft[5],ge=(ft[9]-1)/ft[5],pe=(ft[8]-1)/ft[0],Pe=(vt[8]+1)/vt[0],Se=$*pe,Fe=$*Pe,Qe=Me/(-pe+Pe),z=Qe*-pe;xe.matrixWorld.decompose(ee.position,ee.quaternion,ee.scale),ee.translateX(z),ee.translateZ(Qe),ee.matrixWorld.compose(ee.position,ee.quaternion,ee.scale),ee.matrixWorldInverse.copy(ee.matrixWorld).invert();const I=$+Qe,Z=ut+Qe,de=Se-z,ye=Fe+(Me-z),me=ce*ut/Z*I,Ze=ge*ut/Z*I;ee.projectionMatrix.makePerspective(de,ye,me,Ze,I,Z),ee.projectionMatrixInverse.copy(ee.projectionMatrix).invert()}function X(ee,xe){xe===null?ee.matrixWorld.copy(ee.matrix):ee.matrixWorld.multiplyMatrices(xe.matrixWorld,ee.matrix),ee.matrixWorldInverse.copy(ee.matrixWorld).invert()}this.updateCamera=function(ee){if(r===null)return;w.texture!==null&&(ee.near=w.depthNear,ee.far=w.depthFar),C.near=N.near=L.near=ee.near,C.far=N.far=L.far=ee.far,(O!==C.near||j!==C.far)&&(r.updateRenderState({depthNear:C.near,depthFar:C.far}),O=C.near,j=C.far,L.near=O,L.far=j,N.near=O,N.far=j,L.updateProjectionMatrix(),N.updateProjectionMatrix(),ee.updateProjectionMatrix());const xe=ee.parent,Ce=C.cameras;X(C,xe);for(let Me=0;Me<Ce.length;Me++)X(Ce[Me],xe);Ce.length===2?U(C,L,N):C.projectionMatrix.copy(L.projectionMatrix),V(ee,C,xe)};function V(ee,xe,Ce){Ce===null?ee.matrix.copy(xe.matrixWorld):(ee.matrix.copy(Ce.matrixWorld),ee.matrix.invert(),ee.matrix.multiply(xe.matrixWorld)),ee.matrix.decompose(ee.position,ee.quaternion,ee.scale),ee.updateMatrixWorld(!0),ee.projectionMatrix.copy(xe.projectionMatrix),ee.projectionMatrixInverse.copy(xe.projectionMatrixInverse),ee.isPerspectiveCamera&&(ee.fov=Fu*2*Math.atan(1/ee.projectionMatrix.elements[5]),ee.zoom=1)}this.getCamera=function(){return C},this.getFoveation=function(){if(!(p===null&&v===null))return u},this.setFoveation=function(ee){u=ee,p!==null&&(p.fixedFoveation=ee),v!==null&&v.fixedFoveation!==void 0&&(v.fixedFoveation=ee)},this.hasDepthSensing=function(){return w.texture!==null};let re=null;function we(ee,xe){if(f=xe.getViewerPose(h||o),y=xe,f!==null){const Ce=f.views;v!==null&&(e.setRenderTargetFramebuffer(x,v.framebuffer),e.setRenderTarget(x));let Me=!1;Ce.length!==C.cameras.length&&(C.cameras.length=0,Me=!0);for(let vt=0;vt<Ce.length;vt++){const $=Ce[vt];let ut=null;if(v!==null)ut=v.getViewport($);else{const ge=d.getViewSubImage(p,$);ut=ge.viewport,vt===0&&(e.setRenderTargetTextures(x,ge.colorTexture,p.ignoreDepthValues?void 0:ge.depthStencilTexture),e.setRenderTarget(x))}let ce=R[vt];ce===void 0&&(ce=new Fn,ce.layers.enable(vt),ce.viewport=new $t,R[vt]=ce),ce.matrix.fromArray($.transform.matrix),ce.matrix.decompose(ce.position,ce.quaternion,ce.scale),ce.projectionMatrix.fromArray($.projectionMatrix),ce.projectionMatrixInverse.copy(ce.projectionMatrix).invert(),ce.viewport.set(ut.x,ut.y,ut.width,ut.height),vt===0&&(C.matrix.copy(ce.matrix),C.matrix.decompose(C.position,C.quaternion,C.scale)),Me===!0&&C.cameras.push(ce)}const ft=r.enabledFeatures;if(ft&&ft.includes("depth-sensing")){const vt=d.getDepthInformation(Ce[0]);vt&&vt.isValid&&vt.texture&&w.init(e,vt,r.renderState)}}for(let Ce=0;Ce<M.length;Ce++){const Me=T[Ce],ft=M[Ce];Me!==null&&ft!==void 0&&ft.update(Me,xe,h||o)}w.render(e,C),re&&re(ee,xe),xe.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:xe}),y=null}const Be=new dP;Be.setAnimationLoop(we),this.setAnimationLoop=function(ee){re=ee},this.dispose=function(){}}}const vl=new Lr,sB=new ct;function oB(t,e){function n(S,g){S.matrixAutoUpdate===!0&&S.updateMatrix(),g.value.copy(S.matrix)}function i(S,g){g.color.getRGB(S.fogColor.value,cP(t)),g.isFog?(S.fogNear.value=g.near,S.fogFar.value=g.far):g.isFogExp2&&(S.fogDensity.value=g.density)}function r(S,g,x,M,T){g.isMeshBasicMaterial||g.isMeshLambertMaterial?s(S,g):g.isMeshToonMaterial?(s(S,g),d(S,g)):g.isMeshPhongMaterial?(s(S,g),f(S,g)):g.isMeshStandardMaterial?(s(S,g),p(S,g),g.isMeshPhysicalMaterial&&v(S,g,T)):g.isMeshMatcapMaterial?(s(S,g),y(S,g)):g.isMeshDepthMaterial?s(S,g):g.isMeshDistanceMaterial?(s(S,g),w(S,g)):g.isMeshNormalMaterial?s(S,g):g.isLineBasicMaterial?(o(S,g),g.isLineDashedMaterial&&a(S,g)):g.isPointsMaterial?u(S,g,x,M):g.isSpriteMaterial?h(S,g):g.isShadowMaterial?(S.color.value.copy(g.color),S.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function s(S,g){S.opacity.value=g.opacity,g.color&&S.diffuse.value.copy(g.color),g.emissive&&S.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(S.map.value=g.map,n(g.map,S.mapTransform)),g.alphaMap&&(S.alphaMap.value=g.alphaMap,n(g.alphaMap,S.alphaMapTransform)),g.bumpMap&&(S.bumpMap.value=g.bumpMap,n(g.bumpMap,S.bumpMapTransform),S.bumpScale.value=g.bumpScale,g.side===Xi&&(S.bumpScale.value*=-1)),g.normalMap&&(S.normalMap.value=g.normalMap,n(g.normalMap,S.normalMapTransform),S.normalScale.value.copy(g.normalScale),g.side===Xi&&S.normalScale.value.negate()),g.displacementMap&&(S.displacementMap.value=g.displacementMap,n(g.displacementMap,S.displacementMapTransform),S.displacementScale.value=g.displacementScale,S.displacementBias.value=g.displacementBias),g.emissiveMap&&(S.emissiveMap.value=g.emissiveMap,n(g.emissiveMap,S.emissiveMapTransform)),g.specularMap&&(S.specularMap.value=g.specularMap,n(g.specularMap,S.specularMapTransform)),g.alphaTest>0&&(S.alphaTest.value=g.alphaTest);const x=e.get(g),M=x.envMap,T=x.envMapRotation;if(M&&(S.envMap.value=M,vl.copy(T),vl.x*=-1,vl.y*=-1,vl.z*=-1,M.isCubeTexture&&M.isRenderTargetTexture===!1&&(vl.y*=-1,vl.z*=-1),S.envMapRotation.value.setFromMatrix4(sB.makeRotationFromEuler(vl)),S.flipEnvMap.value=M.isCubeTexture&&M.isRenderTargetTexture===!1?-1:1,S.reflectivity.value=g.reflectivity,S.ior.value=g.ior,S.refractionRatio.value=g.refractionRatio),g.lightMap){S.lightMap.value=g.lightMap;const P=t._useLegacyLights===!0?Math.PI:1;S.lightMapIntensity.value=g.lightMapIntensity*P,n(g.lightMap,S.lightMapTransform)}g.aoMap&&(S.aoMap.value=g.aoMap,S.aoMapIntensity.value=g.aoMapIntensity,n(g.aoMap,S.aoMapTransform))}function o(S,g){S.diffuse.value.copy(g.color),S.opacity.value=g.opacity,g.map&&(S.map.value=g.map,n(g.map,S.mapTransform))}function a(S,g){S.dashSize.value=g.dashSize,S.totalSize.value=g.dashSize+g.gapSize,S.scale.value=g.scale}function u(S,g,x,M){S.diffuse.value.copy(g.color),S.opacity.value=g.opacity,S.size.value=g.size*x,S.scale.value=M*.5,g.map&&(S.map.value=g.map,n(g.map,S.uvTransform)),g.alphaMap&&(S.alphaMap.value=g.alphaMap,n(g.alphaMap,S.alphaMapTransform)),g.alphaTest>0&&(S.alphaTest.value=g.alphaTest)}function h(S,g){S.diffuse.value.copy(g.color),S.opacity.value=g.opacity,S.rotation.value=g.rotation,g.map&&(S.map.value=g.map,n(g.map,S.mapTransform)),g.alphaMap&&(S.alphaMap.value=g.alphaMap,n(g.alphaMap,S.alphaMapTransform)),g.alphaTest>0&&(S.alphaTest.value=g.alphaTest)}function f(S,g){S.specular.value.copy(g.specular),S.shininess.value=Math.max(g.shininess,1e-4)}function d(S,g){g.gradientMap&&(S.gradientMap.value=g.gradientMap)}function p(S,g){S.metalness.value=g.metalness,g.metalnessMap&&(S.metalnessMap.value=g.metalnessMap,n(g.metalnessMap,S.metalnessMapTransform)),S.roughness.value=g.roughness,g.roughnessMap&&(S.roughnessMap.value=g.roughnessMap,n(g.roughnessMap,S.roughnessMapTransform)),g.envMap&&(S.envMapIntensity.value=g.envMapIntensity)}function v(S,g,x){S.ior.value=g.ior,g.sheen>0&&(S.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),S.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(S.sheenColorMap.value=g.sheenColorMap,n(g.sheenColorMap,S.sheenColorMapTransform)),g.sheenRoughnessMap&&(S.sheenRoughnessMap.value=g.sheenRoughnessMap,n(g.sheenRoughnessMap,S.sheenRoughnessMapTransform))),g.clearcoat>0&&(S.clearcoat.value=g.clearcoat,S.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(S.clearcoatMap.value=g.clearcoatMap,n(g.clearcoatMap,S.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(S.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,n(g.clearcoatRoughnessMap,S.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(S.clearcoatNormalMap.value=g.clearcoatNormalMap,n(g.clearcoatNormalMap,S.clearcoatNormalMapTransform),S.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===Xi&&S.clearcoatNormalScale.value.negate())),g.dispersion>0&&(S.dispersion.value=g.dispersion),g.iridescence>0&&(S.iridescence.value=g.iridescence,S.iridescenceIOR.value=g.iridescenceIOR,S.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],S.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(S.iridescenceMap.value=g.iridescenceMap,n(g.iridescenceMap,S.iridescenceMapTransform)),g.iridescenceThicknessMap&&(S.iridescenceThicknessMap.value=g.iridescenceThicknessMap,n(g.iridescenceThicknessMap,S.iridescenceThicknessMapTransform))),g.transmission>0&&(S.transmission.value=g.transmission,S.transmissionSamplerMap.value=x.texture,S.transmissionSamplerSize.value.set(x.width,x.height),g.transmissionMap&&(S.transmissionMap.value=g.transmissionMap,n(g.transmissionMap,S.transmissionMapTransform)),S.thickness.value=g.thickness,g.thicknessMap&&(S.thicknessMap.value=g.thicknessMap,n(g.thicknessMap,S.thicknessMapTransform)),S.attenuationDistance.value=g.attenuationDistance,S.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(S.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(S.anisotropyMap.value=g.anisotropyMap,n(g.anisotropyMap,S.anisotropyMapTransform))),S.specularIntensity.value=g.specularIntensity,S.specularColor.value.copy(g.specularColor),g.specularColorMap&&(S.specularColorMap.value=g.specularColorMap,n(g.specularColorMap,S.specularColorMapTransform)),g.specularIntensityMap&&(S.specularIntensityMap.value=g.specularIntensityMap,n(g.specularIntensityMap,S.specularIntensityMapTransform))}function y(S,g){g.matcap&&(S.matcap.value=g.matcap)}function w(S,g){const x=e.get(g).light;S.referencePosition.value.setFromMatrixPosition(x.matrixWorld),S.nearDistance.value=x.shadow.camera.near,S.farDistance.value=x.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function aB(t,e,n,i){let r={},s={},o=[];const a=t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS);function u(x,M){const T=M.program;i.uniformBlockBinding(x,T)}function h(x,M){let T=r[x.id];T===void 0&&(y(x),T=f(x),r[x.id]=T,x.addEventListener("dispose",S));const P=M.program;i.updateUBOMapping(x,P);const b=e.render.frame;s[x.id]!==b&&(p(x),s[x.id]=b)}function f(x){const M=d();x.__bindingPointIndex=M;const T=t.createBuffer(),P=x.__size,b=x.usage;return t.bindBuffer(t.UNIFORM_BUFFER,T),t.bufferData(t.UNIFORM_BUFFER,P,b),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,M,T),T}function d(){for(let x=0;x<a;x++)if(o.indexOf(x)===-1)return o.push(x),x;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(x){const M=r[x.id],T=x.uniforms,P=x.__cache;t.bindBuffer(t.UNIFORM_BUFFER,M);for(let b=0,L=T.length;b<L;b++){const N=Array.isArray(T[b])?T[b]:[T[b]];for(let R=0,C=N.length;R<C;R++){const O=N[R];if(v(O,b,R,P)===!0){const j=O.__offset,H=Array.isArray(O.value)?O.value:[O.value];let J=0;for(let ne=0;ne<H.length;ne++){const fe=H[ne],ve=w(fe);typeof fe=="number"||typeof fe=="boolean"?(O.__data[0]=fe,t.bufferSubData(t.UNIFORM_BUFFER,j+J,O.__data)):fe.isMatrix3?(O.__data[0]=fe.elements[0],O.__data[1]=fe.elements[1],O.__data[2]=fe.elements[2],O.__data[3]=0,O.__data[4]=fe.elements[3],O.__data[5]=fe.elements[4],O.__data[6]=fe.elements[5],O.__data[7]=0,O.__data[8]=fe.elements[6],O.__data[9]=fe.elements[7],O.__data[10]=fe.elements[8],O.__data[11]=0):(fe.toArray(O.__data,J),J+=ve.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,j,O.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function v(x,M,T,P){const b=x.value,L=M+"_"+T;if(P[L]===void 0)return typeof b=="number"||typeof b=="boolean"?P[L]=b:P[L]=b.clone(),!0;{const N=P[L];if(typeof b=="number"||typeof b=="boolean"){if(N!==b)return P[L]=b,!0}else if(N.equals(b)===!1)return N.copy(b),!0}return!1}function y(x){const M=x.uniforms;let T=0;const P=16;for(let L=0,N=M.length;L<N;L++){const R=Array.isArray(M[L])?M[L]:[M[L]];for(let C=0,O=R.length;C<O;C++){const j=R[C],H=Array.isArray(j.value)?j.value:[j.value];for(let J=0,ne=H.length;J<ne;J++){const fe=H[J],ve=w(fe),U=T%P;U!==0&&P-U<ve.boundary&&(T+=P-U),j.__data=new Float32Array(ve.storage/Float32Array.BYTES_PER_ELEMENT),j.__offset=T,T+=ve.storage}}}const b=T%P;return b>0&&(T+=P-b),x.__size=T,x.__cache={},this}function w(x){const M={boundary:0,storage:0};return typeof x=="number"||typeof x=="boolean"?(M.boundary=4,M.storage=4):x.isVector2?(M.boundary=8,M.storage=8):x.isVector3||x.isColor?(M.boundary=16,M.storage=12):x.isVector4?(M.boundary=16,M.storage=16):x.isMatrix3?(M.boundary=48,M.storage=48):x.isMatrix4?(M.boundary=64,M.storage=64):x.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",x),M}function S(x){const M=x.target;M.removeEventListener("dispose",S);const T=o.indexOf(M.__bindingPointIndex);o.splice(T,1),t.deleteBuffer(r[M.id]),delete r[M.id],delete s[M.id]}function g(){for(const x in r)t.deleteBuffer(r[x]);o=[],r={},s={}}return{bind:u,update:h,dispose:g}}class SP{constructor(e={}){const{canvas:n=rP(),context:i=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:u=!0,preserveDrawingBuffer:h=!1,powerPreference:f="default",failIfMajorPerformanceCaveat:d=!1}=e;this.isWebGLRenderer=!0;let p;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");p=i.getContextAttributes().alpha}else p=o;const v=new Uint32Array(4),y=new Int32Array(4);let w=null,S=null;const g=[],x=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Tr,this._useLegacyLights=!1,this.toneMapping=eo,this.toneMappingExposure=1;const M=this;let T=!1,P=0,b=0,L=null,N=-1,R=null;const C=new $t,O=new $t;let j=null;const H=new ze(0);let J=0,ne=n.width,fe=n.height,ve=1,U=null,X=null;const V=new $t(0,0,ne,fe),re=new $t(0,0,ne,fe);let we=!1;const Be=new bd;let ee=!1,xe=!1;const Ce=new ct,Me=new k,ft={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function vt(){return L===null?ve:1}let $=i;function ut(D,q){return n.getContext(D,q)}try{const D={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:u,preserveDrawingBuffer:h,powerPreference:f,failIfMajorPerformanceCaveat:d};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${D0}`),n.addEventListener("webglcontextlost",B,!1),n.addEventListener("webglcontextrestored",oe,!1),n.addEventListener("webglcontextcreationerror",ae,!1),$===null){const q="webgl2";if($=ut(q,D),$===null)throw ut(q)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(D){throw console.error("THREE.WebGLRenderer: "+D.message),D}let ce,ge,pe,Pe,Se,Fe,Qe,z,I,Z,de,ye,me,Ze,Ie,Le,ht,be,$e,Mt,it,He,dt,wt;function G(){ce=new x8($),ce.init(),He=new _P($,ce),ge=new p8($,ce,e,He),pe=new Jz($),Pe=new w8($),Se=new Bz,Fe=new Qz($,ce,pe,Se,ge,He,Pe),Qe=new g8(M),z=new _8(M),I=new PO($),dt=new f8($,I),Z=new S8($,I,Pe,dt),de=new T8($,Z,I,Pe),$e=new E8($,ge,Fe),Le=new m8(Se),ye=new zz(M,Qe,z,ce,ge,dt,Le),me=new oB(M,Se),Ze=new Vz,Ie=new $z(ce),be=new h8(M,Qe,z,pe,de,p,u),ht=new Kz(M,de,ge),wt=new aB($,Pe,ge,pe),Mt=new d8($,ce,Pe),it=new M8($,ce,Pe),Pe.programs=ye.programs,M.capabilities=ge,M.extensions=ce,M.properties=Se,M.renderLists=Ze,M.shadowMap=ht,M.state=pe,M.info=Pe}G();const ue=new rB(M,$);this.xr=ue,this.getContext=function(){return $},this.getContextAttributes=function(){return $.getContextAttributes()},this.forceContextLoss=function(){const D=ce.get("WEBGL_lose_context");D&&D.loseContext()},this.forceContextRestore=function(){const D=ce.get("WEBGL_lose_context");D&&D.restoreContext()},this.getPixelRatio=function(){return ve},this.setPixelRatio=function(D){D!==void 0&&(ve=D,this.setSize(ne,fe,!1))},this.getSize=function(D){return D.set(ne,fe)},this.setSize=function(D,q,ie=!0){if(ue.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}ne=D,fe=q,n.width=Math.floor(D*ve),n.height=Math.floor(q*ve),ie===!0&&(n.style.width=D+"px",n.style.height=q+"px"),this.setViewport(0,0,D,q)},this.getDrawingBufferSize=function(D){return D.set(ne*ve,fe*ve).floor()},this.setDrawingBufferSize=function(D,q,ie){ne=D,fe=q,ve=ie,n.width=Math.floor(D*ie),n.height=Math.floor(q*ie),this.setViewport(0,0,D,q)},this.getCurrentViewport=function(D){return D.copy(C)},this.getViewport=function(D){return D.copy(V)},this.setViewport=function(D,q,ie,Q){D.isVector4?V.set(D.x,D.y,D.z,D.w):V.set(D,q,ie,Q),pe.viewport(C.copy(V).multiplyScalar(ve).round())},this.getScissor=function(D){return D.copy(re)},this.setScissor=function(D,q,ie,Q){D.isVector4?re.set(D.x,D.y,D.z,D.w):re.set(D,q,ie,Q),pe.scissor(O.copy(re).multiplyScalar(ve).round())},this.getScissorTest=function(){return we},this.setScissorTest=function(D){pe.setScissorTest(we=D)},this.setOpaqueSort=function(D){U=D},this.setTransparentSort=function(D){X=D},this.getClearColor=function(D){return D.copy(be.getClearColor())},this.setClearColor=function(){be.setClearColor.apply(be,arguments)},this.getClearAlpha=function(){return be.getClearAlpha()},this.setClearAlpha=function(){be.setClearAlpha.apply(be,arguments)},this.clear=function(D=!0,q=!0,ie=!0){let Q=0;if(D){let te=!1;if(L!==null){const ke=L.texture.format;te=ke===ES||ke===wS||ke===MS}if(te){const ke=L.texture.type,Ye=ke===no||ke===tc||ke===vS||ke===th||ke===_S||ke===xS,Ke=be.getClearColor(),lt=be.getClearAlpha(),pt=Ke.r,mt=Ke.g,gt=Ke.b;Ye?(v[0]=pt,v[1]=mt,v[2]=gt,v[3]=lt,$.clearBufferuiv($.COLOR,0,v)):(y[0]=pt,y[1]=mt,y[2]=gt,y[3]=lt,$.clearBufferiv($.COLOR,0,y))}else Q|=$.COLOR_BUFFER_BIT}q&&(Q|=$.DEPTH_BUFFER_BIT),ie&&(Q|=$.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),$.clear(Q)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",B,!1),n.removeEventListener("webglcontextrestored",oe,!1),n.removeEventListener("webglcontextcreationerror",ae,!1),Ze.dispose(),Ie.dispose(),Se.dispose(),Qe.dispose(),z.dispose(),de.dispose(),dt.dispose(),wt.dispose(),ye.dispose(),ue.dispose(),ue.removeEventListener("sessionstart",bt),ue.removeEventListener("sessionend",Kn),hn.stop()};function B(D){D.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),T=!0}function oe(){console.log("THREE.WebGLRenderer: Context Restored."),T=!1;const D=Pe.autoReset,q=ht.enabled,ie=ht.autoUpdate,Q=ht.needsUpdate,te=ht.type;G(),Pe.autoReset=D,ht.enabled=q,ht.autoUpdate=ie,ht.needsUpdate=Q,ht.type=te}function ae(D){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",D.statusMessage)}function Re(D){const q=D.target;q.removeEventListener("dispose",Re),Ne(q)}function Ne(D){It(D),Se.remove(D)}function It(D){const q=Se.get(D).programs;q!==void 0&&(q.forEach(function(ie){ye.releaseProgram(ie)}),D.isShaderMaterial&&ye.releaseShaderCache(D))}this.renderBufferDirect=function(D,q,ie,Q,te,ke){q===null&&(q=ft);const Ye=te.isMesh&&te.matrixWorld.determinant()<0,Ke=L1(D,q,ie,Q,te);pe.setMaterial(Q,Ye);let lt=ie.index,pt=1;if(Q.wireframe===!0){if(lt=Z.getWireframeAttribute(ie),lt===void 0)return;pt=2}const mt=ie.drawRange,gt=ie.attributes.position;let fn=mt.start*pt,Hn=(mt.start+mt.count)*pt;ke!==null&&(fn=Math.max(fn,ke.start*pt),Hn=Math.min(Hn,(ke.start+ke.count)*pt)),lt!==null?(fn=Math.max(fn,0),Hn=Math.min(Hn,lt.count)):gt!=null&&(fn=Math.max(fn,0),Hn=Math.min(Hn,gt.count));const Ui=Hn-fn;if(Ui<0||Ui===1/0)return;dt.setup(te,Q,Ke,ie,lt);let pr,Rt=Mt;if(lt!==null&&(pr=I.get(lt),Rt=it,Rt.setIndex(pr)),te.isMesh)Q.wireframe===!0?(pe.setLineWidth(Q.wireframeLinewidth*vt()),Rt.setMode($.LINES)):Rt.setMode($.TRIANGLES);else if(te.isLine){let ot=Q.linewidth;ot===void 0&&(ot=1),pe.setLineWidth(ot*vt()),te.isLineSegments?Rt.setMode($.LINES):te.isLineLoop?Rt.setMode($.LINE_LOOP):Rt.setMode($.LINE_STRIP)}else te.isPoints?Rt.setMode($.POINTS):te.isSprite&&Rt.setMode($.TRIANGLES);if(te.isBatchedMesh)te._multiDrawInstances!==null?Rt.renderMultiDrawInstances(te._multiDrawStarts,te._multiDrawCounts,te._multiDrawCount,te._multiDrawInstances):Rt.renderMultiDraw(te._multiDrawStarts,te._multiDrawCounts,te._multiDrawCount);else if(te.isInstancedMesh)Rt.renderInstances(fn,Ui,te.count);else if(ie.isInstancedBufferGeometry){const ot=ie._maxInstanceCount!==void 0?ie._maxInstanceCount:1/0,Wt=Math.min(ie.instanceCount,ot);Rt.renderInstances(fn,Ui,Wt)}else Rt.render(fn,Ui)};function Gt(D,q,ie){D.transparent===!0&&D.side===qs&&D.forceSinglePass===!1?(D.side=Xi,D.needsUpdate=!0,pc(D,q,ie),D.side=Wo,D.needsUpdate=!0,pc(D,q,ie),D.side=qs):pc(D,q,ie)}this.compile=function(D,q,ie=null){ie===null&&(ie=D),S=Ie.get(ie),S.init(q),x.push(S),ie.traverseVisible(function(te){te.isLight&&te.layers.test(q.layers)&&(S.pushLight(te),te.castShadow&&S.pushShadow(te))}),D!==ie&&D.traverseVisible(function(te){te.isLight&&te.layers.test(q.layers)&&(S.pushLight(te),te.castShadow&&S.pushShadow(te))}),S.setupLights(M._useLegacyLights);const Q=new Set;return D.traverse(function(te){const ke=te.material;if(ke)if(Array.isArray(ke))for(let Ye=0;Ye<ke.length;Ye++){const Ke=ke[Ye];Gt(Ke,ie,te),Q.add(Ke)}else Gt(ke,ie,te),Q.add(ke)}),x.pop(),S=null,Q},this.compileAsync=function(D,q,ie=null){const Q=this.compile(D,q,ie);return new Promise(te=>{function ke(){if(Q.forEach(function(Ye){Se.get(Ye).currentProgram.isReady()&&Q.delete(Ye)}),Q.size===0){te(D);return}setTimeout(ke,10)}ce.get("KHR_parallel_shader_compile")!==null?ke():setTimeout(ke,10)})};let Nt=null;function Zt(D){Nt&&Nt(D)}function bt(){hn.stop()}function Kn(){hn.start()}const hn=new dP;hn.setAnimationLoop(Zt),typeof self<"u"&&hn.setContext(self),this.setAnimationLoop=function(D){Nt=D,ue.setAnimationLoop(D),D===null?hn.stop():hn.start()},ue.addEventListener("sessionstart",bt),ue.addEventListener("sessionend",Kn),this.render=function(D,q){if(q!==void 0&&q.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(T===!0)return;D.matrixWorldAutoUpdate===!0&&D.updateMatrixWorld(),q.parent===null&&q.matrixWorldAutoUpdate===!0&&q.updateMatrixWorld(),ue.enabled===!0&&ue.isPresenting===!0&&(ue.cameraAutoUpdate===!0&&ue.updateCamera(q),q=ue.getCamera()),D.isScene===!0&&D.onBeforeRender(M,D,q,L),S=Ie.get(D,x.length),S.init(q),x.push(S),Ce.multiplyMatrices(q.projectionMatrix,q.matrixWorldInverse),Be.setFromProjectionMatrix(Ce),xe=this.localClippingEnabled,ee=Le.init(this.clippingPlanes,xe),w=Ze.get(D,g.length),w.init(),g.push(w),ho(D,q,0,M.sortObjects),w.finish(),M.sortObjects===!0&&w.sort(U,X);const ie=ue.enabled===!1||ue.isPresenting===!1||ue.hasDepthSensing()===!1;ie&&be.addToRenderList(w,D),this.info.render.frame++,ee===!0&&Le.beginShadows();const Q=S.state.shadowsArray;ht.render(Q,D,q),ee===!0&&Le.endShadows(),this.info.autoReset===!0&&this.info.reset();const te=w.opaque,ke=w.transmissive;if(S.setupLights(M._useLegacyLights),q.isArrayCamera){const Ye=q.cameras;if(ke.length>0)for(let Ke=0,lt=Ye.length;Ke<lt;Ke++){const pt=Ye[Ke];Wd(te,ke,D,pt)}ie&&be.render(D);for(let Ke=0,lt=Ye.length;Ke<lt;Ke++){const pt=Ye[Ke];Gd(w,D,pt,pt.viewport)}}else ke.length>0&&Wd(te,ke,D,q),ie&&be.render(D),Gd(w,D,q);L!==null&&(Fe.updateMultisampleRenderTarget(L),Fe.updateRenderTargetMipmap(L)),D.isScene===!0&&D.onAfterRender(M,D,q),dt.resetDefaultState(),N=-1,R=null,x.pop(),x.length>0?(S=x[x.length-1],ee===!0&&Le.setGlobalState(M.clippingPlanes,S.state.camera)):S=null,g.pop(),g.length>0?w=g[g.length-1]:w=null};function ho(D,q,ie,Q){if(D.visible===!1)return;if(D.layers.test(q.layers)){if(D.isGroup)ie=D.renderOrder;else if(D.isLOD)D.autoUpdate===!0&&D.update(q);else if(D.isLight)S.pushLight(D),D.castShadow&&S.pushShadow(D);else if(D.isSprite){if(!D.frustumCulled||Be.intersectsSprite(D)){Q&&Me.setFromMatrixPosition(D.matrixWorld).applyMatrix4(Ce);const Ye=de.update(D),Ke=D.material;Ke.visible&&w.push(D,Ye,Ke,ie,Me.z,null)}}else if((D.isMesh||D.isLine||D.isPoints)&&(!D.frustumCulled||Be.intersectsObject(D))){const Ye=de.update(D),Ke=D.material;if(Q&&(D.boundingSphere!==void 0?(D.boundingSphere===null&&D.computeBoundingSphere(),Me.copy(D.boundingSphere.center)):(Ye.boundingSphere===null&&Ye.computeBoundingSphere(),Me.copy(Ye.boundingSphere.center)),Me.applyMatrix4(D.matrixWorld).applyMatrix4(Ce)),Array.isArray(Ke)){const lt=Ye.groups;for(let pt=0,mt=lt.length;pt<mt;pt++){const gt=lt[pt],fn=Ke[gt.materialIndex];fn&&fn.visible&&w.push(D,Ye,fn,ie,Me.z,gt)}}else Ke.visible&&w.push(D,Ye,Ke,ie,Me.z,null)}}const ke=D.children;for(let Ye=0,Ke=ke.length;Ye<Ke;Ye++)ho(ke[Ye],q,ie,Q)}function Gd(D,q,ie,Q){const te=D.opaque,ke=D.transmissive,Ye=D.transparent;S.setupLightsView(ie),ee===!0&&Le.setGlobalState(M.clippingPlanes,ie),Q&&pe.viewport(C.copy(Q)),te.length>0&&nl(te,q,ie),ke.length>0&&nl(ke,q,ie),Ye.length>0&&nl(Ye,q,ie),pe.buffers.depth.setTest(!0),pe.buffers.depth.setMask(!0),pe.buffers.color.setMask(!0),pe.setPolygonOffset(!1)}function Wd(D,q,ie,Q){if((ie.isScene===!0?ie.overrideMaterial:null)!==null)return;S.state.transmissionRenderTarget[Q.id]===void 0&&(S.state.transmissionRenderTarget[Q.id]=new As(1,1,{generateMipmaps:!0,type:ce.has("EXT_color_buffer_half_float")||ce.has("EXT_color_buffer_float")?Ed:no,minFilter:Zs,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1}));const ke=S.state.transmissionRenderTarget[Q.id],Ye=Q.viewport||C;ke.setSize(Ye.z,Ye.w);const Ke=M.getRenderTarget();M.setRenderTarget(ke),M.getClearColor(H),J=M.getClearAlpha(),J<1&&M.setClearColor(16777215,.5),M.clear();const lt=M.toneMapping;M.toneMapping=eo;const pt=Q.viewport;if(Q.viewport!==void 0&&(Q.viewport=void 0),S.setupLightsView(Q),ee===!0&&Le.setGlobalState(M.clippingPlanes,Q),nl(D,ie,Q),Fe.updateMultisampleRenderTarget(ke),Fe.updateRenderTargetMipmap(ke),ce.has("WEBGL_multisampled_render_to_texture")===!1){let mt=!1;for(let gt=0,fn=q.length;gt<fn;gt++){const Hn=q[gt],Ui=Hn.object,pr=Hn.geometry,Rt=Hn.material,ot=Hn.group;if(Rt.side===qs&&Ui.layers.test(Q.layers)){const Wt=Rt.side;Rt.side=Xi,Rt.needsUpdate=!0,dc(Ui,ie,Q,pr,Rt,ot),Rt.side=Wt,Rt.needsUpdate=!0,mt=!0}}mt===!0&&(Fe.updateMultisampleRenderTarget(ke),Fe.updateRenderTargetMipmap(ke))}M.setRenderTarget(Ke),M.setClearColor(H,J),pt!==void 0&&(Q.viewport=pt),M.toneMapping=lt}function nl(D,q,ie){const Q=q.isScene===!0?q.overrideMaterial:null;for(let te=0,ke=D.length;te<ke;te++){const Ye=D[te],Ke=Ye.object,lt=Ye.geometry,pt=Q===null?Ye.material:Q,mt=Ye.group;Ke.layers.test(ie.layers)&&dc(Ke,q,ie,lt,pt,mt)}}function dc(D,q,ie,Q,te,ke){D.onBeforeRender(M,q,ie,Q,te,ke),D.modelViewMatrix.multiplyMatrices(ie.matrixWorldInverse,D.matrixWorld),D.normalMatrix.getNormalMatrix(D.modelViewMatrix),te.onBeforeRender(M,q,ie,Q,D,ke),te.transparent===!0&&te.side===qs&&te.forceSinglePass===!1?(te.side=Xi,te.needsUpdate=!0,M.renderBufferDirect(ie,q,Q,te,D,ke),te.side=Wo,te.needsUpdate=!0,M.renderBufferDirect(ie,q,Q,te,D,ke),te.side=qs):M.renderBufferDirect(ie,q,Q,te,D,ke),D.onAfterRender(M,q,ie,Q,te,ke)}function pc(D,q,ie){q.isScene!==!0&&(q=ft);const Q=Se.get(D),te=S.state.lights,ke=S.state.shadowsArray,Ye=te.state.version,Ke=ye.getParameters(D,te.state,ke,q,ie),lt=ye.getProgramCacheKey(Ke);let pt=Q.programs;Q.environment=D.isMeshStandardMaterial?q.environment:null,Q.fog=q.fog,Q.envMap=(D.isMeshStandardMaterial?z:Qe).get(D.envMap||Q.environment),Q.envMapRotation=Q.environment!==null&&D.envMap===null?q.environmentRotation:D.envMapRotation,pt===void 0&&(D.addEventListener("dispose",Re),pt=new Map,Q.programs=pt);let mt=pt.get(lt);if(mt!==void 0){if(Q.currentProgram===mt&&Q.lightsStateVersion===Ye)return Xd(D,Ke),mt}else Ke.uniforms=ye.getUniforms(D),D.onBuild(ie,Ke,M),D.onBeforeCompile(Ke,M),mt=ye.acquireProgram(Ke,lt),pt.set(lt,mt),Q.uniforms=Ke.uniforms;const gt=Q.uniforms;return(!D.isShaderMaterial&&!D.isRawShaderMaterial||D.clipping===!0)&&(gt.clippingPlanes=Le.uniform),Xd(D,Ke),Q.needsLights=N1(D),Q.lightsStateVersion=Ye,Q.needsLights&&(gt.ambientLightColor.value=te.state.ambient,gt.lightProbe.value=te.state.probe,gt.directionalLights.value=te.state.directional,gt.directionalLightShadows.value=te.state.directionalShadow,gt.spotLights.value=te.state.spot,gt.spotLightShadows.value=te.state.spotShadow,gt.rectAreaLights.value=te.state.rectArea,gt.ltc_1.value=te.state.rectAreaLTC1,gt.ltc_2.value=te.state.rectAreaLTC2,gt.pointLights.value=te.state.point,gt.pointLightShadows.value=te.state.pointShadow,gt.hemisphereLights.value=te.state.hemi,gt.directionalShadowMap.value=te.state.directionalShadowMap,gt.directionalShadowMatrix.value=te.state.directionalShadowMatrix,gt.spotShadowMap.value=te.state.spotShadowMap,gt.spotLightMatrix.value=te.state.spotLightMatrix,gt.spotLightMap.value=te.state.spotLightMap,gt.pointShadowMap.value=te.state.pointShadowMap,gt.pointShadowMatrix.value=te.state.pointShadowMatrix),Q.currentProgram=mt,Q.uniformsList=null,mt}function Ko(D){if(D.uniformsList===null){const q=D.currentProgram.getUniforms();D.uniformsList=xg.seqWithValue(q.seq,D.uniforms)}return D.uniformsList}function Xd(D,q){const ie=Se.get(D);ie.outputColorSpace=q.outputColorSpace,ie.batching=q.batching,ie.instancing=q.instancing,ie.instancingColor=q.instancingColor,ie.instancingMorph=q.instancingMorph,ie.skinning=q.skinning,ie.morphTargets=q.morphTargets,ie.morphNormals=q.morphNormals,ie.morphColors=q.morphColors,ie.morphTargetsCount=q.morphTargetsCount,ie.numClippingPlanes=q.numClippingPlanes,ie.numIntersection=q.numClipIntersection,ie.vertexAlphas=q.vertexAlphas,ie.vertexTangents=q.vertexTangents,ie.toneMapping=q.toneMapping}function L1(D,q,ie,Q,te){q.isScene!==!0&&(q=ft),Fe.resetTextureUnits();const ke=q.fog,Ye=Q.isMeshStandardMaterial?q.environment:null,Ke=L===null?M.outputColorSpace:L.isXRRenderTarget===!0?L.texture.colorSpace:qo,lt=(Q.isMeshStandardMaterial?z:Qe).get(Q.envMap||Ye),pt=Q.vertexColors===!0&&!!ie.attributes.color&&ie.attributes.color.itemSize===4,mt=!!ie.attributes.tangent&&(!!Q.normalMap||Q.anisotropy>0),gt=!!ie.morphAttributes.position,fn=!!ie.morphAttributes.normal,Hn=!!ie.morphAttributes.color;let Ui=eo;Q.toneMapped&&(L===null||L.isXRRenderTarget===!0)&&(Ui=M.toneMapping);const pr=ie.morphAttributes.position||ie.morphAttributes.normal||ie.morphAttributes.color,Rt=pr!==void 0?pr.length:0,ot=Se.get(Q),Wt=S.state.lights;if(ee===!0&&(xe===!0||D!==R)){const Oi=D===R&&Q.id===N;Le.setState(Q,D,Oi)}let at=!1;Q.version===ot.__version?(ot.needsLights&&ot.lightsStateVersion!==Wt.state.version||ot.outputColorSpace!==Ke||te.isBatchedMesh&&ot.batching===!1||!te.isBatchedMesh&&ot.batching===!0||te.isInstancedMesh&&ot.instancing===!1||!te.isInstancedMesh&&ot.instancing===!0||te.isSkinnedMesh&&ot.skinning===!1||!te.isSkinnedMesh&&ot.skinning===!0||te.isInstancedMesh&&ot.instancingColor===!0&&te.instanceColor===null||te.isInstancedMesh&&ot.instancingColor===!1&&te.instanceColor!==null||te.isInstancedMesh&&ot.instancingMorph===!0&&te.morphTexture===null||te.isInstancedMesh&&ot.instancingMorph===!1&&te.morphTexture!==null||ot.envMap!==lt||Q.fog===!0&&ot.fog!==ke||ot.numClippingPlanes!==void 0&&(ot.numClippingPlanes!==Le.numPlanes||ot.numIntersection!==Le.numIntersection)||ot.vertexAlphas!==pt||ot.vertexTangents!==mt||ot.morphTargets!==gt||ot.morphNormals!==fn||ot.morphColors!==Hn||ot.toneMapping!==Ui||ot.morphTargetsCount!==Rt)&&(at=!0):(at=!0,ot.__version=Q.version);let yi=ot.currentProgram;at===!0&&(yi=pc(Q,q,te));let Jn=!1,Vn=!1,us=!1;const yn=yi.getUniforms(),_n=ot.uniforms;if(pe.useProgram(yi.program)&&(Jn=!0,Vn=!0,us=!0),Q.id!==N&&(N=Q.id,Vn=!0),Jn||R!==D){yn.setValue($,"projectionMatrix",D.projectionMatrix),yn.setValue($,"viewMatrix",D.matrixWorldInverse);const Oi=yn.map.cameraPosition;Oi!==void 0&&Oi.setValue($,Me.setFromMatrixPosition(D.matrixWorld)),ge.logarithmicDepthBuffer&&yn.setValue($,"logDepthBufFC",2/(Math.log(D.far+1)/Math.LN2)),(Q.isMeshPhongMaterial||Q.isMeshToonMaterial||Q.isMeshLambertMaterial||Q.isMeshBasicMaterial||Q.isMeshStandardMaterial||Q.isShaderMaterial)&&yn.setValue($,"isOrthographic",D.isOrthographicCamera===!0),R!==D&&(R=D,Vn=!0,us=!0)}if(te.isSkinnedMesh){yn.setOptional($,te,"bindMatrix"),yn.setOptional($,te,"bindMatrixInverse");const Oi=te.skeleton;Oi&&(Oi.boneTexture===null&&Oi.computeBoneTexture(),yn.setValue($,"boneTexture",Oi.boneTexture,Fe))}te.isBatchedMesh&&(yn.setOptional($,te,"batchingTexture"),yn.setValue($,"batchingTexture",te._matricesTexture,Fe));const Jo=ie.morphAttributes;if((Jo.position!==void 0||Jo.normal!==void 0||Jo.color!==void 0)&&$e.update(te,ie,yi),(Vn||ot.receiveShadow!==te.receiveShadow)&&(ot.receiveShadow=te.receiveShadow,yn.setValue($,"receiveShadow",te.receiveShadow)),Q.isMeshGouraudMaterial&&Q.envMap!==null&&(_n.envMap.value=lt,_n.flipEnvMap.value=lt.isCubeTexture&&lt.isRenderTargetTexture===!1?-1:1),Q.isMeshStandardMaterial&&Q.envMap===null&&q.environment!==null&&(_n.envMapIntensity.value=q.environmentIntensity),Vn&&(yn.setValue($,"toneMappingExposure",M.toneMappingExposure),ot.needsLights&&I1(_n,us),ke&&Q.fog===!0&&me.refreshFogUniforms(_n,ke),me.refreshMaterialUniforms(_n,Q,ve,fe,S.state.transmissionRenderTarget[D.id]),xg.upload($,Ko(ot),_n,Fe)),Q.isShaderMaterial&&Q.uniformsNeedUpdate===!0&&(xg.upload($,Ko(ot),_n,Fe),Q.uniformsNeedUpdate=!1),Q.isSpriteMaterial&&yn.setValue($,"center",te.center),yn.setValue($,"modelViewMatrix",te.modelViewMatrix),yn.setValue($,"normalMatrix",te.normalMatrix),yn.setValue($,"modelMatrix",te.matrixWorld),Q.isShaderMaterial||Q.isRawShaderMaterial){const Oi=Q.uniformsGroups;for(let mc=0,gc=Oi.length;mc<gc;mc++){const dh=Oi[mc];wt.update(dh,yi),wt.bind(dh,yi)}}return yi}function I1(D,q){D.ambientLightColor.needsUpdate=q,D.lightProbe.needsUpdate=q,D.directionalLights.needsUpdate=q,D.directionalLightShadows.needsUpdate=q,D.pointLights.needsUpdate=q,D.pointLightShadows.needsUpdate=q,D.spotLights.needsUpdate=q,D.spotLightShadows.needsUpdate=q,D.rectAreaLights.needsUpdate=q,D.hemisphereLights.needsUpdate=q}function N1(D){return D.isMeshLambertMaterial||D.isMeshToonMaterial||D.isMeshPhongMaterial||D.isMeshStandardMaterial||D.isShadowMaterial||D.isShaderMaterial&&D.lights===!0}this.getActiveCubeFace=function(){return P},this.getActiveMipmapLevel=function(){return b},this.getRenderTarget=function(){return L},this.setRenderTargetTextures=function(D,q,ie){Se.get(D.texture).__webglTexture=q,Se.get(D.depthTexture).__webglTexture=ie;const Q=Se.get(D);Q.__hasExternalTextures=!0,Q.__autoAllocateDepthBuffer=ie===void 0,Q.__autoAllocateDepthBuffer||ce.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Q.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(D,q){const ie=Se.get(D);ie.__webglFramebuffer=q,ie.__useDefaultFramebuffer=q===void 0},this.setRenderTarget=function(D,q=0,ie=0){L=D,P=q,b=ie;let Q=!0,te=null,ke=!1,Ye=!1;if(D){const lt=Se.get(D);lt.__useDefaultFramebuffer!==void 0?(pe.bindFramebuffer($.FRAMEBUFFER,null),Q=!1):lt.__webglFramebuffer===void 0?Fe.setupRenderTarget(D):lt.__hasExternalTextures&&Fe.rebindTextures(D,Se.get(D.texture).__webglTexture,Se.get(D.depthTexture).__webglTexture);const pt=D.texture;(pt.isData3DTexture||pt.isDataArrayTexture||pt.isCompressedArrayTexture)&&(Ye=!0);const mt=Se.get(D).__webglFramebuffer;D.isWebGLCubeRenderTarget?(Array.isArray(mt[q])?te=mt[q][ie]:te=mt[q],ke=!0):D.samples>0&&Fe.useMultisampledRTT(D)===!1?te=Se.get(D).__webglMultisampledFramebuffer:Array.isArray(mt)?te=mt[ie]:te=mt,C.copy(D.viewport),O.copy(D.scissor),j=D.scissorTest}else C.copy(V).multiplyScalar(ve).floor(),O.copy(re).multiplyScalar(ve).floor(),j=we;if(pe.bindFramebuffer($.FRAMEBUFFER,te)&&Q&&pe.drawBuffers(D,te),pe.viewport(C),pe.scissor(O),pe.setScissorTest(j),ke){const lt=Se.get(D.texture);$.framebufferTexture2D($.FRAMEBUFFER,$.COLOR_ATTACHMENT0,$.TEXTURE_CUBE_MAP_POSITIVE_X+q,lt.__webglTexture,ie)}else if(Ye){const lt=Se.get(D.texture),pt=q||0;$.framebufferTextureLayer($.FRAMEBUFFER,$.COLOR_ATTACHMENT0,lt.__webglTexture,ie||0,pt)}N=-1},this.readRenderTargetPixels=function(D,q,ie,Q,te,ke,Ye){if(!(D&&D.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ke=Se.get(D).__webglFramebuffer;if(D.isWebGLCubeRenderTarget&&Ye!==void 0&&(Ke=Ke[Ye]),Ke){pe.bindFramebuffer($.FRAMEBUFFER,Ke);try{const lt=D.texture,pt=lt.format,mt=lt.type;if(!ge.textureFormatReadable(pt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!ge.textureTypeReadable(mt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}q>=0&&q<=D.width-Q&&ie>=0&&ie<=D.height-te&&$.readPixels(q,ie,Q,te,He.convert(pt),He.convert(mt),ke)}finally{const lt=L!==null?Se.get(L).__webglFramebuffer:null;pe.bindFramebuffer($.FRAMEBUFFER,lt)}}},this.copyFramebufferToTexture=function(D,q,ie=0){const Q=Math.pow(2,-ie),te=Math.floor(q.image.width*Q),ke=Math.floor(q.image.height*Q);Fe.setTexture2D(q,0),$.copyTexSubImage2D($.TEXTURE_2D,ie,0,0,D.x,D.y,te,ke),pe.unbindTexture()},this.copyTextureToTexture=function(D,q,ie,Q=0){const te=q.image.width,ke=q.image.height,Ye=He.convert(ie.format),Ke=He.convert(ie.type);Fe.setTexture2D(ie,0),$.pixelStorei($.UNPACK_FLIP_Y_WEBGL,ie.flipY),$.pixelStorei($.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ie.premultiplyAlpha),$.pixelStorei($.UNPACK_ALIGNMENT,ie.unpackAlignment),q.isDataTexture?$.texSubImage2D($.TEXTURE_2D,Q,D.x,D.y,te,ke,Ye,Ke,q.image.data):q.isCompressedTexture?$.compressedTexSubImage2D($.TEXTURE_2D,Q,D.x,D.y,q.mipmaps[0].width,q.mipmaps[0].height,Ye,q.mipmaps[0].data):$.texSubImage2D($.TEXTURE_2D,Q,D.x,D.y,Ye,Ke,q.image),Q===0&&ie.generateMipmaps&&$.generateMipmap($.TEXTURE_2D),pe.unbindTexture()},this.copyTextureToTexture3D=function(D,q,ie,Q,te=0){const ke=D.max.x-D.min.x,Ye=D.max.y-D.min.y,Ke=D.max.z-D.min.z,lt=He.convert(Q.format),pt=He.convert(Q.type);let mt;if(Q.isData3DTexture)Fe.setTexture3D(Q,0),mt=$.TEXTURE_3D;else if(Q.isDataArrayTexture||Q.isCompressedArrayTexture)Fe.setTexture2DArray(Q,0),mt=$.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}$.pixelStorei($.UNPACK_FLIP_Y_WEBGL,Q.flipY),$.pixelStorei($.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Q.premultiplyAlpha),$.pixelStorei($.UNPACK_ALIGNMENT,Q.unpackAlignment);const gt=$.getParameter($.UNPACK_ROW_LENGTH),fn=$.getParameter($.UNPACK_IMAGE_HEIGHT),Hn=$.getParameter($.UNPACK_SKIP_PIXELS),Ui=$.getParameter($.UNPACK_SKIP_ROWS),pr=$.getParameter($.UNPACK_SKIP_IMAGES),Rt=ie.isCompressedTexture?ie.mipmaps[te]:ie.image;$.pixelStorei($.UNPACK_ROW_LENGTH,Rt.width),$.pixelStorei($.UNPACK_IMAGE_HEIGHT,Rt.height),$.pixelStorei($.UNPACK_SKIP_PIXELS,D.min.x),$.pixelStorei($.UNPACK_SKIP_ROWS,D.min.y),$.pixelStorei($.UNPACK_SKIP_IMAGES,D.min.z),ie.isDataTexture||ie.isData3DTexture?$.texSubImage3D(mt,te,q.x,q.y,q.z,ke,Ye,Ke,lt,pt,Rt.data):Q.isCompressedArrayTexture?$.compressedTexSubImage3D(mt,te,q.x,q.y,q.z,ke,Ye,Ke,lt,Rt.data):$.texSubImage3D(mt,te,q.x,q.y,q.z,ke,Ye,Ke,lt,pt,Rt),$.pixelStorei($.UNPACK_ROW_LENGTH,gt),$.pixelStorei($.UNPACK_IMAGE_HEIGHT,fn),$.pixelStorei($.UNPACK_SKIP_PIXELS,Hn),$.pixelStorei($.UNPACK_SKIP_ROWS,Ui),$.pixelStorei($.UNPACK_SKIP_IMAGES,pr),te===0&&Q.generateMipmaps&&$.generateMipmap(mt),pe.unbindTexture()},this.initTexture=function(D){D.isCubeTexture?Fe.setTextureCube(D,0):D.isData3DTexture?Fe.setTexture3D(D,0):D.isDataArrayTexture||D.isCompressedArrayTexture?Fe.setTexture2DArray(D,0):Fe.setTexture2D(D,0),pe.unbindTexture()},this.resetState=function(){P=0,b=0,L=null,pe.reset(),dt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Ks}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorSpace=e===F0?"display-p3":"srgb",n.unpackColorSpace=Yt.workingColorSpace===Td?"display-p3":"srgb"}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class H0{constructor(e,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new ze(e),this.density=n}clone(){return new H0(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class V0{constructor(e,n=1,i=1e3){this.isFog=!0,this.name="",this.color=new ze(e),this.near=n,this.far=i}clone(){return new V0(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class kS extends Vt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Lr,this.environmentIntensity=1,this.environmentRotation=new Lr,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(n.object.environmentIntensity=this.environmentIntensity),n.object.environmentRotation=this.environmentRotation.toArray(),n}}class G0{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=rd,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=Rr()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return sP("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,i){e*=this.stride,i*=n.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=n.array[i+r];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Rr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(n,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Rr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Bi=new k;class nc{constructor(e,n,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,i=this.data.count;n<i;n++)Bi.fromBufferAttribute(this,n),Bi.applyMatrix4(e),this.setXYZ(n,Bi.x,Bi.y,Bi.z);return this}applyNormalMatrix(e){for(let n=0,i=this.count;n<i;n++)Bi.fromBufferAttribute(this,n),Bi.applyNormalMatrix(e),this.setXYZ(n,Bi.x,Bi.y,Bi.z);return this}transformDirection(e){for(let n=0,i=this.count;n<i;n++)Bi.fromBufferAttribute(this,n),Bi.transformDirection(e),this.setXYZ(n,Bi.x,Bi.y,Bi.z);return this}getComponent(e,n){let i=this.array[e*this.data.stride+this.offset+n];return this.normalized&&(i=Gi(i,this.array)),i}setComponent(e,n,i){return this.normalized&&(i=St(i,this.array)),this.data.array[e*this.data.stride+this.offset+n]=i,this}setX(e,n){return this.normalized&&(n=St(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=St(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=St(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=St(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=Gi(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=Gi(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=Gi(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=Gi(n,this.array)),n}setXY(e,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(n=St(n,this.array),i=St(i,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this}setXYZ(e,n,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=St(n,this.array),i=St(i,this.array),r=St(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,n,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(n=St(n,this.array),i=St(i,this.array),r=St(r,this.array),s=St(s,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[r+s])}return new Xt(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new nc(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class US extends ki{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new ze(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let jc;const Xh=new k,Yc=new k,$c=new k,qc=new he,jh=new he,MP=new ct,Mm=new k,Yh=new k,wm=new k,IT=new he,ky=new he,NT=new he;class wP extends Vt{constructor(e=new US){if(super(),this.isSprite=!0,this.type="Sprite",jc===void 0){jc=new At;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new G0(n,5);jc.setIndex([0,1,2,0,2,3]),jc.setAttribute("position",new nc(i,3,0,!1)),jc.setAttribute("uv",new nc(i,2,3,!1))}this.geometry=jc,this.material=e,this.center=new he(.5,.5)}raycast(e,n){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Yc.setFromMatrixScale(this.matrixWorld),MP.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),$c.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Yc.multiplyScalar(-$c.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;Em(Mm.set(-.5,-.5,0),$c,o,Yc,r,s),Em(Yh.set(.5,-.5,0),$c,o,Yc,r,s),Em(wm.set(.5,.5,0),$c,o,Yc,r,s),IT.set(0,0),ky.set(1,0),NT.set(1,1);let a=e.ray.intersectTriangle(Mm,Yh,wm,!1,Xh);if(a===null&&(Em(Yh.set(-.5,.5,0),$c,o,Yc,r,s),ky.set(0,1),a=e.ray.intersectTriangle(Mm,wm,Yh,!1,Xh),a===null))return;const u=e.ray.origin.distanceTo(Xh);u<e.near||u>e.far||n.push({distance:u,point:Xh.clone(),uv:Ar.getInterpolation(Xh,Mm,Yh,wm,IT,ky,NT,new he),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Em(t,e,n,i,r,s){qc.subVectors(t,n).addScalar(.5).multiply(i),r!==void 0?(jh.x=s*qc.x-r*qc.y,jh.y=r*qc.x+s*qc.y):jh.copy(qc),t.copy(e),t.x+=jh.x,t.y+=jh.y,t.applyMatrix4(MP)}const Tm=new k,DT=new k;class EP extends Vt{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const n=e.levels;for(let i=0,r=n.length;i<r;i++){const s=n[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,n=0,i=0){n=Math.abs(n);const r=this.levels;let s;for(s=0;s<r.length&&!(n<r[s].distance);s++);return r.splice(s,0,{distance:n,hysteresis:i,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const n=this.levels;if(n.length>0){let i,r;for(i=1,r=n.length;i<r;i++){let s=n[i].distance;if(n[i].object.visible&&(s-=s*n[i].hysteresis),e<s)break}return n[i-1].object}return null}raycast(e,n){if(this.levels.length>0){Tm.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(Tm);this.getObjectForDistance(r).raycast(e,n)}}update(e){const n=this.levels;if(n.length>1){Tm.setFromMatrixPosition(e.matrixWorld),DT.setFromMatrixPosition(this.matrixWorld);const i=Tm.distanceTo(DT)/e.zoom;n[0].object.visible=!0;let r,s;for(r=1,s=n.length;r<s;r++){let o=n[r].distance;if(n[r].object.visible&&(o-=o*n[r].hysteresis),i>=o)n[r-1].object.visible=!1,n[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)n[r].object.visible=!1}}toJSON(e){const n=super.toJSON(e);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];n.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return n}}const kT=new k,UT=new $t,OT=new $t,lB=new k,FT=new ct,Am=new k,Uy=new Li,zT=new ct,Oy=new lc;class TP extends Zn{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=hx,this.bindMatrix=new ct,this.bindMatrixInverse=new ct,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new ji),this.boundingBox.makeEmpty();const n=e.getAttribute("position");for(let i=0;i<n.count;i++)this.getVertexPosition(i,Am),this.boundingBox.expandByPoint(Am)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Li),this.boundingSphere.makeEmpty();const n=e.getAttribute("position");for(let i=0;i<n.count;i++)this.getVertexPosition(i,Am),this.boundingSphere.expandByPoint(Am)}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,n){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Uy.copy(this.boundingSphere),Uy.applyMatrix4(r),e.ray.intersectsSphere(Uy)!==!1&&(zT.copy(r).invert(),Oy.copy(e.ray).applyMatrix4(zT),!(this.boundingBox!==null&&Oy.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,n,Oy)))}getVertexPosition(e,n){return super.getVertexPosition(e,n),this.applyBoneTransform(e,n),n}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new $t,n=this.geometry.attributes.skinWeight;for(let i=0,r=n.count;i<r;i++){e.fromBufferAttribute(n,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),n.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===hx?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===DR?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,n){const i=this.skeleton,r=this.geometry;UT.fromBufferAttribute(r.attributes.skinIndex,e),OT.fromBufferAttribute(r.attributes.skinWeight,e),kT.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let s=0;s<4;s++){const o=OT.getComponent(s);if(o!==0){const a=UT.getComponent(s);FT.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),n.addScaledVector(lB.copy(kT).applyMatrix4(FT),o)}}return n.applyMatrix4(this.bindMatrixInverse)}}class OS extends Vt{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Ua extends Ln{constructor(e=null,n=1,i=1,r,s,o,a,u,h=fi,f=fi,d,p){super(null,o,a,u,h,f,r,s,d,p),this.isDataTexture=!0,this.image={data:e,width:n,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const BT=new ct,cB=new ct;class W0{constructor(e=[],n=[]){this.uuid=Rr(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new ct)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const i=new ct;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,n=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:cB;BT.multiplyMatrices(a,n[s]),BT.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new W0(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const i=new Ua(n,e,e,or,ts);return i.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=i,this}getBoneByName(e){for(let n=0,i=this.bones.length;n<i;n++){const r=this.bones[n];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=n[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new OS),this.bones.push(o),this.boneInverses.push(new ct().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,i=this.boneInverses;for(let r=0,s=n.length;r<s;r++){const o=n[r];e.bones.push(o.uuid);const a=i[r];e.boneInverses.push(a.toArray())}return e}}class Bu extends Xt{constructor(e,n,i,r=1){super(e,n,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Zc=new ct,HT=new ct,Cm=[],VT=new ji,uB=new ct,$h=new Zn,qh=new Li;class AP extends Zn{constructor(e,n,i){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new Bu(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,uB)}computeBoundingBox(){const e=this.geometry,n=this.count;this.boundingBox===null&&(this.boundingBox=new ji),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<n;i++)this.getMatrixAt(i,Zc),VT.copy(e.boundingBox).applyMatrix4(Zc),this.boundingBox.union(VT)}computeBoundingSphere(){const e=this.geometry,n=this.count;this.boundingSphere===null&&(this.boundingSphere=new Li),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<n;i++)this.getMatrixAt(i,Zc),qh.copy(e.boundingSphere).applyMatrix4(Zc),this.boundingSphere.union(qh)}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,n){const i=n.morphTargetInfluences,r=this.morphTexture.source.data.data,s=i.length+1,o=e*s+1;for(let a=0;a<i.length;a++)i[a]=r[o+a]}raycast(e,n){const i=this.matrixWorld,r=this.count;if($h.geometry=this.geometry,$h.material=this.material,$h.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),qh.copy(this.boundingSphere),qh.applyMatrix4(i),e.ray.intersectsSphere(qh)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,Zc),HT.multiplyMatrices(i,Zc),$h.matrixWorld=HT,$h.raycast(e,Cm);for(let o=0,a=Cm.length;o<a;o++){const u=Cm[o];u.instanceId=s,u.object=this,n.push(u)}Cm.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new Bu(new Float32Array(this.instanceMatrix.count*3),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,n){const i=n.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new Ua(new Float32Array(r*this.count),r,this.count,SS,ts));const s=this.morphTexture.source.data.data;let o=0;for(let h=0;h<i.length;h++)o+=i[h];const a=this.geometry.morphTargetsRelative?1:1-o,u=r*e;s[u]=a,s.set(i,u+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}function hB(t,e){return t.z-e.z}function fB(t,e){return e.z-t.z}class dB{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,n){const i=this.pool,r=this.list;this.index>=i.length&&i.push({start:-1,count:-1,z:-1});const s=i[this.index];r.push(s),this.index++,s.start=e.start,s.count=e.count,s.z=n}reset(){this.list.length=0,this.index=0}}const Kc="batchId",pa=new ct,GT=new ct,pB=new ct,WT=new ct,Fy=new bd,bm=new ji,yl=new Li,Zh=new k,zy=new dB,Ci=new Zn,Rm=[];function mB(t,e,n=0){const i=e.itemSize;if(t.isInterleavedBufferAttribute||t.array.constructor!==e.array.constructor){const r=t.count;for(let s=0;s<r;s++)for(let o=0;o<i;o++)e.setComponent(s+n,o,t.getComponent(s,o))}else e.array.set(t.array,n*i);e.needsUpdate=!0}class CP extends Zn{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,n,i=n*2,r){super(new At,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=n,this._maxIndexCount=i,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxGeometryCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4),i=new Ua(n,e,e,or,ts);this._matricesTexture=i}_initializeGeometry(e){const n=this.geometry,i=this._maxVertexCount,r=this._maxGeometryCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const u=e.getAttribute(a),{array:h,itemSize:f,normalized:d}=u,p=new h.constructor(i*f),v=new Xt(p,f,d);n.setAttribute(a,v)}if(e.getIndex()!==null){const a=i>65536?new Uint32Array(s):new Uint16Array(s);n.setIndex(new Xt(a,1))}const o=r>65536?new Uint32Array(i):new Uint16Array(i);n.setAttribute(Kc,new Xt(o,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(Kc))throw new Error(`BatchedMesh: Geometry cannot use attribute "${Kc}"`);const n=this.geometry;if(!!e.getIndex()!=!!n.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const i in n.attributes){if(i===Kc)continue;if(!e.hasAttribute(i))throw new Error(`BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),s=n.getAttribute(i);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ji);const e=this._geometryCount,n=this.boundingBox,i=this._active;n.makeEmpty();for(let r=0;r<e;r++)i[r]!==!1&&(this.getMatrixAt(r,pa),this.getBoundingBoxAt(r,bm).applyMatrix4(pa),n.union(bm))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Li);const e=this._geometryCount,n=this.boundingSphere,i=this._active;n.makeEmpty();for(let r=0;r<e;r++)i[r]!==!1&&(this.getMatrixAt(r,pa),this.getBoundingSphereAt(r,yl).applyMatrix4(pa),n.union(yl))}addGeometry(e,n=-1,i=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const r={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let s=null;const o=this._reservedRanges,a=this._drawRanges,u=this._bounds;this._geometryCount!==0&&(s=o[o.length-1]),n===-1?r.vertexCount=e.getAttribute("position").count:r.vertexCount=n,s===null?r.vertexStart=0:r.vertexStart=s.vertexStart+s.vertexCount;const h=e.getIndex(),f=h!==null;if(f&&(i===-1?r.indexCount=h.count:r.indexCount=i,s===null?r.indexStart=0:r.indexStart=s.indexStart+s.indexCount),r.indexStart!==-1&&r.indexStart+r.indexCount>this._maxIndexCount||r.vertexStart+r.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const d=this._visibility,p=this._active,v=this._matricesTexture,y=this._matricesTexture.image.data;d.push(!0),p.push(!0);const w=this._geometryCount;this._geometryCount++,pB.toArray(y,w*16),v.needsUpdate=!0,o.push(r),a.push({start:f?r.indexStart:r.vertexStart,count:-1}),u.push({boxInitialized:!1,box:new ji,sphereInitialized:!1,sphere:new Li});const S=this.geometry.getAttribute(Kc);for(let g=0;g<r.vertexCount;g++)S.setX(r.vertexStart+g,w);return S.needsUpdate=!0,this.setGeometryAt(w,e),w}setGeometryAt(e,n){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(n);const i=this.geometry,r=i.getIndex()!==null,s=i.getIndex(),o=n.getIndex(),a=this._reservedRanges[e];if(r&&o.count>a.indexCount||n.attributes.position.count>a.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const u=a.vertexStart,h=a.vertexCount;for(const v in i.attributes){if(v===Kc)continue;const y=n.getAttribute(v),w=i.getAttribute(v);mB(y,w,u);const S=y.itemSize;for(let g=y.count,x=h;g<x;g++){const M=u+g;for(let T=0;T<S;T++)w.setComponent(M,T,0)}w.needsUpdate=!0,w.addUpdateRange(u*S,h*S)}if(r){const v=a.indexStart;for(let y=0;y<o.count;y++)s.setX(v+y,u+o.getX(y));for(let y=o.count,w=a.indexCount;y<w;y++)s.setX(v+y,u);s.needsUpdate=!0,s.addUpdateRange(v,a.indexCount)}const f=this._bounds[e];n.boundingBox!==null?(f.box.copy(n.boundingBox),f.boxInitialized=!0):f.boxInitialized=!1,n.boundingSphere!==null?(f.sphere.copy(n.boundingSphere),f.sphereInitialized=!0):f.sphereInitialized=!1;const d=this._drawRanges[e],p=n.getAttribute("position");return d.count=r?o.count:p.count,this._visibilityChanged=!0,e}deleteGeometry(e){const n=this._active;return e>=n.length||n[e]===!1?this:(n[e]=!1,this._visibilityChanged=!0,this)}getInstanceCountAt(e){return this._multiDrawInstances===null?null:this._multiDrawInstances[e]}setInstanceCountAt(e,n){return this._multiDrawInstances===null&&(this._multiDrawInstances=new Int32Array(this._maxGeometryCount).fill(1)),this._multiDrawInstances[e]=n,e}getBoundingBoxAt(e,n){if(this._active[e]===!1)return null;const r=this._bounds[e],s=r.box,o=this.geometry;if(r.boxInitialized===!1){s.makeEmpty();const a=o.index,u=o.attributes.position,h=this._drawRanges[e];for(let f=h.start,d=h.start+h.count;f<d;f++){let p=f;a&&(p=a.getX(p)),s.expandByPoint(Zh.fromBufferAttribute(u,p))}r.boxInitialized=!0}return n.copy(s),n}getBoundingSphereAt(e,n){if(this._active[e]===!1)return null;const r=this._bounds[e],s=r.sphere,o=this.geometry;if(r.sphereInitialized===!1){s.makeEmpty(),this.getBoundingBoxAt(e,bm),bm.getCenter(s.center);const a=o.index,u=o.attributes.position,h=this._drawRanges[e];let f=0;for(let d=h.start,p=h.start+h.count;d<p;d++){let v=d;a&&(v=a.getX(v)),Zh.fromBufferAttribute(u,v),f=Math.max(f,s.center.distanceToSquared(Zh))}s.radius=Math.sqrt(f),r.sphereInitialized=!0}return n.copy(s),n}setMatrixAt(e,n){const i=this._active,r=this._matricesTexture,s=this._matricesTexture.image.data,o=this._geometryCount;return e>=o||i[e]===!1?this:(n.toArray(s,e*16),r.needsUpdate=!0,this)}getMatrixAt(e,n){const i=this._active,r=this._matricesTexture.image.data,s=this._geometryCount;return e>=s||i[e]===!1?null:n.fromArray(r,e*16)}setVisibleAt(e,n){const i=this._visibility,r=this._active,s=this._geometryCount;return e>=s||r[e]===!1||i[e]===n?this:(i[e]=n,this._visibilityChanged=!0,this)}getVisibleAt(e){const n=this._visibility,i=this._active,r=this._geometryCount;return e>=r||i[e]===!1?!1:n[e]}raycast(e,n){const i=this._visibility,r=this._active,s=this._drawRanges,o=this._geometryCount,a=this.matrixWorld,u=this.geometry;Ci.material=this.material,Ci.geometry.index=u.index,Ci.geometry.attributes=u.attributes,Ci.geometry.boundingBox===null&&(Ci.geometry.boundingBox=new ji),Ci.geometry.boundingSphere===null&&(Ci.geometry.boundingSphere=new Li);for(let h=0;h<o;h++){if(!i[h]||!r[h])continue;const f=s[h];Ci.geometry.setDrawRange(f.start,f.count),this.getMatrixAt(h,Ci.matrixWorld).premultiply(a),this.getBoundingBoxAt(h,Ci.geometry.boundingBox),this.getBoundingSphereAt(h,Ci.geometry.boundingSphere),Ci.raycast(e,Rm);for(let d=0,p=Rm.length;d<p;d++){const v=Rm[d];v.object=this,v.batchId=h,n.push(v)}Rm.length=0}Ci.material=null,Ci.geometry.index=null,Ci.geometry.attributes={},Ci.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(n=>({...n})),this._reservedRanges=e._reservedRanges.map(n=>({...n})),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(n=>({boxInitialized:n.boxInitialized,box:n.box.clone(),sphereInitialized:n.sphereInitialized,sphere:n.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(e,n,i,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=r.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,u=this._active,h=this._visibility,f=this._multiDrawStarts,d=this._multiDrawCounts,p=this._drawRanges,v=this.perObjectFrustumCulled;v&&(WT.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),Fy.setFromProjectionMatrix(WT,e.coordinateSystem));let y=0;if(this.sortObjects){GT.copy(this.matrixWorld).invert(),Zh.setFromMatrixPosition(i.matrixWorld).applyMatrix4(GT);for(let g=0,x=h.length;g<x;g++)if(h[g]&&u[g]){this.getMatrixAt(g,pa),this.getBoundingSphereAt(g,yl).applyMatrix4(pa);let M=!1;if(v&&(M=!Fy.intersectsSphere(yl)),!M){const T=Zh.distanceTo(yl.center);zy.push(p[g],T)}}const w=zy.list,S=this.customSort;S===null?w.sort(s.transparent?fB:hB):S.call(this,w,i);for(let g=0,x=w.length;g<x;g++){const M=w[g];f[y]=M.start*a,d[y]=M.count,y++}zy.reset()}else for(let w=0,S=h.length;w<S;w++)if(h[w]&&u[w]){let g=!1;if(v&&(this.getMatrixAt(w,pa),this.getBoundingSphereAt(w,yl).applyMatrix4(pa),g=!Fy.intersectsSphere(yl)),!g){const x=p[w];f[y]=x.start*a,d[y]=x.count,y++}}this._multiDrawCount=y,this._visibilityChanged=!1}onBeforeShadow(e,n,i,r,s,o){this.onBeforeRender(e,null,r,s,o)}}class qi extends ki{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ze(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const i0=new k,r0=new k,XT=new ct,Kh=new lc,Pm=new Li,By=new k,jT=new k;class Ha extends Vt{constructor(e=new At,n=new qi){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,i=[0];for(let r=1,s=n.count;r<s;r++)i0.fromBufferAttribute(n,r-1),r0.fromBufferAttribute(n,r),i[r]=i[r-1],i[r]+=i0.distanceTo(r0);e.setAttribute("lineDistance",new Xe(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Pm.copy(i.boundingSphere),Pm.applyMatrix4(r),Pm.radius+=s,e.ray.intersectsSphere(Pm)===!1)return;XT.copy(r).invert(),Kh.copy(e.ray).applyMatrix4(XT);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),u=a*a,h=this.isLineSegments?2:1,f=i.index,p=i.attributes.position;if(f!==null){const v=Math.max(0,o.start),y=Math.min(f.count,o.start+o.count);for(let w=v,S=y-1;w<S;w+=h){const g=f.getX(w),x=f.getX(w+1),M=Lm(this,e,Kh,u,g,x);M&&n.push(M)}if(this.isLineLoop){const w=f.getX(y-1),S=f.getX(v),g=Lm(this,e,Kh,u,w,S);g&&n.push(g)}}else{const v=Math.max(0,o.start),y=Math.min(p.count,o.start+o.count);for(let w=v,S=y-1;w<S;w+=h){const g=Lm(this,e,Kh,u,w,w+1);g&&n.push(g)}if(this.isLineLoop){const w=Lm(this,e,Kh,u,y-1,v);w&&n.push(w)}}}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function Lm(t,e,n,i,r,s){const o=t.geometry.attributes.position;if(i0.fromBufferAttribute(o,r),r0.fromBufferAttribute(o,s),n.distanceSqToSegment(i0,r0,By,jT)>i)return;By.applyMatrix4(t.matrixWorld);const u=e.ray.origin.distanceTo(By);if(!(u<e.near||u>e.far))return{distance:u,point:jT.clone().applyMatrix4(t.matrixWorld),index:r,face:null,faceIndex:null,object:t}}const YT=new k,$T=new k;class ao extends Ha{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,i=[];for(let r=0,s=n.count;r<s;r+=2)YT.fromBufferAttribute(n,r),$T.fromBufferAttribute(n,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+YT.distanceTo($T);e.setAttribute("lineDistance",new Xe(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class bP extends Ha{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}}class FS extends ki{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new ze(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const qT=new ct,Vx=new lc,Im=new Li,Nm=new k;class RP extends Vt{constructor(e=new At,n=new FS){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,n){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Im.copy(i.boundingSphere),Im.applyMatrix4(r),Im.radius+=s,e.ray.intersectsSphere(Im)===!1)return;qT.copy(r).invert(),Vx.copy(e.ray).applyMatrix4(qT);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),u=a*a,h=i.index,d=i.attributes.position;if(h!==null){const p=Math.max(0,o.start),v=Math.min(h.count,o.start+o.count);for(let y=p,w=v;y<w;y++){const S=h.getX(y);Nm.fromBufferAttribute(d,S),ZT(Nm,S,u,r,e,n,this)}}else{const p=Math.max(0,o.start),v=Math.min(d.count,o.start+o.count);for(let y=p,w=v;y<w;y++)Nm.fromBufferAttribute(d,y),ZT(Nm,y,u,r,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function ZT(t,e,n,i,r,s,o){const a=Vx.distanceSqToPoint(t);if(a<n){const u=new k;Vx.closestPointToPoint(t,u),u.applyMatrix4(i);const h=r.ray.origin.distanceTo(u);if(h<r.near||h>r.far)return;s.push({distance:h,distanceToRay:Math.sqrt(a),point:u,index:e,face:null,object:o})}}class gB extends Ln{constructor(e,n,i,r,s,o,a,u,h){super(e,n,i,r,s,o,a,u,h),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:qn,this.magFilter=s!==void 0?s:qn,this.generateMipmaps=!1;const f=this;function d(){f.needsUpdate=!0,e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(d)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class vB extends Ln{constructor(e,n){super({width:e,height:n}),this.isFramebufferTexture=!0,this.magFilter=fi,this.minFilter=fi,this.generateMipmaps=!1,this.needsUpdate=!0}}class X0 extends Ln{constructor(e,n,i,r,s,o,a,u,h,f,d,p){super(null,o,a,u,h,f,r,s,d,p),this.isCompressedTexture=!0,this.image={width:n,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class yB extends X0{constructor(e,n,i,r,s,o){super(e,n,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=es}}class _B extends X0{constructor(e,n,i){super(void 0,e[0].width,e[0].height,n,i,Xo),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class zS extends Ln{constructor(e,n,i,r,s,o,a,u,h){super(e,n,i,r,s,o,a,u,h),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Rs{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,n){const i=this.getUtoTmapping(e);return this.getPoint(i,n)}getPoints(e=5){const n=[];for(let i=0;i<=e;i++)n.push(this.getPoint(i/e));return n}getSpacedPoints(e=5){const n=[];for(let i=0;i<=e;i++)n.push(this.getPointAt(i/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let i,r=this.getPoint(0),s=0;n.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),n.push(s),r=i;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n){const i=this.getLengths();let r=0;const s=i.length;let o;n?o=n:o=e*i[s-1];let a=0,u=s-1,h;for(;a<=u;)if(r=Math.floor(a+(u-a)/2),h=i[r]-o,h<0)a=r+1;else if(h>0)u=r-1;else{u=r;break}if(r=u,i[r]===o)return r/(s-1);const f=i[r],p=i[r+1]-f,v=(o-f)/p;return(r+v)/(s-1)}getTangent(e,n){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),u=n||(o.isVector2?new he:new k);return u.copy(a).sub(o).normalize(),u}getTangentAt(e,n){const i=this.getUtoTmapping(e);return this.getTangent(i,n)}computeFrenetFrames(e,n){const i=new k,r=[],s=[],o=[],a=new k,u=new ct;for(let v=0;v<=e;v++){const y=v/e;r[v]=this.getTangentAt(y,new k)}s[0]=new k,o[0]=new k;let h=Number.MAX_VALUE;const f=Math.abs(r[0].x),d=Math.abs(r[0].y),p=Math.abs(r[0].z);f<=h&&(h=f,i.set(1,0,0)),d<=h&&(h=d,i.set(0,1,0)),p<=h&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let v=1;v<=e;v++){if(s[v]=s[v-1].clone(),o[v]=o[v-1].clone(),a.crossVectors(r[v-1],r[v]),a.length()>Number.EPSILON){a.normalize();const y=Math.acos(Rn(r[v-1].dot(r[v]),-1,1));s[v].applyMatrix4(u.makeRotationAxis(a,y))}o[v].crossVectors(r[v],s[v])}if(n===!0){let v=Math.acos(Rn(s[0].dot(s[e]),-1,1));v/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(v=-v);for(let y=1;y<=e;y++)s[y].applyMatrix4(u.makeRotationAxis(r[y],v*y)),o[y].crossVectors(r[y],s[y])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class j0 extends Rs{constructor(e=0,n=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,u=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=u}getPoint(e,n=new he){const i=n,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let u=this.aX+this.xRadius*Math.cos(a),h=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const f=Math.cos(this.aRotation),d=Math.sin(this.aRotation),p=u-this.aX,v=h-this.aY;u=p*f-v*d+this.aX,h=p*d+v*f+this.aY}return i.set(u,h)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class PP extends j0{constructor(e,n,i,r,s,o){super(e,n,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function BS(){let t=0,e=0,n=0,i=0;function r(s,o,a,u){t=s,e=a,n=-3*s+3*o-2*a-u,i=2*s-2*o+a+u}return{initCatmullRom:function(s,o,a,u,h){r(o,a,h*(a-s),h*(u-o))},initNonuniformCatmullRom:function(s,o,a,u,h,f,d){let p=(o-s)/h-(a-s)/(h+f)+(a-o)/f,v=(a-o)/f-(u-o)/(f+d)+(u-a)/d;p*=f,v*=f,r(o,a,p,v)},calc:function(s){const o=s*s,a=o*s;return t+e*s+n*o+i*a}}}const Dm=new k,Hy=new BS,Vy=new BS,Gy=new BS;class LP extends Rs{constructor(e=[],n=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=i,this.tension=r}getPoint(e,n=new k){const i=n,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),u=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:u===0&&a===s-1&&(a=s-2,u=1);let h,f;this.closed||a>0?h=r[(a-1)%s]:(Dm.subVectors(r[0],r[1]).add(r[0]),h=Dm);const d=r[a%s],p=r[(a+1)%s];if(this.closed||a+2<s?f=r[(a+2)%s]:(Dm.subVectors(r[s-1],r[s-2]).add(r[s-1]),f=Dm),this.curveType==="centripetal"||this.curveType==="chordal"){const v=this.curveType==="chordal"?.5:.25;let y=Math.pow(h.distanceToSquared(d),v),w=Math.pow(d.distanceToSquared(p),v),S=Math.pow(p.distanceToSquared(f),v);w<1e-4&&(w=1),y<1e-4&&(y=w),S<1e-4&&(S=w),Hy.initNonuniformCatmullRom(h.x,d.x,p.x,f.x,y,w,S),Vy.initNonuniformCatmullRom(h.y,d.y,p.y,f.y,y,w,S),Gy.initNonuniformCatmullRom(h.z,d.z,p.z,f.z,y,w,S)}else this.curveType==="catmullrom"&&(Hy.initCatmullRom(h.x,d.x,p.x,f.x,this.tension),Vy.initCatmullRom(h.y,d.y,p.y,f.y,this.tension),Gy.initCatmullRom(h.z,d.z,p.z,f.z,this.tension));return i.set(Hy.calc(u),Vy.calc(u),Gy.calc(u)),i}copy(e){super.copy(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,i=this.points.length;n<i;n++){const r=this.points[n];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(new k().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function KT(t,e,n,i,r){const s=(i-e)*.5,o=(r-n)*.5,a=t*t,u=t*a;return(2*n-2*i+s+o)*u+(-3*n+3*i-2*s-o)*a+s*t+n}function xB(t,e){const n=1-t;return n*n*e}function SB(t,e){return 2*(1-t)*t*e}function MB(t,e){return t*t*e}function wf(t,e,n,i){return xB(t,e)+SB(t,n)+MB(t,i)}function wB(t,e){const n=1-t;return n*n*n*e}function EB(t,e){const n=1-t;return 3*n*n*t*e}function TB(t,e){return 3*(1-t)*t*t*e}function AB(t,e){return t*t*t*e}function Ef(t,e,n,i,r){return wB(t,e)+EB(t,n)+TB(t,i)+AB(t,r)}class HS extends Rs{constructor(e=new he,n=new he,i=new he,r=new he){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=i,this.v3=r}getPoint(e,n=new he){const i=n,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Ef(e,r.x,s.x,o.x,a.x),Ef(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class IP extends Rs{constructor(e=new k,n=new k,i=new k,r=new k){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=i,this.v3=r}getPoint(e,n=new k){const i=n,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Ef(e,r.x,s.x,o.x,a.x),Ef(e,r.y,s.y,o.y,a.y),Ef(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class VS extends Rs{constructor(e=new he,n=new he){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new he){const i=n;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new he){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class NP extends Rs{constructor(e=new k,n=new k){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new k){const i=n;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new k){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class GS extends Rs{constructor(e=new he,n=new he,i=new he){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=i}getPoint(e,n=new he){const i=n,r=this.v0,s=this.v1,o=this.v2;return i.set(wf(e,r.x,s.x,o.x),wf(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class WS extends Rs{constructor(e=new k,n=new k,i=new k){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=i}getPoint(e,n=new k){const i=n,r=this.v0,s=this.v1,o=this.v2;return i.set(wf(e,r.x,s.x,o.x),wf(e,r.y,s.y,o.y),wf(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class XS extends Rs{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new he){const i=n,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,u=r[o===0?o:o-1],h=r[o],f=r[o>r.length-2?r.length-1:o+1],d=r[o>r.length-3?r.length-1:o+2];return i.set(KT(a,u.x,h.x,f.x,d.x),KT(a,u.y,h.y,f.y,d.y)),i}copy(e){super.copy(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,i=this.points.length;n<i;n++){const r=this.points[n];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(new he().fromArray(r))}return this}}var s0=Object.freeze({__proto__:null,ArcCurve:PP,CatmullRomCurve3:LP,CubicBezierCurve:HS,CubicBezierCurve3:IP,EllipseCurve:j0,LineCurve:VS,LineCurve3:NP,QuadraticBezierCurve:GS,QuadraticBezierCurve3:WS,SplineCurve:XS});class DP extends Rs{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(n)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new s0[i](n,e))}return this}getPoint(e,n){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],u=a.getLength(),h=u===0?0:1-o/u;return a.getPointAt(h,n)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let i=0,r=this.curves.length;i<r;i++)n+=this.curves[i].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let i=0;i<=e;i++)n.push(this.getPoint(i/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,u=o.getPoints(a);for(let h=0;h<u.length;h++){const f=u[h];i&&i.equals(f)||(n.push(f),i=f)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,i=e.curves.length;n<i;n++){const r=e.curves[n];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,i=this.curves.length;n<i;n++){const r=this.curves[n];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,i=e.curves.length;n<i;n++){const r=e.curves[n];this.curves.push(new s0[r.type]().fromJSON(r))}return this}}class ad extends DP{constructor(e){super(),this.type="Path",this.currentPoint=new he,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,i=e.length;n<i;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const i=new VS(this.currentPoint.clone(),new he(e,n));return this.curves.push(i),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,i,r){const s=new GS(this.currentPoint.clone(),new he(e,n),new he(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,n,i,r,s,o){const a=new HS(this.currentPoint.clone(),new he(e,n),new he(i,r),new he(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),i=new XS(n);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,i,r,s,o){const a=this.currentPoint.x,u=this.currentPoint.y;return this.absarc(e+a,n+u,i,r,s,o),this}absarc(e,n,i,r,s,o){return this.absellipse(e,n,i,i,r,s,o),this}ellipse(e,n,i,r,s,o,a,u){const h=this.currentPoint.x,f=this.currentPoint.y;return this.absellipse(e+h,n+f,i,r,s,o,a,u),this}absellipse(e,n,i,r,s,o,a,u){const h=new j0(e,n,i,r,s,o,a,u);if(this.curves.length>0){const d=h.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(h);const f=h.getPoint(1);return this.currentPoint.copy(f),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Rd extends At{constructor(e=[new he(0,-.5),new he(.5,0),new he(0,.5)],n=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:i,phiLength:r},n=Math.floor(n),r=Rn(r,0,Math.PI*2);const s=[],o=[],a=[],u=[],h=[],f=1/n,d=new k,p=new he,v=new k,y=new k,w=new k;let S=0,g=0;for(let x=0;x<=e.length-1;x++)switch(x){case 0:S=e[x+1].x-e[x].x,g=e[x+1].y-e[x].y,v.x=g*1,v.y=-S,v.z=g*0,w.copy(v),v.normalize(),u.push(v.x,v.y,v.z);break;case e.length-1:u.push(w.x,w.y,w.z);break;default:S=e[x+1].x-e[x].x,g=e[x+1].y-e[x].y,v.x=g*1,v.y=-S,v.z=g*0,y.copy(v),v.x+=w.x,v.y+=w.y,v.z+=w.z,v.normalize(),u.push(v.x,v.y,v.z),w.copy(y)}for(let x=0;x<=n;x++){const M=i+x*f*r,T=Math.sin(M),P=Math.cos(M);for(let b=0;b<=e.length-1;b++){d.x=e[b].x*T,d.y=e[b].y,d.z=e[b].x*P,o.push(d.x,d.y,d.z),p.x=x/n,p.y=b/(e.length-1),a.push(p.x,p.y);const L=u[3*b+0]*T,N=u[3*b+1],R=u[3*b+0]*P;h.push(L,N,R)}}for(let x=0;x<n;x++)for(let M=0;M<e.length-1;M++){const T=M+x*e.length,P=T,b=T+e.length,L=T+e.length+1,N=T+1;s.push(P,b,N),s.push(L,N,b)}this.setIndex(s),this.setAttribute("position",new Xe(o,3)),this.setAttribute("uv",new Xe(a,2)),this.setAttribute("normal",new Xe(h,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Rd(e.points,e.segments,e.phiStart,e.phiLength)}}class Y0 extends Rd{constructor(e=1,n=1,i=4,r=8){const s=new ad;s.absarc(0,-n/2,e,Math.PI*1.5,0),s.absarc(0,n/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:n,capSegments:i,radialSegments:r}}static fromJSON(e){return new Y0(e.radius,e.length,e.capSegments,e.radialSegments)}}class $0 extends At{constructor(e=1,n=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:i,thetaLength:r},n=Math.max(3,n);const s=[],o=[],a=[],u=[],h=new k,f=new he;o.push(0,0,0),a.push(0,0,1),u.push(.5,.5);for(let d=0,p=3;d<=n;d++,p+=3){const v=i+d/n*r;h.x=e*Math.cos(v),h.y=e*Math.sin(v),o.push(h.x,h.y,h.z),a.push(0,0,1),f.x=(o[p]/e+1)/2,f.y=(o[p+1]/e+1)/2,u.push(f.x,f.y)}for(let d=1;d<=n;d++)s.push(d,d+1,0);this.setIndex(s),this.setAttribute("position",new Xe(o,3)),this.setAttribute("normal",new Xe(a,3)),this.setAttribute("uv",new Xe(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new $0(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class rh extends At{constructor(e=1,n=1,i=1,r=32,s=1,o=!1,a=0,u=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:u};const h=this;r=Math.floor(r),s=Math.floor(s);const f=[],d=[],p=[],v=[];let y=0;const w=[],S=i/2;let g=0;x(),o===!1&&(e>0&&M(!0),n>0&&M(!1)),this.setIndex(f),this.setAttribute("position",new Xe(d,3)),this.setAttribute("normal",new Xe(p,3)),this.setAttribute("uv",new Xe(v,2));function x(){const T=new k,P=new k;let b=0;const L=(n-e)/i;for(let N=0;N<=s;N++){const R=[],C=N/s,O=C*(n-e)+e;for(let j=0;j<=r;j++){const H=j/r,J=H*u+a,ne=Math.sin(J),fe=Math.cos(J);P.x=O*ne,P.y=-C*i+S,P.z=O*fe,d.push(P.x,P.y,P.z),T.set(ne,L,fe).normalize(),p.push(T.x,T.y,T.z),v.push(H,1-C),R.push(y++)}w.push(R)}for(let N=0;N<r;N++)for(let R=0;R<s;R++){const C=w[R][N],O=w[R+1][N],j=w[R+1][N+1],H=w[R][N+1];f.push(C,O,H),f.push(O,j,H),b+=6}h.addGroup(g,b,0),g+=b}function M(T){const P=y,b=new he,L=new k;let N=0;const R=T===!0?e:n,C=T===!0?1:-1;for(let j=1;j<=r;j++)d.push(0,S*C,0),p.push(0,C,0),v.push(.5,.5),y++;const O=y;for(let j=0;j<=r;j++){const J=j/r*u+a,ne=Math.cos(J),fe=Math.sin(J);L.x=R*fe,L.y=S*C,L.z=R*ne,d.push(L.x,L.y,L.z),p.push(0,C,0),b.x=ne*.5+.5,b.y=fe*.5*C+.5,v.push(b.x,b.y),y++}for(let j=0;j<r;j++){const H=P+j,J=O+j;T===!0?f.push(J,J+1,H):f.push(J+1,J,H),N+=3}h.addGroup(g,N,T===!0?1:2),g+=N}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new rh(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class q0 extends rh{constructor(e=1,n=1,i=32,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,n,i,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new q0(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Ja extends At{constructor(e=[],n=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:i,detail:r};const s=[],o=[];a(r),h(i),f(),this.setAttribute("position",new Xe(s,3)),this.setAttribute("normal",new Xe(s.slice(),3)),this.setAttribute("uv",new Xe(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(x){const M=new k,T=new k,P=new k;for(let b=0;b<n.length;b+=3)v(n[b+0],M),v(n[b+1],T),v(n[b+2],P),u(M,T,P,x)}function u(x,M,T,P){const b=P+1,L=[];for(let N=0;N<=b;N++){L[N]=[];const R=x.clone().lerp(T,N/b),C=M.clone().lerp(T,N/b),O=b-N;for(let j=0;j<=O;j++)j===0&&N===b?L[N][j]=R:L[N][j]=R.clone().lerp(C,j/O)}for(let N=0;N<b;N++)for(let R=0;R<2*(b-N)-1;R++){const C=Math.floor(R/2);R%2===0?(p(L[N][C+1]),p(L[N+1][C]),p(L[N][C])):(p(L[N][C+1]),p(L[N+1][C+1]),p(L[N+1][C]))}}function h(x){const M=new k;for(let T=0;T<s.length;T+=3)M.x=s[T+0],M.y=s[T+1],M.z=s[T+2],M.normalize().multiplyScalar(x),s[T+0]=M.x,s[T+1]=M.y,s[T+2]=M.z}function f(){const x=new k;for(let M=0;M<s.length;M+=3){x.x=s[M+0],x.y=s[M+1],x.z=s[M+2];const T=S(x)/2/Math.PI+.5,P=g(x)/Math.PI+.5;o.push(T,1-P)}y(),d()}function d(){for(let x=0;x<o.length;x+=6){const M=o[x+0],T=o[x+2],P=o[x+4],b=Math.max(M,T,P),L=Math.min(M,T,P);b>.9&&L<.1&&(M<.2&&(o[x+0]+=1),T<.2&&(o[x+2]+=1),P<.2&&(o[x+4]+=1))}}function p(x){s.push(x.x,x.y,x.z)}function v(x,M){const T=x*3;M.x=e[T+0],M.y=e[T+1],M.z=e[T+2]}function y(){const x=new k,M=new k,T=new k,P=new k,b=new he,L=new he,N=new he;for(let R=0,C=0;R<s.length;R+=9,C+=6){x.set(s[R+0],s[R+1],s[R+2]),M.set(s[R+3],s[R+4],s[R+5]),T.set(s[R+6],s[R+7],s[R+8]),b.set(o[C+0],o[C+1]),L.set(o[C+2],o[C+3]),N.set(o[C+4],o[C+5]),P.copy(x).add(M).add(T).divideScalar(3);const O=S(P);w(b,C+0,x,O),w(L,C+2,M,O),w(N,C+4,T,O)}}function w(x,M,T,P){P<0&&x.x===1&&(o[M]=x.x-1),T.x===0&&T.z===0&&(o[M]=P/2/Math.PI+.5)}function S(x){return Math.atan2(x.z,-x.x)}function g(x){return Math.atan2(-x.y,Math.sqrt(x.x*x.x+x.z*x.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ja(e.vertices,e.indices,e.radius,e.details)}}class Z0 extends Ja{constructor(e=1,n=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,n),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Z0(e.radius,e.detail)}}const km=new k,Um=new k,Wy=new k,Om=new Ar;class kP extends At{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const r=Math.pow(10,4),s=Math.cos(Gl*n),o=e.getIndex(),a=e.getAttribute("position"),u=o?o.count:a.count,h=[0,0,0],f=["a","b","c"],d=new Array(3),p={},v=[];for(let y=0;y<u;y+=3){o?(h[0]=o.getX(y),h[1]=o.getX(y+1),h[2]=o.getX(y+2)):(h[0]=y,h[1]=y+1,h[2]=y+2);const{a:w,b:S,c:g}=Om;if(w.fromBufferAttribute(a,h[0]),S.fromBufferAttribute(a,h[1]),g.fromBufferAttribute(a,h[2]),Om.getNormal(Wy),d[0]=`${Math.round(w.x*r)},${Math.round(w.y*r)},${Math.round(w.z*r)}`,d[1]=`${Math.round(S.x*r)},${Math.round(S.y*r)},${Math.round(S.z*r)}`,d[2]=`${Math.round(g.x*r)},${Math.round(g.y*r)},${Math.round(g.z*r)}`,!(d[0]===d[1]||d[1]===d[2]||d[2]===d[0]))for(let x=0;x<3;x++){const M=(x+1)%3,T=d[x],P=d[M],b=Om[f[x]],L=Om[f[M]],N=`${T}_${P}`,R=`${P}_${T}`;R in p&&p[R]?(Wy.dot(p[R].normal)<=s&&(v.push(b.x,b.y,b.z),v.push(L.x,L.y,L.z)),p[R]=null):N in p||(p[N]={index0:h[x],index1:h[M],normal:Wy.clone()})}}for(const y in p)if(p[y]){const{index0:w,index1:S}=p[y];km.fromBufferAttribute(a,w),Um.fromBufferAttribute(a,S),v.push(km.x,km.y,km.z),v.push(Um.x,Um.y,Um.z)}this.setAttribute("position",new Xe(v,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Xl extends ad{constructor(e){super(e),this.uuid=Rr(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let i=0,r=this.holes.length;i<r;i++)n[i]=this.holes[i].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,i=e.holes.length;n<i;n++){const r=e.holes[n];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,i=this.holes.length;n<i;n++){const r=this.holes[n];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,i=e.holes.length;n<i;n++){const r=e.holes[n];this.holes.push(new ad().fromJSON(r))}return this}}const CB={triangulate:function(t,e,n=2){const i=e&&e.length,r=i?e[0]*n:t.length;let s=UP(t,0,r,n,!0);const o=[];if(!s||s.next===s.prev)return o;let a,u,h,f,d,p,v;if(i&&(s=IB(t,e,s,n)),t.length>80*n){a=h=t[0],u=f=t[1];for(let y=n;y<r;y+=n)d=t[y],p=t[y+1],d<a&&(a=d),p<u&&(u=p),d>h&&(h=d),p>f&&(f=p);v=Math.max(h-a,f-u),v=v!==0?32767/v:0}return ld(s,o,n,a,u,v,0),o}};function UP(t,e,n,i,r){let s,o;if(r===GB(t,e,n,i)>0)for(s=e;s<n;s+=i)o=JT(s,t[s],t[s+1],o);else for(s=n-i;s>=e;s-=i)o=JT(s,t[s],t[s+1],o);return o&&K0(o,o.next)&&(ud(o),o=o.next),o}function ic(t,e){if(!t)return t;e||(e=t);let n=t,i;do if(i=!1,!n.steiner&&(K0(n,n.next)||Mn(n.prev,n,n.next)===0)){if(ud(n),n=e=n.prev,n===n.next)break;i=!0}else n=n.next;while(i||n!==e);return e}function ld(t,e,n,i,r,s,o){if(!t)return;!o&&s&&OB(t,i,r,s);let a=t,u,h;for(;t.prev!==t.next;){if(u=t.prev,h=t.next,s?RB(t,i,r,s):bB(t)){e.push(u.i/n|0),e.push(t.i/n|0),e.push(h.i/n|0),ud(t),t=h.next,a=h.next;continue}if(t=h,t===a){o?o===1?(t=PB(ic(t),e,n),ld(t,e,n,i,r,s,2)):o===2&&LB(t,e,n,i,r,s):ld(ic(t),e,n,i,r,s,1);break}}}function bB(t){const e=t.prev,n=t,i=t.next;if(Mn(e,n,i)>=0)return!1;const r=e.x,s=n.x,o=i.x,a=e.y,u=n.y,h=i.y,f=r<s?r<o?r:o:s<o?s:o,d=a<u?a<h?a:h:u<h?u:h,p=r>s?r>o?r:o:s>o?s:o,v=a>u?a>h?a:h:u>h?u:h;let y=i.next;for(;y!==e;){if(y.x>=f&&y.x<=p&&y.y>=d&&y.y<=v&&_u(r,a,s,u,o,h,y.x,y.y)&&Mn(y.prev,y,y.next)>=0)return!1;y=y.next}return!0}function RB(t,e,n,i){const r=t.prev,s=t,o=t.next;if(Mn(r,s,o)>=0)return!1;const a=r.x,u=s.x,h=o.x,f=r.y,d=s.y,p=o.y,v=a<u?a<h?a:h:u<h?u:h,y=f<d?f<p?f:p:d<p?d:p,w=a>u?a>h?a:h:u>h?u:h,S=f>d?f>p?f:p:d>p?d:p,g=Gx(v,y,e,n,i),x=Gx(w,S,e,n,i);let M=t.prevZ,T=t.nextZ;for(;M&&M.z>=g&&T&&T.z<=x;){if(M.x>=v&&M.x<=w&&M.y>=y&&M.y<=S&&M!==r&&M!==o&&_u(a,f,u,d,h,p,M.x,M.y)&&Mn(M.prev,M,M.next)>=0||(M=M.prevZ,T.x>=v&&T.x<=w&&T.y>=y&&T.y<=S&&T!==r&&T!==o&&_u(a,f,u,d,h,p,T.x,T.y)&&Mn(T.prev,T,T.next)>=0))return!1;T=T.nextZ}for(;M&&M.z>=g;){if(M.x>=v&&M.x<=w&&M.y>=y&&M.y<=S&&M!==r&&M!==o&&_u(a,f,u,d,h,p,M.x,M.y)&&Mn(M.prev,M,M.next)>=0)return!1;M=M.prevZ}for(;T&&T.z<=x;){if(T.x>=v&&T.x<=w&&T.y>=y&&T.y<=S&&T!==r&&T!==o&&_u(a,f,u,d,h,p,T.x,T.y)&&Mn(T.prev,T,T.next)>=0)return!1;T=T.nextZ}return!0}function PB(t,e,n){let i=t;do{const r=i.prev,s=i.next.next;!K0(r,s)&&OP(r,i,i.next,s)&&cd(r,s)&&cd(s,r)&&(e.push(r.i/n|0),e.push(i.i/n|0),e.push(s.i/n|0),ud(i),ud(i.next),i=t=s),i=i.next}while(i!==t);return ic(i)}function LB(t,e,n,i,r,s){let o=t;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&BB(o,a)){let u=FP(o,a);o=ic(o,o.next),u=ic(u,u.next),ld(o,e,n,i,r,s,0),ld(u,e,n,i,r,s,0);return}a=a.next}o=o.next}while(o!==t)}function IB(t,e,n,i){const r=[];let s,o,a,u,h;for(s=0,o=e.length;s<o;s++)a=e[s]*i,u=s<o-1?e[s+1]*i:t.length,h=UP(t,a,u,i,!1),h===h.next&&(h.steiner=!0),r.push(zB(h));for(r.sort(NB),s=0;s<r.length;s++)n=DB(r[s],n);return n}function NB(t,e){return t.x-e.x}function DB(t,e){const n=kB(t,e);if(!n)return e;const i=FP(n,t);return ic(i,i.next),ic(n,n.next)}function kB(t,e){let n=e,i=-1/0,r;const s=t.x,o=t.y;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){const p=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(p<=s&&p>i&&(i=p,r=n.x<n.next.x?n:n.next,p===s))return r}n=n.next}while(n!==e);if(!r)return null;const a=r,u=r.x,h=r.y;let f=1/0,d;n=r;do s>=n.x&&n.x>=u&&s!==n.x&&_u(o<h?s:i,o,u,h,o<h?i:s,o,n.x,n.y)&&(d=Math.abs(o-n.y)/(s-n.x),cd(n,t)&&(d<f||d===f&&(n.x>r.x||n.x===r.x&&UB(r,n)))&&(r=n,f=d)),n=n.next;while(n!==a);return r}function UB(t,e){return Mn(t.prev,t,e.prev)<0&&Mn(e.next,t,t.next)<0}function OB(t,e,n,i){let r=t;do r.z===0&&(r.z=Gx(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,FB(r)}function FB(t){let e,n,i,r,s,o,a,u,h=1;do{for(n=t,t=null,s=null,o=0;n;){for(o++,i=n,a=0,e=0;e<h&&(a++,i=i.nextZ,!!i);e++);for(u=h;a>0||u>0&&i;)a!==0&&(u===0||!i||n.z<=i.z)?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,u--),s?s.nextZ=r:t=r,r.prevZ=s,s=r;n=i}s.nextZ=null,h*=2}while(o>1);return t}function Gx(t,e,n,i,r){return t=(t-n)*r|0,e=(e-i)*r|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function zB(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function _u(t,e,n,i,r,s,o,a){return(r-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(i-a)>=(n-o)*(e-a)&&(n-o)*(s-a)>=(r-o)*(i-a)}function BB(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!HB(t,e)&&(cd(t,e)&&cd(e,t)&&VB(t,e)&&(Mn(t.prev,t,e.prev)||Mn(t,e.prev,e))||K0(t,e)&&Mn(t.prev,t,t.next)>0&&Mn(e.prev,e,e.next)>0)}function Mn(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function K0(t,e){return t.x===e.x&&t.y===e.y}function OP(t,e,n,i){const r=zm(Mn(t,e,n)),s=zm(Mn(t,e,i)),o=zm(Mn(n,i,t)),a=zm(Mn(n,i,e));return!!(r!==s&&o!==a||r===0&&Fm(t,n,e)||s===0&&Fm(t,i,e)||o===0&&Fm(n,t,i)||a===0&&Fm(n,e,i))}function Fm(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function zm(t){return t>0?1:t<0?-1:0}function HB(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&OP(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function cd(t,e){return Mn(t.prev,t,t.next)<0?Mn(t,e,t.next)>=0&&Mn(t,t.prev,e)>=0:Mn(t,e,t.prev)<0||Mn(t,t.next,e)<0}function VB(t,e){let n=t,i=!1;const r=(t.x+e.x)/2,s=(t.y+e.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&r<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next;while(n!==t);return i}function FP(t,e){const n=new Wx(t.i,t.x,t.y),i=new Wx(e.i,e.x,e.y),r=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,s.next=i,i.prev=s,i}function JT(t,e,n,i){const r=new Wx(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function ud(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Wx(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function GB(t,e,n,i){let r=0;for(let s=e,o=n-i;s<n;s+=i)r+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return r}class to{static area(e){const n=e.length;let i=0;for(let r=n-1,s=0;s<n;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return to.area(e)<0}static triangulateShape(e,n){const i=[],r=[],s=[];QT(e),eA(i,e);let o=e.length;n.forEach(QT);for(let u=0;u<n.length;u++)r.push(o),o+=n[u].length,eA(i,n[u]);const a=CB.triangulate(i,r);for(let u=0;u<a.length;u+=3)s.push(a.slice(u,u+3));return s}}function QT(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function eA(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class J0 extends At{constructor(e=new Xl([new he(.5,.5),new he(-.5,.5),new he(-.5,-.5),new he(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,u=e.length;a<u;a++){const h=e[a];o(h)}this.setAttribute("position",new Xe(r,3)),this.setAttribute("uv",new Xe(s,2)),this.computeVertexNormals();function o(a){const u=[],h=n.curveSegments!==void 0?n.curveSegments:12,f=n.steps!==void 0?n.steps:1,d=n.depth!==void 0?n.depth:1;let p=n.bevelEnabled!==void 0?n.bevelEnabled:!0,v=n.bevelThickness!==void 0?n.bevelThickness:.2,y=n.bevelSize!==void 0?n.bevelSize:v-.1,w=n.bevelOffset!==void 0?n.bevelOffset:0,S=n.bevelSegments!==void 0?n.bevelSegments:3;const g=n.extrudePath,x=n.UVGenerator!==void 0?n.UVGenerator:WB;let M,T=!1,P,b,L,N;g&&(M=g.getSpacedPoints(f),T=!0,p=!1,P=g.computeFrenetFrames(f,!1),b=new k,L=new k,N=new k),p||(S=0,v=0,y=0,w=0);const R=a.extractPoints(h);let C=R.shape;const O=R.holes;if(!to.isClockWise(C)){C=C.reverse();for(let ce=0,ge=O.length;ce<ge;ce++){const pe=O[ce];to.isClockWise(pe)&&(O[ce]=pe.reverse())}}const H=to.triangulateShape(C,O),J=C;for(let ce=0,ge=O.length;ce<ge;ce++){const pe=O[ce];C=C.concat(pe)}function ne(ce,ge,pe){return ge||console.error("THREE.ExtrudeGeometry: vec does not exist"),ce.clone().addScaledVector(ge,pe)}const fe=C.length,ve=H.length;function U(ce,ge,pe){let Pe,Se,Fe;const Qe=ce.x-ge.x,z=ce.y-ge.y,I=pe.x-ce.x,Z=pe.y-ce.y,de=Qe*Qe+z*z,ye=Qe*Z-z*I;if(Math.abs(ye)>Number.EPSILON){const me=Math.sqrt(de),Ze=Math.sqrt(I*I+Z*Z),Ie=ge.x-z/me,Le=ge.y+Qe/me,ht=pe.x-Z/Ze,be=pe.y+I/Ze,$e=((ht-Ie)*Z-(be-Le)*I)/(Qe*Z-z*I);Pe=Ie+Qe*$e-ce.x,Se=Le+z*$e-ce.y;const Mt=Pe*Pe+Se*Se;if(Mt<=2)return new he(Pe,Se);Fe=Math.sqrt(Mt/2)}else{let me=!1;Qe>Number.EPSILON?I>Number.EPSILON&&(me=!0):Qe<-Number.EPSILON?I<-Number.EPSILON&&(me=!0):Math.sign(z)===Math.sign(Z)&&(me=!0),me?(Pe=-z,Se=Qe,Fe=Math.sqrt(de)):(Pe=Qe,Se=z,Fe=Math.sqrt(de/2))}return new he(Pe/Fe,Se/Fe)}const X=[];for(let ce=0,ge=J.length,pe=ge-1,Pe=ce+1;ce<ge;ce++,pe++,Pe++)pe===ge&&(pe=0),Pe===ge&&(Pe=0),X[ce]=U(J[ce],J[pe],J[Pe]);const V=[];let re,we=X.concat();for(let ce=0,ge=O.length;ce<ge;ce++){const pe=O[ce];re=[];for(let Pe=0,Se=pe.length,Fe=Se-1,Qe=Pe+1;Pe<Se;Pe++,Fe++,Qe++)Fe===Se&&(Fe=0),Qe===Se&&(Qe=0),re[Pe]=U(pe[Pe],pe[Fe],pe[Qe]);V.push(re),we=we.concat(re)}for(let ce=0;ce<S;ce++){const ge=ce/S,pe=v*Math.cos(ge*Math.PI/2),Pe=y*Math.sin(ge*Math.PI/2)+w;for(let Se=0,Fe=J.length;Se<Fe;Se++){const Qe=ne(J[Se],X[Se],Pe);Me(Qe.x,Qe.y,-pe)}for(let Se=0,Fe=O.length;Se<Fe;Se++){const Qe=O[Se];re=V[Se];for(let z=0,I=Qe.length;z<I;z++){const Z=ne(Qe[z],re[z],Pe);Me(Z.x,Z.y,-pe)}}}const Be=y+w;for(let ce=0;ce<fe;ce++){const ge=p?ne(C[ce],we[ce],Be):C[ce];T?(L.copy(P.normals[0]).multiplyScalar(ge.x),b.copy(P.binormals[0]).multiplyScalar(ge.y),N.copy(M[0]).add(L).add(b),Me(N.x,N.y,N.z)):Me(ge.x,ge.y,0)}for(let ce=1;ce<=f;ce++)for(let ge=0;ge<fe;ge++){const pe=p?ne(C[ge],we[ge],Be):C[ge];T?(L.copy(P.normals[ce]).multiplyScalar(pe.x),b.copy(P.binormals[ce]).multiplyScalar(pe.y),N.copy(M[ce]).add(L).add(b),Me(N.x,N.y,N.z)):Me(pe.x,pe.y,d/f*ce)}for(let ce=S-1;ce>=0;ce--){const ge=ce/S,pe=v*Math.cos(ge*Math.PI/2),Pe=y*Math.sin(ge*Math.PI/2)+w;for(let Se=0,Fe=J.length;Se<Fe;Se++){const Qe=ne(J[Se],X[Se],Pe);Me(Qe.x,Qe.y,d+pe)}for(let Se=0,Fe=O.length;Se<Fe;Se++){const Qe=O[Se];re=V[Se];for(let z=0,I=Qe.length;z<I;z++){const Z=ne(Qe[z],re[z],Pe);T?Me(Z.x,Z.y+M[f-1].y,M[f-1].x+pe):Me(Z.x,Z.y,d+pe)}}}ee(),xe();function ee(){const ce=r.length/3;if(p){let ge=0,pe=fe*ge;for(let Pe=0;Pe<ve;Pe++){const Se=H[Pe];ft(Se[2]+pe,Se[1]+pe,Se[0]+pe)}ge=f+S*2,pe=fe*ge;for(let Pe=0;Pe<ve;Pe++){const Se=H[Pe];ft(Se[0]+pe,Se[1]+pe,Se[2]+pe)}}else{for(let ge=0;ge<ve;ge++){const pe=H[ge];ft(pe[2],pe[1],pe[0])}for(let ge=0;ge<ve;ge++){const pe=H[ge];ft(pe[0]+fe*f,pe[1]+fe*f,pe[2]+fe*f)}}i.addGroup(ce,r.length/3-ce,0)}function xe(){const ce=r.length/3;let ge=0;Ce(J,ge),ge+=J.length;for(let pe=0,Pe=O.length;pe<Pe;pe++){const Se=O[pe];Ce(Se,ge),ge+=Se.length}i.addGroup(ce,r.length/3-ce,1)}function Ce(ce,ge){let pe=ce.length;for(;--pe>=0;){const Pe=pe;let Se=pe-1;Se<0&&(Se=ce.length-1);for(let Fe=0,Qe=f+S*2;Fe<Qe;Fe++){const z=fe*Fe,I=fe*(Fe+1),Z=ge+Pe+z,de=ge+Se+z,ye=ge+Se+I,me=ge+Pe+I;vt(Z,de,ye,me)}}}function Me(ce,ge,pe){u.push(ce),u.push(ge),u.push(pe)}function ft(ce,ge,pe){$(ce),$(ge),$(pe);const Pe=r.length/3,Se=x.generateTopUV(i,r,Pe-3,Pe-2,Pe-1);ut(Se[0]),ut(Se[1]),ut(Se[2])}function vt(ce,ge,pe,Pe){$(ce),$(ge),$(Pe),$(ge),$(pe),$(Pe);const Se=r.length/3,Fe=x.generateSideWallUV(i,r,Se-6,Se-3,Se-2,Se-1);ut(Fe[0]),ut(Fe[1]),ut(Fe[3]),ut(Fe[1]),ut(Fe[2]),ut(Fe[3])}function $(ce){r.push(u[ce*3+0]),r.push(u[ce*3+1]),r.push(u[ce*3+2])}function ut(ce){s.push(ce.x),s.push(ce.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,i=this.parameters.options;return XB(n,i,e)}static fromJSON(e,n){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=n[e.shapes[s]];i.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new s0[r.type]().fromJSON(r)),new J0(i,e.options)}}const WB={generateTopUV:function(t,e,n,i,r){const s=e[n*3],o=e[n*3+1],a=e[i*3],u=e[i*3+1],h=e[r*3],f=e[r*3+1];return[new he(s,o),new he(a,u),new he(h,f)]},generateSideWallUV:function(t,e,n,i,r,s){const o=e[n*3],a=e[n*3+1],u=e[n*3+2],h=e[i*3],f=e[i*3+1],d=e[i*3+2],p=e[r*3],v=e[r*3+1],y=e[r*3+2],w=e[s*3],S=e[s*3+1],g=e[s*3+2];return Math.abs(a-f)<Math.abs(o-h)?[new he(o,1-u),new he(h,1-d),new he(p,1-y),new he(w,1-g)]:[new he(a,1-u),new he(f,1-d),new he(v,1-y),new he(S,1-g)]}};function XB(t,e,n){if(n.shapes=[],Array.isArray(t))for(let i=0,r=t.length;i<r;i++){const s=t[i];n.shapes.push(s.uuid)}else n.shapes.push(t.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class Q0 extends Ja{constructor(e=1,n=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Q0(e.radius,e.detail)}}class Pd extends Ja{constructor(e=1,n=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Pd(e.radius,e.detail)}}class e1 extends At{constructor(e=.5,n=1,i=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const a=[],u=[],h=[],f=[];let d=e;const p=(n-e)/r,v=new k,y=new he;for(let w=0;w<=r;w++){for(let S=0;S<=i;S++){const g=s+S/i*o;v.x=d*Math.cos(g),v.y=d*Math.sin(g),u.push(v.x,v.y,v.z),h.push(0,0,1),y.x=(v.x/n+1)/2,y.y=(v.y/n+1)/2,f.push(y.x,y.y)}d+=p}for(let w=0;w<r;w++){const S=w*(i+1);for(let g=0;g<i;g++){const x=g+S,M=x,T=x+i+1,P=x+i+2,b=x+1;a.push(M,T,b),a.push(T,P,b)}}this.setIndex(a),this.setAttribute("position",new Xe(u,3)),this.setAttribute("normal",new Xe(h,3)),this.setAttribute("uv",new Xe(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new e1(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class t1 extends At{constructor(e=new Xl([new he(0,.5),new he(-.5,-.5),new he(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const i=[],r=[],s=[],o=[];let a=0,u=0;if(Array.isArray(e)===!1)h(e);else for(let f=0;f<e.length;f++)h(e[f]),this.addGroup(a,u,f),a+=u,u=0;this.setIndex(i),this.setAttribute("position",new Xe(r,3)),this.setAttribute("normal",new Xe(s,3)),this.setAttribute("uv",new Xe(o,2));function h(f){const d=r.length/3,p=f.extractPoints(n);let v=p.shape;const y=p.holes;to.isClockWise(v)===!1&&(v=v.reverse());for(let S=0,g=y.length;S<g;S++){const x=y[S];to.isClockWise(x)===!0&&(y[S]=x.reverse())}const w=to.triangulateShape(v,y);for(let S=0,g=y.length;S<g;S++){const x=y[S];v=v.concat(x)}for(let S=0,g=v.length;S<g;S++){const x=v[S];r.push(x.x,x.y,0),s.push(0,0,1),o.push(x.x,x.y)}for(let S=0,g=w.length;S<g;S++){const x=w[S],M=x[0]+d,T=x[1]+d,P=x[2]+d;i.push(M,T,P),u+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return jB(n,e)}static fromJSON(e,n){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=n[e.shapes[r]];i.push(o)}return new t1(i,e.curveSegments)}}function jB(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,i=t.length;n<i;n++){const r=t[n];e.shapes.push(r.uuid)}else e.shapes.push(t.uuid);return e}class Ld extends At{constructor(e=1,n=32,i=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},n=Math.max(3,Math.floor(n)),i=Math.max(2,Math.floor(i));const u=Math.min(o+a,Math.PI);let h=0;const f=[],d=new k,p=new k,v=[],y=[],w=[],S=[];for(let g=0;g<=i;g++){const x=[],M=g/i;let T=0;g===0&&o===0?T=.5/n:g===i&&u===Math.PI&&(T=-.5/n);for(let P=0;P<=n;P++){const b=P/n;d.x=-e*Math.cos(r+b*s)*Math.sin(o+M*a),d.y=e*Math.cos(o+M*a),d.z=e*Math.sin(r+b*s)*Math.sin(o+M*a),y.push(d.x,d.y,d.z),p.copy(d).normalize(),w.push(p.x,p.y,p.z),S.push(b+T,1-M),x.push(h++)}f.push(x)}for(let g=0;g<i;g++)for(let x=0;x<n;x++){const M=f[g][x+1],T=f[g][x],P=f[g+1][x],b=f[g+1][x+1];(g!==0||o>0)&&v.push(M,T,b),(g!==i-1||u<Math.PI)&&v.push(T,P,b)}this.setIndex(v),this.setAttribute("position",new Xe(y,3)),this.setAttribute("normal",new Xe(w,3)),this.setAttribute("uv",new Xe(S,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ld(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class n1 extends Ja{constructor(e=1,n=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,n),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new n1(e.radius,e.detail)}}class i1 extends At{constructor(e=1,n=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],a=[],u=[],h=[],f=new k,d=new k,p=new k;for(let v=0;v<=i;v++)for(let y=0;y<=r;y++){const w=y/r*s,S=v/i*Math.PI*2;d.x=(e+n*Math.cos(S))*Math.cos(w),d.y=(e+n*Math.cos(S))*Math.sin(w),d.z=n*Math.sin(S),a.push(d.x,d.y,d.z),f.x=e*Math.cos(w),f.y=e*Math.sin(w),p.subVectors(d,f).normalize(),u.push(p.x,p.y,p.z),h.push(y/r),h.push(v/i)}for(let v=1;v<=i;v++)for(let y=1;y<=r;y++){const w=(r+1)*v+y-1,S=(r+1)*(v-1)+y-1,g=(r+1)*(v-1)+y,x=(r+1)*v+y;o.push(w,S,x),o.push(S,g,x)}this.setIndex(o),this.setAttribute("position",new Xe(a,3)),this.setAttribute("normal",new Xe(u,3)),this.setAttribute("uv",new Xe(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new i1(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class r1 extends At{constructor(e=1,n=.4,i=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const a=[],u=[],h=[],f=[],d=new k,p=new k,v=new k,y=new k,w=new k,S=new k,g=new k;for(let M=0;M<=i;++M){const T=M/i*s*Math.PI*2;x(T,s,o,e,v),x(T+.01,s,o,e,y),S.subVectors(y,v),g.addVectors(y,v),w.crossVectors(S,g),g.crossVectors(w,S),w.normalize(),g.normalize();for(let P=0;P<=r;++P){const b=P/r*Math.PI*2,L=-n*Math.cos(b),N=n*Math.sin(b);d.x=v.x+(L*g.x+N*w.x),d.y=v.y+(L*g.y+N*w.y),d.z=v.z+(L*g.z+N*w.z),u.push(d.x,d.y,d.z),p.subVectors(d,v).normalize(),h.push(p.x,p.y,p.z),f.push(M/i),f.push(P/r)}}for(let M=1;M<=i;M++)for(let T=1;T<=r;T++){const P=(r+1)*(M-1)+(T-1),b=(r+1)*M+(T-1),L=(r+1)*M+T,N=(r+1)*(M-1)+T;a.push(P,b,N),a.push(b,L,N)}this.setIndex(a),this.setAttribute("position",new Xe(u,3)),this.setAttribute("normal",new Xe(h,3)),this.setAttribute("uv",new Xe(f,2));function x(M,T,P,b,L){const N=Math.cos(M),R=Math.sin(M),C=P/T*M,O=Math.cos(C);L.x=b*(2+O)*.5*N,L.y=b*(2+O)*R*.5,L.z=b*Math.sin(C)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new r1(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class s1 extends At{constructor(e=new WS(new k(-1,-1,0),new k(-1,1,0),new k(1,1,0)),n=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(n,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new k,u=new k,h=new he;let f=new k;const d=[],p=[],v=[],y=[];w(),this.setIndex(y),this.setAttribute("position",new Xe(d,3)),this.setAttribute("normal",new Xe(p,3)),this.setAttribute("uv",new Xe(v,2));function w(){for(let M=0;M<n;M++)S(M);S(s===!1?n:0),x(),g()}function S(M){f=e.getPointAt(M/n,f);const T=o.normals[M],P=o.binormals[M];for(let b=0;b<=r;b++){const L=b/r*Math.PI*2,N=Math.sin(L),R=-Math.cos(L);u.x=R*T.x+N*P.x,u.y=R*T.y+N*P.y,u.z=R*T.z+N*P.z,u.normalize(),p.push(u.x,u.y,u.z),a.x=f.x+i*u.x,a.y=f.y+i*u.y,a.z=f.z+i*u.z,d.push(a.x,a.y,a.z)}}function g(){for(let M=1;M<=n;M++)for(let T=1;T<=r;T++){const P=(r+1)*(M-1)+(T-1),b=(r+1)*M+(T-1),L=(r+1)*M+T,N=(r+1)*(M-1)+T;y.push(P,b,N),y.push(b,L,N)}}function x(){for(let M=0;M<=n;M++)for(let T=0;T<=r;T++)h.x=M/n,h.y=T/r,v.push(h.x,h.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new s1(new s0[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class zP extends At{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const n=[],i=new Set,r=new k,s=new k;if(e.index!==null){const o=e.attributes.position,a=e.index;let u=e.groups;u.length===0&&(u=[{start:0,count:a.count,materialIndex:0}]);for(let h=0,f=u.length;h<f;++h){const d=u[h],p=d.start,v=d.count;for(let y=p,w=p+v;y<w;y+=3)for(let S=0;S<3;S++){const g=a.getX(y+S),x=a.getX(y+(S+1)%3);r.fromBufferAttribute(o,g),s.fromBufferAttribute(o,x),tA(r,s,i)===!0&&(n.push(r.x,r.y,r.z),n.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,u=o.count/3;a<u;a++)for(let h=0;h<3;h++){const f=3*a+h,d=3*a+(h+1)%3;r.fromBufferAttribute(o,f),s.fromBufferAttribute(o,d),tA(r,s,i)===!0&&(n.push(r.x,r.y,r.z),n.push(s.x,s.y,s.z))}}this.setAttribute("position",new Xe(n,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function tA(t,e,n){const i=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return n.has(i)===!0||n.has(r)===!0?!1:(n.add(i),n.add(r),!0)}var nA=Object.freeze({__proto__:null,BoxGeometry:cc,CapsuleGeometry:Y0,CircleGeometry:$0,ConeGeometry:q0,CylinderGeometry:rh,DodecahedronGeometry:Z0,EdgesGeometry:kP,ExtrudeGeometry:J0,IcosahedronGeometry:Q0,LatheGeometry:Rd,OctahedronGeometry:Pd,PlaneGeometry:nh,PolyhedronGeometry:Ja,RingGeometry:e1,ShapeGeometry:t1,SphereGeometry:Ld,TetrahedronGeometry:n1,TorusGeometry:i1,TorusKnotGeometry:r1,TubeGeometry:s1,WireframeGeometry:zP});class BP extends ki{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new ze(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class HP extends Cs{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class jS extends ki{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new ze(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ze(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Za,this.normalScale=new he(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Lr,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class VP extends jS{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new he(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Rn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new ze(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new ze(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new ze(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class GP extends ki{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new ze(16777215),this.specular=new ze(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ze(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Za,this.normalScale=new he(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Lr,this.combine=wd,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class WP extends ki{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new ze(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ze(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Za,this.normalScale=new he(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class XP extends ki{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Za,this.normalScale=new he(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class jP extends ki{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new ze(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ze(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Za,this.normalScale=new he(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Lr,this.combine=wd,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class YP extends ki{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new ze(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Za,this.normalScale=new he(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class $P extends qi{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function zl(t,e,n){return!t||!n&&t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)}function qP(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function ZP(t){function e(r,s){return t[r]-t[s]}const n=t.length,i=new Array(n);for(let r=0;r!==n;++r)i[r]=r;return i.sort(e),i}function Xx(t,e,n){const i=t.length,r=new t.constructor(i);for(let s=0,o=0;o!==i;++s){const a=n[s]*e;for(let u=0;u!==e;++u)r[o++]=t[a+u]}return r}function YS(t,e,n,i){let r=1,s=t[0];for(;s!==void 0&&s[i]===void 0;)s=t[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),n.push.apply(n,o)),s=t[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(n,n.length)),s=t[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),n.push(o)),s=t[r++];while(s!==void 0)}function YB(t,e,n,i,r=30){const s=t.clone();s.name=e;const o=[];for(let u=0;u<s.tracks.length;++u){const h=s.tracks[u],f=h.getValueSize(),d=[],p=[];for(let v=0;v<h.times.length;++v){const y=h.times[v]*r;if(!(y<n||y>=i)){d.push(h.times[v]);for(let w=0;w<f;++w)p.push(h.values[v*f+w])}}d.length!==0&&(h.times=zl(d,h.times.constructor),h.values=zl(p,h.values.constructor),o.push(h))}s.tracks=o;let a=1/0;for(let u=0;u<s.tracks.length;++u)a>s.tracks[u].times[0]&&(a=s.tracks[u].times[0]);for(let u=0;u<s.tracks.length;++u)s.tracks[u].shift(-1*a);return s.resetDuration(),s}function $B(t,e=0,n=t,i=30){i<=0&&(i=30);const r=n.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=n.tracks[o],u=a.ValueTypeName;if(u==="bool"||u==="string")continue;const h=t.tracks.find(function(g){return g.name===a.name&&g.ValueTypeName===u});if(h===void 0)continue;let f=0;const d=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=d/3);let p=0;const v=h.getValueSize();h.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=v/3);const y=a.times.length-1;let w;if(s<=a.times[0]){const g=f,x=d-f;w=a.values.slice(g,x)}else if(s>=a.times[y]){const g=y*d+f,x=g+d-f;w=a.values.slice(g,x)}else{const g=a.createInterpolant(),x=f,M=d-f;g.evaluate(s),w=g.resultBuffer.slice(x,M)}u==="quaternion"&&new Pi().fromArray(w).normalize().conjugate().toArray(w);const S=h.times.length;for(let g=0;g<S;++g){const x=g*v+p;if(u==="quaternion")Pi.multiplyQuaternionsFlat(h.values,x,w,0,h.values,x);else{const M=v-p*2;for(let T=0;T<M;++T)h.values[x+T]-=w[T]}}}return t.blendMode=TS,t}const qB={convertArray:zl,isTypedArray:qP,getKeyframeOrder:ZP,sortedArray:Xx,flattenJSON:YS,subclip:YB,makeClipAdditive:$B};class Id{constructor(e,n,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new n.constructor(i),this.sampleValues=n,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let i=this._cachedIndex,r=n[i],s=n[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=n.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=n[++i],e<r)break t}o=n.length;break n}if(!(e>=s)){const a=n[1];e<a&&(i=2,s=a);for(let u=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===u)break;if(r=s,s=n[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<n[a]?o=a:i=a+1}if(r=n[i],s=n[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=n.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)n[o]=i[s+o];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class KP extends Id{constructor(e,n,i,r){super(e,n,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Ul,endingEnd:Ul}}intervalChanged_(e,n,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],u=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case Ol:s=e,a=2*n-i;break;case ed:s=r.length-2,a=n+r[s]-r[s+1];break;default:s=e,a=i}if(u===void 0)switch(this.getSettings_().endingEnd){case Ol:o=e,u=2*i-n;break;case ed:o=1,u=i+r[1]-r[0];break;default:o=e-1,u=n}const h=(i-n)*.5,f=this.valueSize;this._weightPrev=h/(n-a),this._weightNext=h/(u-i),this._offsetPrev=s*f,this._offsetNext=o*f}interpolate_(e,n,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,u=e*a,h=u-a,f=this._offsetPrev,d=this._offsetNext,p=this._weightPrev,v=this._weightNext,y=(i-n)/(r-n),w=y*y,S=w*y,g=-p*S+2*p*w-p*y,x=(1+p)*S+(-1.5-2*p)*w+(-.5+p)*y+1,M=(-1-v)*S+(1.5+v)*w+.5*y,T=v*S-v*w;for(let P=0;P!==a;++P)s[P]=g*o[f+P]+x*o[h+P]+M*o[u+P]+T*o[d+P];return s}}class $S extends Id{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e,n,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,u=e*a,h=u-a,f=(i-n)/(r-n),d=1-f;for(let p=0;p!==a;++p)s[p]=o[h+p]*d+o[u+p]*f;return s}}class JP extends Id{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ps{constructor(e,n,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=zl(n,this.TimeBufferType),this.values=zl(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let i;if(n.toJSON!==this.toJSON)i=n.toJSON(e);else{i={name:e.name,times:zl(e.times,Array),values:zl(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new JP(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new $S(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new KP(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case Jf:n=this.InterpolantFactoryMethodDiscrete;break;case Qf:n=this.InterpolantFactoryMethodLinear;break;case _g:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Jf;case this.InterpolantFactoryMethodLinear:return Qf;case this.InterpolantFactoryMethodSmooth:return _g}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let i=0,r=n.length;i!==r;++i)n[i]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let i=0,r=n.length;i!==r;++i)n[i]*=e}return this}trim(e,n){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>n;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const u=i[a];if(typeof u=="number"&&isNaN(u)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,u),e=!1;break}if(o!==null&&o>u){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,u,o),e=!1;break}o=u}if(r!==void 0&&qP(r))for(let a=0,u=r.length;a!==u;++a){const h=r[a];if(isNaN(h)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,h),e=!1;break}}return e}optimize(){const e=this.times.slice(),n=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===_g,s=e.length-1;let o=1;for(let a=1;a<s;++a){let u=!1;const h=e[a],f=e[a+1];if(h!==f&&(a!==1||h!==e[0]))if(r)u=!0;else{const d=a*i,p=d-i,v=d+i;for(let y=0;y!==i;++y){const w=n[d+y];if(w!==n[p+y]||w!==n[v+y]){u=!0;break}}}if(u){if(a!==o){e[o]=e[a];const d=a*i,p=o*i;for(let v=0;v!==i;++v)n[p+v]=n[d+v]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,u=o*i,h=0;h!==i;++h)n[u+h]=n[a+h];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=n.slice(0,o*i)):(this.times=e,this.values=n),this}clone(){const e=this.times.slice(),n=this.values.slice(),i=this.constructor,r=new i(this.name,e,n);return r.createInterpolant=this.createInterpolant,r}}Ps.prototype.TimeBufferType=Float32Array;Ps.prototype.ValueBufferType=Float32Array;Ps.prototype.DefaultInterpolation=Qf;class uc extends Ps{}uc.prototype.ValueTypeName="bool";uc.prototype.ValueBufferType=Array;uc.prototype.DefaultInterpolation=Jf;uc.prototype.InterpolantFactoryMethodLinear=void 0;uc.prototype.InterpolantFactoryMethodSmooth=void 0;class qS extends Ps{}qS.prototype.ValueTypeName="color";class hd extends Ps{}hd.prototype.ValueTypeName="number";class QP extends Id{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e,n,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,u=(i-n)/(r-n);let h=e*a;for(let f=h+a;h!==f;h+=4)Pi.slerpFlat(s,0,o,h-a,o,h,u);return s}}class sh extends Ps{InterpolantFactoryMethodLinear(e){return new QP(this.times,this.values,this.getValueSize(),e)}}sh.prototype.ValueTypeName="quaternion";sh.prototype.DefaultInterpolation=Qf;sh.prototype.InterpolantFactoryMethodSmooth=void 0;class hc extends Ps{}hc.prototype.ValueTypeName="string";hc.prototype.ValueBufferType=Array;hc.prototype.DefaultInterpolation=Jf;hc.prototype.InterpolantFactoryMethodLinear=void 0;hc.prototype.InterpolantFactoryMethodSmooth=void 0;class fd extends Ps{}fd.prototype.ValueTypeName="vector";class dd{constructor(e="",n=-1,i=[],r=O0){this.name=e,this.tracks=i,this.duration=n,this.blendMode=r,this.uuid=Rr(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)n.push(KB(i[o]).scale(r));const s=new this(e.name,e.duration,n,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const n=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)n.push(Ps.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,n,i,r){const s=n.length,o=[];for(let a=0;a<s;a++){let u=[],h=[];u.push((a+s-1)%s,a,(a+1)%s),h.push(0,1,0);const f=ZP(u);u=Xx(u,1,f),h=Xx(h,1,f),!r&&u[0]===0&&(u.push(s),h.push(h[0])),o.push(new hd(".morphTargetInfluences["+n[a].name+"]",u,h).scale(1/i))}return new this(e,-1,o)}static findByName(e,n){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===n)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,n,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,u=e.length;a<u;a++){const h=e[a],f=h.name.match(s);if(f&&f.length>1){const d=f[1];let p=r[d];p||(r[d]=p=[]),p.push(h)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],n,i));return o}static parseAnimation(e,n){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(d,p,v,y,w){if(v.length!==0){const S=[],g=[];YS(v,S,g,y),S.length!==0&&w.push(new d(p,S,g))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let u=e.length||-1;const h=e.hierarchy||[];for(let d=0;d<h.length;d++){const p=h[d].keys;if(!(!p||p.length===0))if(p[0].morphTargets){const v={};let y;for(y=0;y<p.length;y++)if(p[y].morphTargets)for(let w=0;w<p[y].morphTargets.length;w++)v[p[y].morphTargets[w]]=-1;for(const w in v){const S=[],g=[];for(let x=0;x!==p[y].morphTargets.length;++x){const M=p[y];S.push(M.time),g.push(M.morphTarget===w?1:0)}r.push(new hd(".morphTargetInfluence["+w+"]",S,g))}u=v.length*o}else{const v=".bones["+n[d].name+"]";i(fd,v+".position",p,"pos",r),i(sh,v+".quaternion",p,"rot",r),i(fd,v+".scale",p,"scl",r)}}return r.length===0?null:new this(s,u,r,a)}resetDuration(){const e=this.tracks;let n=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];n=Math.max(n,s.times[s.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function ZB(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return hd;case"vector":case"vector2":case"vector3":case"vector4":return fd;case"color":return qS;case"quaternion":return sh;case"bool":case"boolean":return uc;case"string":return hc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function KB(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=ZB(t.type);if(t.times===void 0){const n=[],i=[];YS(t.keys,n,i,"value"),t.times=n,t.values=i}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const Do={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class ZS{constructor(e,n,i){const r=this;let s=!1,o=0,a=0,u;const h=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=i,this.itemStart=function(f){a++,s===!1&&r.onStart!==void 0&&r.onStart(f,o,a),s=!0},this.itemEnd=function(f){o++,r.onProgress!==void 0&&r.onProgress(f,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(f){r.onError!==void 0&&r.onError(f)},this.resolveURL=function(f){return u?u(f):f},this.setURLModifier=function(f){return u=f,this},this.addHandler=function(f,d){return h.push(f,d),this},this.removeHandler=function(f){const d=h.indexOf(f);return d!==-1&&h.splice(d,2),this},this.getHandler=function(f){for(let d=0,p=h.length;d<p;d+=2){const v=h[d],y=h[d+1];if(v.global&&(v.lastIndex=0),v.test(f))return y}return null}}}const eL=new ZS;class hr{constructor(e){this.manager=e!==void 0?e:eL,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const i=this;return new Promise(function(r,s){i.load(e,r,n,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}hr.DEFAULT_MATERIAL_NAME="__DEFAULT";const Eo={};class JB extends Error{constructor(e,n){super(e),this.response=n}}class jo extends hr{constructor(e){super(e)}load(e,n,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Do.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(s),this.manager.itemEnd(e)},0),s;if(Eo[e]!==void 0){Eo[e].push({onLoad:n,onProgress:i,onError:r});return}Eo[e]=[],Eo[e].push({onLoad:n,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,u=this.responseType;fetch(o).then(h=>{if(h.status===200||h.status===0){if(h.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||h.body===void 0||h.body.getReader===void 0)return h;const f=Eo[e],d=h.body.getReader(),p=h.headers.get("X-File-Size")||h.headers.get("Content-Length"),v=p?parseInt(p):0,y=v!==0;let w=0;const S=new ReadableStream({start(g){x();function x(){d.read().then(({done:M,value:T})=>{if(M)g.close();else{w+=T.byteLength;const P=new ProgressEvent("progress",{lengthComputable:y,loaded:w,total:v});for(let b=0,L=f.length;b<L;b++){const N=f[b];N.onProgress&&N.onProgress(P)}g.enqueue(T),x()}})}}});return new Response(S)}else throw new JB(`fetch for "${h.url}" responded with ${h.status}: ${h.statusText}`,h)}).then(h=>{switch(u){case"arraybuffer":return h.arrayBuffer();case"blob":return h.blob();case"document":return h.text().then(f=>new DOMParser().parseFromString(f,a));case"json":return h.json();default:if(a===void 0)return h.text();{const d=/charset="?([^;"\s]*)"?/i.exec(a),p=d&&d[1]?d[1].toLowerCase():void 0,v=new TextDecoder(p);return h.arrayBuffer().then(y=>v.decode(y))}}}).then(h=>{Do.add(e,h);const f=Eo[e];delete Eo[e];for(let d=0,p=f.length;d<p;d++){const v=f[d];v.onLoad&&v.onLoad(h)}}).catch(h=>{const f=Eo[e];if(f===void 0)throw this.manager.itemError(e),h;delete Eo[e];for(let d=0,p=f.length;d<p;d++){const v=f[d];v.onError&&v.onError(h)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class QB extends hr{constructor(e){super(e)}load(e,n,i,r){const s=this,o=new jo(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(u){r?r(u):console.error(u),s.manager.itemError(e)}},i,r)}parse(e){const n=[];for(let i=0;i<e.length;i++){const r=dd.parse(e[i]);n.push(r)}return n}}class e9 extends hr{constructor(e){super(e)}load(e,n,i,r){const s=this,o=[],a=new X0,u=new jo(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(s.withCredentials);let h=0;function f(d){u.load(e[d],function(p){const v=s.parse(p,!0);o[d]={width:v.width,height:v.height,format:v.format,mipmaps:v.mipmaps},h+=1,h===6&&(v.mipmapCount===1&&(a.minFilter=qn),a.image=o,a.format=v.format,a.needsUpdate=!0,n&&n(a))},i,r)}if(Array.isArray(e))for(let d=0,p=e.length;d<p;++d)f(d);else u.load(e,function(d){const p=s.parse(d,!0);if(p.isCubemap){const v=p.mipmaps.length/p.mipmapCount;for(let y=0;y<v;y++){o[y]={mipmaps:[]};for(let w=0;w<p.mipmapCount;w++)o[y].mipmaps.push(p.mipmaps[y*p.mipmapCount+w]),o[y].format=p.format,o[y].width=p.width,o[y].height=p.height}a.image=o}else a.image.width=p.width,a.image.height=p.height,a.mipmaps=p.mipmaps;p.mipmapCount===1&&(a.minFilter=qn),a.format=p.format,a.needsUpdate=!0,n&&n(a)},i,r);return a}}class pd extends hr{constructor(e){super(e)}load(e,n,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Do.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o;const a=od("img");function u(){f(),Do.add(e,this),n&&n(this),s.manager.itemEnd(e)}function h(d){f(),r&&r(d),s.manager.itemError(e),s.manager.itemEnd(e)}function f(){a.removeEventListener("load",u,!1),a.removeEventListener("error",h,!1)}return a.addEventListener("load",u,!1),a.addEventListener("error",h,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class t9 extends hr{constructor(e){super(e)}load(e,n,i,r){const s=new Cd;s.colorSpace=Tr;const o=new pd(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function u(h){o.load(e[h],function(f){s.images[h]=f,a++,a===6&&(s.needsUpdate=!0,n&&n(s))},void 0,r)}for(let h=0;h<e.length;++h)u(h);return s}}class n9 extends hr{constructor(e){super(e)}load(e,n,i,r){const s=this,o=new Ua,a=new jo(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(u){let h;try{h=s.parse(u)}catch(f){if(r!==void 0)r(f);else{console.error(f);return}}h.image!==void 0?o.image=h.image:h.data!==void 0&&(o.image.width=h.width,o.image.height=h.height,o.image.data=h.data),o.wrapS=h.wrapS!==void 0?h.wrapS:es,o.wrapT=h.wrapT!==void 0?h.wrapT:es,o.magFilter=h.magFilter!==void 0?h.magFilter:qn,o.minFilter=h.minFilter!==void 0?h.minFilter:qn,o.anisotropy=h.anisotropy!==void 0?h.anisotropy:1,h.colorSpace!==void 0&&(o.colorSpace=h.colorSpace),h.flipY!==void 0&&(o.flipY=h.flipY),h.format!==void 0&&(o.format=h.format),h.type!==void 0&&(o.type=h.type),h.mipmaps!==void 0&&(o.mipmaps=h.mipmaps,o.minFilter=Zs),h.mipmapCount===1&&(o.minFilter=qn),h.generateMipmaps!==void 0&&(o.generateMipmaps=h.generateMipmaps),o.needsUpdate=!0,n&&n(o,h)},i,r),o}}class tL extends hr{constructor(e){super(e)}load(e,n,i,r){const s=new Ln,o=new pd(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,n!==void 0&&n(s)},i,r),s}}class Qa extends Vt{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new ze(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),n}}class nL extends Qa{constructor(e,n,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Vt.DEFAULT_UP),this.updateMatrix(),this.groundColor=new ze(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}}const Xy=new ct,iA=new k,rA=new k;class KS{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new he(512,512),this.map=null,this.mapPass=null,this.matrix=new ct,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new bd,this._frameExtents=new he(1,1),this._viewportCount=1,this._viewports=[new $t(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,i=this.matrix;iA.setFromMatrixPosition(e.matrixWorld),n.position.copy(iA),rA.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(rA),n.updateMatrixWorld(),Xy.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Xy),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(Xy)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class i9 extends KS{constructor(){super(new Fn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const n=this.camera,i=Fu*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||n.far;(i!==n.fov||r!==n.aspect||s!==n.far)&&(n.fov=i,n.aspect=r,n.far=s,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class iL extends Qa{constructor(e,n,i=0,r=Math.PI/3,s=0,o=2){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Vt.DEFAULT_UP),this.updateMatrix(),this.target=new Vt,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new i9}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const sA=new ct,Jh=new k,jy=new k;class r9 extends KS{constructor(){super(new Fn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new he(4,2),this._viewportCount=6,this._viewports=[new $t(2,1,1,1),new $t(0,1,1,1),new $t(3,1,1,1),new $t(1,1,1,1),new $t(3,0,1,1),new $t(1,0,1,1)],this._cubeDirections=[new k(1,0,0),new k(-1,0,0),new k(0,0,1),new k(0,0,-1),new k(0,1,0),new k(0,-1,0)],this._cubeUps=[new k(0,1,0),new k(0,1,0),new k(0,1,0),new k(0,1,0),new k(0,0,1),new k(0,0,-1)]}updateMatrices(e,n=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),Jh.setFromMatrixPosition(e.matrixWorld),i.position.copy(Jh),jy.copy(i.position),jy.add(this._cubeDirections[n]),i.up.copy(this._cubeUps[n]),i.lookAt(jy),i.updateMatrixWorld(),r.makeTranslation(-Jh.x,-Jh.y,-Jh.z),sA.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(sA)}}class rL extends Qa{constructor(e,n,i=0,r=2){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new r9}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class s9 extends KS{constructor(){super(new ka(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class sL extends Qa{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Vt.DEFAULT_UP),this.updateMatrix(),this.target=new Vt,this.shadow=new s9}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class oL extends Qa{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class aL extends Qa{constructor(e,n,i=10,r=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}class lL{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new k)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.282095),n.addScaledVector(o[1],.488603*r),n.addScaledVector(o[2],.488603*s),n.addScaledVector(o[3],.488603*i),n.addScaledVector(o[4],1.092548*(i*r)),n.addScaledVector(o[5],1.092548*(r*s)),n.addScaledVector(o[6],.315392*(3*s*s-1)),n.addScaledVector(o[7],1.092548*(i*s)),n.addScaledVector(o[8],.546274*(i*i-r*r)),n}getIrradianceAt(e,n){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.886227),n.addScaledVector(o[1],2*.511664*r),n.addScaledVector(o[2],2*.511664*s),n.addScaledVector(o[3],2*.511664*i),n.addScaledVector(o[4],2*.429043*i*r),n.addScaledVector(o[5],2*.429043*r*s),n.addScaledVector(o[6],.743125*s*s-.247708),n.addScaledVector(o[7],2*.429043*i*s),n.addScaledVector(o[8],.429043*(i*i-r*r)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,n+r*3);return this}toArray(e=[],n=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,n+r*3);return e}static getBasisAt(e,n){const i=e.x,r=e.y,s=e.z;n[0]=.282095,n[1]=.488603*r,n[2]=.488603*s,n[3]=.488603*i,n[4]=1.092548*i*r,n[5]=1.092548*r*s,n[6]=.315392*(3*s*s-1),n[7]=1.092548*i*s,n[8]=.546274*(i*i-r*r)}}class cL extends Qa{constructor(e=new lL,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}class o1 extends hr{constructor(e){super(e),this.textures={}}load(e,n,i,r){const s=this,o=new jo(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(u){r?r(u):console.error(u),s.manager.itemError(e)}},i,r)}parse(e){const n=this.textures;function i(s){return n[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),n[s]}const r=o1.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new ze().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new ze().setHex(o.value);break;case"v2":r.uniforms[s].value=new he().fromArray(o.value);break;case"v3":r.uniforms[s].value=new k().fromArray(o.value);break;case"v4":r.uniforms[s].value=new $t().fromArray(o.value);break;case"m3":r.uniforms[s].value=new xt().fromArray(o.value);break;case"m4":r.uniforms[s].value=new ct().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new he().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new he().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const n={ShadowMaterial:BP,SpriteMaterial:US,RawShaderMaterial:HP,ShaderMaterial:Cs,PointsMaterial:FS,MeshPhysicalMaterial:VP,MeshStandardMaterial:jS,MeshPhongMaterial:GP,MeshToonMaterial:WP,MeshNormalMaterial:XP,MeshLambertMaterial:jP,MeshDepthMaterial:NS,MeshDistanceMaterial:DS,MeshBasicMaterial:Ka,MeshMatcapMaterial:YP,LineDashedMaterial:$P,LineBasicMaterial:qi,Material:ki};return new n[e]}}class jx{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let n="";for(let i=0,r=e.length;i<r;i++)n+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class uL extends At{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class hL extends hr{constructor(e){super(e)}load(e,n,i,r){const s=this,o=new jo(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(u){r?r(u):console.error(u),s.manager.itemError(e)}},i,r)}parse(e){const n={},i={};function r(v,y){if(n[y]!==void 0)return n[y];const S=v.interleavedBuffers[y],g=s(v,S.buffer),x=gu(S.type,g),M=new G0(x,S.stride);return M.uuid=S.uuid,n[y]=M,M}function s(v,y){if(i[y]!==void 0)return i[y];const S=v.arrayBuffers[y],g=new Uint32Array(S).buffer;return i[y]=g,g}const o=e.isInstancedBufferGeometry?new uL:new At,a=e.data.index;if(a!==void 0){const v=gu(a.type,a.array);o.setIndex(new Xt(v,1))}const u=e.data.attributes;for(const v in u){const y=u[v];let w;if(y.isInterleavedBufferAttribute){const S=r(e.data,y.data);w=new nc(S,y.itemSize,y.offset,y.normalized)}else{const S=gu(y.type,y.array),g=y.isInstancedBufferAttribute?Bu:Xt;w=new g(S,y.itemSize,y.normalized)}y.name!==void 0&&(w.name=y.name),y.usage!==void 0&&w.setUsage(y.usage),o.setAttribute(v,w)}const h=e.data.morphAttributes;if(h)for(const v in h){const y=h[v],w=[];for(let S=0,g=y.length;S<g;S++){const x=y[S];let M;if(x.isInterleavedBufferAttribute){const T=r(e.data,x.data);M=new nc(T,x.itemSize,x.offset,x.normalized)}else{const T=gu(x.type,x.array);M=new Xt(T,x.itemSize,x.normalized)}x.name!==void 0&&(M.name=x.name),w.push(M)}o.morphAttributes[v]=w}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const d=e.data.groups||e.data.drawcalls||e.data.offsets;if(d!==void 0)for(let v=0,y=d.length;v!==y;++v){const w=d[v];o.addGroup(w.start,w.count,w.materialIndex)}const p=e.data.boundingSphere;if(p!==void 0){const v=new k;p.center!==void 0&&v.fromArray(p.center),o.boundingSphere=new Li(v,p.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class o9 extends hr{constructor(e){super(e)}load(e,n,i,r){const s=this,o=this.path===""?jx.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new jo(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(u){let h=null;try{h=JSON.parse(u)}catch(d){r!==void 0&&r(d),console.error("THREE:ObjectLoader: Can't parse "+e+".",d.message);return}const f=h.metadata;if(f===void 0||f.type===void 0||f.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(h,n)},i,r)}async loadAsync(e,n){const i=this,r=this.path===""?jx.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new jo(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,n),a=JSON.parse(o),u=a.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,n){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){n!==void 0&&n(h)}),a=this.parseTextures(e.textures,o),u=this.parseMaterials(e.materials,a),h=this.parseObject(e.object,s,u,a,i),f=this.parseSkeletons(e.skeletons,h);if(this.bindSkeletons(h,f),n!==void 0){let d=!1;for(const p in o)if(o[p].data instanceof HTMLImageElement){d=!0;break}d===!1&&n(h)}return h}async parseAsync(e){const n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),u=this.parseObject(e.object,r,a,o,n),h=this.parseSkeletons(e.skeletons,u);return this.bindSkeletons(u,h),u}parseShapes(e){const n={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new Xl().fromJSON(e[i]);n[s.uuid]=s}return n}parseSkeletons(e,n){const i={},r={};if(n.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new W0().fromJSON(e[s],r);i[a.uuid]=a}return i}parseGeometries(e,n){const i={};if(e!==void 0){const r=new hL;for(let s=0,o=e.length;s<o;s++){let a;const u=e[s];switch(u.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(u);break;default:u.type in nA?a=nA[u.type].fromJSON(u,n):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${u.type}"`)}a.uuid=u.uuid,u.name!==void 0&&(a.name=u.name),u.userData!==void 0&&(a.userData=u.userData),i[u.uuid]=a}}return i}parseMaterials(e,n){const i={},r={};if(e!==void 0){const s=new o1;s.setTextures(n);for(let o=0,a=e.length;o<a;o++){const u=e[o];i[u.uuid]===void 0&&(i[u.uuid]=s.parse(u)),r[u.uuid]=i[u.uuid]}}return r}parseAnimations(e){const n={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=dd.parse(r);n[s.uuid]=s}return n}parseImages(e,n){const i=this,r={};let s;function o(u){return i.manager.itemStart(u),s.load(u,function(){i.manager.itemEnd(u)},void 0,function(){i.manager.itemError(u),i.manager.itemEnd(u)})}function a(u){if(typeof u=="string"){const h=u,f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h)?h:i.resourcePath+h;return o(f)}else return u.data?{data:gu(u.type,u.data),width:u.width,height:u.height}:null}if(e!==void 0&&e.length>0){const u=new ZS(n);s=new pd(u),s.setCrossOrigin(this.crossOrigin);for(let h=0,f=e.length;h<f;h++){const d=e[h],p=d.url;if(Array.isArray(p)){const v=[];for(let y=0,w=p.length;y<w;y++){const S=p[y],g=a(S);g!==null&&(g instanceof HTMLImageElement?v.push(g):v.push(new Ua(g.data,g.width,g.height)))}r[d.uuid]=new Fl(v)}else{const v=a(d.url);r[d.uuid]=new Fl(v)}}}return r}async parseImagesAsync(e){const n=this,i={};let r;async function s(o){if(typeof o=="string"){const a=o,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:n.resourcePath+a;return await r.loadAsync(u)}else return o.data?{data:gu(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new pd(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const u=e[o],h=u.url;if(Array.isArray(h)){const f=[];for(let d=0,p=h.length;d<p;d++){const v=h[d],y=await s(v);y!==null&&(y instanceof HTMLImageElement?f.push(y):f.push(new Ua(y.data,y.width,y.height)))}i[u.uuid]=new Fl(f)}else{const f=await s(u.url);i[u.uuid]=new Fl(f)}}}return i}parseTextures(e,n){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),n[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const u=n[a.image],h=u.data;let f;Array.isArray(h)?(f=new Cd,h.length===6&&(f.needsUpdate=!0)):(h&&h.data?f=new Ua:f=new Ln,h&&(f.needsUpdate=!0)),f.source=u,f.uuid=a.uuid,a.name!==void 0&&(f.name=a.name),a.mapping!==void 0&&(f.mapping=i(a.mapping,a9)),a.channel!==void 0&&(f.channel=a.channel),a.offset!==void 0&&f.offset.fromArray(a.offset),a.repeat!==void 0&&f.repeat.fromArray(a.repeat),a.center!==void 0&&f.center.fromArray(a.center),a.rotation!==void 0&&(f.rotation=a.rotation),a.wrap!==void 0&&(f.wrapS=i(a.wrap[0],oA),f.wrapT=i(a.wrap[1],oA)),a.format!==void 0&&(f.format=a.format),a.internalFormat!==void 0&&(f.internalFormat=a.internalFormat),a.type!==void 0&&(f.type=a.type),a.colorSpace!==void 0&&(f.colorSpace=a.colorSpace),a.minFilter!==void 0&&(f.minFilter=i(a.minFilter,aA)),a.magFilter!==void 0&&(f.magFilter=i(a.magFilter,aA)),a.anisotropy!==void 0&&(f.anisotropy=a.anisotropy),a.flipY!==void 0&&(f.flipY=a.flipY),a.generateMipmaps!==void 0&&(f.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(f.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(f.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(f.compareFunction=a.compareFunction),a.userData!==void 0&&(f.userData=a.userData),r[a.uuid]=f}return r}parseObject(e,n,i,r,s){let o;function a(p){return n[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",p),n[p]}function u(p){if(p!==void 0){if(Array.isArray(p)){const v=[];for(let y=0,w=p.length;y<w;y++){const S=p[y];i[S]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",S),v.push(i[S])}return v}return i[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),i[p]}}function h(p){return r[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",p),r[p]}let f,d;switch(e.type){case"Scene":o=new kS,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new ze(e.background):o.background=h(e.background)),e.environment!==void 0&&(o.environment=h(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new V0(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new H0(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new Fn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new ka(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new oL(e.color,e.intensity);break;case"DirectionalLight":o=new sL(e.color,e.intensity);break;case"PointLight":o=new rL(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new aL(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new iL(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new nL(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new cL().fromJSON(e);break;case"SkinnedMesh":f=a(e.geometry),d=u(e.material),o=new TP(f,d),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":f=a(e.geometry),d=u(e.material),o=new Zn(f,d);break;case"InstancedMesh":f=a(e.geometry),d=u(e.material);const p=e.count,v=e.instanceMatrix,y=e.instanceColor;o=new AP(f,d,p),o.instanceMatrix=new Bu(new Float32Array(v.array),16),y!==void 0&&(o.instanceColor=new Bu(new Float32Array(y.array),y.itemSize));break;case"BatchedMesh":f=a(e.geometry),d=u(e.material),o=new CP(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,d),o.geometry=f,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(w=>{const S=new ji;S.min.fromArray(w.boxMin),S.max.fromArray(w.boxMax);const g=new Li;return g.radius=w.sphereRadius,g.center.fromArray(w.sphereCenter),{boxInitialized:w.boxInitialized,box:S,sphereInitialized:w.sphereInitialized,sphere:g}}),o._maxGeometryCount=e.maxGeometryCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=h(e.matricesTexture.uuid);break;case"LOD":o=new EP;break;case"Line":o=new Ha(a(e.geometry),u(e.material));break;case"LineLoop":o=new bP(a(e.geometry),u(e.material));break;case"LineSegments":o=new ao(a(e.geometry),u(e.material));break;case"PointCloud":case"Points":o=new RP(a(e.geometry),u(e.material));break;case"Sprite":o=new wP(u(e.material));break;case"Group":o=new yu;break;case"Bone":o=new OS;break;default:o=new Vt}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const p=e.children;for(let v=0;v<p.length;v++)o.add(this.parseObject(p[v],n,i,r,s))}if(e.animations!==void 0){const p=e.animations;for(let v=0;v<p.length;v++){const y=p[v];o.animations.push(s[y])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const p=e.levels;for(let v=0;v<p.length;v++){const y=p[v],w=o.getObjectByProperty("uuid",y.object);w!==void 0&&o.addLevel(w,y.distance,y.hysteresis)}}return o}bindSkeletons(e,n){Object.keys(n).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=n[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}}const a9={UVMapping:U0,CubeReflectionMapping:Xo,CubeRefractionMapping:Ba,EquirectangularReflectionMapping:$f,EquirectangularRefractionMapping:qf,CubeUVReflectionMapping:eh},oA={RepeatWrapping:Zf,ClampToEdgeWrapping:es,MirroredRepeatWrapping:Kf},aA={NearestFilter:fi,NearestMipmapNearestFilter:gS,NearestMipmapLinearFilter:mu,LinearFilter:qn,LinearMipmapNearestFilter:Sf,LinearMipmapLinearFilter:Zs};class l9 extends hr{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,n,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Do.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(h=>{n&&n(h),s.manager.itemEnd(e)}).catch(h=>{r&&r(h)});return}return setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const u=fetch(e,a).then(function(h){return h.blob()}).then(function(h){return createImageBitmap(h,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(h){return Do.add(e,h),n&&n(h),s.manager.itemEnd(e),h}).catch(function(h){r&&r(h),Do.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});Do.add(e,u),s.manager.itemStart(e)}}let Bm;class JS{static getContext(){return Bm===void 0&&(Bm=new(window.AudioContext||window.webkitAudioContext)),Bm}static setContext(e){Bm=e}}class c9 extends hr{constructor(e){super(e)}load(e,n,i,r){const s=this,o=new jo(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(u){try{const h=u.slice(0);JS.getContext().decodeAudioData(h,function(d){n(d)}).catch(a)}catch(h){a(h)}},i,r);function a(u){r?r(u):console.error(u),s.manager.itemError(e)}}}const lA=new ct,cA=new ct,_l=new ct;class u9{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Fn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Fn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep,_l.copy(e.projectionMatrix);const r=n.eyeSep/2,s=r*n.near/n.focus,o=n.near*Math.tan(Gl*n.fov*.5)/n.zoom;let a,u;cA.elements[12]=-r,lA.elements[12]=r,a=-o*n.aspect+s,u=o*n.aspect+s,_l.elements[0]=2*n.near/(u-a),_l.elements[8]=(u+a)/(u-a),this.cameraL.projectionMatrix.copy(_l),a=-o*n.aspect-s,u=o*n.aspect-s,_l.elements[0]=2*n.near/(u-a),_l.elements[8]=(u+a)/(u-a),this.cameraR.projectionMatrix.copy(_l)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(cA),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(lA)}}class QS{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=uA(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=uA();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}function uA(){return(typeof performance>"u"?Date:performance).now()}const xl=new k,hA=new Pi,h9=new k,Sl=new k;class f9 extends Vt{constructor(){super(),this.type="AudioListener",this.context=JS.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new QS}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const n=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(xl,hA,h9),Sl.set(0,0,-1).applyQuaternion(hA),n.positionX){const r=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(xl.x,r),n.positionY.linearRampToValueAtTime(xl.y,r),n.positionZ.linearRampToValueAtTime(xl.z,r),n.forwardX.linearRampToValueAtTime(Sl.x,r),n.forwardY.linearRampToValueAtTime(Sl.y,r),n.forwardZ.linearRampToValueAtTime(Sl.z,r),n.upX.linearRampToValueAtTime(i.x,r),n.upY.linearRampToValueAtTime(i.y,r),n.upZ.linearRampToValueAtTime(i.z,r)}else n.setPosition(xl.x,xl.y,xl.z),n.setOrientation(Sl.x,Sl.y,Sl.z,i.x,i.y,i.z)}}class fL extends Vt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Ml=new k,fA=new Pi,d9=new k,wl=new k;class p9 extends fL{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Ml,fA,d9),wl.set(0,0,1).applyQuaternion(fA);const n=this.panner;if(n.positionX){const i=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(Ml.x,i),n.positionY.linearRampToValueAtTime(Ml.y,i),n.positionZ.linearRampToValueAtTime(Ml.z,i),n.orientationX.linearRampToValueAtTime(wl.x,i),n.orientationY.linearRampToValueAtTime(wl.y,i),n.orientationZ.linearRampToValueAtTime(wl.z,i)}else n.setPosition(Ml.x,Ml.y,Ml.z),n.setOrientation(wl.x,wl.y,wl.z)}}class m9{constructor(e,n=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const n=this.getFrequencyData();for(let i=0;i<n.length;i++)e+=n[i];return e/n.length}}class dL{constructor(e,n,i){this.binding=e,this.valueSize=i;let r,s,o;switch(n){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)i[s+a]=i[a];o=n}else{o+=n;const a=n/o;this._mixBufferRegion(i,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const n=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,i=this.buffer,r=e*n+n,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const u=n*this._origIndex;this._mixBufferRegion(i,r,u,1-s,n)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*n,1,n);for(let u=n,h=n+n;u!==h;++u)if(i[u]!==i[u+n]){a.setValue(i,r);break}}saveOriginalState(){const e=this.binding,n=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(n,r);for(let s=i,o=r;s!==o;++s)n[s]=n[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let i=e;i<n;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[n+i]=this.buffer[e+i]}_select(e,n,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[n+o]=e[i+o]}_slerp(e,n,i,r){Pi.slerpFlat(e,n,e,n,e,i,r)}_slerpAdditive(e,n,i,r,s){const o=this._workIndex*s;Pi.multiplyQuaternionsFlat(e,o,e,n,e,i),Pi.slerpFlat(e,n,e,n,e,o,r)}_lerp(e,n,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const u=n+a;e[u]=e[u]*o+e[i+a]*r}}_lerpAdditive(e,n,i,r,s){for(let o=0;o!==s;++o){const a=n+o;e[a]=e[a]+e[i+o]*r}}}const e3="\\[\\]\\.:\\/",g9=new RegExp("["+e3+"]","g"),t3="[^"+e3+"]",v9="[^"+e3.replace("\\.","")+"]",y9=/((?:WC+[\/:])*)/.source.replace("WC",t3),_9=/(WCOD+)?/.source.replace("WCOD",v9),x9=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",t3),S9=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",t3),M9=new RegExp("^"+y9+_9+x9+S9+"$"),w9=["material","materials","bones","map"];class E9{constructor(e,n,i){const r=i||kt.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,r)}getValue(e,n){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,n)}setValue(e,n){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=e.length;n!==i;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=e.length;n!==i;++n)e[n].unbind()}}class kt{constructor(e,n,i){this.path=n,this.parsedPath=i||kt.parseTrackName(n),this.node=kt.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,i){return e&&e.isAnimationObjectGroup?new kt.Composite(e,n,i):new kt(e,n,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(g9,"")}static parseTrackName(e){const n=M9.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);w9.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(n);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===n||a.uuid===n)return a;const u=i(a.children);if(u)return u}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[n++]=i[r]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,i=n.objectName,r=n.propertyName;let s=n.propertyIndex;if(e||(e=kt.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let h=n.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let f=0;f<e.length;f++)if(e[f].name===h){h=f;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(h!==void 0){if(e[h]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[h]}}const o=e[r];if(o===void 0){const h=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+h+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let u=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}u=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(u=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(u=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}kt.Composite=E9;kt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};kt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};kt.prototype.GetterByBindingType=[kt.prototype._getValue_direct,kt.prototype._getValue_array,kt.prototype._getValue_arrayElement,kt.prototype._getValue_toArray];kt.prototype.SetterByBindingTypeAndVersioning=[[kt.prototype._setValue_direct,kt.prototype._setValue_direct_setNeedsUpdate,kt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[kt.prototype._setValue_array,kt.prototype._setValue_array_setNeedsUpdate,kt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[kt.prototype._setValue_arrayElement,kt.prototype._setValue_arrayElement_setNeedsUpdate,kt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[kt.prototype._setValue_fromArray,kt.prototype._setValue_fromArray_setNeedsUpdate,kt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class T9{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Rr(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const e=this._objects,n=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,u=e.length,h=this.nCachedObjects_;for(let f=0,d=arguments.length;f!==d;++f){const p=arguments[f],v=p.uuid;let y=n[v];if(y===void 0){y=u++,n[v]=y,e.push(p);for(let w=0,S=o;w!==S;++w)s[w].push(new kt(p,i[w],r[w]))}else if(y<h){a=e[y];const w=--h,S=e[w];n[S.uuid]=y,e[y]=S,n[v]=w,e[w]=p;for(let g=0,x=o;g!==x;++g){const M=s[g],T=M[w];let P=M[y];M[y]=T,P===void 0&&(P=new kt(p,i[g],r[g])),M[w]=P}}else e[y]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=h}remove(){const e=this._objects,n=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const u=arguments[o],h=u.uuid,f=n[h];if(f!==void 0&&f>=s){const d=s++,p=e[d];n[p.uuid]=f,e[f]=p,n[h]=d,e[d]=u;for(let v=0,y=r;v!==y;++v){const w=i[v],S=w[d],g=w[f];w[f]=S,w[d]=g}}}this.nCachedObjects_=s}uncache(){const e=this._objects,n=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,u=arguments.length;a!==u;++a){const h=arguments[a],f=h.uuid,d=n[f];if(d!==void 0)if(delete n[f],d<s){const p=--s,v=e[p],y=--o,w=e[y];n[v.uuid]=d,e[d]=v,n[w.uuid]=p,e[p]=w,e.pop();for(let S=0,g=r;S!==g;++S){const x=i[S],M=x[p],T=x[y];x[d]=M,x[p]=T,x.pop()}}else{const p=--o,v=e[p];p>0&&(n[v.uuid]=d),e[d]=v,e.pop();for(let y=0,w=r;y!==w;++y){const S=i[y];S[d]=S[p],S.pop()}}}this.nCachedObjects_=s}subscribe_(e,n){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,u=this._objects,h=u.length,f=this.nCachedObjects_,d=new Array(h);r=s.length,i[e]=r,o.push(e),a.push(n),s.push(d);for(let p=f,v=u.length;p!==v;++p){const y=u[p];d[p]=new kt(y,e,n)}return d}unsubscribe_(e){const n=this._bindingsIndicesByPath,i=n[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,u=o[a],h=e[a];n[h]=i,o[i]=u,o.pop(),s[i]=s[a],s.pop(),r[i]=r[a],r.pop()}}}class pL{constructor(e,n,i=null,r=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=i,this.blendMode=r;const s=n.tracks,o=s.length,a=new Array(o),u={endingStart:Ul,endingEnd:Ul};for(let h=0;h!==o;++h){const f=s[h].createInterpolant(null);a[h]=f,f.settings=u}this._interpolantSettings=u,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=XR,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,i){if(e.fadeOut(n),this.fadeIn(n),i){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,n),this.warp(a,1,n)}return this}crossFadeTo(e,n,i){return e.crossFadeFrom(this,n,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const u=a.parameterPositions,h=a.sampleValues;return u[0]=s,u[1]=s+i,h[0]=e/o,h[1]=n/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const u=(e-s)*i;u<0||i===0?n=0:(this._startTime=null,n=i*u)}n*=this._updateTimeScale(e);const o=this._updateTime(n),a=this._updateWeight(e);if(a>0){const u=this._interpolants,h=this._propertyBindings;switch(this.blendMode){case TS:for(let f=0,d=u.length;f!==d;++f)u[f].evaluate(o),h[f].accumulateAdditive(a);break;case O0:default:for(let f=0,d=u.length;f!==d;++f)u[f].evaluate(o),h[f].accumulate(r,a)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];n*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];n*=r,e>i.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===jR;if(e===0)return s===-1?r:o&&(s&1)===1?n-r:r;if(i===WR){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=n)r=n;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=n||r<0){const a=Math.floor(r/n);r-=n*a,s+=Math.abs(a);const u=this.repetitions-s;if(u<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?n:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(u===1){const h=e<0;this._setEndings(h,!h,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return n-r}return r}_setEndings(e,n,i){const r=this._interpolantSettings;i?(r.endingStart=Ol,r.endingEnd=Ol):(e?r.endingStart=this.zeroSlopeAtStart?Ol:Ul:r.endingStart=ed,n?r.endingEnd=this.zeroSlopeAtEnd?Ol:Ul:r.endingEnd=ed)}_scheduleFading(e,n,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,u=o.sampleValues;return a[0]=s,u[0]=n,a[1]=s+e,u[1]=i,this}}const A9=new Float32Array(1);class C9 extends Zo{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,u=i.uuid,h=this._bindingsByRootAndName;let f=h[u];f===void 0&&(f={},h[u]=f);for(let d=0;d!==s;++d){const p=r[d],v=p.name;let y=f[v];if(y!==void 0)++y.referenceCount,o[d]=y;else{if(y=o[d],y!==void 0){y._cacheIndex===null&&(++y.referenceCount,this._addInactiveBinding(y,u,v));continue}const w=n&&n._propertyBindings[d].binding.parsedPath;y=new dL(kt.create(i,v,w),p.ValueTypeName,p.getValueSize()),++y.referenceCount,this._addInactiveBinding(y,u,v),o[d]=y}a[d].resultBuffer=y.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){const s=n[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){const s=n[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,i){const r=this._actions,s=this._actionsByClip;let o=s[n];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[n]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const n=this._actions,i=n[n.length-1],r=e._cacheIndex;i._cacheIndex=r,n[r]=i,n.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],u=a.knownActions,h=u[u.length-1],f=e._byClipCacheIndex;h._byClipCacheIndex=f,u[f]=h,u.pop(),e._byClipCacheIndex=null;const d=a.actionByRoot,p=(e._localRoot||this._root).uuid;delete d[p],u.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){const s=n[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const n=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=n[r];e._cacheIndex=r,n[r]=e,s._cacheIndex=i,n[i]=s}_takeBackAction(e){const n=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=n[r];e._cacheIndex=r,n[r]=e,s._cacheIndex=i,n[i]=s}_addInactiveBinding(e,n,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[n];o===void 0&&(o={},r[n]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const n=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],u=n[n.length-1],h=e._cacheIndex;u._cacheIndex=h,n[h]=u,n.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const n=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=n[r];e._cacheIndex=r,n[r]=e,s._cacheIndex=i,n[i]=s}_takeBackBinding(e){const n=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=n[r];e._cacheIndex=r,n[r]=e,s._cacheIndex=i,n[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let i=e[n];return i===void 0&&(i=new $S(new Float32Array(2),new Float32Array(2),1,A9),i.__cacheIndex=n,e[n]=i),i}_takeBackControlInterpolant(e){const n=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=n[r];e.__cacheIndex=r,n[r]=e,s.__cacheIndex=i,n[i]=s}clipAction(e,n,i){const r=n||this._root,s=r.uuid;let o=typeof e=="string"?dd.findByName(r,e):e;const a=o!==null?o.uuid:e,u=this._actionsByClip[a];let h=null;if(i===void 0&&(o!==null?i=o.blendMode:i=O0),u!==void 0){const d=u.actionByRoot[s];if(d!==void 0&&d.blendMode===i)return d;h=u.knownActions[0],o===null&&(o=h._clip)}if(o===null)return null;const f=new pL(this,o,n,i);return this._bindAction(f,h),this._addInactiveAction(f,a,s),f}existingAction(e,n){const i=n||this._root,r=i.uuid,s=typeof e=="string"?dd.findByName(i,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let i=n-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const n=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let h=0;h!==i;++h)n[h]._update(r,e,s,o);const a=this._bindings,u=this._nActiveBindings;for(let h=0;h!==u;++h)a[h].apply(o);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let a=0,u=o.length;a!==u;++a){const h=o[a];this._deactivateAction(h);const f=h._cacheIndex,d=n[n.length-1];h._cacheIndex=null,h._byClipCacheIndex=null,d._cacheIndex=f,n[f]=d,n.pop(),this._removeInactiveBindingsForAction(h)}delete r[i]}}uncacheRoot(e){const n=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,u=a[n];u!==void 0&&(this._deactivateAction(u),this._removeInactiveAction(u))}const r=this._bindingsByRootAndName,s=r[n];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,n){const i=this.existingAction(e,n);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class n3{constructor(e){this.value=e}clone(){return new n3(this.value.clone===void 0?this.value:this.value.clone())}}let b9=0;class R9 extends Zo{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:b9++}),this.name="",this.usage=rd,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const n=e.uniforms;this.uniforms.length=0;for(let i=0,r=n.length;i<r;i++){const s=Array.isArray(n[i])?n[i]:[n[i]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class P9 extends G0{constructor(e,n,i=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class L9{constructor(e,n,i,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=n,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,n){return this.type=e,this.elementSize=n,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const dA=new ct;class mL{constructor(e,n,i=0,r=1/0){this.ray=new lc(e,n),this.near=i,this.far=r,this.camera=null,this.layers=new Wl,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}setFromXRController(e){return dA.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(dA),this}intersectObject(e,n=!0,i=[]){return Yx(e,this,i,n),i.sort(pA),i}intersectObjects(e,n=!0,i=[]){for(let r=0,s=e.length;r<s;r++)Yx(e[r],this,i,n);return i.sort(pA),i}}function pA(t,e){return t.distance-e.distance}function Yx(t,e,n,i){if(t.layers.test(e.layers)&&t.raycast(e,n),i===!0){const r=t.children;for(let s=0,o=r.length;s<o;s++)Yx(r[s],e,n,!0)}}class $x{constructor(e=1,n=0,i=0){return this.radius=e,this.phi=n,this.theta=i,this}set(e,n,i){return this.radius=e,this.phi=n,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,i){return this.radius=Math.sqrt(e*e+n*n+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Rn(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class I9{constructor(e=1,n=0,i=0){return this.radius=e,this.theta=n,this.y=i,this}set(e,n,i){return this.radius=e,this.theta=n,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=n,this}clone(){return new this.constructor().copy(this)}}const mA=new he;class N9{constructor(e=new he(1/0,1/0),n=new he(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const i=mA.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,mA).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const gA=new k,Hm=new k;class D9{constructor(e=new k,n=new k){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){gA.subVectors(e,this.start),Hm.subVectors(this.end,this.start);const i=Hm.dot(Hm);let s=Hm.dot(gA)/i;return n&&(s=Rn(s,0,1)),s}closestPointToPoint(e,n,i){const r=this.closestPointToPointParameter(e,n);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const vA=new k;class k9 extends Vt{constructor(e,n){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=n,this.type="SpotLightHelper";const i=new At,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,u=32;o<u;o++,a++){const h=o/u*Math.PI*2,f=a/u*Math.PI*2;r.push(Math.cos(h),Math.sin(h),1,Math.cos(f),Math.sin(f),1)}i.setAttribute("position",new Xe(r,3));const s=new qi({fog:!1,toneMapped:!1});this.cone=new ao(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),vA.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(vA),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const ma=new k,Vm=new ct,Yy=new ct;class U9 extends ao{constructor(e){const n=gL(e),i=new At,r=[],s=[],o=new ze(0,0,1),a=new ze(0,1,0);for(let h=0;h<n.length;h++){const f=n[h];f.parent&&f.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new Xe(r,3)),i.setAttribute("color",new Xe(s,3));const u=new qi({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,u),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const n=this.bones,i=this.geometry,r=i.getAttribute("position");Yy.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<n.length;s++){const a=n[s];a.parent&&a.parent.isBone&&(Vm.multiplyMatrices(Yy,a.matrixWorld),ma.setFromMatrixPosition(Vm),r.setXYZ(o,ma.x,ma.y,ma.z),Vm.multiplyMatrices(Yy,a.parent.matrixWorld),ma.setFromMatrixPosition(Vm),r.setXYZ(o+1,ma.x,ma.y,ma.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function gL(t){const e=[];t.isBone===!0&&e.push(t);for(let n=0;n<t.children.length;n++)e.push.apply(e,gL(t.children[n]));return e}class O9 extends Zn{constructor(e,n,i){const r=new Ld(n,4,2),s=new Ka({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const F9=new k,yA=new ze,_A=new ze;class z9 extends Vt{constructor(e,n,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new Pd(n);r.rotateY(Math.PI*.5),this.material=new Ka({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new Xt(o,3)),this.add(new Zn(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=e.geometry.getAttribute("color");yA.copy(this.light.color),_A.copy(this.light.groundColor);for(let i=0,r=n.count;i<r;i++){const s=i<r/2?yA:_A;n.setXYZ(i,s.r,s.g,s.b)}n.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(F9.setFromMatrixPosition(this.light.matrixWorld).negate())}}class B9 extends ao{constructor(e=10,n=10,i=4473924,r=8947848){i=new ze(i),r=new ze(r);const s=n/2,o=e/n,a=e/2,u=[],h=[];for(let p=0,v=0,y=-a;p<=n;p++,y+=o){u.push(-a,0,y,a,0,y),u.push(y,0,-a,y,0,a);const w=p===s?i:r;w.toArray(h,v),v+=3,w.toArray(h,v),v+=3,w.toArray(h,v),v+=3,w.toArray(h,v),v+=3}const f=new At;f.setAttribute("position",new Xe(u,3)),f.setAttribute("color",new Xe(h,3));const d=new qi({vertexColors:!0,toneMapped:!1});super(f,d),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class H9 extends ao{constructor(e=10,n=16,i=8,r=64,s=4473924,o=8947848){s=new ze(s),o=new ze(o);const a=[],u=[];if(n>1)for(let d=0;d<n;d++){const p=d/n*(Math.PI*2),v=Math.sin(p)*e,y=Math.cos(p)*e;a.push(0,0,0),a.push(v,0,y);const w=d&1?s:o;u.push(w.r,w.g,w.b),u.push(w.r,w.g,w.b)}for(let d=0;d<i;d++){const p=d&1?s:o,v=e-e/i*d;for(let y=0;y<r;y++){let w=y/r*(Math.PI*2),S=Math.sin(w)*v,g=Math.cos(w)*v;a.push(S,0,g),u.push(p.r,p.g,p.b),w=(y+1)/r*(Math.PI*2),S=Math.sin(w)*v,g=Math.cos(w)*v,a.push(S,0,g),u.push(p.r,p.g,p.b)}}const h=new At;h.setAttribute("position",new Xe(a,3)),h.setAttribute("color",new Xe(u,3));const f=new qi({vertexColors:!0,toneMapped:!1});super(h,f),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const xA=new k,Gm=new k,SA=new k;class V9 extends Vt{constructor(e,n,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",n===void 0&&(n=1);let r=new At;r.setAttribute("position",new Xe([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const s=new qi({fog:!1,toneMapped:!1});this.lightPlane=new Ha(r,s),this.add(this.lightPlane),r=new At,r.setAttribute("position",new Xe([0,0,0,0,0,1],3)),this.targetLine=new Ha(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),xA.setFromMatrixPosition(this.light.matrixWorld),Gm.setFromMatrixPosition(this.light.target.matrixWorld),SA.subVectors(Gm,xA),this.lightPlane.lookAt(Gm),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Gm),this.targetLine.scale.z=SA.length()}}const Wm=new k,An=new Ad;class G9 extends ao{constructor(e){const n=new At,i=new qi({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(y,w){u(y),u(w)}function u(y){r.push(0,0,0),s.push(0,0,0),o[y]===void 0&&(o[y]=[]),o[y].push(r.length/3-1)}n.setAttribute("position",new Xe(r,3)),n.setAttribute("color",new Xe(s,3)),super(n,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const h=new ze(16755200),f=new ze(16711680),d=new ze(43775),p=new ze(16777215),v=new ze(3355443);this.setColors(h,f,d,p,v)}setColors(e,n,i,r,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,n.r,n.g,n.b),a.setXYZ(25,n.r,n.g,n.b),a.setXYZ(26,n.r,n.g,n.b),a.setXYZ(27,n.r,n.g,n.b),a.setXYZ(28,n.r,n.g,n.b),a.setXYZ(29,n.r,n.g,n.b),a.setXYZ(30,n.r,n.g,n.b),a.setXYZ(31,n.r,n.g,n.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,n=this.pointMap,i=1,r=1;An.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),kn("c",n,e,An,0,0,-1),kn("t",n,e,An,0,0,1),kn("n1",n,e,An,-i,-r,-1),kn("n2",n,e,An,i,-r,-1),kn("n3",n,e,An,-i,r,-1),kn("n4",n,e,An,i,r,-1),kn("f1",n,e,An,-i,-r,1),kn("f2",n,e,An,i,-r,1),kn("f3",n,e,An,-i,r,1),kn("f4",n,e,An,i,r,1),kn("u1",n,e,An,i*.7,r*1.1,-1),kn("u2",n,e,An,-i*.7,r*1.1,-1),kn("u3",n,e,An,0,r*2,-1),kn("cf1",n,e,An,-i,0,1),kn("cf2",n,e,An,i,0,1),kn("cf3",n,e,An,0,-r,1),kn("cf4",n,e,An,0,r,1),kn("cn1",n,e,An,-i,0,-1),kn("cn2",n,e,An,i,0,-1),kn("cn3",n,e,An,0,-r,-1),kn("cn4",n,e,An,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function kn(t,e,n,i,r,s,o){Wm.set(r,s,o).unproject(i);const a=e[t];if(a!==void 0){const u=n.getAttribute("position");for(let h=0,f=a.length;h<f;h++)u.setXYZ(a[h],Wm.x,Wm.y,Wm.z)}}const Xm=new ji;class W9 extends ao{constructor(e,n=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new At;s.setIndex(new Xt(i,1)),s.setAttribute("position",new Xt(r,3)),super(s,new qi({color:n,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Xm.setFromObject(this.object),Xm.isEmpty())return;const n=Xm.min,i=Xm.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=n.x,s[4]=i.y,s[5]=i.z,s[6]=n.x,s[7]=n.y,s[8]=i.z,s[9]=i.x,s[10]=n.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=n.z,s[15]=n.x,s[16]=i.y,s[17]=n.z,s[18]=n.x,s[19]=n.y,s[20]=n.z,s[21]=i.x,s[22]=n.y,s[23]=n.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,n){return super.copy(e,n),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class X9 extends ao{constructor(e,n=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new At;s.setIndex(new Xt(i,1)),s.setAttribute("position",new Xe(r,3)),super(s,new qi({color:n,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class j9 extends Ha{constructor(e,n=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new At;o.setAttribute("position",new Xe(s,3)),o.computeBoundingSphere(),super(o,new qi({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=n;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],u=new At;u.setAttribute("position",new Xe(a,3)),u.computeBoundingSphere(),this.add(new Zn(u,new Ka({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const MA=new k;let jm,$y;class Y9 extends Vt{constructor(e=new k(0,0,1),n=new k(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",jm===void 0&&(jm=new At,jm.setAttribute("position",new Xe([0,0,0,0,1,0],3)),$y=new rh(0,.5,1,5,1),$y.translate(0,-.5,0)),this.position.copy(n),this.line=new Ha(jm,new qi({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Zn($y,new Ka({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{MA.set(e.z,0,-e.x).normalize();const n=Math.acos(e.y);this.quaternion.setFromAxisAngle(MA,n)}}setLength(e,n=e*.2,i=n*.2){this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(i,n,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class $9 extends ao{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new At;r.setAttribute("position",new Xe(n,3)),r.setAttribute("color",new Xe(i,3));const s=new qi({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,n,i){const r=new ze,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(n),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class q9{constructor(){this.type="ShapePath",this.color=new ze,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new ad,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,i,r){return this.currentPath.quadraticCurveTo(e,n,i,r),this}bezierCurveTo(e,n,i,r,s,o){return this.currentPath.bezierCurveTo(e,n,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(g){const x=[];for(let M=0,T=g.length;M<T;M++){const P=g[M],b=new Xl;b.curves=P.curves,x.push(b)}return x}function i(g,x){const M=x.length;let T=!1;for(let P=M-1,b=0;b<M;P=b++){let L=x[P],N=x[b],R=N.x-L.x,C=N.y-L.y;if(Math.abs(C)>Number.EPSILON){if(C<0&&(L=x[b],R=-R,N=x[P],C=-C),g.y<L.y||g.y>N.y)continue;if(g.y===L.y){if(g.x===L.x)return!0}else{const O=C*(g.x-L.x)-R*(g.y-L.y);if(O===0)return!0;if(O<0)continue;T=!T}}else{if(g.y!==L.y)continue;if(N.x<=g.x&&g.x<=L.x||L.x<=g.x&&g.x<=N.x)return!0}}return T}const r=to.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,u;const h=[];if(s.length===1)return a=s[0],u=new Xl,u.curves=a.curves,h.push(u),h;let f=!r(s[0].getPoints());f=e?!f:f;const d=[],p=[];let v=[],y=0,w;p[y]=void 0,v[y]=[];for(let g=0,x=s.length;g<x;g++)a=s[g],w=a.getPoints(),o=r(w),o=e?!o:o,o?(!f&&p[y]&&y++,p[y]={s:new Xl,p:w},p[y].s.curves=a.curves,f&&y++,v[y]=[]):v[y].push({h:a,p:w[0]});if(!p[0])return n(s);if(p.length>1){let g=!1,x=0;for(let M=0,T=p.length;M<T;M++)d[M]=[];for(let M=0,T=p.length;M<T;M++){const P=v[M];for(let b=0;b<P.length;b++){const L=P[b];let N=!0;for(let R=0;R<p.length;R++)i(L.p,p[R].p)&&(M!==R&&x++,N?(N=!1,d[R].push(L)):g=!0);N&&d[M].push(L)}}x>0&&g===!1&&(v=d)}let S;for(let g=0,x=p.length;g<x;g++){u=p[g].s,h.push(u),S=v[g];for(let M=0,T=S.length;M<T;M++)u.holes.push(S[M].h)}return h}}class Z9 extends As{constructor(e=1,n=1,i=1,r={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(e,n,{...r,count:i}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:D0}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=D0);const K9=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:mS,AddEquation:Ma,AddOperation:CR,AdditiveAnimationBlendMode:TS,AdditiveBlending:e0,AgXToneMapping:IR,AlphaFormat:FR,AlwaysCompare:nP,AlwaysDepth:xR,AlwaysStencilFunc:Fx,AmbientLight:oL,AnimationAction:pL,AnimationClip:dd,AnimationLoader:QB,AnimationMixer:C9,AnimationObjectGroup:T9,AnimationUtils:qB,ArcCurve:PP,ArrayCamera:xP,ArrowHelper:Y9,AttachedBindMode:hx,Audio:fL,AudioAnalyser:m9,AudioContext:JS,AudioListener:f9,AudioLoader:c9,AxesHelper:$9,BackSide:Xi,BasicDepthPacking:YR,BasicShadowMap:eR,BatchedMesh:CP,Bone:OS,BooleanKeyframeTrack:uc,Box2:N9,Box3:ji,Box3Helper:X9,BoxGeometry:cc,BoxHelper:W9,BufferAttribute:Xt,BufferGeometry:At,BufferGeometryLoader:hL,ByteType:kR,Cache:Do,Camera:Ad,CameraHelper:G9,CanvasTexture:zS,CapsuleGeometry:Y0,CatmullRomCurve3:LP,CineonToneMapping:PR,CircleGeometry:$0,ClampToEdgeWrapping:es,Clock:QS,Color:ze,ColorKeyframeTrack:qS,ColorManagement:Yt,CompressedArrayTexture:yB,CompressedCubeTexture:_B,CompressedTexture:X0,CompressedTextureLoader:e9,ConeGeometry:q0,ConstantAlphaFactor:vR,ConstantColorFactor:mR,CubeCamera:hP,CubeReflectionMapping:Xo,CubeRefractionMapping:Ba,CubeTexture:Cd,CubeTextureLoader:t9,CubeUVReflectionMapping:eh,CubicBezierCurve:HS,CubicBezierCurve3:IP,CubicInterpolant:KP,CullFaceBack:lx,CullFaceFront:Qb,CullFaceFrontBack:lU,CullFaceNone:Jb,Curve:Rs,CurvePath:DP,CustomBlending:tR,CustomToneMapping:LR,CylinderGeometry:rh,Cylindrical:I9,Data3DTexture:bS,DataArrayTexture:z0,DataTexture:Ua,DataTextureLoader:n9,DataUtils:gO,DecrementStencilOp:_U,DecrementWrapStencilOp:SU,DefaultLoadingManager:eL,DepthFormat:Vl,DepthStencilFormat:Ou,DepthTexture:IS,DetachedBindMode:DR,DirectionalLight:sL,DirectionalLightHelper:V9,DiscreteInterpolant:JP,DisplayP3ColorSpace:F0,DodecahedronGeometry:Z0,DoubleSide:qs,DstAlphaFactor:uR,DstColorFactor:fR,DynamicCopyUsage:UU,DynamicDrawUsage:PU,DynamicReadUsage:NU,EdgesGeometry:kP,EllipseCurve:j0,EqualCompare:JR,EqualDepth:MR,EqualStencilFunc:TU,EquirectangularReflectionMapping:$f,EquirectangularRefractionMapping:qf,Euler:Lr,EventDispatcher:Zo,ExtrudeGeometry:J0,FileLoader:jo,Float16BufferAttribute:MO,Float32BufferAttribute:Xe,FloatType:ts,Fog:V0,FogExp2:H0,FramebufferTexture:vB,FrontSide:Wo,Frustum:bd,GLBufferAttribute:L9,GLSL1:FU,GLSL3:zx,GreaterCompare:QR,GreaterDepth:ER,GreaterEqualCompare:tP,GreaterEqualDepth:wR,GreaterEqualStencilFunc:RU,GreaterStencilFunc:CU,GridHelper:B9,Group:yu,HalfFloatType:Ed,HemisphereLight:nL,HemisphereLightHelper:z9,IcosahedronGeometry:Q0,ImageBitmapLoader:l9,ImageLoader:pd,ImageUtils:oP,IncrementStencilOp:yU,IncrementWrapStencilOp:xU,InstancedBufferAttribute:Bu,InstancedBufferGeometry:uL,InstancedInterleavedBuffer:P9,InstancedMesh:AP,Int16BufferAttribute:xO,Int32BufferAttribute:SO,Int8BufferAttribute:vO,IntType:yS,InterleavedBuffer:G0,InterleavedBufferAttribute:nc,Interpolant:Id,InterpolateDiscrete:Jf,InterpolateLinear:Qf,InterpolateSmooth:_g,InvertStencilOp:MU,KeepStencilOp:Rl,KeyframeTrack:Ps,LOD:EP,LatheGeometry:Rd,Layers:Wl,LessCompare:KR,LessDepth:SR,LessEqualCompare:AS,LessEqualDepth:Yf,LessEqualStencilFunc:AU,LessStencilFunc:EU,Light:Qa,LightProbe:cL,Line:Ha,Line3:D9,LineBasicMaterial:qi,LineCurve:VS,LineCurve3:NP,LineDashedMaterial:$P,LineLoop:bP,LineSegments:ao,LinearDisplayP3ColorSpace:Td,LinearFilter:qn,LinearInterpolant:$S,LinearMipMapLinearFilter:fU,LinearMipMapNearestFilter:hU,LinearMipmapLinearFilter:Zs,LinearMipmapNearestFilter:Sf,LinearSRGBColorSpace:qo,LinearToneMapping:bR,LinearTransfer:td,Loader:hr,LoaderUtils:jx,LoadingManager:ZS,LoopOnce:WR,LoopPingPong:jR,LoopRepeat:XR,LuminanceAlphaFormat:HR,LuminanceFormat:BR,MOUSE:Cl,Material:ki,MaterialLoader:o1,MathUtils:No,Matrix3:xt,Matrix4:ct,MaxEquation:sR,Mesh:Zn,MeshBasicMaterial:Ka,MeshDepthMaterial:NS,MeshDistanceMaterial:DS,MeshLambertMaterial:jP,MeshMatcapMaterial:YP,MeshNormalMaterial:XP,MeshPhongMaterial:GP,MeshPhysicalMaterial:VP,MeshStandardMaterial:jS,MeshToonMaterial:WP,MinEquation:rR,MirroredRepeatWrapping:Kf,MixOperation:AR,MultiplyBlending:ux,MultiplyOperation:wd,NearestFilter:fi,NearestMipMapLinearFilter:uU,NearestMipMapNearestFilter:cU,NearestMipmapLinearFilter:mu,NearestMipmapNearestFilter:gS,NeutralToneMapping:NR,NeverCompare:ZR,NeverDepth:_R,NeverStencilFunc:wU,NoBlending:Uo,NoColorSpace:bo,NoToneMapping:eo,NormalAnimationBlendMode:O0,NormalBlending:Da,NotEqualCompare:eP,NotEqualDepth:TR,NotEqualStencilFunc:bU,NumberKeyframeTrack:hd,Object3D:Vt,ObjectLoader:o9,ObjectSpaceNormalMap:qR,OctahedronGeometry:Pd,OneFactor:aR,OneMinusConstantAlphaFactor:yR,OneMinusConstantColorFactor:gR,OneMinusDstAlphaFactor:hR,OneMinusDstColorFactor:dR,OneMinusSrcAlphaFactor:n0,OneMinusSrcColorFactor:cR,OrthographicCamera:ka,P3Primaries:id,PCFShadowMap:k0,PCFSoftShadowMap:xf,PMREMGenerator:Bx,Path:ad,PerspectiveCamera:Fn,Plane:Co,PlaneGeometry:nh,PlaneHelper:j9,PointLight:rL,PointLightHelper:O9,Points:RP,PointsMaterial:FS,PolarGridHelper:H9,PolyhedronGeometry:Ja,PositionalAudio:p9,PropertyBinding:kt,PropertyMixer:dL,QuadraticBezierCurve:GS,QuadraticBezierCurve3:WS,Quaternion:Pi,QuaternionKeyframeTrack:sh,QuaternionLinearInterpolant:QP,RED_GREEN_RGTC2_Format:Ux,RED_RGTC1_Format:GR,REVISION:D0,RGBADepthPacking:$R,RGBAFormat:or,RGBAIntegerFormat:ES,RGBA_ASTC_10x10_Format:Px,RGBA_ASTC_10x5_Format:Cx,RGBA_ASTC_10x6_Format:bx,RGBA_ASTC_10x8_Format:Rx,RGBA_ASTC_12x10_Format:Lx,RGBA_ASTC_12x12_Format:Ix,RGBA_ASTC_4x4_Format:_x,RGBA_ASTC_5x4_Format:xx,RGBA_ASTC_5x5_Format:Sx,RGBA_ASTC_6x5_Format:Mx,RGBA_ASTC_6x6_Format:wx,RGBA_ASTC_8x5_Format:Ex,RGBA_ASTC_8x6_Format:Tx,RGBA_ASTC_8x8_Format:Ax,RGBA_BPTC_Format:yg,RGBA_ETC2_EAC_Format:yx,RGBA_PVRTC_2BPPV1_Format:mx,RGBA_PVRTC_4BPPV1_Format:px,RGBA_S3TC_DXT1_Format:mg,RGBA_S3TC_DXT3_Format:gg,RGBA_S3TC_DXT5_Format:vg,RGBFormat:zR,RGB_BPTC_SIGNED_Format:Nx,RGB_BPTC_UNSIGNED_Format:Dx,RGB_ETC1_Format:gx,RGB_ETC2_Format:vx,RGB_PVRTC_2BPPV1_Format:dx,RGB_PVRTC_4BPPV1_Format:fx,RGB_S3TC_DXT1_Format:pg,RGFormat:VR,RGIntegerFormat:wS,RawShaderMaterial:HP,Ray:lc,Raycaster:mL,Rec709Primaries:nd,RectAreaLight:aL,RedFormat:SS,RedIntegerFormat:MS,ReinhardToneMapping:RR,RenderTarget:aP,RepeatWrapping:Zf,ReplaceStencilOp:vU,ReverseSubtractEquation:iR,RingGeometry:e1,SIGNED_RED_GREEN_RGTC2_Format:Ox,SIGNED_RED_RGTC1_Format:kx,SRGBColorSpace:Tr,SRGBTransfer:en,Scene:kS,ShaderChunk:Et,ShaderLib:Ms,ShaderMaterial:Cs,ShadowMaterial:BP,Shape:Xl,ShapeGeometry:t1,ShapePath:q9,ShapeUtils:to,ShortType:UR,Skeleton:W0,SkeletonHelper:U9,SkinnedMesh:TP,Source:Fl,Sphere:Li,SphereGeometry:Ld,Spherical:$x,SphericalHarmonics3:lL,SplineCurve:XS,SpotLight:iL,SpotLightHelper:k9,Sprite:wP,SpriteMaterial:US,SrcAlphaFactor:t0,SrcAlphaSaturateFactor:pR,SrcColorFactor:lR,StaticCopyUsage:kU,StaticDrawUsage:rd,StaticReadUsage:IU,StereoCamera:u9,StreamCopyUsage:OU,StreamDrawUsage:LU,StreamReadUsage:DU,StringKeyframeTrack:hc,SubtractEquation:nR,SubtractiveBlending:cx,TOUCH:bl,TangentSpaceNormalMap:Za,TetrahedronGeometry:n1,Texture:Ln,TextureLoader:tL,TorusGeometry:i1,TorusKnotGeometry:r1,Triangle:Ar,TriangleFanDrawMode:mU,TriangleStripDrawMode:pU,TrianglesDrawMode:dU,TubeGeometry:s1,UVMapping:U0,Uint16BufferAttribute:RS,Uint32BufferAttribute:PS,Uint8BufferAttribute:yO,Uint8ClampedBufferAttribute:_O,Uniform:n3,UniformsGroup:R9,UniformsLib:De,UniformsUtils:uP,UnsignedByteType:no,UnsignedInt248Type:th,UnsignedInt5999Type:OR,UnsignedIntType:tc,UnsignedShort4444Type:_S,UnsignedShort5551Type:xS,UnsignedShortType:vS,VSMShadowMap:_s,Vector2:he,Vector3:k,Vector4:$t,VectorKeyframeTrack:fd,VideoTexture:gB,WebGL3DRenderTarget:oO,WebGLArrayRenderTarget:sO,WebGLCoordinateSystem:Ks,WebGLCubeRenderTarget:fP,WebGLMultipleRenderTargets:Z9,WebGLRenderTarget:As,WebGLRenderer:SP,WebGLUtils:_P,WebGPUCoordinateSystem:sd,WireframeGeometry:zP,WrapAroundEnding:ed,ZeroCurvatureEnding:Ul,ZeroFactor:oR,ZeroSlopeEnding:Ol,ZeroStencilOp:gU,createCanvasElement:rP},Symbol.toStringTag,{value:"Module"}));var vL={exports:{}},fc={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */fc.ConcurrentRoot=1;fc.ContinuousEventPriority=4;fc.DefaultEventPriority=16;fc.DiscreteEventPriority=1;fc.IdleEventPriority=536870912;fc.LegacyRoot=0;vL.exports=fc;var xu=vL.exports;function J9(t){let e;const n=new Set,i=(h,f)=>{const d=typeof h=="function"?h(e):h;if(d!==e){const p=e;e=f?d:Object.assign({},e,d),n.forEach(v=>v(e,p))}},r=()=>e,s=(h,f=r,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=f(e);function v(){const y=f(e);if(!d(p,y)){const w=p;h(p=y,w)}}return n.add(v),()=>n.delete(v)},u={setState:i,getState:r,subscribe:(h,f,d)=>f||d?s(h,f,d):(n.add(h),()=>n.delete(h)),destroy:()=>n.clear()};return e=t(i,r,u),u}const Q9=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),wA=Q9?_e.useEffect:_e.useLayoutEffect;function e7(t){const e=typeof t=="function"?J9(t):t,n=(i=e.getState,r=Object.is)=>{const[,s]=_e.useReducer(S=>S+1,0),o=e.getState(),a=_e.useRef(o),u=_e.useRef(i),h=_e.useRef(r),f=_e.useRef(!1),d=_e.useRef();d.current===void 0&&(d.current=i(o));let p,v=!1;(a.current!==o||u.current!==i||h.current!==r||f.current)&&(p=i(o),v=!r(d.current,p)),wA(()=>{v&&(d.current=p),a.current=o,u.current=i,h.current=r,f.current=!1});const y=_e.useRef(o);wA(()=>{const S=()=>{try{const x=e.getState(),M=u.current(x);h.current(d.current,M)||(a.current=x,d.current=M,s())}catch{f.current=!0,s()}},g=e.subscribe(S);return e.getState()!==y.current&&S(),g},[]);const w=v?p:d.current;return _e.useDebugValue(w),w};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[n,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},n}var yL={exports:{}},_L={exports:{}},xL={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,X){var V=U.length;U.push(X);e:for(;0<V;){var re=V-1>>>1,we=U[re];if(0<r(we,X))U[re]=X,U[V]=we,V=re;else break e}}function n(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var X=U[0],V=U.pop();if(V!==X){U[0]=V;e:for(var re=0,we=U.length,Be=we>>>1;re<Be;){var ee=2*(re+1)-1,xe=U[ee],Ce=ee+1,Me=U[Ce];if(0>r(xe,V))Ce<we&&0>r(Me,xe)?(U[re]=Me,U[Ce]=V,re=Ce):(U[re]=xe,U[ee]=V,re=ee);else if(Ce<we&&0>r(Me,V))U[re]=Me,U[Ce]=V,re=Ce;else break e}}return X}function r(U,X){var V=U.sortIndex-X.sortIndex;return V!==0?V:U.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],h=[],f=1,d=null,p=3,v=!1,y=!1,w=!1,S=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(U){for(var X=n(h);X!==null;){if(X.callback===null)i(h);else if(X.startTime<=U)i(h),X.sortIndex=X.expirationTime,e(u,X);else break;X=n(h)}}function T(U){if(w=!1,M(U),!y)if(n(u)!==null)y=!0,fe(P);else{var X=n(h);X!==null&&ve(T,X.startTime-U)}}function P(U,X){y=!1,w&&(w=!1,g(N),N=-1),v=!0;var V=p;try{for(M(X),d=n(u);d!==null&&(!(d.expirationTime>X)||U&&!O());){var re=d.callback;if(typeof re=="function"){d.callback=null,p=d.priorityLevel;var we=re(d.expirationTime<=X);X=t.unstable_now(),typeof we=="function"?d.callback=we:d===n(u)&&i(u),M(X)}else i(u);d=n(u)}if(d!==null)var Be=!0;else{var ee=n(h);ee!==null&&ve(T,ee.startTime-X),Be=!1}return Be}finally{d=null,p=V,v=!1}}var b=!1,L=null,N=-1,R=5,C=-1;function O(){return!(t.unstable_now()-C<R)}function j(){if(L!==null){var U=t.unstable_now();C=U;var X=!0;try{X=L(!0,U)}finally{X?H():(b=!1,L=null)}}else b=!1}var H;if(typeof x=="function")H=function(){x(j)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,ne=J.port2;J.port1.onmessage=j,H=function(){ne.postMessage(null)}}else H=function(){S(j,0)};function fe(U){L=U,b||(b=!0,H())}function ve(U,X){N=S(function(){U(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){y||v||(y=!0,fe(P))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(U){switch(p){case 1:case 2:case 3:var X=3;break;default:X=p}var V=p;p=X;try{return U()}finally{p=V}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,X){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var V=p;p=U;try{return X()}finally{p=V}},t.unstable_scheduleCallback=function(U,X,V){var re=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?re+V:re):V=re,U){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=V+we,U={id:f++,callback:X,priorityLevel:U,startTime:V,expirationTime:we,sortIndex:-1},V>re?(U.sortIndex=V,e(h,U),n(u)===null&&U===n(h)&&(w?(g(N),N=-1):w=!0,ve(T,V-re))):(U.sortIndex=we,e(u,U),y||v||(y=!0,fe(P))),U},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(U){var X=p;return function(){var V=p;p=X;try{return U.apply(this,arguments)}finally{p=V}}}})(xL);_L.exports=xL;var qx=_L.exports;/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t7=function(e){var n={},i=_e,r=qx,s=Object.assign;function o(l){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+l,m=1;m<arguments.length;m++)c+="&args[]="+encodeURIComponent(arguments[m]);return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,u=Symbol.for("react.element"),h=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),y=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),T=Symbol.for("react.offscreen"),P=Symbol.iterator;function b(l){return l===null||typeof l!="object"?null:(l=P&&l[P]||l["@@iterator"],typeof l=="function"?l:null)}function L(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case f:return"Fragment";case h:return"Portal";case p:return"Profiler";case d:return"StrictMode";case S:return"Suspense";case g:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case y:return(l.displayName||"Context")+".Consumer";case v:return(l._context.displayName||"Context")+".Provider";case w:var c=l.render;return l=l.displayName,l||(l=c.displayName||c.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case x:return c=l.displayName||null,c!==null?c:L(l.type)||"Memo";case M:c=l._payload,l=l._init;try{return L(l(c))}catch{}}return null}function N(l){var c=l.type;switch(l.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=c.render,l=l.displayName||l.name||"",c.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return L(c);case 8:return c===d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function R(l){var c=l,m=l;if(l.alternate)for(;c.return;)c=c.return;else{l=c;do c=l,c.flags&4098&&(m=c.return),l=c.return;while(l)}return c.tag===3?m:null}function C(l){if(R(l)!==l)throw Error(o(188))}function O(l){var c=l.alternate;if(!c){if(c=R(l),c===null)throw Error(o(188));return c!==l?null:l}for(var m=l,_=c;;){var E=m.return;if(E===null)break;var A=E.alternate;if(A===null){if(_=E.return,_!==null){m=_;continue}break}if(E.child===A.child){for(A=E.child;A;){if(A===m)return C(E),l;if(A===_)return C(E),c;A=A.sibling}throw Error(o(188))}if(m.return!==_.return)m=E,_=A;else{for(var F=!1,W=E.child;W;){if(W===m){F=!0,m=E,_=A;break}if(W===_){F=!0,_=E,m=A;break}W=W.sibling}if(!F){for(W=A.child;W;){if(W===m){F=!0,m=A,_=E;break}if(W===_){F=!0,_=A,m=E;break}W=W.sibling}if(!F)throw Error(o(189))}}if(m.alternate!==_)throw Error(o(190))}if(m.tag!==3)throw Error(o(188));return m.stateNode.current===m?l:c}function j(l){return l=O(l),l!==null?H(l):null}function H(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var c=H(l);if(c!==null)return c;l=l.sibling}return null}function J(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){if(l.tag!==4){var c=J(l);if(c!==null)return c}l=l.sibling}return null}var ne=Array.isArray,fe=e.getPublicInstance,ve=e.getRootHostContext,U=e.getChildHostContext,X=e.prepareForCommit,V=e.resetAfterCommit,re=e.createInstance,we=e.appendInitialChild,Be=e.finalizeInitialChildren,ee=e.prepareUpdate,xe=e.shouldSetTextContent,Ce=e.createTextInstance,Me=e.scheduleTimeout,ft=e.cancelTimeout,vt=e.noTimeout,$=e.isPrimaryRenderer,ut=e.supportsMutation,ce=e.supportsPersistence,ge=e.supportsHydration,pe=e.getInstanceFromNode,Pe=e.preparePortalMount,Se=e.getCurrentEventPriority,Fe=e.detachDeletedInstance,Qe=e.supportsMicrotasks,z=e.scheduleMicrotask,I=e.supportsTestSelectors,Z=e.findFiberRoot,de=e.getBoundingRect,ye=e.getTextContent,me=e.isHiddenSubtree,Ze=e.matchAccessibilityRole,Ie=e.setFocusIfFocusable,Le=e.setupIntersectionObserver,ht=e.appendChild,be=e.appendChildToContainer,$e=e.commitTextUpdate,Mt=e.commitMount,it=e.commitUpdate,He=e.insertBefore,dt=e.insertInContainerBefore,wt=e.removeChild,G=e.removeChildFromContainer,ue=e.resetTextContent,B=e.hideInstance,oe=e.hideTextInstance,ae=e.unhideInstance,Re=e.unhideTextInstance,Ne=e.clearContainer,It=e.cloneInstance,Gt=e.createContainerChildSet,Nt=e.appendChildToContainerChildSet,Zt=e.finalizeContainerChildren,bt=e.replaceContainerChildren,Kn=e.cloneHiddenInstance,hn=e.cloneHiddenTextInstance,ho=e.canHydrateInstance,Gd=e.canHydrateTextInstance,Wd=e.canHydrateSuspenseInstance,nl=e.isSuspenseInstancePending,dc=e.isSuspenseInstanceFallback,pc=e.registerSuspenseInstanceRetry,Ko=e.getNextHydratableSibling,Xd=e.getFirstHydratableChild,L1=e.getFirstHydratableChildWithinContainer,I1=e.getFirstHydratableChildWithinSuspenseInstance,N1=e.hydrateInstance,D=e.hydrateTextInstance,q=e.hydrateSuspenseInstance,ie=e.getNextHydratableInstanceAfterSuspenseInstance,Q=e.commitHydratedContainer,te=e.commitHydratedSuspenseInstance,ke=e.clearSuspenseBoundary,Ye=e.clearSuspenseBoundaryFromContainer,Ke=e.shouldDeleteUnhydratedTailInstances,lt=e.didNotMatchHydratedContainerTextInstance,pt=e.didNotMatchHydratedTextInstance,mt;function gt(l){if(mt===void 0)try{throw Error()}catch(m){var c=m.stack.trim().match(/\n( *(at )?)/);mt=c&&c[1]||""}return`
`+mt+l}var fn=!1;function Hn(l,c){if(!l||fn)return"";fn=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(Ae){var _=Ae}Reflect.construct(l,[],c)}else{try{c.call()}catch(Ae){_=Ae}l.call(c.prototype)}else{try{throw Error()}catch(Ae){_=Ae}l()}}catch(Ae){if(Ae&&_&&typeof Ae.stack=="string"){for(var E=Ae.stack.split(`
`),A=_.stack.split(`
`),F=E.length-1,W=A.length-1;1<=F&&0<=W&&E[F]!==A[W];)W--;for(;1<=F&&0<=W;F--,W--)if(E[F]!==A[W]){if(F!==1||W!==1)do if(F--,W--,0>W||E[F]!==A[W]){var le=`
`+E[F].replace(" at new "," at ");return l.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",l.displayName)),le}while(1<=F&&0<=W);break}}}finally{fn=!1,Error.prepareStackTrace=m}return(l=l?l.displayName||l.name:"")?gt(l):""}var Ui=Object.prototype.hasOwnProperty,pr=[],Rt=-1;function ot(l){return{current:l}}function Wt(l){0>Rt||(l.current=pr[Rt],pr[Rt]=null,Rt--)}function at(l,c){Rt++,pr[Rt]=l.current,l.current=c}var yi={},Jn=ot(yi),Vn=ot(!1),us=yi;function yn(l,c){var m=l.type.contextTypes;if(!m)return yi;var _=l.stateNode;if(_&&_.__reactInternalMemoizedUnmaskedChildContext===c)return _.__reactInternalMemoizedMaskedChildContext;var E={},A;for(A in m)E[A]=c[A];return _&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=c,l.__reactInternalMemoizedMaskedChildContext=E),E}function _n(l){return l=l.childContextTypes,l!=null}function Jo(){Wt(Vn),Wt(Jn)}function Oi(l,c,m){if(Jn.current!==yi)throw Error(o(168));at(Jn,c),at(Vn,m)}function mc(l,c,m){var _=l.stateNode;if(c=c.childContextTypes,typeof _.getChildContext!="function")return m;_=_.getChildContext();for(var E in _)if(!(E in c))throw Error(o(108,N(l)||"Unknown",E));return s({},m,_)}function gc(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||yi,us=Jn.current,at(Jn,l),at(Vn,Vn.current),!0}function dh(l,c,m){var _=l.stateNode;if(!_)throw Error(o(169));m?(l=mc(l,c,us),_.__reactInternalMemoizedMergedChildContext=l,Wt(Vn),Wt(Jn),at(Jn,l)):Wt(Vn),at(Vn,m)}var hs=Math.clz32?Math.clz32:j5,W5=Math.log,X5=Math.LN2;function j5(l){return l>>>=0,l===0?32:31-(W5(l)/X5|0)|0}var jd=64,Yd=4194304;function ph(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return l&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return l}}function $d(l,c){var m=l.pendingLanes;if(m===0)return 0;var _=0,E=l.suspendedLanes,A=l.pingedLanes,F=m&268435455;if(F!==0){var W=F&~E;W!==0?_=ph(W):(A&=F,A!==0&&(_=ph(A)))}else F=m&~E,F!==0?_=ph(F):A!==0&&(_=ph(A));if(_===0)return 0;if(c!==0&&c!==_&&!(c&E)&&(E=_&-_,A=c&-c,E>=A||E===16&&(A&4194240)!==0))return c;if(_&4&&(_|=m&16),c=l.entangledLanes,c!==0)for(l=l.entanglements,c&=_;0<c;)m=31-hs(c),E=1<<m,_|=l[m],c&=~E;return _}function Y5(l,c){switch(l){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $5(l,c){for(var m=l.suspendedLanes,_=l.pingedLanes,E=l.expirationTimes,A=l.pendingLanes;0<A;){var F=31-hs(A),W=1<<F,le=E[F];le===-1?(!(W&m)||W&_)&&(E[F]=Y5(W,c)):le<=c&&(l.expiredLanes|=W),A&=~W}}function D1(l){return l=l.pendingLanes&-1073741825,l!==0?l:l&1073741824?1073741824:0}function k1(l){for(var c=[],m=0;31>m;m++)c.push(l);return c}function mh(l,c,m){l.pendingLanes|=c,c!==536870912&&(l.suspendedLanes=0,l.pingedLanes=0),l=l.eventTimes,c=31-hs(c),l[c]=m}function q5(l,c){var m=l.pendingLanes&~c;l.pendingLanes=c,l.suspendedLanes=0,l.pingedLanes=0,l.expiredLanes&=c,l.mutableReadLanes&=c,l.entangledLanes&=c,c=l.entanglements;var _=l.eventTimes;for(l=l.expirationTimes;0<m;){var E=31-hs(m),A=1<<E;c[E]=0,_[E]=-1,l[E]=-1,m&=~A}}function U1(l,c){var m=l.entangledLanes|=c;for(l=l.entanglements;m;){var _=31-hs(m),E=1<<_;E&c|l[_]&c&&(l[_]|=c),m&=~E}}var Ft=0;function sM(l){return l&=-l,1<l?4<l?l&268435455?16:536870912:4:1}var O1=r.unstable_scheduleCallback,oM=r.unstable_cancelCallback,Z5=r.unstable_shouldYield,K5=r.unstable_requestPaint,si=r.unstable_now,F1=r.unstable_ImmediatePriority,J5=r.unstable_UserBlockingPriority,z1=r.unstable_NormalPriority,Q5=r.unstable_IdlePriority,qd=null,ks=null;function eN(l){if(ks&&typeof ks.onCommitFiberRoot=="function")try{ks.onCommitFiberRoot(qd,l,void 0,(l.current.flags&128)===128)}catch{}}function tN(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var Us=typeof Object.is=="function"?Object.is:tN,fo=null,Zd=!1,B1=!1;function aM(l){fo===null?fo=[l]:fo.push(l)}function nN(l){Zd=!0,aM(l)}function Os(){if(!B1&&fo!==null){B1=!0;var l=0,c=Ft;try{var m=fo;for(Ft=1;l<m.length;l++){var _=m[l];do _=_(!0);while(_!==null)}fo=null,Zd=!1}catch(E){throw fo!==null&&(fo=fo.slice(l+1)),O1(F1,Os),E}finally{Ft=c,B1=!1}}return null}var iN=a.ReactCurrentBatchConfig;function Kd(l,c){if(Us(l,c))return!0;if(typeof l!="object"||l===null||typeof c!="object"||c===null)return!1;var m=Object.keys(l),_=Object.keys(c);if(m.length!==_.length)return!1;for(_=0;_<m.length;_++){var E=m[_];if(!Ui.call(c,E)||!Us(l[E],c[E]))return!1}return!0}function rN(l){switch(l.tag){case 5:return gt(l.type);case 16:return gt("Lazy");case 13:return gt("Suspense");case 19:return gt("SuspenseList");case 0:case 2:case 15:return l=Hn(l.type,!1),l;case 11:return l=Hn(l.type.render,!1),l;case 1:return l=Hn(l.type,!0),l;default:return""}}function fs(l,c){if(l&&l.defaultProps){c=s({},c),l=l.defaultProps;for(var m in l)c[m]===void 0&&(c[m]=l[m]);return c}return c}var Jd=ot(null),Qd=null,vc=null,H1=null;function V1(){H1=vc=Qd=null}function lM(l,c,m){$?(at(Jd,c._currentValue),c._currentValue=m):(at(Jd,c._currentValue2),c._currentValue2=m)}function G1(l){var c=Jd.current;Wt(Jd),$?l._currentValue=c:l._currentValue2=c}function W1(l,c,m){for(;l!==null;){var _=l.alternate;if((l.childLanes&c)!==c?(l.childLanes|=c,_!==null&&(_.childLanes|=c)):_!==null&&(_.childLanes&c)!==c&&(_.childLanes|=c),l===m)break;l=l.return}}function yc(l,c){Qd=l,H1=vc=null,l=l.dependencies,l!==null&&l.firstContext!==null&&(l.lanes&c&&(vr=!0),l.firstContext=null)}function Fr(l){var c=$?l._currentValue:l._currentValue2;if(H1!==l)if(l={context:l,memoizedValue:c,next:null},vc===null){if(Qd===null)throw Error(o(308));vc=l,Qd.dependencies={lanes:0,firstContext:l}}else vc=vc.next=l;return c}var Fs=null,Qo=!1;function X1(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cM(l,c){l=l.updateQueue,c.updateQueue===l&&(c.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function po(l,c){return{eventTime:l,lane:c,tag:0,payload:null,callback:null,next:null}}function ea(l,c){var m=l.updateQueue;m!==null&&(m=m.shared,Gn!==null&&l.mode&1&&!(Ct&2)?(l=m.interleaved,l===null?(c.next=c,Fs===null?Fs=[m]:Fs.push(m)):(c.next=l.next,l.next=c),m.interleaved=c):(l=m.pending,l===null?c.next=c:(c.next=l.next,l.next=c),m.pending=c))}function ep(l,c,m){if(c=c.updateQueue,c!==null&&(c=c.shared,(m&4194240)!==0)){var _=c.lanes;_&=l.pendingLanes,m|=_,c.lanes=m,U1(l,m)}}function uM(l,c){var m=l.updateQueue,_=l.alternate;if(_!==null&&(_=_.updateQueue,m===_)){var E=null,A=null;if(m=m.firstBaseUpdate,m!==null){do{var F={eventTime:m.eventTime,lane:m.lane,tag:m.tag,payload:m.payload,callback:m.callback,next:null};A===null?E=A=F:A=A.next=F,m=m.next}while(m!==null);A===null?E=A=c:A=A.next=c}else E=A=c;m={baseState:_.baseState,firstBaseUpdate:E,lastBaseUpdate:A,shared:_.shared,effects:_.effects},l.updateQueue=m;return}l=m.lastBaseUpdate,l===null?m.firstBaseUpdate=c:l.next=c,m.lastBaseUpdate=c}function tp(l,c,m,_){var E=l.updateQueue;Qo=!1;var A=E.firstBaseUpdate,F=E.lastBaseUpdate,W=E.shared.pending;if(W!==null){E.shared.pending=null;var le=W,Ae=le.next;le.next=null,F===null?A=Ae:F.next=Ae,F=le;var We=l.alternate;We!==null&&(We=We.updateQueue,W=We.lastBaseUpdate,W!==F&&(W===null?We.firstBaseUpdate=Ae:W.next=Ae,We.lastBaseUpdate=le))}if(A!==null){var yt=E.baseState;F=0,We=Ae=le=null,W=A;do{var rt=W.lane,Jt=W.eventTime;if((_&rt)===rt){We!==null&&(We=We.next={eventTime:Jt,lane:0,tag:W.tag,payload:W.payload,callback:W.callback,next:null});e:{var et=l,Mi=W;switch(rt=c,Jt=m,Mi.tag){case 1:if(et=Mi.payload,typeof et=="function"){yt=et.call(Jt,yt,rt);break e}yt=et;break e;case 3:et.flags=et.flags&-65537|128;case 0:if(et=Mi.payload,rt=typeof et=="function"?et.call(Jt,yt,rt):et,rt==null)break e;yt=s({},yt,rt);break e;case 2:Qo=!0}}W.callback!==null&&W.lane!==0&&(l.flags|=64,rt=E.effects,rt===null?E.effects=[W]:rt.push(W))}else Jt={eventTime:Jt,lane:rt,tag:W.tag,payload:W.payload,callback:W.callback,next:null},We===null?(Ae=We=Jt,le=yt):We=We.next=Jt,F|=rt;if(W=W.next,W===null){if(W=E.shared.pending,W===null)break;rt=W,W=rt.next,rt.next=null,E.lastBaseUpdate=rt,E.shared.pending=null}}while(1);if(We===null&&(le=yt),E.baseState=le,E.firstBaseUpdate=Ae,E.lastBaseUpdate=We,c=E.shared.interleaved,c!==null){E=c;do F|=E.lane,E=E.next;while(E!==c)}else A===null&&(E.shared.lanes=0);Cc|=F,l.lanes=F,l.memoizedState=yt}}function hM(l,c,m){if(l=c.effects,c.effects=null,l!==null)for(c=0;c<l.length;c++){var _=l[c],E=_.callback;if(E!==null){if(_.callback=null,_=m,typeof E!="function")throw Error(o(191,E));E.call(_)}}}var fM=new i.Component().refs;function j1(l,c,m,_){c=l.memoizedState,m=m(_,c),m=m==null?c:s({},c,m),l.memoizedState=m,l.lanes===0&&(l.updateQueue.baseState=m)}var np={isMounted:function(l){return(l=l._reactInternals)?R(l)===l:!1},enqueueSetState:function(l,c,m){l=l._reactInternals;var _=zi(),E=ia(l),A=po(_,E);A.payload=c,m!=null&&(A.callback=m),ea(l,A),c=Gr(l,E,_),c!==null&&ep(c,l,E)},enqueueReplaceState:function(l,c,m){l=l._reactInternals;var _=zi(),E=ia(l),A=po(_,E);A.tag=1,A.payload=c,m!=null&&(A.callback=m),ea(l,A),c=Gr(l,E,_),c!==null&&ep(c,l,E)},enqueueForceUpdate:function(l,c){l=l._reactInternals;var m=zi(),_=ia(l),E=po(m,_);E.tag=2,c!=null&&(E.callback=c),ea(l,E),c=Gr(l,_,m),c!==null&&ep(c,l,_)}};function dM(l,c,m,_,E,A,F){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(_,A,F):c.prototype&&c.prototype.isPureReactComponent?!Kd(m,_)||!Kd(E,A):!0}function pM(l,c,m){var _=!1,E=yi,A=c.contextType;return typeof A=="object"&&A!==null?A=Fr(A):(E=_n(c)?us:Jn.current,_=c.contextTypes,A=(_=_!=null)?yn(l,E):yi),c=new c(m,A),l.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=np,l.stateNode=c,c._reactInternals=l,_&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=E,l.__reactInternalMemoizedMaskedChildContext=A),c}function mM(l,c,m,_){l=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(m,_),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(m,_),c.state!==l&&np.enqueueReplaceState(c,c.state,null)}function Y1(l,c,m,_){var E=l.stateNode;E.props=m,E.state=l.memoizedState,E.refs=fM,X1(l);var A=c.contextType;typeof A=="object"&&A!==null?E.context=Fr(A):(A=_n(c)?us:Jn.current,E.context=yn(l,A)),E.state=l.memoizedState,A=c.getDerivedStateFromProps,typeof A=="function"&&(j1(l,c,A,m),E.state=l.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(c=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),c!==E.state&&np.enqueueReplaceState(E,E.state,null),tp(l,m,E,_),E.state=l.memoizedState),typeof E.componentDidMount=="function"&&(l.flags|=4194308)}var _c=[],xc=0,ip=null,rp=0,zr=[],Br=0,il=null,mo=1,go="";function rl(l,c){_c[xc++]=rp,_c[xc++]=ip,ip=l,rp=c}function gM(l,c,m){zr[Br++]=mo,zr[Br++]=go,zr[Br++]=il,il=l;var _=mo;l=go;var E=32-hs(_)-1;_&=~(1<<E),m+=1;var A=32-hs(c)+E;if(30<A){var F=E-E%5;A=(_&(1<<F)-1).toString(32),_>>=F,E-=F,mo=1<<32-hs(c)+E|m<<E|_,go=A+l}else mo=1<<A|m<<E|_,go=l}function $1(l){l.return!==null&&(rl(l,1),gM(l,1,0))}function q1(l){for(;l===ip;)ip=_c[--xc],_c[xc]=null,rp=_c[--xc],_c[xc]=null;for(;l===il;)il=zr[--Br],zr[Br]=null,go=zr[--Br],zr[Br]=null,mo=zr[--Br],zr[Br]=null}var mr=null,gr=null,dn=!1,gh=!1,ds=null;function vM(l,c){var m=Wr(5,null,null,0);m.elementType="DELETED",m.stateNode=c,m.return=l,c=l.deletions,c===null?(l.deletions=[m],l.flags|=16):c.push(m)}function yM(l,c){switch(l.tag){case 5:return c=ho(c,l.type,l.pendingProps),c!==null?(l.stateNode=c,mr=l,gr=Xd(c),!0):!1;case 6:return c=Gd(c,l.pendingProps),c!==null?(l.stateNode=c,mr=l,gr=null,!0):!1;case 13:if(c=Wd(c),c!==null){var m=il!==null?{id:mo,overflow:go}:null;return l.memoizedState={dehydrated:c,treeContext:m,retryLane:1073741824},m=Wr(18,null,null,0),m.stateNode=c,m.return=l,l.child=m,mr=l,gr=null,!0}return!1;default:return!1}}function Z1(l){return(l.mode&1)!==0&&(l.flags&128)===0}function K1(l){if(dn){var c=gr;if(c){var m=c;if(!yM(l,c)){if(Z1(l))throw Error(o(418));c=Ko(m);var _=mr;c&&yM(l,c)?vM(_,m):(l.flags=l.flags&-4097|2,dn=!1,mr=l)}}else{if(Z1(l))throw Error(o(418));l.flags=l.flags&-4097|2,dn=!1,mr=l}}}function _M(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;mr=l}function vh(l){if(!ge||l!==mr)return!1;if(!dn)return _M(l),dn=!0,!1;if(l.tag!==3&&(l.tag!==5||Ke(l.type)&&!xe(l.type,l.memoizedProps))){var c=gr;if(c){if(Z1(l)){for(l=gr;l;)l=Ko(l);throw Error(o(418))}for(;c;)vM(l,c),c=Ko(c)}}if(_M(l),l.tag===13){if(!ge)throw Error(o(316));if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(o(317));gr=ie(l)}else gr=mr?Ko(l.stateNode):null;return!0}function Sc(){ge&&(gr=mr=null,gh=dn=!1)}function J1(l){ds===null?ds=[l]:ds.push(l)}function yh(l,c,m){if(l=m.ref,l!==null&&typeof l!="function"&&typeof l!="object"){if(m._owner){if(m=m._owner,m){if(m.tag!==1)throw Error(o(309));var _=m.stateNode}if(!_)throw Error(o(147,l));var E=_,A=""+l;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===A?c.ref:(c=function(F){var W=E.refs;W===fM&&(W=E.refs={}),F===null?delete W[A]:W[A]=F},c._stringRef=A,c)}if(typeof l!="string")throw Error(o(284));if(!m._owner)throw Error(o(290,l))}return l}function sp(l,c){throw l=Object.prototype.toString.call(c),Error(o(31,l==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":l))}function xM(l){var c=l._init;return c(l._payload)}function SM(l){function c(K,Y){if(l){var se=K.deletions;se===null?(K.deletions=[Y],K.flags|=16):se.push(Y)}}function m(K,Y){if(!l)return null;for(;Y!==null;)c(K,Y),Y=Y.sibling;return null}function _(K,Y){for(K=new Map;Y!==null;)Y.key!==null?K.set(Y.key,Y):K.set(Y.index,Y),Y=Y.sibling;return K}function E(K,Y){return K=sa(K,Y),K.index=0,K.sibling=null,K}function A(K,Y,se){return K.index=se,l?(se=K.alternate,se!==null?(se=se.index,se<Y?(K.flags|=2,Y):se):(K.flags|=2,Y)):(K.flags|=1048576,Y)}function F(K){return l&&K.alternate===null&&(K.flags|=2),K}function W(K,Y,se,Oe){return Y===null||Y.tag!==6?(Y=kv(se,K.mode,Oe),Y.return=K,Y):(Y=E(Y,se),Y.return=K,Y)}function le(K,Y,se,Oe){var Je=se.type;return Je===f?We(K,Y,se.props.children,Oe,se.key):Y!==null&&(Y.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===M&&xM(Je)===Y.type)?(Oe=E(Y,se.props),Oe.ref=yh(K,Y,se),Oe.return=K,Oe):(Oe=Up(se.type,se.key,se.props,null,K.mode,Oe),Oe.ref=yh(K,Y,se),Oe.return=K,Oe)}function Ae(K,Y,se,Oe){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==se.containerInfo||Y.stateNode.implementation!==se.implementation?(Y=Uv(se,K.mode,Oe),Y.return=K,Y):(Y=E(Y,se.children||[]),Y.return=K,Y)}function We(K,Y,se,Oe,Je){return Y===null||Y.tag!==7?(Y=hl(se,K.mode,Oe,Je),Y.return=K,Y):(Y=E(Y,se),Y.return=K,Y)}function yt(K,Y,se){if(typeof Y=="string"&&Y!==""||typeof Y=="number")return Y=kv(""+Y,K.mode,se),Y.return=K,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case u:return se=Up(Y.type,Y.key,Y.props,null,K.mode,se),se.ref=yh(K,null,Y),se.return=K,se;case h:return Y=Uv(Y,K.mode,se),Y.return=K,Y;case M:var Oe=Y._init;return yt(K,Oe(Y._payload),se)}if(ne(Y)||b(Y))return Y=hl(Y,K.mode,se,null),Y.return=K,Y;sp(K,Y)}return null}function rt(K,Y,se,Oe){var Je=Y!==null?Y.key:null;if(typeof se=="string"&&se!==""||typeof se=="number")return Je!==null?null:W(K,Y,""+se,Oe);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case u:return se.key===Je?le(K,Y,se,Oe):null;case h:return se.key===Je?Ae(K,Y,se,Oe):null;case M:return Je=se._init,rt(K,Y,Je(se._payload),Oe)}if(ne(se)||b(se))return Je!==null?null:We(K,Y,se,Oe,null);sp(K,se)}return null}function Jt(K,Y,se,Oe,Je){if(typeof Oe=="string"&&Oe!==""||typeof Oe=="number")return K=K.get(se)||null,W(Y,K,""+Oe,Je);if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case u:return K=K.get(Oe.key===null?se:Oe.key)||null,le(Y,K,Oe,Je);case h:return K=K.get(Oe.key===null?se:Oe.key)||null,Ae(Y,K,Oe,Je);case M:var Tt=Oe._init;return Jt(K,Y,se,Tt(Oe._payload),Je)}if(ne(Oe)||b(Oe))return K=K.get(se)||null,We(Y,K,Oe,Je,null);sp(Y,Oe)}return null}function et(K,Y,se,Oe){for(var Je=null,Tt=null,_t=Y,zt=Y=0,ai=null;_t!==null&&zt<se.length;zt++){_t.index>zt?(ai=_t,_t=null):ai=_t.sibling;var Bt=rt(K,_t,se[zt],Oe);if(Bt===null){_t===null&&(_t=ai);break}l&&_t&&Bt.alternate===null&&c(K,_t),Y=A(Bt,Y,zt),Tt===null?Je=Bt:Tt.sibling=Bt,Tt=Bt,_t=ai}if(zt===se.length)return m(K,_t),dn&&rl(K,zt),Je;if(_t===null){for(;zt<se.length;zt++)_t=yt(K,se[zt],Oe),_t!==null&&(Y=A(_t,Y,zt),Tt===null?Je=_t:Tt.sibling=_t,Tt=_t);return dn&&rl(K,zt),Je}for(_t=_(K,_t);zt<se.length;zt++)ai=Jt(_t,K,zt,se[zt],Oe),ai!==null&&(l&&ai.alternate!==null&&_t.delete(ai.key===null?zt:ai.key),Y=A(ai,Y,zt),Tt===null?Je=ai:Tt.sibling=ai,Tt=ai);return l&&_t.forEach(function(oa){return c(K,oa)}),dn&&rl(K,zt),Je}function Mi(K,Y,se,Oe){var Je=b(se);if(typeof Je!="function")throw Error(o(150));if(se=Je.call(se),se==null)throw Error(o(151));for(var Tt=Je=null,_t=Y,zt=Y=0,ai=null,Bt=se.next();_t!==null&&!Bt.done;zt++,Bt=se.next()){_t.index>zt?(ai=_t,_t=null):ai=_t.sibling;var oa=rt(K,_t,Bt.value,Oe);if(oa===null){_t===null&&(_t=ai);break}l&&_t&&oa.alternate===null&&c(K,_t),Y=A(oa,Y,zt),Tt===null?Je=oa:Tt.sibling=oa,Tt=oa,_t=ai}if(Bt.done)return m(K,_t),dn&&rl(K,zt),Je;if(_t===null){for(;!Bt.done;zt++,Bt=se.next())Bt=yt(K,Bt.value,Oe),Bt!==null&&(Y=A(Bt,Y,zt),Tt===null?Je=Bt:Tt.sibling=Bt,Tt=Bt);return dn&&rl(K,zt),Je}for(_t=_(K,_t);!Bt.done;zt++,Bt=se.next())Bt=Jt(_t,K,zt,Bt.value,Oe),Bt!==null&&(l&&Bt.alternate!==null&&_t.delete(Bt.key===null?zt:Bt.key),Y=A(Bt,Y,zt),Tt===null?Je=Bt:Tt.sibling=Bt,Tt=Bt);return l&&_t.forEach(function(DN){return c(K,DN)}),dn&&rl(K,zt),Je}function Xr(K,Y,se,Oe){if(typeof se=="object"&&se!==null&&se.type===f&&se.key===null&&(se=se.props.children),typeof se=="object"&&se!==null){switch(se.$$typeof){case u:e:{for(var Je=se.key,Tt=Y;Tt!==null;){if(Tt.key===Je){if(Je=se.type,Je===f){if(Tt.tag===7){m(K,Tt.sibling),Y=E(Tt,se.props.children),Y.return=K,K=Y;break e}}else if(Tt.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===M&&xM(Je)===Tt.type){m(K,Tt.sibling),Y=E(Tt,se.props),Y.ref=yh(K,Tt,se),Y.return=K,K=Y;break e}m(K,Tt);break}else c(K,Tt);Tt=Tt.sibling}se.type===f?(Y=hl(se.props.children,K.mode,Oe,se.key),Y.return=K,K=Y):(Oe=Up(se.type,se.key,se.props,null,K.mode,Oe),Oe.ref=yh(K,Y,se),Oe.return=K,K=Oe)}return F(K);case h:e:{for(Tt=se.key;Y!==null;){if(Y.key===Tt)if(Y.tag===4&&Y.stateNode.containerInfo===se.containerInfo&&Y.stateNode.implementation===se.implementation){m(K,Y.sibling),Y=E(Y,se.children||[]),Y.return=K,K=Y;break e}else{m(K,Y);break}else c(K,Y);Y=Y.sibling}Y=Uv(se,K.mode,Oe),Y.return=K,K=Y}return F(K);case M:return Tt=se._init,Xr(K,Y,Tt(se._payload),Oe)}if(ne(se))return et(K,Y,se,Oe);if(b(se))return Mi(K,Y,se,Oe);sp(K,se)}return typeof se=="string"&&se!==""||typeof se=="number"?(se=""+se,Y!==null&&Y.tag===6?(m(K,Y.sibling),Y=E(Y,se),Y.return=K,K=Y):(m(K,Y),Y=kv(se,K.mode,Oe),Y.return=K,K=Y),F(K)):m(K,Y)}return Xr}var Mc=SM(!0),MM=SM(!1),_h={},Hr=ot(_h),xh=ot(_h),wc=ot(_h);function zs(l){if(l===_h)throw Error(o(174));return l}function Q1(l,c){at(wc,c),at(xh,l),at(Hr,_h),l=ve(c),Wt(Hr),at(Hr,l)}function Ec(){Wt(Hr),Wt(xh),Wt(wc)}function wM(l){var c=zs(wc.current),m=zs(Hr.current);c=U(m,l.type,c),m!==c&&(at(xh,l),at(Hr,c))}function ev(l){xh.current===l&&(Wt(Hr),Wt(xh))}var xn=ot(0);function op(l){for(var c=l;c!==null;){if(c.tag===13){var m=c.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||nl(m)||dc(m)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if(c.flags&128)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var tv=[];function nv(){for(var l=0;l<tv.length;l++){var c=tv[l];$?c._workInProgressVersionPrimary=null:c._workInProgressVersionSecondary=null}tv.length=0}var ap=a.ReactCurrentDispatcher,Vr=a.ReactCurrentBatchConfig,Tc=0,Tn=null,_i=null,oi=null,lp=!1,Sh=!1,Mh=0,sN=0;function xi(){throw Error(o(321))}function iv(l,c){if(c===null)return!1;for(var m=0;m<c.length&&m<l.length;m++)if(!Us(l[m],c[m]))return!1;return!0}function rv(l,c,m,_,E,A){if(Tc=A,Tn=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,ap.current=l===null||l.memoizedState===null?cN:uN,l=m(_,E),Sh){A=0;do{if(Sh=!1,Mh=0,25<=A)throw Error(o(301));A+=1,oi=_i=null,c.updateQueue=null,ap.current=hN,l=m(_,E)}while(Sh)}if(ap.current=dp,c=_i!==null&&_i.next!==null,Tc=0,oi=_i=Tn=null,lp=!1,c)throw Error(o(300));return l}function sv(){var l=Mh!==0;return Mh=0,l}function vo(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return oi===null?Tn.memoizedState=oi=l:oi=oi.next=l,oi}function Bs(){if(_i===null){var l=Tn.alternate;l=l!==null?l.memoizedState:null}else l=_i.next;var c=oi===null?Tn.memoizedState:oi.next;if(c!==null)oi=c,_i=l;else{if(l===null)throw Error(o(310));_i=l,l={memoizedState:_i.memoizedState,baseState:_i.baseState,baseQueue:_i.baseQueue,queue:_i.queue,next:null},oi===null?Tn.memoizedState=oi=l:oi=oi.next=l}return oi}function sl(l,c){return typeof c=="function"?c(l):c}function cp(l){var c=Bs(),m=c.queue;if(m===null)throw Error(o(311));m.lastRenderedReducer=l;var _=_i,E=_.baseQueue,A=m.pending;if(A!==null){if(E!==null){var F=E.next;E.next=A.next,A.next=F}_.baseQueue=E=A,m.pending=null}if(E!==null){A=E.next,_=_.baseState;var W=F=null,le=null,Ae=A;do{var We=Ae.lane;if((Tc&We)===We)le!==null&&(le=le.next={lane:0,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null}),_=Ae.hasEagerState?Ae.eagerState:l(_,Ae.action);else{var yt={lane:We,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null};le===null?(W=le=yt,F=_):le=le.next=yt,Tn.lanes|=We,Cc|=We}Ae=Ae.next}while(Ae!==null&&Ae!==A);le===null?F=_:le.next=W,Us(_,c.memoizedState)||(vr=!0),c.memoizedState=_,c.baseState=F,c.baseQueue=le,m.lastRenderedState=_}if(l=m.interleaved,l!==null){E=l;do A=E.lane,Tn.lanes|=A,Cc|=A,E=E.next;while(E!==l)}else E===null&&(m.lanes=0);return[c.memoizedState,m.dispatch]}function up(l){var c=Bs(),m=c.queue;if(m===null)throw Error(o(311));m.lastRenderedReducer=l;var _=m.dispatch,E=m.pending,A=c.memoizedState;if(E!==null){m.pending=null;var F=E=E.next;do A=l(A,F.action),F=F.next;while(F!==E);Us(A,c.memoizedState)||(vr=!0),c.memoizedState=A,c.baseQueue===null&&(c.baseState=A),m.lastRenderedState=A}return[A,_]}function EM(){}function TM(l,c){var m=Tn,_=Bs(),E=c(),A=!Us(_.memoizedState,E);if(A&&(_.memoizedState=E,vr=!0),_=_.queue,Eh(bM.bind(null,m,_,l),[l]),_.getSnapshot!==c||A||oi!==null&&oi.memoizedState.tag&1){if(m.flags|=2048,wh(9,CM.bind(null,m,_,E,c),void 0,null),Gn===null)throw Error(o(349));Tc&30||AM(m,c,E)}return E}function AM(l,c,m){l.flags|=16384,l={getSnapshot:c,value:m},c=Tn.updateQueue,c===null?(c={lastEffect:null,stores:null},Tn.updateQueue=c,c.stores=[l]):(m=c.stores,m===null?c.stores=[l]:m.push(l))}function CM(l,c,m,_){c.value=m,c.getSnapshot=_,RM(c)&&Gr(l,1,-1)}function bM(l,c,m){return m(function(){RM(c)&&Gr(l,1,-1)})}function RM(l){var c=l.getSnapshot;l=l.value;try{var m=c();return!Us(l,m)}catch{return!0}}function ov(l){var c=vo();return typeof l=="function"&&(l=l()),c.memoizedState=c.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:sl,lastRenderedState:l},c.queue=l,l=l.dispatch=lN.bind(null,Tn,l),[c.memoizedState,l]}function wh(l,c,m,_){return l={tag:l,create:c,destroy:m,deps:_,next:null},c=Tn.updateQueue,c===null?(c={lastEffect:null,stores:null},Tn.updateQueue=c,c.lastEffect=l.next=l):(m=c.lastEffect,m===null?c.lastEffect=l.next=l:(_=m.next,m.next=l,l.next=_,c.lastEffect=l)),l}function PM(){return Bs().memoizedState}function hp(l,c,m,_){var E=vo();Tn.flags|=l,E.memoizedState=wh(1|c,m,void 0,_===void 0?null:_)}function fp(l,c,m,_){var E=Bs();_=_===void 0?null:_;var A=void 0;if(_i!==null){var F=_i.memoizedState;if(A=F.destroy,_!==null&&iv(_,F.deps)){E.memoizedState=wh(c,m,A,_);return}}Tn.flags|=l,E.memoizedState=wh(1|c,m,A,_)}function av(l,c){return hp(8390656,8,l,c)}function Eh(l,c){return fp(2048,8,l,c)}function LM(l,c){return fp(4,2,l,c)}function IM(l,c){return fp(4,4,l,c)}function NM(l,c){if(typeof c=="function")return l=l(),c(l),function(){c(null)};if(c!=null)return l=l(),c.current=l,function(){c.current=null}}function DM(l,c,m){return m=m!=null?m.concat([l]):null,fp(4,4,NM.bind(null,c,l),m)}function lv(){}function kM(l,c){var m=Bs();c=c===void 0?null:c;var _=m.memoizedState;return _!==null&&c!==null&&iv(c,_[1])?_[0]:(m.memoizedState=[l,c],l)}function UM(l,c){var m=Bs();c=c===void 0?null:c;var _=m.memoizedState;return _!==null&&c!==null&&iv(c,_[1])?_[0]:(l=l(),m.memoizedState=[l,c],l)}function oN(l,c){var m=Ft;Ft=m!==0&&4>m?m:4,l(!0);var _=Vr.transition;Vr.transition={};try{l(!1),c()}finally{Ft=m,Vr.transition=_}}function OM(){return Bs().memoizedState}function aN(l,c,m){var _=ia(l);m={lane:_,action:m,hasEagerState:!1,eagerState:null,next:null},FM(l)?zM(c,m):(BM(l,c,m),m=zi(),l=Gr(l,_,m),l!==null&&HM(l,c,_))}function lN(l,c,m){var _=ia(l),E={lane:_,action:m,hasEagerState:!1,eagerState:null,next:null};if(FM(l))zM(c,E);else{BM(l,c,E);var A=l.alternate;if(l.lanes===0&&(A===null||A.lanes===0)&&(A=c.lastRenderedReducer,A!==null))try{var F=c.lastRenderedState,W=A(F,m);if(E.hasEagerState=!0,E.eagerState=W,Us(W,F))return}catch{}finally{}m=zi(),l=Gr(l,_,m),l!==null&&HM(l,c,_)}}function FM(l){var c=l.alternate;return l===Tn||c!==null&&c===Tn}function zM(l,c){Sh=lp=!0;var m=l.pending;m===null?c.next=c:(c.next=m.next,m.next=c),l.pending=c}function BM(l,c,m){Gn!==null&&l.mode&1&&!(Ct&2)?(l=c.interleaved,l===null?(m.next=m,Fs===null?Fs=[c]:Fs.push(c)):(m.next=l.next,l.next=m),c.interleaved=m):(l=c.pending,l===null?m.next=m:(m.next=l.next,l.next=m),c.pending=m)}function HM(l,c,m){if(m&4194240){var _=c.lanes;_&=l.pendingLanes,m|=_,c.lanes=m,U1(l,m)}}var dp={readContext:Fr,useCallback:xi,useContext:xi,useEffect:xi,useImperativeHandle:xi,useInsertionEffect:xi,useLayoutEffect:xi,useMemo:xi,useReducer:xi,useRef:xi,useState:xi,useDebugValue:xi,useDeferredValue:xi,useTransition:xi,useMutableSource:xi,useSyncExternalStore:xi,useId:xi,unstable_isNewReconciler:!1},cN={readContext:Fr,useCallback:function(l,c){return vo().memoizedState=[l,c===void 0?null:c],l},useContext:Fr,useEffect:av,useImperativeHandle:function(l,c,m){return m=m!=null?m.concat([l]):null,hp(4194308,4,NM.bind(null,c,l),m)},useLayoutEffect:function(l,c){return hp(4194308,4,l,c)},useInsertionEffect:function(l,c){return hp(4,2,l,c)},useMemo:function(l,c){var m=vo();return c=c===void 0?null:c,l=l(),m.memoizedState=[l,c],l},useReducer:function(l,c,m){var _=vo();return c=m!==void 0?m(c):c,_.memoizedState=_.baseState=c,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:c},_.queue=l,l=l.dispatch=aN.bind(null,Tn,l),[_.memoizedState,l]},useRef:function(l){var c=vo();return l={current:l},c.memoizedState=l},useState:ov,useDebugValue:lv,useDeferredValue:function(l){var c=ov(l),m=c[0],_=c[1];return av(function(){var E=Vr.transition;Vr.transition={};try{_(l)}finally{Vr.transition=E}},[l]),m},useTransition:function(){var l=ov(!1),c=l[0];return l=oN.bind(null,l[1]),vo().memoizedState=l,[c,l]},useMutableSource:function(){},useSyncExternalStore:function(l,c,m){var _=Tn,E=vo();if(dn){if(m===void 0)throw Error(o(407));m=m()}else{if(m=c(),Gn===null)throw Error(o(349));Tc&30||AM(_,c,m)}E.memoizedState=m;var A={value:m,getSnapshot:c};return E.queue=A,av(bM.bind(null,_,A,l),[l]),_.flags|=2048,wh(9,CM.bind(null,_,A,m,c),void 0,null),m},useId:function(){var l=vo(),c=Gn.identifierPrefix;if(dn){var m=go,_=mo;m=(_&~(1<<32-hs(_)-1)).toString(32)+m,c=":"+c+"R"+m,m=Mh++,0<m&&(c+="H"+m.toString(32)),c+=":"}else m=sN++,c=":"+c+"r"+m.toString(32)+":";return l.memoizedState=c},unstable_isNewReconciler:!1},uN={readContext:Fr,useCallback:kM,useContext:Fr,useEffect:Eh,useImperativeHandle:DM,useInsertionEffect:LM,useLayoutEffect:IM,useMemo:UM,useReducer:cp,useRef:PM,useState:function(){return cp(sl)},useDebugValue:lv,useDeferredValue:function(l){var c=cp(sl),m=c[0],_=c[1];return Eh(function(){var E=Vr.transition;Vr.transition={};try{_(l)}finally{Vr.transition=E}},[l]),m},useTransition:function(){var l=cp(sl)[0],c=Bs().memoizedState;return[l,c]},useMutableSource:EM,useSyncExternalStore:TM,useId:OM,unstable_isNewReconciler:!1},hN={readContext:Fr,useCallback:kM,useContext:Fr,useEffect:Eh,useImperativeHandle:DM,useInsertionEffect:LM,useLayoutEffect:IM,useMemo:UM,useReducer:up,useRef:PM,useState:function(){return up(sl)},useDebugValue:lv,useDeferredValue:function(l){var c=up(sl),m=c[0],_=c[1];return Eh(function(){var E=Vr.transition;Vr.transition={};try{_(l)}finally{Vr.transition=E}},[l]),m},useTransition:function(){var l=up(sl)[0],c=Bs().memoizedState;return[l,c]},useMutableSource:EM,useSyncExternalStore:TM,useId:OM,unstable_isNewReconciler:!1};function cv(l,c){try{var m="",_=c;do m+=rN(_),_=_.return;while(_);var E=m}catch(A){E=`
Error generating stack: `+A.message+`
`+A.stack}return{value:l,source:c,stack:E}}function uv(l,c){try{console.error(c.value)}catch(m){setTimeout(function(){throw m})}}var fN=typeof WeakMap=="function"?WeakMap:Map;function VM(l,c,m){m=po(-1,m),m.tag=3,m.payload={element:null};var _=c.value;return m.callback=function(){Rp||(Rp=!0,bv=_),uv(l,c)},m}function GM(l,c,m){m=po(-1,m),m.tag=3;var _=l.type.getDerivedStateFromError;if(typeof _=="function"){var E=c.value;m.payload=function(){return _(E)},m.callback=function(){uv(l,c)}}var A=l.stateNode;return A!==null&&typeof A.componentDidCatch=="function"&&(m.callback=function(){uv(l,c),typeof _!="function"&&(ta===null?ta=new Set([this]):ta.add(this));var F=c.stack;this.componentDidCatch(c.value,{componentStack:F!==null?F:""})}),m}function WM(l,c,m){var _=l.pingCache;if(_===null){_=l.pingCache=new fN;var E=new Set;_.set(c,E)}else E=_.get(c),E===void 0&&(E=new Set,_.set(c,E));E.has(m)||(E.add(m),l=AN.bind(null,l,c,m),c.then(l,l))}function XM(l){do{var c;if((c=l.tag===13)&&(c=l.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return l;l=l.return}while(l!==null);return null}function jM(l,c,m,_,E){return l.mode&1?(l.flags|=65536,l.lanes=E,l):(l===c?l.flags|=65536:(l.flags|=128,m.flags|=131072,m.flags&=-52805,m.tag===1&&(m.alternate===null?m.tag=17:(c=po(-1,1),c.tag=2,ea(m,c))),m.lanes|=1),l)}function Hs(l){l.flags|=4}function YM(l,c){if(l!==null&&l.child===c.child)return!0;if(c.flags&16)return!1;for(l=c.child;l!==null;){if(l.flags&12854||l.subtreeFlags&12854)return!1;l=l.sibling}return!0}var Th,Ah,pp,mp;if(ut)Th=function(l,c){for(var m=c.child;m!==null;){if(m.tag===5||m.tag===6)we(l,m.stateNode);else if(m.tag!==4&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===c)break;for(;m.sibling===null;){if(m.return===null||m.return===c)return;m=m.return}m.sibling.return=m.return,m=m.sibling}},Ah=function(){},pp=function(l,c,m,_,E){if(l=l.memoizedProps,l!==_){var A=c.stateNode,F=zs(Hr.current);m=ee(A,m,l,_,E,F),(c.updateQueue=m)&&Hs(c)}},mp=function(l,c,m,_){m!==_&&Hs(c)};else if(ce){Th=function(l,c,m,_){for(var E=c.child;E!==null;){if(E.tag===5){var A=E.stateNode;m&&_&&(A=Kn(A,E.type,E.memoizedProps,E)),we(l,A)}else if(E.tag===6)A=E.stateNode,m&&_&&(A=hn(A,E.memoizedProps,E)),we(l,A);else if(E.tag!==4){if(E.tag===22&&E.memoizedState!==null)A=E.child,A!==null&&(A.return=E),Th(l,E,!0,!0);else if(E.child!==null){E.child.return=E,E=E.child;continue}}if(E===c)break;for(;E.sibling===null;){if(E.return===null||E.return===c)return;E=E.return}E.sibling.return=E.return,E=E.sibling}};var $M=function(l,c,m,_){for(var E=c.child;E!==null;){if(E.tag===5){var A=E.stateNode;m&&_&&(A=Kn(A,E.type,E.memoizedProps,E)),Nt(l,A)}else if(E.tag===6)A=E.stateNode,m&&_&&(A=hn(A,E.memoizedProps,E)),Nt(l,A);else if(E.tag!==4){if(E.tag===22&&E.memoizedState!==null)A=E.child,A!==null&&(A.return=E),$M(l,E,!0,!0);else if(E.child!==null){E.child.return=E,E=E.child;continue}}if(E===c)break;for(;E.sibling===null;){if(E.return===null||E.return===c)return;E=E.return}E.sibling.return=E.return,E=E.sibling}};Ah=function(l,c){var m=c.stateNode;if(!YM(l,c)){l=m.containerInfo;var _=Gt(l);$M(_,c,!1,!1),m.pendingChildren=_,Hs(c),Zt(l,_)}},pp=function(l,c,m,_,E){var A=l.stateNode,F=l.memoizedProps;if((l=YM(l,c))&&F===_)c.stateNode=A;else{var W=c.stateNode,le=zs(Hr.current),Ae=null;F!==_&&(Ae=ee(W,m,F,_,E,le)),l&&Ae===null?c.stateNode=A:(A=It(A,Ae,m,F,_,c,l,W),Be(A,m,_,E,le)&&Hs(c),c.stateNode=A,l?Hs(c):Th(A,c,!1,!1))}},mp=function(l,c,m,_){m!==_?(l=zs(wc.current),m=zs(Hr.current),c.stateNode=Ce(_,l,m,c),Hs(c)):c.stateNode=l.stateNode}}else Ah=function(){},pp=function(){},mp=function(){};function Ch(l,c){if(!dn)switch(l.tailMode){case"hidden":c=l.tail;for(var m=null;c!==null;)c.alternate!==null&&(m=c),c=c.sibling;m===null?l.tail=null:m.sibling=null;break;case"collapsed":m=l.tail;for(var _=null;m!==null;)m.alternate!==null&&(_=m),m=m.sibling;_===null?c||l.tail===null?l.tail=null:l.tail.sibling=null:_.sibling=null}}function Si(l){var c=l.alternate!==null&&l.alternate.child===l.child,m=0,_=0;if(c)for(var E=l.child;E!==null;)m|=E.lanes|E.childLanes,_|=E.subtreeFlags&14680064,_|=E.flags&14680064,E.return=l,E=E.sibling;else for(E=l.child;E!==null;)m|=E.lanes|E.childLanes,_|=E.subtreeFlags,_|=E.flags,E.return=l,E=E.sibling;return l.subtreeFlags|=_,l.childLanes=m,c}function dN(l,c,m){var _=c.pendingProps;switch(q1(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Si(c),null;case 1:return _n(c.type)&&Jo(),Si(c),null;case 3:return _=c.stateNode,Ec(),Wt(Vn),Wt(Jn),nv(),_.pendingContext&&(_.context=_.pendingContext,_.pendingContext=null),(l===null||l.child===null)&&(vh(c)?Hs(c):l===null||l.memoizedState.isDehydrated&&!(c.flags&256)||(c.flags|=1024,ds!==null&&(Lv(ds),ds=null))),Ah(l,c),Si(c),null;case 5:ev(c),m=zs(wc.current);var E=c.type;if(l!==null&&c.stateNode!=null)pp(l,c,E,_,m),l.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!_){if(c.stateNode===null)throw Error(o(166));return Si(c),null}if(l=zs(Hr.current),vh(c)){if(!ge)throw Error(o(175));l=N1(c.stateNode,c.type,c.memoizedProps,m,l,c,!gh),c.updateQueue=l,l!==null&&Hs(c)}else{var A=re(E,_,m,l,c);Th(A,c,!1,!1),c.stateNode=A,Be(A,E,_,m,l)&&Hs(c)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return Si(c),null;case 6:if(l&&c.stateNode!=null)mp(l,c,l.memoizedProps,_);else{if(typeof _!="string"&&c.stateNode===null)throw Error(o(166));if(l=zs(wc.current),m=zs(Hr.current),vh(c)){if(!ge)throw Error(o(176));if(l=c.stateNode,_=c.memoizedProps,(m=D(l,_,c,!gh))&&(E=mr,E!==null))switch(A=(E.mode&1)!==0,E.tag){case 3:lt(E.stateNode.containerInfo,l,_,A);break;case 5:pt(E.type,E.memoizedProps,E.stateNode,l,_,A)}m&&Hs(c)}else c.stateNode=Ce(_,l,m,c)}return Si(c),null;case 13:if(Wt(xn),_=c.memoizedState,dn&&gr!==null&&c.mode&1&&!(c.flags&128)){for(l=gr;l;)l=Ko(l);return Sc(),c.flags|=98560,c}if(_!==null&&_.dehydrated!==null){if(_=vh(c),l===null){if(!_)throw Error(o(318));if(!ge)throw Error(o(344));if(l=c.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(o(317));q(l,c)}else Sc(),!(c.flags&128)&&(c.memoizedState=null),c.flags|=4;return Si(c),null}return ds!==null&&(Lv(ds),ds=null),c.flags&128?(c.lanes=m,c):(_=_!==null,m=!1,l===null?vh(c):m=l.memoizedState!==null,_&&!m&&(c.child.flags|=8192,c.mode&1&&(l===null||xn.current&1?Qn===0&&(Qn=3):Nv())),c.updateQueue!==null&&(c.flags|=4),Si(c),null);case 4:return Ec(),Ah(l,c),l===null&&Pe(c.stateNode.containerInfo),Si(c),null;case 10:return G1(c.type._context),Si(c),null;case 17:return _n(c.type)&&Jo(),Si(c),null;case 19:if(Wt(xn),E=c.memoizedState,E===null)return Si(c),null;if(_=(c.flags&128)!==0,A=E.rendering,A===null)if(_)Ch(E,!1);else{if(Qn!==0||l!==null&&l.flags&128)for(l=c.child;l!==null;){if(A=op(l),A!==null){for(c.flags|=128,Ch(E,!1),l=A.updateQueue,l!==null&&(c.updateQueue=l,c.flags|=4),c.subtreeFlags=0,l=m,_=c.child;_!==null;)m=_,E=l,m.flags&=14680066,A=m.alternate,A===null?(m.childLanes=0,m.lanes=E,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=A.childLanes,m.lanes=A.lanes,m.child=A.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=A.memoizedProps,m.memoizedState=A.memoizedState,m.updateQueue=A.updateQueue,m.type=A.type,E=A.dependencies,m.dependencies=E===null?null:{lanes:E.lanes,firstContext:E.firstContext}),_=_.sibling;return at(xn,xn.current&1|2),c.child}l=l.sibling}E.tail!==null&&si()>Cv&&(c.flags|=128,_=!0,Ch(E,!1),c.lanes=4194304)}else{if(!_)if(l=op(A),l!==null){if(c.flags|=128,_=!0,l=l.updateQueue,l!==null&&(c.updateQueue=l,c.flags|=4),Ch(E,!0),E.tail===null&&E.tailMode==="hidden"&&!A.alternate&&!dn)return Si(c),null}else 2*si()-E.renderingStartTime>Cv&&m!==1073741824&&(c.flags|=128,_=!0,Ch(E,!1),c.lanes=4194304);E.isBackwards?(A.sibling=c.child,c.child=A):(l=E.last,l!==null?l.sibling=A:c.child=A,E.last=A)}return E.tail!==null?(c=E.tail,E.rendering=c,E.tail=c.sibling,E.renderingStartTime=si(),c.sibling=null,l=xn.current,at(xn,_?l&1|2:l&1),c):(Si(c),null);case 22:case 23:return Iv(),_=c.memoizedState!==null,l!==null&&l.memoizedState!==null!==_&&(c.flags|=8192),_&&c.mode&1?yr&1073741824&&(Si(c),ut&&c.subtreeFlags&6&&(c.flags|=8192)):Si(c),null;case 24:return null;case 25:return null}throw Error(o(156,c.tag))}var pN=a.ReactCurrentOwner,vr=!1;function Fi(l,c,m,_){c.child=l===null?MM(c,null,m,_):Mc(c,l.child,m,_)}function qM(l,c,m,_,E){m=m.render;var A=c.ref;return yc(c,E),_=rv(l,c,m,_,A,E),m=sv(),l!==null&&!vr?(c.updateQueue=l.updateQueue,c.flags&=-2053,l.lanes&=~E,yo(l,c,E)):(dn&&m&&$1(c),c.flags|=1,Fi(l,c,_,E),c.child)}function ZM(l,c,m,_,E){if(l===null){var A=m.type;return typeof A=="function"&&!Dv(A)&&A.defaultProps===void 0&&m.compare===null&&m.defaultProps===void 0?(c.tag=15,c.type=A,KM(l,c,A,_,E)):(l=Up(m.type,null,_,c,c.mode,E),l.ref=c.ref,l.return=c,c.child=l)}if(A=l.child,!(l.lanes&E)){var F=A.memoizedProps;if(m=m.compare,m=m!==null?m:Kd,m(F,_)&&l.ref===c.ref)return yo(l,c,E)}return c.flags|=1,l=sa(A,_),l.ref=c.ref,l.return=c,c.child=l}function KM(l,c,m,_,E){if(l!==null&&Kd(l.memoizedProps,_)&&l.ref===c.ref)if(vr=!1,(l.lanes&E)!==0)l.flags&131072&&(vr=!0);else return c.lanes=l.lanes,yo(l,c,E);return hv(l,c,m,_,E)}function JM(l,c,m){var _=c.pendingProps,E=_.children,A=l!==null?l.memoizedState:null;if(_.mode==="hidden")if(!(c.mode&1))c.memoizedState={baseLanes:0,cachePool:null},at(Ac,yr),yr|=m;else if(m&1073741824)c.memoizedState={baseLanes:0,cachePool:null},_=A!==null?A.baseLanes:m,at(Ac,yr),yr|=_;else return l=A!==null?A.baseLanes|m:m,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:l,cachePool:null},c.updateQueue=null,at(Ac,yr),yr|=l,null;else A!==null?(_=A.baseLanes|m,c.memoizedState=null):_=m,at(Ac,yr),yr|=_;return Fi(l,c,E,m),c.child}function QM(l,c){var m=c.ref;(l===null&&m!==null||l!==null&&l.ref!==m)&&(c.flags|=512,c.flags|=2097152)}function hv(l,c,m,_,E){var A=_n(m)?us:Jn.current;return A=yn(c,A),yc(c,E),m=rv(l,c,m,_,A,E),_=sv(),l!==null&&!vr?(c.updateQueue=l.updateQueue,c.flags&=-2053,l.lanes&=~E,yo(l,c,E)):(dn&&_&&$1(c),c.flags|=1,Fi(l,c,m,E),c.child)}function ew(l,c,m,_,E){if(_n(m)){var A=!0;gc(c)}else A=!1;if(yc(c,E),c.stateNode===null)l!==null&&(l.alternate=null,c.alternate=null,c.flags|=2),pM(c,m,_),Y1(c,m,_,E),_=!0;else if(l===null){var F=c.stateNode,W=c.memoizedProps;F.props=W;var le=F.context,Ae=m.contextType;typeof Ae=="object"&&Ae!==null?Ae=Fr(Ae):(Ae=_n(m)?us:Jn.current,Ae=yn(c,Ae));var We=m.getDerivedStateFromProps,yt=typeof We=="function"||typeof F.getSnapshotBeforeUpdate=="function";yt||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(W!==_||le!==Ae)&&mM(c,F,_,Ae),Qo=!1;var rt=c.memoizedState;F.state=rt,tp(c,_,F,E),le=c.memoizedState,W!==_||rt!==le||Vn.current||Qo?(typeof We=="function"&&(j1(c,m,We,_),le=c.memoizedState),(W=Qo||dM(c,m,W,_,rt,le,Ae))?(yt||typeof F.UNSAFE_componentWillMount!="function"&&typeof F.componentWillMount!="function"||(typeof F.componentWillMount=="function"&&F.componentWillMount(),typeof F.UNSAFE_componentWillMount=="function"&&F.UNSAFE_componentWillMount()),typeof F.componentDidMount=="function"&&(c.flags|=4194308)):(typeof F.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=_,c.memoizedState=le),F.props=_,F.state=le,F.context=Ae,_=W):(typeof F.componentDidMount=="function"&&(c.flags|=4194308),_=!1)}else{F=c.stateNode,cM(l,c),W=c.memoizedProps,Ae=c.type===c.elementType?W:fs(c.type,W),F.props=Ae,yt=c.pendingProps,rt=F.context,le=m.contextType,typeof le=="object"&&le!==null?le=Fr(le):(le=_n(m)?us:Jn.current,le=yn(c,le));var Jt=m.getDerivedStateFromProps;(We=typeof Jt=="function"||typeof F.getSnapshotBeforeUpdate=="function")||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(W!==yt||rt!==le)&&mM(c,F,_,le),Qo=!1,rt=c.memoizedState,F.state=rt,tp(c,_,F,E);var et=c.memoizedState;W!==yt||rt!==et||Vn.current||Qo?(typeof Jt=="function"&&(j1(c,m,Jt,_),et=c.memoizedState),(Ae=Qo||dM(c,m,Ae,_,rt,et,le)||!1)?(We||typeof F.UNSAFE_componentWillUpdate!="function"&&typeof F.componentWillUpdate!="function"||(typeof F.componentWillUpdate=="function"&&F.componentWillUpdate(_,et,le),typeof F.UNSAFE_componentWillUpdate=="function"&&F.UNSAFE_componentWillUpdate(_,et,le)),typeof F.componentDidUpdate=="function"&&(c.flags|=4),typeof F.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof F.componentDidUpdate!="function"||W===l.memoizedProps&&rt===l.memoizedState||(c.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||W===l.memoizedProps&&rt===l.memoizedState||(c.flags|=1024),c.memoizedProps=_,c.memoizedState=et),F.props=_,F.state=et,F.context=le,_=Ae):(typeof F.componentDidUpdate!="function"||W===l.memoizedProps&&rt===l.memoizedState||(c.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||W===l.memoizedProps&&rt===l.memoizedState||(c.flags|=1024),_=!1)}return fv(l,c,m,_,A,E)}function fv(l,c,m,_,E,A){QM(l,c);var F=(c.flags&128)!==0;if(!_&&!F)return E&&dh(c,m,!1),yo(l,c,A);_=c.stateNode,pN.current=c;var W=F&&typeof m.getDerivedStateFromError!="function"?null:_.render();return c.flags|=1,l!==null&&F?(c.child=Mc(c,l.child,null,A),c.child=Mc(c,null,W,A)):Fi(l,c,W,A),c.memoizedState=_.state,E&&dh(c,m,!0),c.child}function tw(l){var c=l.stateNode;c.pendingContext?Oi(l,c.pendingContext,c.pendingContext!==c.context):c.context&&Oi(l,c.context,!1),Q1(l,c.containerInfo)}function nw(l,c,m,_,E){return Sc(),J1(E),c.flags|=256,Fi(l,c,m,_),c.child}var gp={dehydrated:null,treeContext:null,retryLane:0};function vp(l){return{baseLanes:l,cachePool:null}}function iw(l,c,m){var _=c.pendingProps,E=xn.current,A=!1,F=(c.flags&128)!==0,W;if((W=F)||(W=l!==null&&l.memoizedState===null?!1:(E&2)!==0),W?(A=!0,c.flags&=-129):(l===null||l.memoizedState!==null)&&(E|=1),at(xn,E&1),l===null)return K1(c),l=c.memoizedState,l!==null&&(l=l.dehydrated,l!==null)?(c.mode&1?dc(l)?c.lanes=8:c.lanes=1073741824:c.lanes=1,null):(E=_.children,l=_.fallback,A?(_=c.mode,A=c.child,E={mode:"hidden",children:E},!(_&1)&&A!==null?(A.childLanes=0,A.pendingProps=E):A=Op(E,_,0,null),l=hl(l,_,m,null),A.return=c,l.return=c,A.sibling=l,c.child=A,c.child.memoizedState=vp(m),c.memoizedState=gp,l):dv(c,E));if(E=l.memoizedState,E!==null){if(W=E.dehydrated,W!==null){if(F)return c.flags&256?(c.flags&=-257,yp(l,c,m,Error(o(422)))):c.memoizedState!==null?(c.child=l.child,c.flags|=128,null):(A=_.fallback,E=c.mode,_=Op({mode:"visible",children:_.children},E,0,null),A=hl(A,E,m,null),A.flags|=2,_.return=c,A.return=c,_.sibling=A,c.child=_,c.mode&1&&Mc(c,l.child,null,m),c.child.memoizedState=vp(m),c.memoizedState=gp,A);if(!(c.mode&1))c=yp(l,c,m,null);else if(dc(W))c=yp(l,c,m,Error(o(419)));else if(_=(m&l.childLanes)!==0,vr||_){if(_=Gn,_!==null){switch(m&-m){case 4:A=2;break;case 16:A=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:A=32;break;case 536870912:A=268435456;break;default:A=0}_=A&(_.suspendedLanes|m)?0:A,_!==0&&_!==E.retryLane&&(E.retryLane=_,Gr(l,_,-1))}Nv(),c=yp(l,c,m,Error(o(421)))}else nl(W)?(c.flags|=128,c.child=l.child,c=CN.bind(null,l),pc(W,c),c=null):(m=E.treeContext,ge&&(gr=I1(W),mr=c,dn=!0,ds=null,gh=!1,m!==null&&(zr[Br++]=mo,zr[Br++]=go,zr[Br++]=il,mo=m.id,go=m.overflow,il=c)),c=dv(c,c.pendingProps.children),c.flags|=4096);return c}return A?(_=sw(l,c,_.children,_.fallback,m),A=c.child,E=l.child.memoizedState,A.memoizedState=E===null?vp(m):{baseLanes:E.baseLanes|m,cachePool:null},A.childLanes=l.childLanes&~m,c.memoizedState=gp,_):(m=rw(l,c,_.children,m),c.memoizedState=null,m)}return A?(_=sw(l,c,_.children,_.fallback,m),A=c.child,E=l.child.memoizedState,A.memoizedState=E===null?vp(m):{baseLanes:E.baseLanes|m,cachePool:null},A.childLanes=l.childLanes&~m,c.memoizedState=gp,_):(m=rw(l,c,_.children,m),c.memoizedState=null,m)}function dv(l,c){return c=Op({mode:"visible",children:c},l.mode,0,null),c.return=l,l.child=c}function rw(l,c,m,_){var E=l.child;return l=E.sibling,m=sa(E,{mode:"visible",children:m}),!(c.mode&1)&&(m.lanes=_),m.return=c,m.sibling=null,l!==null&&(_=c.deletions,_===null?(c.deletions=[l],c.flags|=16):_.push(l)),c.child=m}function sw(l,c,m,_,E){var A=c.mode;l=l.child;var F=l.sibling,W={mode:"hidden",children:m};return!(A&1)&&c.child!==l?(m=c.child,m.childLanes=0,m.pendingProps=W,c.deletions=null):(m=sa(l,W),m.subtreeFlags=l.subtreeFlags&14680064),F!==null?_=sa(F,_):(_=hl(_,A,E,null),_.flags|=2),_.return=c,m.return=c,m.sibling=_,c.child=m,_}function yp(l,c,m,_){return _!==null&&J1(_),Mc(c,l.child,null,m),l=dv(c,c.pendingProps.children),l.flags|=2,c.memoizedState=null,l}function ow(l,c,m){l.lanes|=c;var _=l.alternate;_!==null&&(_.lanes|=c),W1(l.return,c,m)}function pv(l,c,m,_,E){var A=l.memoizedState;A===null?l.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:_,tail:m,tailMode:E}:(A.isBackwards=c,A.rendering=null,A.renderingStartTime=0,A.last=_,A.tail=m,A.tailMode=E)}function aw(l,c,m){var _=c.pendingProps,E=_.revealOrder,A=_.tail;if(Fi(l,c,_.children,m),_=xn.current,_&2)_=_&1|2,c.flags|=128;else{if(l!==null&&l.flags&128)e:for(l=c.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&ow(l,m,c);else if(l.tag===19)ow(l,m,c);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===c)break e;for(;l.sibling===null;){if(l.return===null||l.return===c)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}_&=1}if(at(xn,_),!(c.mode&1))c.memoizedState=null;else switch(E){case"forwards":for(m=c.child,E=null;m!==null;)l=m.alternate,l!==null&&op(l)===null&&(E=m),m=m.sibling;m=E,m===null?(E=c.child,c.child=null):(E=m.sibling,m.sibling=null),pv(c,!1,E,m,A);break;case"backwards":for(m=null,E=c.child,c.child=null;E!==null;){if(l=E.alternate,l!==null&&op(l)===null){c.child=E;break}l=E.sibling,E.sibling=m,m=E,E=l}pv(c,!0,m,null,A);break;case"together":pv(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function yo(l,c,m){if(l!==null&&(c.dependencies=l.dependencies),Cc|=c.lanes,!(m&c.childLanes))return null;if(l!==null&&c.child!==l.child)throw Error(o(153));if(c.child!==null){for(l=c.child,m=sa(l,l.pendingProps),c.child=m,m.return=c;l.sibling!==null;)l=l.sibling,m=m.sibling=sa(l,l.pendingProps),m.return=c;m.sibling=null}return c.child}function mN(l,c,m){switch(c.tag){case 3:tw(c),Sc();break;case 5:wM(c);break;case 1:_n(c.type)&&gc(c);break;case 4:Q1(c,c.stateNode.containerInfo);break;case 10:lM(c,c.type._context,c.memoizedProps.value);break;case 13:var _=c.memoizedState;if(_!==null)return _.dehydrated!==null?(at(xn,xn.current&1),c.flags|=128,null):m&c.child.childLanes?iw(l,c,m):(at(xn,xn.current&1),l=yo(l,c,m),l!==null?l.sibling:null);at(xn,xn.current&1);break;case 19:if(_=(m&c.childLanes)!==0,l.flags&128){if(_)return aw(l,c,m);c.flags|=128}var E=c.memoizedState;if(E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),at(xn,xn.current),_)break;return null;case 22:case 23:return c.lanes=0,JM(l,c,m)}return yo(l,c,m)}function gN(l,c){switch(q1(c),c.tag){case 1:return _n(c.type)&&Jo(),l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 3:return Ec(),Wt(Vn),Wt(Jn),nv(),l=c.flags,l&65536&&!(l&128)?(c.flags=l&-65537|128,c):null;case 5:return ev(c),null;case 13:if(Wt(xn),l=c.memoizedState,l!==null&&l.dehydrated!==null){if(c.alternate===null)throw Error(o(340));Sc()}return l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 19:return Wt(xn),null;case 4:return Ec(),null;case 10:return G1(c.type._context),null;case 22:case 23:return Iv(),null;case 24:return null;default:return null}}var _p=!1,ol=!1,vN=typeof WeakSet=="function"?WeakSet:Set,Ue=null;function xp(l,c){var m=l.ref;if(m!==null)if(typeof m=="function")try{m(null)}catch(_){Qi(l,c,_)}else m.current=null}function mv(l,c,m){try{m()}catch(_){Qi(l,c,_)}}var lw=!1;function yN(l,c){for(X(l.containerInfo),Ue=c;Ue!==null;)if(l=Ue,c=l.child,(l.subtreeFlags&1028)!==0&&c!==null)c.return=l,Ue=c;else for(;Ue!==null;){l=Ue;try{var m=l.alternate;if(l.flags&1024)switch(l.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var _=m.memoizedProps,E=m.memoizedState,A=l.stateNode,F=A.getSnapshotBeforeUpdate(l.elementType===l.type?_:fs(l.type,_),E);A.__reactInternalSnapshotBeforeUpdate=F}break;case 3:ut&&Ne(l.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(W){Qi(l,l.return,W)}if(c=l.sibling,c!==null){c.return=l.return,Ue=c;break}Ue=l.return}return m=lw,lw=!1,m}function al(l,c,m){var _=c.updateQueue;if(_=_!==null?_.lastEffect:null,_!==null){var E=_=_.next;do{if((E.tag&l)===l){var A=E.destroy;E.destroy=void 0,A!==void 0&&mv(c,m,A)}E=E.next}while(E!==_)}}function bh(l,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var m=c=c.next;do{if((m.tag&l)===l){var _=m.create;m.destroy=_()}m=m.next}while(m!==c)}}function gv(l){var c=l.ref;if(c!==null){var m=l.stateNode;switch(l.tag){case 5:l=fe(m);break;default:l=m}typeof c=="function"?c(l):c.current=l}}function cw(l,c,m){if(ks&&typeof ks.onCommitFiberUnmount=="function")try{ks.onCommitFiberUnmount(qd,c)}catch{}switch(c.tag){case 0:case 11:case 14:case 15:if(l=c.updateQueue,l!==null&&(l=l.lastEffect,l!==null)){var _=l=l.next;do{var E=_,A=E.destroy;E=E.tag,A!==void 0&&(E&2||E&4)&&mv(c,m,A),_=_.next}while(_!==l)}break;case 1:if(xp(c,m),l=c.stateNode,typeof l.componentWillUnmount=="function")try{l.props=c.memoizedProps,l.state=c.memoizedState,l.componentWillUnmount()}catch(F){Qi(c,m,F)}break;case 5:xp(c,m);break;case 4:ut?mw(l,c,m):ce&&ce&&(c=c.stateNode.containerInfo,m=Gt(c),bt(c,m))}}function uw(l,c,m){for(var _=c;;)if(cw(l,_,m),_.child===null||ut&&_.tag===4){if(_===c)break;for(;_.sibling===null;){if(_.return===null||_.return===c)return;_=_.return}_.sibling.return=_.return,_=_.sibling}else _.child.return=_,_=_.child}function hw(l){var c=l.alternate;c!==null&&(l.alternate=null,hw(c)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(c=l.stateNode,c!==null&&Fe(c)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function fw(l){return l.tag===5||l.tag===3||l.tag===4}function dw(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||fw(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function pw(l){if(ut){e:{for(var c=l.return;c!==null;){if(fw(c))break e;c=c.return}throw Error(o(160))}var m=c;switch(m.tag){case 5:c=m.stateNode,m.flags&32&&(ue(c),m.flags&=-33),m=dw(l),yv(l,m,c);break;case 3:case 4:c=m.stateNode.containerInfo,m=dw(l),vv(l,m,c);break;default:throw Error(o(161))}}}function vv(l,c,m){var _=l.tag;if(_===5||_===6)l=l.stateNode,c?dt(m,l,c):be(m,l);else if(_!==4&&(l=l.child,l!==null))for(vv(l,c,m),l=l.sibling;l!==null;)vv(l,c,m),l=l.sibling}function yv(l,c,m){var _=l.tag;if(_===5||_===6)l=l.stateNode,c?He(m,l,c):ht(m,l);else if(_!==4&&(l=l.child,l!==null))for(yv(l,c,m),l=l.sibling;l!==null;)yv(l,c,m),l=l.sibling}function mw(l,c,m){for(var _=c,E=!1,A,F;;){if(!E){E=_.return;e:for(;;){if(E===null)throw Error(o(160));switch(A=E.stateNode,E.tag){case 5:F=!1;break e;case 3:A=A.containerInfo,F=!0;break e;case 4:A=A.containerInfo,F=!0;break e}E=E.return}E=!0}if(_.tag===5||_.tag===6)uw(l,_,m),F?G(A,_.stateNode):wt(A,_.stateNode);else if(_.tag===18)F?Ye(A,_.stateNode):ke(A,_.stateNode);else if(_.tag===4){if(_.child!==null){A=_.stateNode.containerInfo,F=!0,_.child.return=_,_=_.child;continue}}else if(cw(l,_,m),_.child!==null){_.child.return=_,_=_.child;continue}if(_===c)break;for(;_.sibling===null;){if(_.return===null||_.return===c)return;_=_.return,_.tag===4&&(E=!1)}_.sibling.return=_.return,_=_.sibling}}function _v(l,c){if(ut){switch(c.tag){case 0:case 11:case 14:case 15:al(3,c,c.return),bh(3,c),al(5,c,c.return);return;case 1:return;case 5:var m=c.stateNode;if(m!=null){var _=c.memoizedProps;l=l!==null?l.memoizedProps:_;var E=c.type,A=c.updateQueue;c.updateQueue=null,A!==null&&it(m,A,E,l,_,c)}return;case 6:if(c.stateNode===null)throw Error(o(162));m=c.memoizedProps,$e(c.stateNode,l!==null?l.memoizedProps:m,m);return;case 3:ge&&l!==null&&l.memoizedState.isDehydrated&&Q(c.stateNode.containerInfo);return;case 12:return;case 13:Sp(c);return;case 19:Sp(c);return;case 17:return}throw Error(o(163))}switch(c.tag){case 0:case 11:case 14:case 15:al(3,c,c.return),bh(3,c),al(5,c,c.return);return;case 12:return;case 13:Sp(c);return;case 19:Sp(c);return;case 3:ge&&l!==null&&l.memoizedState.isDehydrated&&Q(c.stateNode.containerInfo);break;case 22:case 23:return}e:if(ce){switch(c.tag){case 1:case 5:case 6:break e;case 3:case 4:c=c.stateNode,bt(c.containerInfo,c.pendingChildren);break e}throw Error(o(163))}}function Sp(l){var c=l.updateQueue;if(c!==null){l.updateQueue=null;var m=l.stateNode;m===null&&(m=l.stateNode=new vN),c.forEach(function(_){var E=bN.bind(null,l,_);m.has(_)||(m.add(_),_.then(E,E))})}}function _N(l,c){for(Ue=c;Ue!==null;){c=Ue;var m=c.deletions;if(m!==null)for(var _=0;_<m.length;_++){var E=m[_];try{var A=l;ut?mw(A,E,c):uw(A,E,c);var F=E.alternate;F!==null&&(F.return=null),E.return=null}catch(Je){Qi(E,c,Je)}}if(m=c.child,c.subtreeFlags&12854&&m!==null)m.return=c,Ue=m;else for(;Ue!==null;){c=Ue;try{var W=c.flags;if(W&32&&ut&&ue(c.stateNode),W&512){var le=c.alternate;if(le!==null){var Ae=le.ref;Ae!==null&&(typeof Ae=="function"?Ae(null):Ae.current=null)}}if(W&8192)switch(c.tag){case 13:if(c.memoizedState!==null){var We=c.alternate;(We===null||We.memoizedState===null)&&(Av=si())}break;case 22:var yt=c.memoizedState!==null,rt=c.alternate,Jt=rt!==null&&rt.memoizedState!==null;if(m=c,ut){e:if(_=m,E=yt,A=null,ut)for(var et=_;;){if(et.tag===5){if(A===null){A=et;var Mi=et.stateNode;E?B(Mi):ae(et.stateNode,et.memoizedProps)}}else if(et.tag===6){if(A===null){var Xr=et.stateNode;E?oe(Xr):Re(Xr,et.memoizedProps)}}else if((et.tag!==22&&et.tag!==23||et.memoizedState===null||et===_)&&et.child!==null){et.child.return=et,et=et.child;continue}if(et===_)break;for(;et.sibling===null;){if(et.return===null||et.return===_)break e;A===et&&(A=null),et=et.return}A===et&&(A=null),et.sibling.return=et.return,et=et.sibling}}if(yt&&!Jt&&m.mode&1){Ue=m;for(var K=m.child;K!==null;){for(m=Ue=K;Ue!==null;){_=Ue;var Y=_.child;switch(_.tag){case 0:case 11:case 14:case 15:al(4,_,_.return);break;case 1:xp(_,_.return);var se=_.stateNode;if(typeof se.componentWillUnmount=="function"){var Oe=_.return;try{se.props=_.memoizedProps,se.state=_.memoizedState,se.componentWillUnmount()}catch(Je){Qi(_,Oe,Je)}}break;case 5:xp(_,_.return);break;case 22:if(_.memoizedState!==null){yw(m);continue}}Y!==null?(Y.return=_,Ue=Y):yw(m)}K=K.sibling}}}switch(W&4102){case 2:pw(c),c.flags&=-3;break;case 6:pw(c),c.flags&=-3,_v(c.alternate,c);break;case 4096:c.flags&=-4097;break;case 4100:c.flags&=-4097,_v(c.alternate,c);break;case 4:_v(c.alternate,c)}}catch(Je){Qi(c,c.return,Je)}if(m=c.sibling,m!==null){m.return=c.return,Ue=m;break}Ue=c.return}}}function xN(l,c,m){Ue=l,gw(l)}function gw(l,c,m){for(var _=(l.mode&1)!==0;Ue!==null;){var E=Ue,A=E.child;if(E.tag===22&&_){var F=E.memoizedState!==null||_p;if(!F){var W=E.alternate,le=W!==null&&W.memoizedState!==null||ol;W=_p;var Ae=ol;if(_p=F,(ol=le)&&!Ae)for(Ue=E;Ue!==null;)F=Ue,le=F.child,F.tag===22&&F.memoizedState!==null?_w(E):le!==null?(le.return=F,Ue=le):_w(E);for(;A!==null;)Ue=A,gw(A),A=A.sibling;Ue=E,_p=W,ol=Ae}vw(l)}else E.subtreeFlags&8772&&A!==null?(A.return=E,Ue=A):vw(l)}}function vw(l){for(;Ue!==null;){var c=Ue;if(c.flags&8772){var m=c.alternate;try{if(c.flags&8772)switch(c.tag){case 0:case 11:case 15:ol||bh(5,c);break;case 1:var _=c.stateNode;if(c.flags&4&&!ol)if(m===null)_.componentDidMount();else{var E=c.elementType===c.type?m.memoizedProps:fs(c.type,m.memoizedProps);_.componentDidUpdate(E,m.memoizedState,_.__reactInternalSnapshotBeforeUpdate)}var A=c.updateQueue;A!==null&&hM(c,A,_);break;case 3:var F=c.updateQueue;if(F!==null){if(m=null,c.child!==null)switch(c.child.tag){case 5:m=fe(c.child.stateNode);break;case 1:m=c.child.stateNode}hM(c,F,m)}break;case 5:var W=c.stateNode;m===null&&c.flags&4&&Mt(W,c.type,c.memoizedProps,c);break;case 6:break;case 4:break;case 12:break;case 13:if(ge&&c.memoizedState===null){var le=c.alternate;if(le!==null){var Ae=le.memoizedState;if(Ae!==null){var We=Ae.dehydrated;We!==null&&te(We)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}ol||c.flags&512&&gv(c)}catch(yt){Qi(c,c.return,yt)}}if(c===l){Ue=null;break}if(m=c.sibling,m!==null){m.return=c.return,Ue=m;break}Ue=c.return}}function yw(l){for(;Ue!==null;){var c=Ue;if(c===l){Ue=null;break}var m=c.sibling;if(m!==null){m.return=c.return,Ue=m;break}Ue=c.return}}function _w(l){for(;Ue!==null;){var c=Ue;try{switch(c.tag){case 0:case 11:case 15:var m=c.return;try{bh(4,c)}catch(le){Qi(c,m,le)}break;case 1:var _=c.stateNode;if(typeof _.componentDidMount=="function"){var E=c.return;try{_.componentDidMount()}catch(le){Qi(c,E,le)}}var A=c.return;try{gv(c)}catch(le){Qi(c,A,le)}break;case 5:var F=c.return;try{gv(c)}catch(le){Qi(c,F,le)}}}catch(le){Qi(c,c.return,le)}if(c===l){Ue=null;break}var W=c.sibling;if(W!==null){W.return=c.return,Ue=W;break}Ue=c.return}}var Mp=0,wp=1,Ep=2,Tp=3,Ap=4;if(typeof Symbol=="function"&&Symbol.for){var Rh=Symbol.for;Mp=Rh("selector.component"),wp=Rh("selector.has_pseudo_class"),Ep=Rh("selector.role"),Tp=Rh("selector.test_id"),Ap=Rh("selector.text")}function xv(l){var c=pe(l);if(c!=null){if(typeof c.memoizedProps["data-testname"]!="string")throw Error(o(364));return c}if(l=Z(l),l===null)throw Error(o(362));return l.stateNode.current}function Sv(l,c){switch(c.$$typeof){case Mp:if(l.type===c.value)return!0;break;case wp:e:{c=c.value,l=[l,0];for(var m=0;m<l.length;){var _=l[m++],E=l[m++],A=c[E];if(_.tag!==5||!me(_)){for(;A!=null&&Sv(_,A);)E++,A=c[E];if(E===c.length){c=!0;break e}else for(_=_.child;_!==null;)l.push(_,E),_=_.sibling}}c=!1}return c;case Ep:if(l.tag===5&&Ze(l.stateNode,c.value))return!0;break;case Ap:if((l.tag===5||l.tag===6)&&(l=ye(l),l!==null&&0<=l.indexOf(c.value)))return!0;break;case Tp:if(l.tag===5&&(l=l.memoizedProps["data-testname"],typeof l=="string"&&l.toLowerCase()===c.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function Mv(l){switch(l.$$typeof){case Mp:return"<"+(L(l.value)||"Unknown")+">";case wp:return":has("+(Mv(l)||"")+")";case Ep:return'[role="'+l.value+'"]';case Ap:return'"'+l.value+'"';case Tp:return'[data-testname="'+l.value+'"]';default:throw Error(o(365))}}function xw(l,c){var m=[];l=[l,0];for(var _=0;_<l.length;){var E=l[_++],A=l[_++],F=c[A];if(E.tag!==5||!me(E)){for(;F!=null&&Sv(E,F);)A++,F=c[A];if(A===c.length)m.push(E);else for(E=E.child;E!==null;)l.push(E,A),E=E.sibling}}return m}function wv(l,c){if(!I)throw Error(o(363));l=xv(l),l=xw(l,c),c=[],l=Array.from(l);for(var m=0;m<l.length;){var _=l[m++];if(_.tag===5)me(_)||c.push(_.stateNode);else for(_=_.child;_!==null;)l.push(_),_=_.sibling}return c}var SN=Math.ceil,Cp=a.ReactCurrentDispatcher,Ev=a.ReactCurrentOwner,Dn=a.ReactCurrentBatchConfig,Ct=0,Gn=null,Wn=null,pi=0,yr=0,Ac=ot(0),Qn=0,Ph=null,Cc=0,bp=0,Tv=0,Lh=null,Ki=null,Av=0,Cv=1/0;function bc(){Cv=si()+500}var Rp=!1,bv=null,ta=null,Pp=!1,na=null,Lp=0,Ih=0,Rv=null,Ip=-1,Np=0;function zi(){return Ct&6?si():Ip!==-1?Ip:Ip=si()}function ia(l){return l.mode&1?Ct&2&&pi!==0?pi&-pi:iN.transition!==null?(Np===0&&(l=jd,jd<<=1,!(jd&4194240)&&(jd=64),Np=l),Np):(l=Ft,l!==0?l:Se()):1}function Gr(l,c,m){if(50<Ih)throw Ih=0,Rv=null,Error(o(185));var _=Dp(l,c);return _===null?null:(mh(_,c,m),(!(Ct&2)||_!==Gn)&&(_===Gn&&(!(Ct&2)&&(bp|=c),Qn===4&&ra(_,pi)),Ji(_,m),c===1&&Ct===0&&!(l.mode&1)&&(bc(),Zd&&Os())),_)}function Dp(l,c){l.lanes|=c;var m=l.alternate;for(m!==null&&(m.lanes|=c),m=l,l=l.return;l!==null;)l.childLanes|=c,m=l.alternate,m!==null&&(m.childLanes|=c),m=l,l=l.return;return m.tag===3?m.stateNode:null}function Ji(l,c){var m=l.callbackNode;$5(l,c);var _=$d(l,l===Gn?pi:0);if(_===0)m!==null&&oM(m),l.callbackNode=null,l.callbackPriority=0;else if(c=_&-_,l.callbackPriority!==c){if(m!=null&&oM(m),c===1)l.tag===0?nN(Mw.bind(null,l)):aM(Mw.bind(null,l)),Qe?z(function(){Ct===0&&Os()}):O1(F1,Os),m=null;else{switch(sM(_)){case 1:m=F1;break;case 4:m=J5;break;case 16:m=z1;break;case 536870912:m=Q5;break;default:m=z1}m=Lw(m,Sw.bind(null,l))}l.callbackPriority=c,l.callbackNode=m}}function Sw(l,c){if(Ip=-1,Np=0,Ct&6)throw Error(o(327));var m=l.callbackNode;if(ul()&&l.callbackNode!==m)return null;var _=$d(l,l===Gn?pi:0);if(_===0)return null;if(_&30||_&l.expiredLanes||c)c=kp(l,_);else{c=_;var E=Ct;Ct|=2;var A=Tw();(Gn!==l||pi!==c)&&(bc(),ll(l,c));do try{EN();break}catch(W){Ew(l,W)}while(1);V1(),Cp.current=A,Ct=E,Wn!==null?c=0:(Gn=null,pi=0,c=Qn)}if(c!==0){if(c===2&&(E=D1(l),E!==0&&(_=E,c=Pv(l,E))),c===1)throw m=Ph,ll(l,0),ra(l,_),Ji(l,si()),m;if(c===6)ra(l,_);else{if(E=l.current.alternate,!(_&30)&&!MN(E)&&(c=kp(l,_),c===2&&(A=D1(l),A!==0&&(_=A,c=Pv(l,A))),c===1))throw m=Ph,ll(l,0),ra(l,_),Ji(l,si()),m;switch(l.finishedWork=E,l.finishedLanes=_,c){case 0:case 1:throw Error(o(345));case 2:cl(l,Ki);break;case 3:if(ra(l,_),(_&130023424)===_&&(c=Av+500-si(),10<c)){if($d(l,0)!==0)break;if(E=l.suspendedLanes,(E&_)!==_){zi(),l.pingedLanes|=l.suspendedLanes&E;break}l.timeoutHandle=Me(cl.bind(null,l,Ki),c);break}cl(l,Ki);break;case 4:if(ra(l,_),(_&4194240)===_)break;for(c=l.eventTimes,E=-1;0<_;){var F=31-hs(_);A=1<<F,F=c[F],F>E&&(E=F),_&=~A}if(_=E,_=si()-_,_=(120>_?120:480>_?480:1080>_?1080:1920>_?1920:3e3>_?3e3:4320>_?4320:1960*SN(_/1960))-_,10<_){l.timeoutHandle=Me(cl.bind(null,l,Ki),_);break}cl(l,Ki);break;case 5:cl(l,Ki);break;default:throw Error(o(329))}}}return Ji(l,si()),l.callbackNode===m?Sw.bind(null,l):null}function Pv(l,c){var m=Lh;return l.current.memoizedState.isDehydrated&&(ll(l,c).flags|=256),l=kp(l,c),l!==2&&(c=Ki,Ki=m,c!==null&&Lv(c)),l}function Lv(l){Ki===null?Ki=l:Ki.push.apply(Ki,l)}function MN(l){for(var c=l;;){if(c.flags&16384){var m=c.updateQueue;if(m!==null&&(m=m.stores,m!==null))for(var _=0;_<m.length;_++){var E=m[_],A=E.getSnapshot;E=E.value;try{if(!Us(A(),E))return!1}catch{return!1}}}if(m=c.child,c.subtreeFlags&16384&&m!==null)m.return=c,c=m;else{if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function ra(l,c){for(c&=~Tv,c&=~bp,l.suspendedLanes|=c,l.pingedLanes&=~c,l=l.expirationTimes;0<c;){var m=31-hs(c),_=1<<m;l[m]=-1,c&=~_}}function Mw(l){if(Ct&6)throw Error(o(327));ul();var c=$d(l,0);if(!(c&1))return Ji(l,si()),null;var m=kp(l,c);if(l.tag!==0&&m===2){var _=D1(l);_!==0&&(c=_,m=Pv(l,_))}if(m===1)throw m=Ph,ll(l,0),ra(l,c),Ji(l,si()),m;if(m===6)throw Error(o(345));return l.finishedWork=l.current.alternate,l.finishedLanes=c,cl(l,Ki),Ji(l,si()),null}function ww(l){na!==null&&na.tag===0&&!(Ct&6)&&ul();var c=Ct;Ct|=1;var m=Dn.transition,_=Ft;try{if(Dn.transition=null,Ft=1,l)return l()}finally{Ft=_,Dn.transition=m,Ct=c,!(Ct&6)&&Os()}}function Iv(){yr=Ac.current,Wt(Ac)}function ll(l,c){l.finishedWork=null,l.finishedLanes=0;var m=l.timeoutHandle;if(m!==vt&&(l.timeoutHandle=vt,ft(m)),Wn!==null)for(m=Wn.return;m!==null;){var _=m;switch(q1(_),_.tag){case 1:_=_.type.childContextTypes,_!=null&&Jo();break;case 3:Ec(),Wt(Vn),Wt(Jn),nv();break;case 5:ev(_);break;case 4:Ec();break;case 13:Wt(xn);break;case 19:Wt(xn);break;case 10:G1(_.type._context);break;case 22:case 23:Iv()}m=m.return}if(Gn=l,Wn=l=sa(l.current,null),pi=yr=c,Qn=0,Ph=null,Tv=bp=Cc=0,Ki=Lh=null,Fs!==null){for(c=0;c<Fs.length;c++)if(m=Fs[c],_=m.interleaved,_!==null){m.interleaved=null;var E=_.next,A=m.pending;if(A!==null){var F=A.next;A.next=E,_.next=F}m.pending=_}Fs=null}return l}function Ew(l,c){do{var m=Wn;try{if(V1(),ap.current=dp,lp){for(var _=Tn.memoizedState;_!==null;){var E=_.queue;E!==null&&(E.pending=null),_=_.next}lp=!1}if(Tc=0,oi=_i=Tn=null,Sh=!1,Mh=0,Ev.current=null,m===null||m.return===null){Qn=1,Ph=c,Wn=null;break}e:{var A=l,F=m.return,W=m,le=c;if(c=pi,W.flags|=32768,le!==null&&typeof le=="object"&&typeof le.then=="function"){var Ae=le,We=W,yt=We.tag;if(!(We.mode&1)&&(yt===0||yt===11||yt===15)){var rt=We.alternate;rt?(We.updateQueue=rt.updateQueue,We.memoizedState=rt.memoizedState,We.lanes=rt.lanes):(We.updateQueue=null,We.memoizedState=null)}var Jt=XM(F);if(Jt!==null){Jt.flags&=-257,jM(Jt,F,W,A,c),Jt.mode&1&&WM(A,Ae,c),c=Jt,le=Ae;var et=c.updateQueue;if(et===null){var Mi=new Set;Mi.add(le),c.updateQueue=Mi}else et.add(le);break e}else{if(!(c&1)){WM(A,Ae,c),Nv();break e}le=Error(o(426))}}else if(dn&&W.mode&1){var Xr=XM(F);if(Xr!==null){!(Xr.flags&65536)&&(Xr.flags|=256),jM(Xr,F,W,A,c),J1(le);break e}}A=le,Qn!==4&&(Qn=2),Lh===null?Lh=[A]:Lh.push(A),le=cv(le,W),W=F;do{switch(W.tag){case 3:W.flags|=65536,c&=-c,W.lanes|=c;var K=VM(W,le,c);uM(W,K);break e;case 1:A=le;var Y=W.type,se=W.stateNode;if(!(W.flags&128)&&(typeof Y.getDerivedStateFromError=="function"||se!==null&&typeof se.componentDidCatch=="function"&&(ta===null||!ta.has(se)))){W.flags|=65536,c&=-c,W.lanes|=c;var Oe=GM(W,A,c);uM(W,Oe);break e}}W=W.return}while(W!==null)}Cw(m)}catch(Je){c=Je,Wn===m&&m!==null&&(Wn=m=m.return);continue}break}while(1)}function Tw(){var l=Cp.current;return Cp.current=dp,l===null?dp:l}function Nv(){(Qn===0||Qn===3||Qn===2)&&(Qn=4),Gn===null||!(Cc&268435455)&&!(bp&268435455)||ra(Gn,pi)}function kp(l,c){var m=Ct;Ct|=2;var _=Tw();Gn===l&&pi===c||ll(l,c);do try{wN();break}catch(E){Ew(l,E)}while(1);if(V1(),Ct=m,Cp.current=_,Wn!==null)throw Error(o(261));return Gn=null,pi=0,Qn}function wN(){for(;Wn!==null;)Aw(Wn)}function EN(){for(;Wn!==null&&!Z5();)Aw(Wn)}function Aw(l){var c=Pw(l.alternate,l,yr);l.memoizedProps=l.pendingProps,c===null?Cw(l):Wn=c,Ev.current=null}function Cw(l){var c=l;do{var m=c.alternate;if(l=c.return,c.flags&32768){if(m=gN(m,c),m!==null){m.flags&=32767,Wn=m;return}if(l!==null)l.flags|=32768,l.subtreeFlags=0,l.deletions=null;else{Qn=6,Wn=null;return}}else if(m=dN(m,c,yr),m!==null){Wn=m;return}if(c=c.sibling,c!==null){Wn=c;return}Wn=c=l}while(c!==null);Qn===0&&(Qn=5)}function cl(l,c){var m=Ft,_=Dn.transition;try{Dn.transition=null,Ft=1,TN(l,c,m)}finally{Dn.transition=_,Ft=m}return null}function TN(l,c,m){do ul();while(na!==null);if(Ct&6)throw Error(o(327));var _=l.finishedWork,E=l.finishedLanes;if(_===null)return null;if(l.finishedWork=null,l.finishedLanes=0,_===l.current)throw Error(o(177));l.callbackNode=null,l.callbackPriority=0;var A=_.lanes|_.childLanes;if(q5(l,A),l===Gn&&(Wn=Gn=null,pi=0),!(_.subtreeFlags&2064)&&!(_.flags&2064)||Pp||(Pp=!0,Lw(z1,function(){return ul(),null})),A=(_.flags&15990)!==0,_.subtreeFlags&15990||A){A=Dn.transition,Dn.transition=null;var F=Ft;Ft=1;var W=Ct;Ct|=4,Ev.current=null,yN(l,_),_N(l,_),V(l.containerInfo),l.current=_,xN(_),K5(),Ct=W,Ft=F,Dn.transition=A}else l.current=_;if(Pp&&(Pp=!1,na=l,Lp=E),A=l.pendingLanes,A===0&&(ta=null),eN(_.stateNode),Ji(l,si()),c!==null)for(m=l.onRecoverableError,_=0;_<c.length;_++)m(c[_]);if(Rp)throw Rp=!1,l=bv,bv=null,l;return Lp&1&&l.tag!==0&&ul(),A=l.pendingLanes,A&1?l===Rv?Ih++:(Ih=0,Rv=l):Ih=0,Os(),null}function ul(){if(na!==null){var l=sM(Lp),c=Dn.transition,m=Ft;try{if(Dn.transition=null,Ft=16>l?16:l,na===null)var _=!1;else{if(l=na,na=null,Lp=0,Ct&6)throw Error(o(331));var E=Ct;for(Ct|=4,Ue=l.current;Ue!==null;){var A=Ue,F=A.child;if(Ue.flags&16){var W=A.deletions;if(W!==null){for(var le=0;le<W.length;le++){var Ae=W[le];for(Ue=Ae;Ue!==null;){var We=Ue;switch(We.tag){case 0:case 11:case 15:al(8,We,A)}var yt=We.child;if(yt!==null)yt.return=We,Ue=yt;else for(;Ue!==null;){We=Ue;var rt=We.sibling,Jt=We.return;if(hw(We),We===Ae){Ue=null;break}if(rt!==null){rt.return=Jt,Ue=rt;break}Ue=Jt}}}var et=A.alternate;if(et!==null){var Mi=et.child;if(Mi!==null){et.child=null;do{var Xr=Mi.sibling;Mi.sibling=null,Mi=Xr}while(Mi!==null)}}Ue=A}}if(A.subtreeFlags&2064&&F!==null)F.return=A,Ue=F;else e:for(;Ue!==null;){if(A=Ue,A.flags&2048)switch(A.tag){case 0:case 11:case 15:al(9,A,A.return)}var K=A.sibling;if(K!==null){K.return=A.return,Ue=K;break e}Ue=A.return}}var Y=l.current;for(Ue=Y;Ue!==null;){F=Ue;var se=F.child;if(F.subtreeFlags&2064&&se!==null)se.return=F,Ue=se;else e:for(F=Y;Ue!==null;){if(W=Ue,W.flags&2048)try{switch(W.tag){case 0:case 11:case 15:bh(9,W)}}catch(Je){Qi(W,W.return,Je)}if(W===F){Ue=null;break e}var Oe=W.sibling;if(Oe!==null){Oe.return=W.return,Ue=Oe;break e}Ue=W.return}}if(Ct=E,Os(),ks&&typeof ks.onPostCommitFiberRoot=="function")try{ks.onPostCommitFiberRoot(qd,l)}catch{}_=!0}return _}finally{Ft=m,Dn.transition=c}}return!1}function bw(l,c,m){c=cv(m,c),c=VM(l,c,1),ea(l,c),c=zi(),l=Dp(l,1),l!==null&&(mh(l,1,c),Ji(l,c))}function Qi(l,c,m){if(l.tag===3)bw(l,l,m);else for(;c!==null;){if(c.tag===3){bw(c,l,m);break}else if(c.tag===1){var _=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof _.componentDidCatch=="function"&&(ta===null||!ta.has(_))){l=cv(m,l),l=GM(c,l,1),ea(c,l),l=zi(),c=Dp(c,1),c!==null&&(mh(c,1,l),Ji(c,l));break}}c=c.return}}function AN(l,c,m){var _=l.pingCache;_!==null&&_.delete(c),c=zi(),l.pingedLanes|=l.suspendedLanes&m,Gn===l&&(pi&m)===m&&(Qn===4||Qn===3&&(pi&130023424)===pi&&500>si()-Av?ll(l,0):Tv|=m),Ji(l,c)}function Rw(l,c){c===0&&(l.mode&1?(c=Yd,Yd<<=1,!(Yd&130023424)&&(Yd=4194304)):c=1);var m=zi();l=Dp(l,c),l!==null&&(mh(l,c,m),Ji(l,m))}function CN(l){var c=l.memoizedState,m=0;c!==null&&(m=c.retryLane),Rw(l,m)}function bN(l,c){var m=0;switch(l.tag){case 13:var _=l.stateNode,E=l.memoizedState;E!==null&&(m=E.retryLane);break;case 19:_=l.stateNode;break;default:throw Error(o(314))}_!==null&&_.delete(c),Rw(l,m)}var Pw;Pw=function(l,c,m){if(l!==null)if(l.memoizedProps!==c.pendingProps||Vn.current)vr=!0;else{if(!(l.lanes&m)&&!(c.flags&128))return vr=!1,mN(l,c,m);vr=!!(l.flags&131072)}else vr=!1,dn&&c.flags&1048576&&gM(c,rp,c.index);switch(c.lanes=0,c.tag){case 2:var _=c.type;l!==null&&(l.alternate=null,c.alternate=null,c.flags|=2),l=c.pendingProps;var E=yn(c,Jn.current);yc(c,m),E=rv(null,c,_,l,E,m);var A=sv();return c.flags|=1,typeof E=="object"&&E!==null&&typeof E.render=="function"&&E.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,_n(_)?(A=!0,gc(c)):A=!1,c.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,X1(c),E.updater=np,c.stateNode=E,E._reactInternals=c,Y1(c,_,l,m),c=fv(null,c,_,!0,A,m)):(c.tag=0,dn&&A&&$1(c),Fi(null,c,E,m),c=c.child),c;case 16:_=c.elementType;e:{switch(l!==null&&(l.alternate=null,c.alternate=null,c.flags|=2),l=c.pendingProps,E=_._init,_=E(_._payload),c.type=_,E=c.tag=PN(_),l=fs(_,l),E){case 0:c=hv(null,c,_,l,m);break e;case 1:c=ew(null,c,_,l,m);break e;case 11:c=qM(null,c,_,l,m);break e;case 14:c=ZM(null,c,_,fs(_.type,l),m);break e}throw Error(o(306,_,""))}return c;case 0:return _=c.type,E=c.pendingProps,E=c.elementType===_?E:fs(_,E),hv(l,c,_,E,m);case 1:return _=c.type,E=c.pendingProps,E=c.elementType===_?E:fs(_,E),ew(l,c,_,E,m);case 3:e:{if(tw(c),l===null)throw Error(o(387));_=c.pendingProps,A=c.memoizedState,E=A.element,cM(l,c),tp(c,_,null,m);var F=c.memoizedState;if(_=F.element,ge&&A.isDehydrated)if(A={element:_,isDehydrated:!1,cache:F.cache,transitions:F.transitions},c.updateQueue.baseState=A,c.memoizedState=A,c.flags&256){E=Error(o(423)),c=nw(l,c,_,m,E);break e}else if(_!==E){E=Error(o(424)),c=nw(l,c,_,m,E);break e}else for(ge&&(gr=L1(c.stateNode.containerInfo),mr=c,dn=!0,ds=null,gh=!1),m=MM(c,null,_,m),c.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(Sc(),_===E){c=yo(l,c,m);break e}Fi(l,c,_,m)}c=c.child}return c;case 5:return wM(c),l===null&&K1(c),_=c.type,E=c.pendingProps,A=l!==null?l.memoizedProps:null,F=E.children,xe(_,E)?F=null:A!==null&&xe(_,A)&&(c.flags|=32),QM(l,c),Fi(l,c,F,m),c.child;case 6:return l===null&&K1(c),null;case 13:return iw(l,c,m);case 4:return Q1(c,c.stateNode.containerInfo),_=c.pendingProps,l===null?c.child=Mc(c,null,_,m):Fi(l,c,_,m),c.child;case 11:return _=c.type,E=c.pendingProps,E=c.elementType===_?E:fs(_,E),qM(l,c,_,E,m);case 7:return Fi(l,c,c.pendingProps,m),c.child;case 8:return Fi(l,c,c.pendingProps.children,m),c.child;case 12:return Fi(l,c,c.pendingProps.children,m),c.child;case 10:e:{if(_=c.type._context,E=c.pendingProps,A=c.memoizedProps,F=E.value,lM(c,_,F),A!==null)if(Us(A.value,F)){if(A.children===E.children&&!Vn.current){c=yo(l,c,m);break e}}else for(A=c.child,A!==null&&(A.return=c);A!==null;){var W=A.dependencies;if(W!==null){F=A.child;for(var le=W.firstContext;le!==null;){if(le.context===_){if(A.tag===1){le=po(-1,m&-m),le.tag=2;var Ae=A.updateQueue;if(Ae!==null){Ae=Ae.shared;var We=Ae.pending;We===null?le.next=le:(le.next=We.next,We.next=le),Ae.pending=le}}A.lanes|=m,le=A.alternate,le!==null&&(le.lanes|=m),W1(A.return,m,c),W.lanes|=m;break}le=le.next}}else if(A.tag===10)F=A.type===c.type?null:A.child;else if(A.tag===18){if(F=A.return,F===null)throw Error(o(341));F.lanes|=m,W=F.alternate,W!==null&&(W.lanes|=m),W1(F,m,c),F=A.sibling}else F=A.child;if(F!==null)F.return=A;else for(F=A;F!==null;){if(F===c){F=null;break}if(A=F.sibling,A!==null){A.return=F.return,F=A;break}F=F.return}A=F}Fi(l,c,E.children,m),c=c.child}return c;case 9:return E=c.type,_=c.pendingProps.children,yc(c,m),E=Fr(E),_=_(E),c.flags|=1,Fi(l,c,_,m),c.child;case 14:return _=c.type,E=fs(_,c.pendingProps),E=fs(_.type,E),ZM(l,c,_,E,m);case 15:return KM(l,c,c.type,c.pendingProps,m);case 17:return _=c.type,E=c.pendingProps,E=c.elementType===_?E:fs(_,E),l!==null&&(l.alternate=null,c.alternate=null,c.flags|=2),c.tag=1,_n(_)?(l=!0,gc(c)):l=!1,yc(c,m),pM(c,_,E),Y1(c,_,E,m),fv(null,c,_,!0,l,m);case 19:return aw(l,c,m);case 22:return JM(l,c,m)}throw Error(o(156,c.tag))};function Lw(l,c){return O1(l,c)}function RN(l,c,m,_){this.tag=l,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wr(l,c,m,_){return new RN(l,c,m,_)}function Dv(l){return l=l.prototype,!(!l||!l.isReactComponent)}function PN(l){if(typeof l=="function")return Dv(l)?1:0;if(l!=null){if(l=l.$$typeof,l===w)return 11;if(l===x)return 14}return 2}function sa(l,c){var m=l.alternate;return m===null?(m=Wr(l.tag,c,l.key,l.mode),m.elementType=l.elementType,m.type=l.type,m.stateNode=l.stateNode,m.alternate=l,l.alternate=m):(m.pendingProps=c,m.type=l.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=l.flags&14680064,m.childLanes=l.childLanes,m.lanes=l.lanes,m.child=l.child,m.memoizedProps=l.memoizedProps,m.memoizedState=l.memoizedState,m.updateQueue=l.updateQueue,c=l.dependencies,m.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},m.sibling=l.sibling,m.index=l.index,m.ref=l.ref,m}function Up(l,c,m,_,E,A){var F=2;if(_=l,typeof l=="function")Dv(l)&&(F=1);else if(typeof l=="string")F=5;else e:switch(l){case f:return hl(m.children,E,A,c);case d:F=8,E|=8;break;case p:return l=Wr(12,m,c,E|2),l.elementType=p,l.lanes=A,l;case S:return l=Wr(13,m,c,E),l.elementType=S,l.lanes=A,l;case g:return l=Wr(19,m,c,E),l.elementType=g,l.lanes=A,l;case T:return Op(m,E,A,c);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case v:F=10;break e;case y:F=9;break e;case w:F=11;break e;case x:F=14;break e;case M:F=16,_=null;break e}throw Error(o(130,l==null?l:typeof l,""))}return c=Wr(F,m,c,E),c.elementType=l,c.type=_,c.lanes=A,c}function hl(l,c,m,_){return l=Wr(7,l,_,c),l.lanes=m,l}function Op(l,c,m,_){return l=Wr(22,l,_,c),l.elementType=T,l.lanes=m,l.stateNode={},l}function kv(l,c,m){return l=Wr(6,l,null,c),l.lanes=m,l}function Uv(l,c,m){return c=Wr(4,l.children!==null?l.children:[],l.key,c),c.lanes=m,c.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},c}function LN(l,c,m,_,E){this.tag=c,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=vt,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=k1(0),this.expirationTimes=k1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=k1(0),this.identifierPrefix=_,this.onRecoverableError=E,ge&&(this.mutableSourceEagerHydrationData=null)}function Iw(l,c,m,_,E,A,F,W,le){return l=new LN(l,c,m,W,le),c===1?(c=1,A===!0&&(c|=8)):c=0,A=Wr(3,null,null,c),l.current=A,A.stateNode=l,A.memoizedState={element:_,isDehydrated:m,cache:null,transitions:null},X1(A),l}function Nw(l){if(!l)return yi;l=l._reactInternals;e:{if(R(l)!==l||l.tag!==1)throw Error(o(170));var c=l;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(_n(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(o(171))}if(l.tag===1){var m=l.type;if(_n(m))return mc(l,m,c)}return c}function Dw(l){var c=l._reactInternals;if(c===void 0)throw typeof l.render=="function"?Error(o(188)):(l=Object.keys(l).join(","),Error(o(268,l)));return l=j(c),l===null?null:l.stateNode}function kw(l,c){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var m=l.retryLane;l.retryLane=m!==0&&m<c?m:c}}function Ov(l,c){kw(l,c),(l=l.alternate)&&kw(l,c)}function IN(l){return l=j(l),l===null?null:l.stateNode}function NN(){return null}return n.attemptContinuousHydration=function(l){if(l.tag===13){var c=zi();Gr(l,134217728,c),Ov(l,134217728)}},n.attemptHydrationAtCurrentPriority=function(l){if(l.tag===13){var c=zi(),m=ia(l);Gr(l,m,c),Ov(l,m)}},n.attemptSynchronousHydration=function(l){switch(l.tag){case 3:var c=l.stateNode;if(c.current.memoizedState.isDehydrated){var m=ph(c.pendingLanes);m!==0&&(U1(c,m|1),Ji(c,si()),!(Ct&6)&&(bc(),Os()))}break;case 13:var _=zi();ww(function(){return Gr(l,1,_)}),Ov(l,1)}},n.batchedUpdates=function(l,c){var m=Ct;Ct|=1;try{return l(c)}finally{Ct=m,Ct===0&&(bc(),Zd&&Os())}},n.createComponentSelector=function(l){return{$$typeof:Mp,value:l}},n.createContainer=function(l,c,m,_,E,A,F){return Iw(l,c,!1,null,m,_,E,A,F)},n.createHasPseudoClassSelector=function(l){return{$$typeof:wp,value:l}},n.createHydrationContainer=function(l,c,m,_,E,A,F,W,le){return l=Iw(m,_,!0,l,E,A,F,W,le),l.context=Nw(null),m=l.current,_=zi(),E=ia(m),A=po(_,E),A.callback=c??null,ea(m,A),l.current.lanes=E,mh(l,E,_),Ji(l,_),l},n.createPortal=function(l,c,m){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:h,key:_==null?null:""+_,children:l,containerInfo:c,implementation:m}},n.createRoleSelector=function(l){return{$$typeof:Ep,value:l}},n.createTestNameSelector=function(l){return{$$typeof:Tp,value:l}},n.createTextSelector=function(l){return{$$typeof:Ap,value:l}},n.deferredUpdates=function(l){var c=Ft,m=Dn.transition;try{return Dn.transition=null,Ft=16,l()}finally{Ft=c,Dn.transition=m}},n.discreteUpdates=function(l,c,m,_,E){var A=Ft,F=Dn.transition;try{return Dn.transition=null,Ft=1,l(c,m,_,E)}finally{Ft=A,Dn.transition=F,Ct===0&&bc()}},n.findAllNodes=wv,n.findBoundingRects=function(l,c){if(!I)throw Error(o(363));c=wv(l,c),l=[];for(var m=0;m<c.length;m++)l.push(de(c[m]));for(c=l.length-1;0<c;c--){m=l[c];for(var _=m.x,E=_+m.width,A=m.y,F=A+m.height,W=c-1;0<=W;W--)if(c!==W){var le=l[W],Ae=le.x,We=Ae+le.width,yt=le.y,rt=yt+le.height;if(_>=Ae&&A>=yt&&E<=We&&F<=rt){l.splice(c,1);break}else if(_!==Ae||m.width!==le.width||rt<A||yt>F){if(!(A!==yt||m.height!==le.height||We<_||Ae>E)){Ae>_&&(le.width+=Ae-_,le.x=_),We<E&&(le.width=E-Ae),l.splice(c,1);break}}else{yt>A&&(le.height+=yt-A,le.y=A),rt<F&&(le.height=F-yt),l.splice(c,1);break}}}return l},n.findHostInstance=Dw,n.findHostInstanceWithNoPortals=function(l){return l=O(l),l=l!==null?J(l):null,l===null?null:l.stateNode},n.findHostInstanceWithWarning=function(l){return Dw(l)},n.flushControlled=function(l){var c=Ct;Ct|=1;var m=Dn.transition,_=Ft;try{Dn.transition=null,Ft=1,l()}finally{Ft=_,Dn.transition=m,Ct=c,Ct===0&&(bc(),Os())}},n.flushPassiveEffects=ul,n.flushSync=ww,n.focusWithin=function(l,c){if(!I)throw Error(o(363));for(l=xv(l),c=xw(l,c),c=Array.from(c),l=0;l<c.length;){var m=c[l++];if(!me(m)){if(m.tag===5&&Ie(m.stateNode))return!0;for(m=m.child;m!==null;)c.push(m),m=m.sibling}}return!1},n.getCurrentUpdatePriority=function(){return Ft},n.getFindAllNodesFailureDescription=function(l,c){if(!I)throw Error(o(363));var m=0,_=[];l=[xv(l),0];for(var E=0;E<l.length;){var A=l[E++],F=l[E++],W=c[F];if((A.tag!==5||!me(A))&&(Sv(A,W)&&(_.push(Mv(W)),F++,F>m&&(m=F)),F<c.length))for(A=A.child;A!==null;)l.push(A,F),A=A.sibling}if(m<c.length){for(l=[];m<c.length;m++)l.push(Mv(c[m]));return`findAllNodes was able to match part of the selector:
  `+(_.join(" > ")+`

No matching component was found for:
  `)+l.join(" > ")}return null},n.getPublicRootInstance=function(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 5:return fe(l.child.stateNode);default:return l.child.stateNode}},n.injectIntoDevTools=function(l){if(l={bundleType:l.bundleType,version:l.version,rendererPackageName:l.rendererPackageName,rendererConfig:l.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:IN,findFiberByHostInstance:l.findFiberByHostInstance||NN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")l=!1;else{var c=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(c.isDisabled||!c.supportsFiber)l=!0;else{try{qd=c.inject(l),ks=c}catch{}l=!!c.checkDCE}}return l},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(l,c,m,_){if(!I)throw Error(o(363));l=wv(l,c);var E=Le(l,m,_).disconnect;return{disconnect:function(){E()}}},n.registerMutableSourceForHydration=function(l,c){var m=c._getVersion;m=m(c._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[c,m]:l.mutableSourceEagerHydrationData.push(c,m)},n.runWithPriority=function(l,c){var m=Ft;try{return Ft=l,c()}finally{Ft=m}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(l,c,m,_){var E=c.current,A=zi(),F=ia(E);return m=Nw(m),c.context===null?c.context=m:c.pendingContext=m,c=po(A,F),c.payload={element:l},_=_===void 0?null:_,_!==null&&(c.callback=_),ea(E,c),l=Gr(E,F,A),l!==null&&ep(l,E,F),F},n};yL.exports=t7;var n7=yL.exports;const i7=z4(n7),i3={},r7=t=>void Object.assign(i3,t);function s7(t,e){function n(f,{args:d=[],attach:p,...v},y){let w=`${f[0].toUpperCase()}${f.slice(1)}`,S;if(f==="primitive"){if(v.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const g=v.object;S=tu(g,{type:f,root:y,attach:p,primitive:!0})}else{const g=i3[w];if(!g)throw new Error(`R3F: ${w} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(d))throw new Error("R3F: The args prop must be an array!");S=tu(new g(...d),{type:f,root:y,attach:p,memoizedProps:{args:d}})}return S.__r3f.attach===void 0&&(S.isBufferGeometry?S.__r3f.attach="geometry":S.isMaterial&&(S.__r3f.attach="material")),w!=="inject"&&Ky(S,v),S}function i(f,d){let p=!1;if(d){var v,y;(v=d.__r3f)!=null&&v.attach?Zy(f,d,d.__r3f.attach):d.isObject3D&&f.isObject3D&&(f.add(d),p=!0),p||(y=f.__r3f)==null||y.objects.push(d),d.__r3f||tu(d,{}),d.__r3f.parent=f,Kx(d),nu(d)}}function r(f,d,p){let v=!1;if(d){var y,w;if((y=d.__r3f)!=null&&y.attach)Zy(f,d,d.__r3f.attach);else if(d.isObject3D&&f.isObject3D){d.parent=f,d.dispatchEvent({type:"added"}),f.dispatchEvent({type:"childadded",child:d});const S=f.children.filter(x=>x!==d),g=S.indexOf(p);f.children=[...S.slice(0,g),d,...S.slice(g)],v=!0}v||(w=f.__r3f)==null||w.objects.push(d),d.__r3f||tu(d,{}),d.__r3f.parent=f,Kx(d),nu(d)}}function s(f,d,p=!1){f&&[...f].forEach(v=>o(d,v,p))}function o(f,d,p){if(d){var v,y,w;if(d.__r3f&&(d.__r3f.parent=null),(v=f.__r3f)!=null&&v.objects&&(f.__r3f.objects=f.__r3f.objects.filter(T=>T!==d)),(y=d.__r3f)!=null&&y.attach)bA(f,d,d.__r3f.attach);else if(d.isObject3D&&f.isObject3D){var S;f.remove(d),(S=d.__r3f)!=null&&S.root&&d7(Sg(d),d)}const x=(w=d.__r3f)==null?void 0:w.primitive,M=!x&&(p===void 0?d.dispose!==null:p);if(!x){var g;s((g=d.__r3f)==null?void 0:g.objects,d,M),s(d.children,d,M)}if(delete d.__r3f,M&&d.dispose&&d.type!=="Scene"){const T=()=>{try{d.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?qx.unstable_scheduleCallback(qx.unstable_IdlePriority,T):T()}nu(f)}}function a(f,d,p,v){var y;const w=(y=f.__r3f)==null?void 0:y.parent;if(!w)return;const S=n(d,p,f.__r3f.root);if(f.children){for(const g of f.children)g.__r3f&&i(S,g);f.children=f.children.filter(g=>!g.__r3f)}f.__r3f.objects.forEach(g=>i(S,g)),f.__r3f.objects=[],f.__r3f.autoRemovedBeforeAppend||o(w,f),S.parent&&(S.__r3f.autoRemovedBeforeAppend=!0),i(w,S),S.raycast&&S.__r3f.eventCount&&Sg(S).getState().internal.interaction.push(S),[v,v.alternate].forEach(g=>{g!==null&&(g.stateNode=S,g.ref&&(typeof g.ref=="function"?g.ref(S):g.ref.current=S))})}const u=()=>{};return{reconciler:i7({createInstance:n,removeChild:o,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(f,d)=>{if(!d)return;const p=f.getState().scene;p.__r3f&&(p.__r3f.root=f,i(p,d))},removeChildFromContainer:(f,d)=>{d&&o(f.getState().scene,d)},insertInContainerBefore:(f,d,p)=>{if(!d||!p)return;const v=f.getState().scene;v.__r3f&&r(v,d,p)},getRootHostContext:()=>null,getChildHostContext:f=>f,finalizeInitialChildren(f){var d;return!!((d=f==null?void 0:f.__r3f)!=null?d:{}).handlers},prepareUpdate(f,d,p,v){var y;if(((y=f==null?void 0:f.__r3f)!=null?y:{}).primitive&&v.object&&v.object!==f)return[!0];{const{args:S=[],children:g,...x}=v,{args:M=[],children:T,...P}=p;if(!Array.isArray(S))throw new Error("R3F: the args prop must be an array!");if(S.some((L,N)=>L!==M[N]))return[!0];const b=CL(f,x,P,!0);return b.changes.length?[!1,b]:null}},commitUpdate(f,[d,p],v,y,w,S){d?a(f,v,w,S):Ky(f,p)},commitMount(f,d,p,v){var y;const w=(y=f.__r3f)!=null?y:{};f.raycast&&w.handlers&&w.eventCount&&Sg(f).getState().internal.interaction.push(f)},getPublicInstance:f=>f,prepareForCommit:()=>null,preparePortalMount:f=>tu(f.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(f){var d;const{attach:p,parent:v}=(d=f.__r3f)!=null?d:{};p&&v&&bA(v,f,p),f.isObject3D&&(f.visible=!1),nu(f)},unhideInstance(f,d){var p;const{attach:v,parent:y}=(p=f.__r3f)!=null?p:{};v&&y&&Zy(y,f,v),(f.isObject3D&&d.visible==null||d.visible)&&(f.visible=!0),nu(f)},createTextInstance:u,hideTextInstance:u,unhideTextInstance:u,getCurrentEventPriority:()=>e?e():xu.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&on.fun(performance.now)?performance.now:on.fun(Date.now)?Date.now:()=>0,scheduleTimeout:on.fun(setTimeout)?setTimeout:void 0,cancelTimeout:on.fun(clearTimeout)?clearTimeout:void 0}),applyProps:Ky}}var EA,TA;const qy=t=>"colorSpace"in t||"outputColorSpace"in t,SL=()=>{var t;return(t=i3.ColorManagement)!=null?t:null},ML=t=>t&&t.isOrthographicCamera,o7=t=>t&&t.hasOwnProperty("current"),Nd=typeof window<"u"&&((EA=window.document)!=null&&EA.createElement||((TA=window.navigator)==null?void 0:TA.product)==="ReactNative")?_e.useLayoutEffect:_e.useEffect;function wL(t){const e=_e.useRef(t);return Nd(()=>void(e.current=t),[t]),e}function a7({set:t}){return Nd(()=>(t(new Promise(()=>null)),()=>t(!1)),[t]),null}class EL extends _e.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}EL.getDerivedStateFromError=()=>({error:!0});const TL="__default",AA=new Map,l7=t=>t&&!!t.memoized&&!!t.changes;function AL(t){var e;const n=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(t)?Math.min(Math.max(t[0],n),t[1]):t}const Qh=t=>{var e;return(e=t.__r3f)==null?void 0:e.root.getState()};function Sg(t){let e=t.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const on={obj:t=>t===Object(t)&&!on.arr(t)&&typeof t!="function",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",boo:t=>typeof t=="boolean",und:t=>t===void 0,arr:t=>Array.isArray(t),equ(t,e,{arrays:n="shallow",objects:i="reference",strict:r=!0}={}){if(typeof t!=typeof e||!!t!=!!e)return!1;if(on.str(t)||on.num(t)||on.boo(t))return t===e;const s=on.obj(t);if(s&&i==="reference")return t===e;const o=on.arr(t);if(o&&n==="reference")return t===e;if((o||s)&&t===e)return!0;let a;for(a in t)if(!(a in e))return!1;if(s&&n==="shallow"&&i==="shallow"){for(a in r?e:t)if(!on.equ(t[a],e[a],{strict:r,objects:"reference"}))return!1}else for(a in r?e:t)if(t[a]!==e[a])return!1;if(on.und(a)){if(o&&t.length===0&&e.length===0||s&&Object.keys(t).length===0&&Object.keys(e).length===0)return!0;if(t!==e)return!1}return!0}};function c7(t){t.dispose&&t.type!=="Scene"&&t.dispose();for(const e in t)e.dispose==null||e.dispose(),delete t[e]}function tu(t,e){const n=t;return n.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},t}function Zx(t,e){let n=t;if(e.includes("-")){const i=e.split("-"),r=i.pop();return n=i.reduce((s,o)=>s[o],t),{target:n,key:r}}else return{target:n,key:e}}const CA=/-\d+$/;function Zy(t,e,n){if(on.str(n)){if(CA.test(n)){const s=n.replace(CA,""),{target:o,key:a}=Zx(t,s);Array.isArray(o[a])||(o[a]=[])}const{target:i,key:r}=Zx(t,n);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=n(t,e)}function bA(t,e,n){var i,r;if(on.str(n)){const{target:s,key:o}=Zx(t,n),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(t,e);(r=e.__r3f)==null||delete r.previousAttach}function CL(t,{children:e,key:n,ref:i,...r},{children:s,key:o,ref:a,...u}={},h=!1){const f=t.__r3f,d=Object.entries(r),p=[];if(h){const y=Object.keys(u);for(let w=0;w<y.length;w++)r.hasOwnProperty(y[w])||d.unshift([y[w],TL+"remove"])}d.forEach(([y,w])=>{var S;if((S=t.__r3f)!=null&&S.primitive&&y==="object"||on.equ(w,u[y]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(y))return p.push([y,w,!0,[]]);let g=[];y.includes("-")&&(g=y.split("-")),p.push([y,w,!1,g]);for(const x in r){const M=r[x];x.startsWith(`${y}-`)&&p.push([x,M,!1,x.split("-")])}});const v={...r};return f!=null&&f.memoizedProps&&f!=null&&f.memoizedProps.args&&(v.args=f.memoizedProps.args),f!=null&&f.memoizedProps&&f!=null&&f.memoizedProps.attach&&(v.attach=f.memoizedProps.attach),{memoized:v,changes:p}}const u7=typeof process<"u"&&!1;function Ky(t,e){var n;const i=t.__r3f,r=i==null?void 0:i.root,s=r==null||r.getState==null?void 0:r.getState(),{memoized:o,changes:a}=l7(e)?e:CL(t,e),u=i==null?void 0:i.eventCount;t.__r3f&&(t.__r3f.memoizedProps=o);for(let p=0;p<a.length;p++){let[v,y,w,S]=a[p];if(qy(t)){const T="srgb",P="srgb-linear";v==="encoding"?(v="colorSpace",y=y===3001?T:P):v==="outputEncoding"&&(v="outputColorSpace",y=y===3001?T:P)}let g=t,x=g[v];if(S.length&&(x=S.reduce((M,T)=>M[T],t),!(x&&x.set))){const[M,...T]=S.reverse();g=T.reverse().reduce((P,b)=>P[b],t),v=M}if(y===TL+"remove")if(g.constructor){let M=AA.get(g.constructor);M||(M=new g.constructor,AA.set(g.constructor,M)),y=M[v]}else y=0;if(w&&i)y?i.handlers[v]=y:delete i.handlers[v],i.eventCount=Object.keys(i.handlers).length;else if(x&&x.set&&(x.copy||x instanceof Wl)){if(Array.isArray(y))x.fromArray?x.fromArray(y):x.set(...y);else if(x.copy&&y&&y.constructor&&(u7?x.constructor.name===y.constructor.name:x.constructor===y.constructor))x.copy(y);else if(y!==void 0){var h;const M=(h=x)==null?void 0:h.isColor;!M&&x.setScalar?x.setScalar(y):x instanceof Wl&&y instanceof Wl?x.mask=y.mask:x.set(y),!SL()&&s&&!s.linear&&M&&x.convertSRGBToLinear()}}else{var f;if(g[v]=y,(f=g[v])!=null&&f.isTexture&&g[v].format===or&&g[v].type===no&&s){const M=g[v];qy(M)&&qy(s.gl)?M.colorSpace=s.gl.outputColorSpace:M.encoding=s.gl.outputEncoding}}nu(t)}if(i&&i.parent&&t.raycast&&u!==i.eventCount){const p=Sg(t).getState().internal,v=p.interaction.indexOf(t);v>-1&&p.interaction.splice(v,1),i.eventCount&&p.interaction.push(t)}return!(a.length===1&&a[0][0]==="onUpdate")&&a.length&&(n=t.__r3f)!=null&&n.parent&&Kx(t),t}function nu(t){var e,n;const i=(e=t.__r3f)==null||(n=e.root)==null||n.getState==null?void 0:n.getState();i&&i.internal.frames===0&&i.invalidate()}function Kx(t){t.onUpdate==null||t.onUpdate(t)}function h7(t,e){t.manual||(ML(t)?(t.left=e.width/-2,t.right=e.width/2,t.top=e.height/2,t.bottom=e.height/-2):t.aspect=e.width/e.height,t.updateProjectionMatrix(),t.updateMatrixWorld())}function Ym(t){return(t.eventObject||t.object).uuid+"/"+t.index+t.instanceId}function f7(){var t;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return xu.DefaultEventPriority;switch((t=e.event)==null?void 0:t.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return xu.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return xu.ContinuousEventPriority;default:return xu.DefaultEventPriority}}function bL(t,e,n,i){const r=n.get(e);r&&(n.delete(e),n.size===0&&(t.delete(i),r.target.releasePointerCapture(i)))}function d7(t,e){const{internal:n}=t.getState();n.interaction=n.interaction.filter(i=>i!==e),n.initialHits=n.initialHits.filter(i=>i!==e),n.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&n.hovered.delete(r)}),n.capturedMap.forEach((i,r)=>{bL(n.capturedMap,e,i,r)})}function p7(t){function e(u){const{internal:h}=t.getState(),f=u.offsetX-h.initialClick[0],d=u.offsetY-h.initialClick[1];return Math.round(Math.sqrt(f*f+d*d))}function n(u){return u.filter(h=>["Move","Over","Enter","Out","Leave"].some(f=>{var d;return(d=h.__r3f)==null?void 0:d.handlers["onPointer"+f]}))}function i(u,h){const f=t.getState(),d=new Set,p=[],v=h?h(f.internal.interaction):f.internal.interaction;for(let g=0;g<v.length;g++){const x=Qh(v[g]);x&&(x.raycaster.camera=void 0)}f.previousRoot||f.events.compute==null||f.events.compute(u,f);function y(g){const x=Qh(g);if(!x||!x.events.enabled||x.raycaster.camera===null)return[];if(x.raycaster.camera===void 0){var M;x.events.compute==null||x.events.compute(u,x,(M=x.previousRoot)==null?void 0:M.getState()),x.raycaster.camera===void 0&&(x.raycaster.camera=null)}return x.raycaster.camera?x.raycaster.intersectObject(g,!0):[]}let w=v.flatMap(y).sort((g,x)=>{const M=Qh(g.object),T=Qh(x.object);return!M||!T?g.distance-x.distance:T.events.priority-M.events.priority||g.distance-x.distance}).filter(g=>{const x=Ym(g);return d.has(x)?!1:(d.add(x),!0)});f.events.filter&&(w=f.events.filter(w,f));for(const g of w){let x=g.object;for(;x;){var S;(S=x.__r3f)!=null&&S.eventCount&&p.push({...g,eventObject:x}),x=x.parent}}if("pointerId"in u&&f.internal.capturedMap.has(u.pointerId))for(let g of f.internal.capturedMap.get(u.pointerId).values())d.has(Ym(g.intersection))||p.push(g.intersection);return p}function r(u,h,f,d){const p=t.getState();if(u.length){const v={stopped:!1};for(const y of u){const w=Qh(y.object)||p,{raycaster:S,pointer:g,camera:x,internal:M}=w,T=new k(g.x,g.y,0).unproject(x),P=C=>{var O,j;return(O=(j=M.capturedMap.get(C))==null?void 0:j.has(y.eventObject))!=null?O:!1},b=C=>{const O={intersection:y,target:h.target};M.capturedMap.has(C)?M.capturedMap.get(C).set(y.eventObject,O):M.capturedMap.set(C,new Map([[y.eventObject,O]])),h.target.setPointerCapture(C)},L=C=>{const O=M.capturedMap.get(C);O&&bL(M.capturedMap,y.eventObject,O,C)};let N={};for(let C in h){let O=h[C];typeof O!="function"&&(N[C]=O)}let R={...y,...N,pointer:g,intersections:u,stopped:v.stopped,delta:f,unprojectedPoint:T,ray:S.ray,camera:x,stopPropagation(){const C="pointerId"in h&&M.capturedMap.get(h.pointerId);if((!C||C.has(y.eventObject))&&(R.stopped=v.stopped=!0,M.hovered.size&&Array.from(M.hovered.values()).find(O=>O.eventObject===y.eventObject))){const O=u.slice(0,u.indexOf(y));s([...O,y])}},target:{hasPointerCapture:P,setPointerCapture:b,releasePointerCapture:L},currentTarget:{hasPointerCapture:P,setPointerCapture:b,releasePointerCapture:L},nativeEvent:h};if(d(R),v.stopped===!0)break}}return u}function s(u){const{internal:h}=t.getState();for(const f of h.hovered.values())if(!u.length||!u.find(d=>d.object===f.object&&d.index===f.index&&d.instanceId===f.instanceId)){const p=f.eventObject.__r3f,v=p==null?void 0:p.handlers;if(h.hovered.delete(Ym(f)),p!=null&&p.eventCount){const y={...f,intersections:u};v.onPointerOut==null||v.onPointerOut(y),v.onPointerLeave==null||v.onPointerLeave(y)}}}function o(u,h){for(let f=0;f<h.length;f++){const d=h[f].__r3f;d==null||d.handlers.onPointerMissed==null||d.handlers.onPointerMissed(u)}}function a(u){switch(u){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return h=>{const{internal:f}=t.getState();"pointerId"in h&&f.capturedMap.has(h.pointerId)&&requestAnimationFrame(()=>{f.capturedMap.has(h.pointerId)&&(f.capturedMap.delete(h.pointerId),s([]))})}}return function(f){const{onPointerMissed:d,internal:p}=t.getState();p.lastEvent.current=f;const v=u==="onPointerMove",y=u==="onClick"||u==="onContextMenu"||u==="onDoubleClick",S=i(f,v?n:void 0),g=y?e(f):0;u==="onPointerDown"&&(p.initialClick=[f.offsetX,f.offsetY],p.initialHits=S.map(M=>M.eventObject)),y&&!S.length&&g<=2&&(o(f,p.interaction),d&&d(f)),v&&s(S);function x(M){const T=M.eventObject,P=T.__r3f,b=P==null?void 0:P.handlers;if(P!=null&&P.eventCount)if(v){if(b.onPointerOver||b.onPointerEnter||b.onPointerOut||b.onPointerLeave){const L=Ym(M),N=p.hovered.get(L);N?N.stopped&&M.stopPropagation():(p.hovered.set(L,M),b.onPointerOver==null||b.onPointerOver(M),b.onPointerEnter==null||b.onPointerEnter(M))}b.onPointerMove==null||b.onPointerMove(M)}else{const L=b[u];L?(!y||p.initialHits.includes(T))&&(o(f,p.interaction.filter(N=>!p.initialHits.includes(N))),L(M)):y&&p.initialHits.includes(T)&&o(f,p.interaction.filter(N=>!p.initialHits.includes(N)))}}r(S,f,g,x)}}return{handlePointer:a}}const RL=t=>!!(t!=null&&t.render),PL=_e.createContext(null),m7=(t,e)=>{const n=e7((a,u)=>{const h=new k,f=new k,d=new k;function p(g=u().camera,x=f,M=u().size){const{width:T,height:P,top:b,left:L}=M,N=T/P;x.isVector3?d.copy(x):d.set(...x);const R=g.getWorldPosition(h).distanceTo(d);if(ML(g))return{width:T/g.zoom,height:P/g.zoom,top:b,left:L,factor:1,distance:R,aspect:N};{const C=g.fov*Math.PI/180,O=2*Math.tan(C/2)*R,j=O*(T/P);return{width:j,height:O,top:b,left:L,factor:T/j,distance:R,aspect:N}}}let v;const y=g=>a(x=>({performance:{...x.performance,current:g}})),w=new he;return{set:a,get:u,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(g=1)=>t(u(),g),advance:(g,x)=>e(g,x,u()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new QS,pointer:w,mouse:w,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const g=u();v&&clearTimeout(v),g.performance.current!==g.performance.min&&y(g.performance.min),v=setTimeout(()=>y(u().performance.max),g.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:g=>a(x=>({...x,events:{...x.events,...g}})),setSize:(g,x,M,T,P)=>{const b=u().camera,L={width:g,height:x,top:T||0,left:P||0,updateStyle:M};a(N=>({size:L,viewport:{...N.viewport,...p(b,f,L)}}))},setDpr:g=>a(x=>{const M=AL(g);return{viewport:{...x.viewport,dpr:M,initialDpr:x.viewport.initialDpr||M}}}),setFrameloop:(g="always")=>{const x=u().clock;x.stop(),x.elapsedTime=0,g!=="never"&&(x.start(),x.elapsedTime=0),a(()=>({frameloop:g}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:_e.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(g,x,M)=>{const T=u().internal;return T.priority=T.priority+(x>0?1:0),T.subscribers.push({ref:g,priority:x,store:M}),T.subscribers=T.subscribers.sort((P,b)=>P.priority-b.priority),()=>{const P=u().internal;P!=null&&P.subscribers&&(P.priority=P.priority-(x>0?1:0),P.subscribers=P.subscribers.filter(b=>b.ref!==g))}}}}}),i=n.getState();let r=i.size,s=i.viewport.dpr,o=i.camera;return n.subscribe(()=>{const{camera:a,size:u,viewport:h,gl:f,set:d}=n.getState();if(u.width!==r.width||u.height!==r.height||h.dpr!==s){var p;r=u,s=h.dpr,h7(a,u),f.setPixelRatio(h.dpr);const v=(p=u.updateStyle)!=null?p:typeof HTMLCanvasElement<"u"&&f.domElement instanceof HTMLCanvasElement;f.setSize(u.width,u.height,v)}a!==o&&(o=a,d(v=>({viewport:{...v.viewport,...v.viewport.getCurrentViewport(a)}})))}),n.subscribe(a=>t(a)),n};let $m,g7=new Set,v7=new Set,y7=new Set;function Jy(t,e){if(t.size)for(const{callback:n}of t.values())n(e)}function ef(t,e){switch(t){case"before":return Jy(g7,e);case"after":return Jy(v7,e);case"tail":return Jy(y7,e)}}let Qy,e_;function t_(t,e,n){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof t=="number"&&(i=t-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=t),Qy=e.internal.subscribers,$m=0;$m<Qy.length;$m++)e_=Qy[$m],e_.ref.current(e_.store.getState(),i,n);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function _7(t){let e=!1,n=!1,i,r,s;function o(h){r=requestAnimationFrame(o),e=!0,i=0,ef("before",h),n=!0;for(const d of t.values()){var f;s=d.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((f=s.gl.xr)!=null&&f.isPresenting)&&(i+=t_(h,s))}if(n=!1,ef("after",h),i===0)return ef("tail",h),e=!1,cancelAnimationFrame(r)}function a(h,f=1){var d;if(!h)return t.forEach(p=>a(p.store.getState(),f));(d=h.gl.xr)!=null&&d.isPresenting||!h.internal.active||h.frameloop==="never"||(f>1?h.internal.frames=Math.min(60,h.internal.frames+f):n?h.internal.frames=2:h.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function u(h,f=!0,d,p){if(f&&ef("before",h),d)t_(h,d,p);else for(const v of t.values())t_(h,v.store.getState());f&&ef("after",h)}return{loop:o,invalidate:a,advance:u}}function LL(){const t=_e.useContext(PL);if(!t)throw new Error("R3F: Hooks can only be used within the Canvas component!");return t}function ga(t=n=>n,e){return LL()(t,e)}function r3(t,e=0){const n=LL(),i=n.getState().internal.subscribe,r=wL(t);return Nd(()=>i(r,e,n),[e,i,n]),null}const Hu=new Map,{invalidate:RA,advance:PA}=_7(Hu),{reconciler:o0,applyProps:Jc}=s7(Hu,f7),Qc={objects:"shallow",strict:!1},x7=(t,e)=>{const n=typeof t=="function"?t(e):t;return RL(n)?n:new SP({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...t})};function S7(t,e){const n=typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement;if(e){const{width:i,height:r,top:s,left:o,updateStyle:a=n}=e;return{width:i,height:r,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&t.parentElement){const{width:i,height:r,top:s,left:o}=t.parentElement.getBoundingClientRect();return{width:i,height:r,top:s,left:o,updateStyle:n}}else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas)return{width:t.width,height:t.height,top:0,left:0,updateStyle:n};return{width:0,height:0,top:0,left:0}}function M7(t){const e=Hu.get(t),n=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||m7(RA,PA),o=n||o0.createContainer(s,xu.ConcurrentRoot,null,!1,null,"",r,null);e||Hu.set(t,{fiber:o,store:s});let a,u=!1,h;return{configure(f={}){let{gl:d,size:p,scene:v,events:y,onCreated:w,shadows:S=!1,linear:g=!1,flat:x=!1,legacy:M=!1,orthographic:T=!1,frameloop:P="always",dpr:b=[1,2],performance:L,raycaster:N,camera:R,onPointerMissed:C}=f,O=s.getState(),j=O.gl;O.gl||O.set({gl:j=x7(d,t)});let H=O.raycaster;H||O.set({raycaster:H=new mL});const{params:J,...ne}=N||{};if(on.equ(ne,H,Qc)||Jc(H,{...ne}),on.equ(J,H.params,Qc)||Jc(H,{params:{...H.params,...J}}),!O.camera||O.camera===h&&!on.equ(h,R,Qc)){h=R;const V=R instanceof Ad,re=V?R:T?new ka(0,0,0,0,.1,1e3):new Fn(75,0,.1,1e3);V||(re.position.z=5,R&&(Jc(re,R),("aspect"in R||"left"in R||"right"in R||"bottom"in R||"top"in R)&&(re.manual=!0,re.updateProjectionMatrix())),!O.camera&&!(R!=null&&R.rotation)&&re.lookAt(0,0,0)),O.set({camera:re}),H.camera=re}if(!O.scene){let V;v!=null&&v.isScene?V=v:(V=new kS,v&&Jc(V,v)),O.set({scene:tu(V)})}if(!O.xr){var fe;const V=(Be,ee)=>{const xe=s.getState();xe.frameloop!=="never"&&PA(Be,!0,xe,ee)},re=()=>{const Be=s.getState();Be.gl.xr.enabled=Be.gl.xr.isPresenting,Be.gl.xr.setAnimationLoop(Be.gl.xr.isPresenting?V:null),Be.gl.xr.isPresenting||RA(Be)},we={connect(){const Be=s.getState().gl;Be.xr.addEventListener("sessionstart",re),Be.xr.addEventListener("sessionend",re)},disconnect(){const Be=s.getState().gl;Be.xr.removeEventListener("sessionstart",re),Be.xr.removeEventListener("sessionend",re)}};typeof((fe=j.xr)==null?void 0:fe.addEventListener)=="function"&&we.connect(),O.set({xr:we})}if(j.shadowMap){const V=j.shadowMap.enabled,re=j.shadowMap.type;if(j.shadowMap.enabled=!!S,on.boo(S))j.shadowMap.type=xf;else if(on.str(S)){var ve;const we={basic:eR,percentage:k0,soft:xf,variance:_s};j.shadowMap.type=(ve=we[S])!=null?ve:xf}else on.obj(S)&&Object.assign(j.shadowMap,S);(V!==j.shadowMap.enabled||re!==j.shadowMap.type)&&(j.shadowMap.needsUpdate=!0)}const U=SL();U&&("enabled"in U?U.enabled=!M:"legacyMode"in U&&(U.legacyMode=M)),u||Jc(j,{outputEncoding:g?3e3:3001,toneMapping:x?eo:mS}),O.legacy!==M&&O.set(()=>({legacy:M})),O.linear!==g&&O.set(()=>({linear:g})),O.flat!==x&&O.set(()=>({flat:x})),d&&!on.fun(d)&&!RL(d)&&!on.equ(d,j,Qc)&&Jc(j,d),y&&!O.events.handlers&&O.set({events:y(s)});const X=S7(t,p);return on.equ(X,O.size,Qc)||O.setSize(X.width,X.height,X.updateStyle,X.top,X.left),b&&O.viewport.dpr!==AL(b)&&O.setDpr(b),O.frameloop!==P&&O.setFrameloop(P),O.onPointerMissed||O.set({onPointerMissed:C}),L&&!on.equ(L,O.performance,Qc)&&O.set(V=>({performance:{...V.performance,...L}})),a=w,u=!0,this},render(f){return u||this.configure(),o0.updateContainer(Te.jsx(w7,{store:s,children:f,onCreated:a,rootElement:t}),o,null,()=>{}),s},unmount(){IL(t)}}}function w7({store:t,children:e,onCreated:n,rootElement:i}){return Nd(()=>{const r=t.getState();r.set(s=>({internal:{...s.internal,active:!0}})),n&&n(r),t.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),Te.jsx(PL.Provider,{value:t,children:e})}function IL(t,e){const n=Hu.get(t),i=n==null?void 0:n.fiber;if(i){const r=n==null?void 0:n.store.getState();r&&(r.internal.active=!1),o0.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,o,a,u;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=r.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(u=r.gl)!=null&&u.xr&&r.xr.disconnect(),c7(r),Hu.delete(t),e&&e(t)}catch{}},500)})}}o0.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:_e.version});const n_={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function E7(t){const{handlePointer:e}=p7(t);return{priority:1,enabled:!0,compute(n,i,r){i.pointer.set(n.offsetX/i.size.width*2-1,-(n.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(n_).reduce((n,i)=>({...n,[i]:e(i)}),{}),update:()=>{var n;const{events:i,internal:r}=t.getState();(n=r.lastEvent)!=null&&n.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:n=>{var i;const{set:r,events:s}=t.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:n}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([o,a])=>{const[u,h]=n_[o];n.addEventListener(u,a,{passive:h})})},disconnect:()=>{const{set:n,events:i}=t.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,o])=>{if(i&&i.connected instanceof HTMLElement){const[a]=n_[s];i.connected.removeEventListener(a,o)}}),n(s=>({events:{...s.events,connected:void 0}}))}}}}function LA(t,e){let n;return(...i)=>{window.clearTimeout(n),n=window.setTimeout(()=>t(...i),e)}}function T7({debounce:t,scroll:e,polyfill:n,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const r=n||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,o]=_e.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),a=_e.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),u=t?typeof t=="number"?t:t.scroll:null,h=t?typeof t=="number"?t:t.resize:null,f=_e.useRef(!1);_e.useEffect(()=>(f.current=!0,()=>void(f.current=!1)));const[d,p,v]=_e.useMemo(()=>{const g=()=>{if(!a.current.element)return;const{left:x,top:M,width:T,height:P,bottom:b,right:L,x:N,y:R}=a.current.element.getBoundingClientRect(),C={left:x,top:M,width:T,height:P,bottom:b,right:L,x:N,y:R};a.current.element instanceof HTMLElement&&i&&(C.height=a.current.element.offsetHeight,C.width=a.current.element.offsetWidth),Object.freeze(C),f.current&&!R7(a.current.lastBounds,C)&&o(a.current.lastBounds=C)};return[g,h?LA(g,h):g,u?LA(g,u):g]},[o,i,u,h]);function y(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(g=>g.removeEventListener("scroll",v,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null),a.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",a.current.orientationHandler))}function w(){a.current.element&&(a.current.resizeObserver=new r(v),a.current.resizeObserver.observe(a.current.element),e&&a.current.scrollContainers&&a.current.scrollContainers.forEach(g=>g.addEventListener("scroll",v,{capture:!0,passive:!0})),a.current.orientationHandler=()=>{v()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",a.current.orientationHandler))}const S=g=>{!g||g===a.current.element||(y(),a.current.element=g,a.current.scrollContainers=NL(g),w())};return C7(v,!!e),A7(p),_e.useEffect(()=>{y(),w()},[e,v,p]),_e.useEffect(()=>y,[]),[S,s,d]}function A7(t){_e.useEffect(()=>{const e=t;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[t])}function C7(t,e){_e.useEffect(()=>{if(e){const n=t;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[t,e])}function NL(t){const e=[];if(!t||t===document.body)return e;const{overflow:n,overflowX:i,overflowY:r}=window.getComputedStyle(t);return[n,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(t),[...e,...NL(t.parentElement)]}const b7=["x","y","top","bottom","left","right","width","height"],R7=(t,e)=>b7.every(n=>t[n]===e[n]);var P7=Object.defineProperty,L7=Object.defineProperties,I7=Object.getOwnPropertyDescriptors,IA=Object.getOwnPropertySymbols,N7=Object.prototype.hasOwnProperty,D7=Object.prototype.propertyIsEnumerable,NA=(t,e,n)=>e in t?P7(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,DA=(t,e)=>{for(var n in e||(e={}))N7.call(e,n)&&NA(t,n,e[n]);if(IA)for(var n of IA(e))D7.call(e,n)&&NA(t,n,e[n]);return t},k7=(t,e)=>L7(t,I7(e)),kA,UA;typeof window<"u"&&((kA=window.document)!=null&&kA.createElement||((UA=window.navigator)==null?void 0:UA.product)==="ReactNative")?_e.useLayoutEffect:_e.useEffect;function DL(t,e,n){if(!t)return;if(n(t)===!0)return t;let i=e?t.return:t.child;for(;i;){const r=DL(i,e,n);if(r)return r;i=e?null:i.sibling}}function kL(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const OA=console.error;console.error=function(){const t=[...arguments].join("");if(t!=null&&t.startsWith("Warning:")&&t.includes("useContext")){console.error=OA;return}return OA.apply(this,arguments)};const s3=kL(_e.createContext(null));class UL extends _e.Component{render(){return _e.createElement(s3.Provider,{value:this._reactInternals},this.props.children)}}function U7(){const t=_e.useContext(s3);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=_e.useId();return _e.useMemo(()=>{for(const i of[t,t==null?void 0:t.alternate]){if(!i)continue;const r=DL(i,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(r)return r}},[t,e])}function O7(){const t=U7(),[e]=_e.useState(()=>new Map);e.clear();let n=t;for(;n;){if(n.type&&typeof n.type=="object"){const r=n.type._context===void 0&&n.type.Provider===n.type?n.type:n.type._context;r&&r!==s3&&!e.has(r)&&e.set(r,_e.useContext(kL(r)))}n=n.return}return e}function F7(){const t=O7();return _e.useMemo(()=>Array.from(t.keys()).reduce((e,n)=>i=>_e.createElement(e,null,_e.createElement(n.Provider,k7(DA({},i),{value:t.get(n)}))),e=>_e.createElement(UL,DA({},e))),[t])}const z7=_e.forwardRef(function({children:e,fallback:n,resize:i,style:r,gl:s,events:o=E7,eventSource:a,eventPrefix:u,shadows:h,linear:f,flat:d,legacy:p,orthographic:v,frameloop:y,dpr:w,performance:S,raycaster:g,camera:x,scene:M,onPointerMissed:T,onCreated:P,...b},L){_e.useMemo(()=>r7(K9),[]);const N=F7(),[R,C]=T7({scroll:!0,debounce:{scroll:50,resize:0},...i}),O=_e.useRef(null),j=_e.useRef(null);_e.useImperativeHandle(L,()=>O.current);const H=wL(T),[J,ne]=_e.useState(!1),[fe,ve]=_e.useState(!1);if(J)throw J;if(fe)throw fe;const U=_e.useRef(null);Nd(()=>{const V=O.current;C.width>0&&C.height>0&&V&&(U.current||(U.current=M7(V)),U.current.configure({gl:s,events:o,shadows:h,linear:f,flat:d,legacy:p,orthographic:v,frameloop:y,dpr:w,performance:S,raycaster:g,camera:x,scene:M,size:C,onPointerMissed:(...re)=>H.current==null?void 0:H.current(...re),onCreated:re=>{re.events.connect==null||re.events.connect(a?o7(a)?a.current:a:j.current),u&&re.setEvents({compute:(we,Be)=>{const ee=we[u+"X"],xe=we[u+"Y"];Be.pointer.set(ee/Be.size.width*2-1,-(xe/Be.size.height)*2+1),Be.raycaster.setFromCamera(Be.pointer,Be.camera)}}),P==null||P(re)}}),U.current.render(Te.jsx(N,{children:Te.jsx(EL,{set:ve,children:Te.jsx(_e.Suspense,{fallback:Te.jsx(a7,{set:ne}),children:e??null})})})))}),_e.useEffect(()=>{const V=O.current;if(V)return()=>IL(V)},[]);const X=a?"none":"auto";return Te.jsx("div",{ref:j,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:X,...r},...b,children:Te.jsx("div",{ref:R,style:{width:"100%",height:"100%"},children:Te.jsx("canvas",{ref:O,style:{display:"block"},children:n})})})}),B7=_e.forwardRef(function(e,n){return Te.jsx(UL,{children:Te.jsx(z7,{...e,ref:n})})});function Jx(){return Jx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Jx.apply(null,arguments)}var H7=Object.defineProperty,V7=(t,e,n)=>e in t?H7(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,G7=(t,e,n)=>(V7(t,typeof e!="symbol"?e+"":e,n),n);class W7{constructor(){G7(this,"_listeners")}addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(n)===-1&&i[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(n);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}var X7=Object.defineProperty,j7=(t,e,n)=>e in t?X7(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,st=(t,e,n)=>(j7(t,typeof e!="symbol"?e+"":e,n),n);const qm=new lc,FA=new Co,Y7=Math.cos(70*(Math.PI/180)),zA=(t,e)=>(t%e+e)%e;let $7=class extends W7{constructor(e,n){super(),st(this,"object"),st(this,"domElement"),st(this,"enabled",!0),st(this,"target",new k),st(this,"minDistance",0),st(this,"maxDistance",1/0),st(this,"minZoom",0),st(this,"maxZoom",1/0),st(this,"minPolarAngle",0),st(this,"maxPolarAngle",Math.PI),st(this,"minAzimuthAngle",-1/0),st(this,"maxAzimuthAngle",1/0),st(this,"enableDamping",!1),st(this,"dampingFactor",.05),st(this,"enableZoom",!0),st(this,"zoomSpeed",1),st(this,"enableRotate",!0),st(this,"rotateSpeed",1),st(this,"enablePan",!0),st(this,"panSpeed",1),st(this,"screenSpacePanning",!0),st(this,"keyPanSpeed",7),st(this,"zoomToCursor",!1),st(this,"autoRotate",!1),st(this,"autoRotateSpeed",2),st(this,"reverseOrbit",!1),st(this,"reverseHorizontalOrbit",!1),st(this,"reverseVerticalOrbit",!1),st(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),st(this,"mouseButtons",{LEFT:Cl.ROTATE,MIDDLE:Cl.DOLLY,RIGHT:Cl.PAN}),st(this,"touches",{ONE:bl.ROTATE,TWO:bl.DOLLY_PAN}),st(this,"target0"),st(this,"position0"),st(this,"zoom0"),st(this,"_domElementKeyEvents",null),st(this,"getPolarAngle"),st(this,"getAzimuthalAngle"),st(this,"setPolarAngle"),st(this,"setAzimuthalAngle"),st(this,"getDistance"),st(this,"getZoomScale"),st(this,"listenToKeyEvents"),st(this,"stopListenToKeyEvents"),st(this,"saveState"),st(this,"reset"),st(this,"update"),st(this,"connect"),st(this,"dispose"),st(this,"dollyIn"),st(this,"dollyOut"),st(this,"getScale"),st(this,"setScale"),this.object=e,this.domElement=n,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>f.phi,this.getAzimuthalAngle=()=>f.theta,this.setPolarAngle=G=>{let ue=zA(G,2*Math.PI),B=f.phi;B<0&&(B+=2*Math.PI),ue<0&&(ue+=2*Math.PI);let oe=Math.abs(ue-B);2*Math.PI-oe<oe&&(ue<B?ue+=2*Math.PI:B+=2*Math.PI),d.phi=ue-B,i.update()},this.setAzimuthalAngle=G=>{let ue=zA(G,2*Math.PI),B=f.theta;B<0&&(B+=2*Math.PI),ue<0&&(ue+=2*Math.PI);let oe=Math.abs(ue-B);2*Math.PI-oe<oe&&(ue<B?ue+=2*Math.PI:B+=2*Math.PI),d.theta=ue-B,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=G=>{G.addEventListener("keydown",ht),this._domElementKeyEvents=G},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",ht),this._domElementKeyEvents=null},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(r),i.update(),u=a.NONE},this.update=(()=>{const G=new k,ue=new k(0,1,0),B=new Pi().setFromUnitVectors(e.up,ue),oe=B.clone().invert(),ae=new k,Re=new Pi,Ne=2*Math.PI;return function(){const Gt=i.object.position;B.setFromUnitVectors(e.up,ue),oe.copy(B).invert(),G.copy(Gt).sub(i.target),G.applyQuaternion(B),f.setFromVector3(G),i.autoRotate&&u===a.NONE&&J(j()),i.enableDamping?(f.theta+=d.theta*i.dampingFactor,f.phi+=d.phi*i.dampingFactor):(f.theta+=d.theta,f.phi+=d.phi);let Nt=i.minAzimuthAngle,Zt=i.maxAzimuthAngle;isFinite(Nt)&&isFinite(Zt)&&(Nt<-Math.PI?Nt+=Ne:Nt>Math.PI&&(Nt-=Ne),Zt<-Math.PI?Zt+=Ne:Zt>Math.PI&&(Zt-=Ne),Nt<=Zt?f.theta=Math.max(Nt,Math.min(Zt,f.theta)):f.theta=f.theta>(Nt+Zt)/2?Math.max(Nt,f.theta):Math.min(Zt,f.theta)),f.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,f.phi)),f.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(v,i.dampingFactor):i.target.add(v),i.zoomToCursor&&R||i.object.isOrthographicCamera?f.radius=Be(f.radius):f.radius=Be(f.radius*p),G.setFromSpherical(f),G.applyQuaternion(oe),Gt.copy(i.target).add(G),i.object.matrixAutoUpdate||i.object.updateMatrix(),i.object.lookAt(i.target),i.enableDamping===!0?(d.theta*=1-i.dampingFactor,d.phi*=1-i.dampingFactor,v.multiplyScalar(1-i.dampingFactor)):(d.set(0,0,0),v.set(0,0,0));let bt=!1;if(i.zoomToCursor&&R){let Kn=null;if(i.object instanceof Fn&&i.object.isPerspectiveCamera){const hn=G.length();Kn=Be(hn*p);const ho=hn-Kn;i.object.position.addScaledVector(L,ho),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const hn=new k(N.x,N.y,0);hn.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/p)),i.object.updateProjectionMatrix(),bt=!0;const ho=new k(N.x,N.y,0);ho.unproject(i.object),i.object.position.sub(ho).add(hn),i.object.updateMatrixWorld(),Kn=G.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;Kn!==null&&(i.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(Kn).add(i.object.position):(qm.origin.copy(i.object.position),qm.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(qm.direction))<Y7?e.lookAt(i.target):(FA.setFromNormalAndCoplanarPoint(i.object.up,i.target),qm.intersectPlane(FA,i.target))))}else i.object instanceof ka&&i.object.isOrthographicCamera&&(bt=p!==1,bt&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/p)),i.object.updateProjectionMatrix()));return p=1,R=!1,bt||ae.distanceToSquared(i.object.position)>h||8*(1-Re.dot(i.object.quaternion))>h?(i.dispatchEvent(r),ae.copy(i.object.position),Re.copy(i.object.quaternion),bt=!1,!0):!1}})(),this.connect=G=>{i.domElement=G,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",Mt),i.domElement.addEventListener("pointerdown",de),i.domElement.addEventListener("pointercancel",me),i.domElement.addEventListener("wheel",Le)},this.dispose=()=>{var G,ue,B,oe,ae,Re;i.domElement&&(i.domElement.style.touchAction="auto"),(G=i.domElement)==null||G.removeEventListener("contextmenu",Mt),(ue=i.domElement)==null||ue.removeEventListener("pointerdown",de),(B=i.domElement)==null||B.removeEventListener("pointercancel",me),(oe=i.domElement)==null||oe.removeEventListener("wheel",Le),(ae=i.domElement)==null||ae.ownerDocument.removeEventListener("pointermove",ye),(Re=i.domElement)==null||Re.ownerDocument.removeEventListener("pointerup",me),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",ht)};const i=this,r={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let u=a.NONE;const h=1e-6,f=new $x,d=new $x;let p=1;const v=new k,y=new he,w=new he,S=new he,g=new he,x=new he,M=new he,T=new he,P=new he,b=new he,L=new k,N=new he;let R=!1;const C=[],O={};function j(){return 2*Math.PI/60/60*i.autoRotateSpeed}function H(){return Math.pow(.95,i.zoomSpeed)}function J(G){i.reverseOrbit||i.reverseHorizontalOrbit?d.theta+=G:d.theta-=G}function ne(G){i.reverseOrbit||i.reverseVerticalOrbit?d.phi+=G:d.phi-=G}const fe=(()=>{const G=new k;return function(B,oe){G.setFromMatrixColumn(oe,0),G.multiplyScalar(-B),v.add(G)}})(),ve=(()=>{const G=new k;return function(B,oe){i.screenSpacePanning===!0?G.setFromMatrixColumn(oe,1):(G.setFromMatrixColumn(oe,0),G.crossVectors(i.object.up,G)),G.multiplyScalar(B),v.add(G)}})(),U=(()=>{const G=new k;return function(B,oe){const ae=i.domElement;if(ae&&i.object instanceof Fn&&i.object.isPerspectiveCamera){const Re=i.object.position;G.copy(Re).sub(i.target);let Ne=G.length();Ne*=Math.tan(i.object.fov/2*Math.PI/180),fe(2*B*Ne/ae.clientHeight,i.object.matrix),ve(2*oe*Ne/ae.clientHeight,i.object.matrix)}else ae&&i.object instanceof ka&&i.object.isOrthographicCamera?(fe(B*(i.object.right-i.object.left)/i.object.zoom/ae.clientWidth,i.object.matrix),ve(oe*(i.object.top-i.object.bottom)/i.object.zoom/ae.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function X(G){i.object instanceof Fn&&i.object.isPerspectiveCamera||i.object instanceof ka&&i.object.isOrthographicCamera?p=G:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function V(G){X(p/G)}function re(G){X(p*G)}function we(G){if(!i.zoomToCursor||!i.domElement)return;R=!0;const ue=i.domElement.getBoundingClientRect(),B=G.clientX-ue.left,oe=G.clientY-ue.top,ae=ue.width,Re=ue.height;N.x=B/ae*2-1,N.y=-(oe/Re)*2+1,L.set(N.x,N.y,1).unproject(i.object).sub(i.object.position).normalize()}function Be(G){return Math.max(i.minDistance,Math.min(i.maxDistance,G))}function ee(G){y.set(G.clientX,G.clientY)}function xe(G){we(G),T.set(G.clientX,G.clientY)}function Ce(G){g.set(G.clientX,G.clientY)}function Me(G){w.set(G.clientX,G.clientY),S.subVectors(w,y).multiplyScalar(i.rotateSpeed);const ue=i.domElement;ue&&(J(2*Math.PI*S.x/ue.clientHeight),ne(2*Math.PI*S.y/ue.clientHeight)),y.copy(w),i.update()}function ft(G){P.set(G.clientX,G.clientY),b.subVectors(P,T),b.y>0?V(H()):b.y<0&&re(H()),T.copy(P),i.update()}function vt(G){x.set(G.clientX,G.clientY),M.subVectors(x,g).multiplyScalar(i.panSpeed),U(M.x,M.y),g.copy(x),i.update()}function $(G){we(G),G.deltaY<0?re(H()):G.deltaY>0&&V(H()),i.update()}function ut(G){let ue=!1;switch(G.code){case i.keys.UP:U(0,i.keyPanSpeed),ue=!0;break;case i.keys.BOTTOM:U(0,-i.keyPanSpeed),ue=!0;break;case i.keys.LEFT:U(i.keyPanSpeed,0),ue=!0;break;case i.keys.RIGHT:U(-i.keyPanSpeed,0),ue=!0;break}ue&&(G.preventDefault(),i.update())}function ce(){if(C.length==1)y.set(C[0].pageX,C[0].pageY);else{const G=.5*(C[0].pageX+C[1].pageX),ue=.5*(C[0].pageY+C[1].pageY);y.set(G,ue)}}function ge(){if(C.length==1)g.set(C[0].pageX,C[0].pageY);else{const G=.5*(C[0].pageX+C[1].pageX),ue=.5*(C[0].pageY+C[1].pageY);g.set(G,ue)}}function pe(){const G=C[0].pageX-C[1].pageX,ue=C[0].pageY-C[1].pageY,B=Math.sqrt(G*G+ue*ue);T.set(0,B)}function Pe(){i.enableZoom&&pe(),i.enablePan&&ge()}function Se(){i.enableZoom&&pe(),i.enableRotate&&ce()}function Fe(G){if(C.length==1)w.set(G.pageX,G.pageY);else{const B=wt(G),oe=.5*(G.pageX+B.x),ae=.5*(G.pageY+B.y);w.set(oe,ae)}S.subVectors(w,y).multiplyScalar(i.rotateSpeed);const ue=i.domElement;ue&&(J(2*Math.PI*S.x/ue.clientHeight),ne(2*Math.PI*S.y/ue.clientHeight)),y.copy(w)}function Qe(G){if(C.length==1)x.set(G.pageX,G.pageY);else{const ue=wt(G),B=.5*(G.pageX+ue.x),oe=.5*(G.pageY+ue.y);x.set(B,oe)}M.subVectors(x,g).multiplyScalar(i.panSpeed),U(M.x,M.y),g.copy(x)}function z(G){const ue=wt(G),B=G.pageX-ue.x,oe=G.pageY-ue.y,ae=Math.sqrt(B*B+oe*oe);P.set(0,ae),b.set(0,Math.pow(P.y/T.y,i.zoomSpeed)),V(b.y),T.copy(P)}function I(G){i.enableZoom&&z(G),i.enablePan&&Qe(G)}function Z(G){i.enableZoom&&z(G),i.enableRotate&&Fe(G)}function de(G){var ue,B;i.enabled!==!1&&(C.length===0&&((ue=i.domElement)==null||ue.ownerDocument.addEventListener("pointermove",ye),(B=i.domElement)==null||B.ownerDocument.addEventListener("pointerup",me)),it(G),G.pointerType==="touch"?be(G):Ze(G))}function ye(G){i.enabled!==!1&&(G.pointerType==="touch"?$e(G):Ie(G))}function me(G){var ue,B,oe;He(G),C.length===0&&((ue=i.domElement)==null||ue.releasePointerCapture(G.pointerId),(B=i.domElement)==null||B.ownerDocument.removeEventListener("pointermove",ye),(oe=i.domElement)==null||oe.ownerDocument.removeEventListener("pointerup",me)),i.dispatchEvent(o),u=a.NONE}function Ze(G){let ue;switch(G.button){case 0:ue=i.mouseButtons.LEFT;break;case 1:ue=i.mouseButtons.MIDDLE;break;case 2:ue=i.mouseButtons.RIGHT;break;default:ue=-1}switch(ue){case Cl.DOLLY:if(i.enableZoom===!1)return;xe(G),u=a.DOLLY;break;case Cl.ROTATE:if(G.ctrlKey||G.metaKey||G.shiftKey){if(i.enablePan===!1)return;Ce(G),u=a.PAN}else{if(i.enableRotate===!1)return;ee(G),u=a.ROTATE}break;case Cl.PAN:if(G.ctrlKey||G.metaKey||G.shiftKey){if(i.enableRotate===!1)return;ee(G),u=a.ROTATE}else{if(i.enablePan===!1)return;Ce(G),u=a.PAN}break;default:u=a.NONE}u!==a.NONE&&i.dispatchEvent(s)}function Ie(G){if(i.enabled!==!1)switch(u){case a.ROTATE:if(i.enableRotate===!1)return;Me(G);break;case a.DOLLY:if(i.enableZoom===!1)return;ft(G);break;case a.PAN:if(i.enablePan===!1)return;vt(G);break}}function Le(G){i.enabled===!1||i.enableZoom===!1||u!==a.NONE&&u!==a.ROTATE||(G.preventDefault(),i.dispatchEvent(s),$(G),i.dispatchEvent(o))}function ht(G){i.enabled===!1||i.enablePan===!1||ut(G)}function be(G){switch(dt(G),C.length){case 1:switch(i.touches.ONE){case bl.ROTATE:if(i.enableRotate===!1)return;ce(),u=a.TOUCH_ROTATE;break;case bl.PAN:if(i.enablePan===!1)return;ge(),u=a.TOUCH_PAN;break;default:u=a.NONE}break;case 2:switch(i.touches.TWO){case bl.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Pe(),u=a.TOUCH_DOLLY_PAN;break;case bl.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Se(),u=a.TOUCH_DOLLY_ROTATE;break;default:u=a.NONE}break;default:u=a.NONE}u!==a.NONE&&i.dispatchEvent(s)}function $e(G){switch(dt(G),u){case a.TOUCH_ROTATE:if(i.enableRotate===!1)return;Fe(G),i.update();break;case a.TOUCH_PAN:if(i.enablePan===!1)return;Qe(G),i.update();break;case a.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;I(G),i.update();break;case a.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Z(G),i.update();break;default:u=a.NONE}}function Mt(G){i.enabled!==!1&&G.preventDefault()}function it(G){C.push(G)}function He(G){delete O[G.pointerId];for(let ue=0;ue<C.length;ue++)if(C[ue].pointerId==G.pointerId){C.splice(ue,1);return}}function dt(G){let ue=O[G.pointerId];ue===void 0&&(ue=new he,O[G.pointerId]=ue),ue.set(G.pageX,G.pageY)}function wt(G){const ue=G.pointerId===C[0].pointerId?C[1]:C[0];return O[ue.pointerId]}this.dollyIn=(G=H())=>{re(G),i.update()},this.dollyOut=(G=H())=>{V(G),i.update()},this.getScale=()=>p,this.setScale=G=>{X(G),i.update()},this.getZoomScale=()=>H(),n!==void 0&&this.connect(n),this.update()}};const q7=_e.forwardRef(({makeDefault:t,camera:e,regress:n,domElement:i,enableDamping:r=!0,keyEvents:s=!1,onChange:o,onStart:a,onEnd:u,...h},f)=>{const d=ga(b=>b.invalidate),p=ga(b=>b.camera),v=ga(b=>b.gl),y=ga(b=>b.events),w=ga(b=>b.setEvents),S=ga(b=>b.set),g=ga(b=>b.get),x=ga(b=>b.performance),M=e||p,T=i||y.connected||v.domElement,P=_e.useMemo(()=>new $7(M),[M]);return r3(()=>{P.enabled&&P.update()},-1),_e.useEffect(()=>(s&&P.connect(s===!0?T:s),P.connect(T),()=>void P.dispose()),[s,T,n,P,d]),_e.useEffect(()=>{const b=R=>{d(),n&&x.regress(),o&&o(R)},L=R=>{a&&a(R)},N=R=>{u&&u(R)};return P.addEventListener("change",b),P.addEventListener("start",L),P.addEventListener("end",N),()=>{P.removeEventListener("start",L),P.removeEventListener("end",N),P.removeEventListener("change",b)}},[o,a,u,P,d,w]),_e.useEffect(()=>{if(t){const b=g().controls;return S({controls:P}),()=>S({controls:b})}},[t,P]),_e.createElement("primitive",Jx({ref:f,object:P,enableDamping:r},h))});/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z7=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),OL=(...t)=>t.filter((e,n,i)=>!!e&&i.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var K7={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J7=_e.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:r="",children:s,iconNode:o,...a},u)=>_e.createElement("svg",{ref:u,...K7,width:e,height:e,stroke:t,strokeWidth:i?Number(n)*24/Number(e):n,className:OL("lucide",r),...a},[...o.map(([h,f])=>_e.createElement(h,f)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=(t,e)=>{const n=_e.forwardRef(({className:i,...r},s)=>_e.createElement(J7,{ref:s,iconNode:e,className:OL(`lucide-${Z7(t)}`,i),...r}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q7=Ls("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eH=Ls("CameraOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16",key:"qmtpty"}],["path",{d:"M9.5 4h5L17 7h3a2 2 0 0 1 2 2v7.5",key:"1ufyfc"}],["path",{d:"M14.121 15.121A3 3 0 1 1 9.88 10.88",key:"11zox6"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FL=Ls("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tH=Ls("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nH=Ls("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iH=Ls("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rH=Ls("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sH=Ls("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oH=Ls("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aH=Ls("VideoOff",[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lH=Ls("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var Dd=typeof self<"u"?self:{};function zL(t){e:{for(var e=["CLOSURE_FLAGS"],n=Dd,i=0;i<e.length;i++)if((n=n[e[i]])==null){e=null;break e}e=n}return(t=e&&e[t])!=null&&t}function El(){throw Error("Invalid UTF8")}function BA(t,e){return e=String.fromCharCode.apply(null,e),t==null?e:t+e}let Zm,i_;const cH=typeof TextDecoder<"u";let uH;const hH=typeof TextEncoder<"u";function BL(t){if(hH)t=(uH||(uH=new TextEncoder)).encode(t);else{let n=0;const i=new Uint8Array(3*t.length);for(let r=0;r<t.length;r++){var e=t.charCodeAt(r);if(128>e)i[n++]=e;else{if(2048>e)i[n++]=e>>6|192;else{if(55296<=e&&57343>=e){if(56319>=e&&r<t.length){const s=t.charCodeAt(++r);if(56320<=s&&57343>=s){e=1024*(e-55296)+s-56320+65536,i[n++]=e>>18|240,i[n++]=e>>12&63|128,i[n++]=e>>6&63|128,i[n++]=63&e|128;continue}r--}e=65533}i[n++]=e>>12|224,i[n++]=e>>6&63|128}i[n++]=63&e|128}}t=n===i.length?i:i.subarray(0,n)}return t}var md,HL=zL(610401301),fH=zL(188588736);const HA=Dd.navigator;function Qx(t){return!!HL&&!!md&&md.brands.some(({brand:e})=>e&&e.indexOf(t)!=-1)}function Jr(t){var e;return(e=Dd.navigator)&&(e=e.userAgent)||(e=""),e.indexOf(t)!=-1}function wa(){return!!HL&&!!md&&0<md.brands.length}function r_(){return wa()?Qx("Chromium"):(Jr("Chrome")||Jr("CriOS"))&&!(!wa()&&Jr("Edge"))||Jr("Silk")}function o3(t){return o3[" "](t),t}md=HA&&HA.userAgentData||null,o3[" "]=function(){};var dH=!wa()&&(Jr("Trident")||Jr("MSIE"));!Jr("Android")||r_(),r_(),Jr("Safari")&&(r_()||!wa()&&Jr("Coast")||!wa()&&Jr("Opera")||!wa()&&Jr("Edge")||(wa()?Qx("Microsoft Edge"):Jr("Edg/"))||wa()&&Qx("Opera"));var VL={},cf=null;function pH(t){var e=t.length,n=3*e/4;n%3?n=Math.floor(n):"=.".indexOf(t[e-1])!=-1&&(n="=.".indexOf(t[e-2])!=-1?n-2:n-1);var i=new Uint8Array(n),r=0;return function(s,o){function a(v){for(;u<s.length;){var y=s.charAt(u++),w=cf[y];if(w!=null)return w;if(!/^[\s\xa0]*$/.test(y))throw Error("Unknown base64 encoding at char: "+y)}return v}GL();for(var u=0;;){var h=a(-1),f=a(0),d=a(64),p=a(64);if(p===64&&h===-1)break;o(h<<2|f>>4),d!=64&&(o(f<<4&240|d>>2),p!=64&&o(d<<6&192|p))}}(t,function(s){i[r++]=s}),r!==n?i.subarray(0,r):i}function GL(){if(!cf){cf={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++){var i=t.concat(e[n].split(""));VL[n]=i;for(var r=0;r<i.length;r++){var s=i[r];cf[s]===void 0&&(cf[s]=r)}}}}var WL=typeof Uint8Array<"u",XL=!dH&&typeof btoa=="function";function VA(t){if(!XL){var e;e===void 0&&(e=0),GL(),e=VL[e];var n=Array(Math.floor(t.length/3)),i=e[64]||"";let u=0,h=0;for(;u<t.length-2;u+=3){var r=t[u],s=t[u+1],o=t[u+2],a=e[r>>2];r=e[(3&r)<<4|s>>4],s=e[(15&s)<<2|o>>6],o=e[63&o],n[h++]=a+r+s+o}switch(a=0,o=i,t.length-u){case 2:o=e[(15&(a=t[u+1]))<<2]||i;case 1:t=t[u],n[h]=e[t>>2]+e[(3&t)<<4|a>>4]+o+i}return n.join("")}for(e="",n=0,i=t.length-10240;n<i;)e+=String.fromCharCode.apply(null,t.subarray(n,n+=10240));return e+=String.fromCharCode.apply(null,n?t.subarray(n):t),btoa(e)}const GA=/[-_.]/g,mH={"-":"+",_:"/",".":"="};function gH(t){return mH[t]||""}function jL(t){if(!XL)return pH(t);GA.test(t)&&(t=t.replace(GA,gH)),t=atob(t);const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}function kd(t){return WL&&t!=null&&t instanceof Uint8Array}let vH;function a1(){return vH||(vH=new Uint8Array(0))}var Vu={};let yH;function YL(t){if(t!==Vu)throw Error("illegal external caller")}function rc(){return yH||(yH=new Oo(null,Vu))}function a3(t){YL(Vu);var e=t.g;return(e=e==null||kd(e)?e:typeof e=="string"?jL(e):null)==null?e:t.g=e}var Oo=class{constructor(t,e){if(YL(e),this.g=t,t!=null&&t.length===0)throw Error("ByteString should be constructed with non-empty values")}h(){const t=a3(this);return t?new Uint8Array(t):a1()}};function $L(t,e){return Error(`Invalid wire type: ${t} (at position ${e})`)}function l3(){return Error("Failed to read varint, encoding is invalid.")}function qL(t,e){return Error(`Tried to read past the end of the data ${e} > ${t}`)}function c3(t){if(typeof t=="string")return{buffer:jL(t),P:!1};if(Array.isArray(t))return{buffer:new Uint8Array(t),P:!1};if(t.constructor===Uint8Array)return{buffer:t,P:!1};if(t.constructor===ArrayBuffer)return{buffer:new Uint8Array(t),P:!1};if(t.constructor===Oo)return{buffer:a3(t)||a1(),P:!0};if(t instanceof Uint8Array)return{buffer:new Uint8Array(t.buffer,t.byteOffset,t.byteLength),P:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}function u3(){return typeof BigInt=="function"}const _H=typeof Uint8Array.prototype.slice=="function";let ZL,an=0,jn=0;function jl(t){const e=0>t;let n=(t=Math.abs(t))>>>0;if(t=Math.floor((t-n)/4294967296),e){const[i,r]=d3(n,t);t=r,n=i}an=n>>>0,jn=t>>>0}function h3(t){const e=ZL||(ZL=new DataView(new ArrayBuffer(8)));e.setFloat32(0,+t,!0),jn=0,an=e.getUint32(0,!0)}function e2(t,e){return 4294967296*e+(t>>>0)}function f3(t,e){const n=2147483648&e;return n&&(e=~e>>>0,(t=1+~t>>>0)==0&&(e=e+1>>>0)),t=e2(t,e),n?-t:t}function a0(t,e){if(t>>>=0,2097151>=(e>>>=0))var n=""+(4294967296*e+t);else u3()?n=""+(BigInt(e)<<BigInt(32)|BigInt(t)):(t=(16777215&t)+6777216*(n=16777215&(t>>>24|e<<8))+6710656*(e=e>>16&65535),n+=8147497*e,e*=2,1e7<=t&&(n+=Math.floor(t/1e7),t%=1e7),1e7<=n&&(e+=Math.floor(n/1e7),n%=1e7),n=e+WA(n)+WA(t));return n}function WA(t){return t=String(t),"0000000".slice(t.length)+t}function KL(){var t=an,e=jn;if(2147483648&e)if(u3())t=""+(BigInt(0|e)<<BigInt(32)|BigInt(t>>>0));else{const[n,i]=d3(t,e);t="-"+a0(n,i)}else t=a0(t,e);return t}function l1(t){if(16>t.length)jl(Number(t));else if(u3())t=BigInt(t),an=Number(t&BigInt(4294967295))>>>0,jn=Number(t>>BigInt(32)&BigInt(4294967295));else{const e=+(t[0]==="-");jn=an=0;const n=t.length;for(let i=e,r=(n-e)%6+e;r<=n;i=r,r+=6){const s=Number(t.slice(i,r));jn*=1e6,an=1e6*an+s,4294967296<=an&&(jn+=Math.trunc(an/4294967296),jn>>>=0,an>>>=0)}if(e){const[i,r]=d3(an,jn);an=i,jn=r}}}function d3(t,e){return e=~e,t?t=1+~t:e+=1,[t,e]}function p3(t,e){let n,i=0,r=0,s=0;const o=t.h;let a=t.g;do n=o[a++],i|=(127&n)<<s,s+=7;while(32>s&&128&n);for(32<s&&(r|=(127&n)>>4),s=3;32>s&&128&n;s+=7)n=o[a++],r|=(127&n)<<s;if(Yl(t,a),128>n)return e(i>>>0,r>>>0);throw l3()}function m3(t){let e=0,n=t.g;const i=n+10,r=t.h;for(;n<i;){const s=r[n++];if(e|=s,(128&s)==0)return Yl(t,n),!!(127&e)}throw l3()}function Va(t){const e=t.h;let n=t.g,i=e[n++],r=127&i;if(128&i&&(i=e[n++],r|=(127&i)<<7,128&i&&(i=e[n++],r|=(127&i)<<14,128&i&&(i=e[n++],r|=(127&i)<<21,128&i&&(i=e[n++],r|=i<<28,128&i&&128&e[n++]&&128&e[n++]&&128&e[n++]&&128&e[n++]&&128&e[n++])))))throw l3();return Yl(t,n),r}function Ga(t){return Va(t)>>>0}function t2(t){var e=t.h;const n=t.g,i=e[n],r=e[n+1],s=e[n+2];return e=e[n+3],Yl(t,t.g+4),(i<<0|r<<8|s<<16|e<<24)>>>0}function n2(t){var e=t2(t);t=2*(e>>31)+1;const n=e>>>23&255;return e&=8388607,n==255?e?NaN:1/0*t:n==0?t*Math.pow(2,-149)*e:t*Math.pow(2,n-150)*(e+Math.pow(2,23))}function xH(t){return Va(t)}function s_(t,e,{ca:n=!1}={}){t.ca=n,e&&(e=c3(e),t.h=e.buffer,t.m=e.P,t.j=0,t.l=t.h.length,t.g=t.j)}function Yl(t,e){if(t.g=e,e>t.l)throw qL(t.l,e)}function JL(t,e){if(0>e)throw Error(`Tried to read a negative byte length: ${e}`);const n=t.g,i=n+e;if(i>t.l)throw qL(e,t.l-n);return t.g=i,n}function QL(t,e){if(e==0)return rc();var n=JL(t,e);return t.ca&&t.m?n=t.h.subarray(n,n+e):(t=t.h,n=n===(e=n+e)?a1():_H?t.slice(n,e):new Uint8Array(t.subarray(n,e))),n.length==0?rc():new Oo(n,Vu)}var XA=[];function eI(t){var e=t.g;if(e.g==e.l)return!1;t.l=t.g.g;var n=Ga(t.g);if(e=n>>>3,!(0<=(n&=7)&&5>=n))throw $L(n,t.l);if(1>e)throw Error(`Invalid field number: ${e} (at position ${t.l})`);return t.m=e,t.h=n,!0}function Mg(t){switch(t.h){case 0:t.h!=0?Mg(t):m3(t.g);break;case 1:Yl(t=t.g,t.g+8);break;case 2:if(t.h!=2)Mg(t);else{var e=Ga(t.g);Yl(t=t.g,t.g+e)}break;case 5:Yl(t=t.g,t.g+4);break;case 3:for(e=t.m;;){if(!eI(t))throw Error("Unmatched start-group tag: stream EOF");if(t.h==4){if(t.m!=e)throw Error("Unmatched end-group tag");break}Mg(t)}break;default:throw $L(t.h,t.l)}}function Ud(t,e,n){const i=t.g.l,r=Ga(t.g),s=t.g.g+r;let o=s-i;if(0>=o&&(t.g.l=s,n(e,t,void 0,void 0,void 0),o=s-t.g.g),o)throw Error(`Message parsing ended unexpectedly. Expected to read ${r} bytes, instead read ${r-o} bytes, either the data ended unexpectedly or the message misreported its own length`);return t.g.g=s,t.g.l=i,e}function g3(t){var e=Ga(t.g),n=JL(t=t.g,e);if(t=t.h,cH){var i,r=t;(i=i_)||(i=i_=new TextDecoder("utf-8",{fatal:!0})),e=n+e,r=n===0&&e===r.length?r:r.subarray(n,e);try{var s=i.decode(r)}catch(a){if(Zm===void 0){try{i.decode(new Uint8Array([128]))}catch{}try{i.decode(new Uint8Array([97])),Zm=!0}catch{Zm=!1}}throw!Zm&&(i_=void 0),a}}else{e=(s=n)+e,n=[];let a,u=null;for(;s<e;){var o=t[s++];128>o?n.push(o):224>o?s>=e?El():(a=t[s++],194>o||(192&a)!=128?(s--,El()):n.push((31&o)<<6|63&a)):240>o?s>=e-1?El():(a=t[s++],(192&a)!=128||o===224&&160>a||o===237&&160<=a||(192&(i=t[s++]))!=128?(s--,El()):n.push((15&o)<<12|(63&a)<<6|63&i)):244>=o?s>=e-2?El():(a=t[s++],(192&a)!=128||a-144+(o<<28)>>30||(192&(i=t[s++]))!=128||(192&(r=t[s++]))!=128?(s--,El()):(o=(7&o)<<18|(63&a)<<12|(63&i)<<6|63&r,o-=65536,n.push(55296+(o>>10&1023),56320+(1023&o)))):El(),8192<=n.length&&(u=BA(u,n),n.length=0)}s=BA(u,n)}return s}function tI(t){const e=Ga(t.g);return QL(t.g,e)}function c1(t,e,n){var i=Ga(t.g);for(i=t.g.g+i;t.g.g<i;)n.push(e(t.g))}var Km=[];function jA(t){return t?/^\d+$/.test(t)?(l1(t),new YA(an,jn)):null:SH||(SH=new YA(0,0))}var YA=class{constructor(t,e){this.h=t>>>0,this.g=e>>>0}};let SH;function $A(t){return t?/^-?\d+$/.test(t)?(l1(t),new qA(an,jn)):null:MH||(MH=new qA(0,0))}var qA=class{constructor(t,e){this.h=t>>>0,this.g=e>>>0}};let MH;function l0(t,e,n){for(;0<n||127<e;)t.g.push(127&e|128),e=(e>>>7|n<<25)>>>0,n>>>=7;t.g.push(e)}function Od(t,e){for(;127<e;)t.g.push(127&e|128),e>>>=7;t.g.push(e)}function u1(t,e){if(0<=e)Od(t,e);else{for(let n=0;9>n;n++)t.g.push(127&e|128),e>>=7;t.g.push(1)}}function gd(t,e){t.g.push(e>>>0&255),t.g.push(e>>>8&255),t.g.push(e>>>16&255),t.g.push(e>>>24&255)}function Gu(t,e){e.length!==0&&(t.l.push(e),t.h+=e.length)}function as(t,e,n){Od(t.g,8*e+n)}function v3(t,e){return as(t,e,2),e=t.g.end(),Gu(t,e),e.push(t.h),e}function y3(t,e){var n=e.pop();for(n=t.h+t.g.length()-n;127<n;)e.push(127&n|128),n>>>=7,t.h++;e.push(n),t.h++}function h1(t,e,n){as(t,e,2),Od(t.g,n.length),Gu(t,t.g.end()),Gu(t,n)}function i2(t,e,n,i){n!=null&&(e=v3(t,e),i(n,t),y3(t,e))}class oh{constructor(e,n,i,r){this.g=e,this.h=n,this.l=i,this.pa=r}}function Ir(t){return Array.prototype.slice.call(t)}function f1(t){return typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol():t}var io=f1(),ZA=f1("0di"),o_=f1("2ex"),KA=f1("0dg"),_3=io?(t,e)=>{t[io]|=e}:(t,e)=>{t.g!==void 0?t.g|=e:Object.defineProperties(t,{g:{value:e,configurable:!0,writable:!0,enumerable:!1}})},c0=io?(t,e)=>{t[io]&=~e}:(t,e)=>{t.g!==void 0&&(t.g&=~e)};function bi(t,e,n){return n?t|e:t&~e}var In=io?t=>0|t[io]:t=>0|t.g,jt=io?t=>t[io]:t=>t.g,Pn=io?(t,e)=>(t[io]=e,t):(t,e)=>(t.g!==void 0?t.g=e:Object.defineProperties(t,{g:{value:e,configurable:!0,writable:!0,enumerable:!1}}),t);function ah(t){return _3(t,34),t}function wH(t,e){Pn(e,-14591&(0|t))}function r2(t,e){Pn(e,-14557&(34|t))}function nI(t){return(t=t>>14&1023)===0?536870912:t}var x3,Fd={},iI={};function JA(t){return!(!t||typeof t!="object"||t.Ja!==iI)}function S3(t){return t!==null&&typeof t=="object"&&!Array.isArray(t)&&t.constructor===Object}function M3(t,e,n){if(t!=null){if(typeof t=="string")t=t?new Oo(t,Vu):rc();else if(t.constructor!==Oo)if(kd(t))t=t.length?new Oo(n?t:new Uint8Array(t),Vu):rc();else{if(!e)throw Error();t=void 0}}return t}function u0(t,e,n){if(!Array.isArray(t)||t.length)return!1;const i=In(t);return!!(1&i)||!(!e||!(Array.isArray(e)?e.includes(n):e.has(n)))&&(Pn(t,1|i),!0)}const QA=[];function lo(t){if(2&t)throw Error()}Pn(QA,55),x3=Object.freeze(QA);class h0{constructor(e,n,i){this.l=0,this.g=e,this.h=n,this.m=i}next(){if(this.l<this.g.length){const e=this.g[this.l++];return{done:!1,value:this.h?this.h.call(this.m,e):e}}return{done:!0,value:void 0}}[Symbol.iterator](){return new h0(this.g,this.h,this.m)}}let Oa,EH,TH;function rI(t,e){(e=Oa?e[Oa]:void 0)&&(t[Oa]=Ir(e))}function sI(t,e){t.__closure__error__context__984382||(t.__closure__error__context__984382={}),t.__closure__error__context__984382.severity=e}function oI(){const t=Error();sI(t,"incident"),function(e){Dd.setTimeout(()=>{throw e},0)}(t)}function s2(t){return sI(t=Error(t),"warning"),t}function el(t){return t==null||typeof t=="number"?t:t==="NaN"||t==="Infinity"||t==="-Infinity"?Number(t):void 0}function aI(t){return t==null||typeof t=="boolean"?t:typeof t=="number"?!!t:void 0}Object.freeze(new class{}),Object.freeze(new class{});const AH=/^-?([1-9][0-9]*|0)(\.[0-9]+)?$/;function d1(t){const e=typeof t;return e==="number"?Number.isFinite(t):e==="string"&&AH.test(t)}function lh(t){if(t==null)return t;if(typeof t=="string"){if(!t)return;t=+t}return typeof t=="number"&&Number.isFinite(t)?0|t:void 0}function CH(t){if(t==null)return t;if(typeof t=="string"){if(!t)return;t=+t}return typeof t=="number"&&Number.isFinite(t)?t>>>0:void 0}function e4(t){return t[0]!=="-"&&(20>t.length||t.length===20&&184467>Number(t.substring(0,6)))}function lI(t){return t[0]==="-"?20>t.length||t.length===20&&-922337<Number(t.substring(0,7)):19>t.length||t.length===19&&922337>Number(t.substring(0,6))}function w3(t){return t=Math.trunc(t),Number.isSafeInteger(t)||(jl(t),t=f3(an,jn)),t}function E3(t){var e=Math.trunc(Number(t));return Number.isSafeInteger(e)?String(e):((e=t.indexOf("."))!==-1&&(t=t.substring(0,e)),lI(t)||(l1(t),t=KL()),t)}function f0(t){return t==null?t:d1(t)?typeof t=="number"?w3(t):E3(t):void 0}function zd(t){if(typeof t!="string")throw Error();return t}function ch(t){if(t!=null&&typeof t!="string")throw Error();return t}function $l(t){return t==null||typeof t=="string"?t:void 0}function T3(t,e,n,i){if(t!=null&&typeof t=="object"&&t.X===Fd)return t;if(!Array.isArray(t))return n?2&i?(t=e[ZA])?e=t:(ah((t=new e).s),e=e[ZA]=t):e=new e:e=void 0,e;let r=n=In(t);return r===0&&(r|=32&i),r|=2&i,r!==n&&Pn(t,r),new e(t)}function bH(t,e,n){if(e){var i=!!i;if(!d1(e=t))throw s2("int64");typeof e=="string"?i=E3(e):i?(i=Math.trunc(e),Number.isSafeInteger(i)?i=String(i):lI(e=String(i))?i=e:(jl(i),i=KL())):i=w3(e)}else i=f0(t);return typeof(n=(t=i)==null?n?0:void 0:t)=="string"&&(i=+n,Number.isSafeInteger(i))?i:n}let d0,A3,RH;function p0(t){switch(typeof t){case"boolean":return A3||(A3=[0,void 0,!0]);case"number":return 0<t?void 0:t===0?RH||(RH=[0,void 0]):[-t,void 0];case"string":return[0,t];case"object":return t}}function ql(t,e){return cI(t,e[0],e[1])}function cI(t,e,n){if(t==null&&(t=d0),d0=void 0,t==null){var i=96;n?(t=[n],i|=512):t=[],e&&(i=-16760833&i|(1023&e)<<14)}else{if(!Array.isArray(t))throw Error("narr");if(2048&(i=In(t)))throw Error("farr");if(64&i)return t;if(i|=64,n&&(i|=512,n!==t[0]))throw Error("mid");e:{const r=(n=t).length;if(r){const s=r-1;if(S3(n[s])){if(1024<=(e=s-(+!!(512&(i|=256))-1)))throw Error("pvtlmt");i=-16760833&i|(1023&e)<<14;break e}}if(e){if(1024<(e=Math.max(e,r-(+!!(512&i)-1))))throw Error("spvt");i=-16760833&i|(1023&e)<<14}}}return Pn(t,i),t}const PH={};let LH=function(){try{return o3(new class extends Map{constructor(){super()}}),!1}catch{return!0}}();class a_{constructor(){this.g=new Map}get(e){return this.g.get(e)}set(e,n){return this.g.set(e,n),this.size=this.g.size,this}delete(e){return e=this.g.delete(e),this.size=this.g.size,e}clear(){this.g.clear(),this.size=this.g.size}has(e){return this.g.has(e)}entries(){return this.g.entries()}keys(){return this.g.keys()}values(){return this.g.values()}forEach(e,n){return this.g.forEach(e,n)}[Symbol.iterator](){return this.entries()}}const IH=LH?(Object.setPrototypeOf(a_.prototype,Map.prototype),Object.defineProperties(a_.prototype,{size:{value:0,configurable:!0,enumerable:!0,writable:!0}}),a_):class extends Map{constructor(){super()}};function t4(t){return t}function l_(t){if(2&t.N)throw Error("Cannot mutate an immutable Map")}var os=class extends IH{constructor(t,e,n=t4,i=t4){super();let r=In(t);r|=64,Pn(t,r),this.N=r,this.U=e,this.S=n,this.Z=this.U?NH:i;for(let s=0;s<t.length;s++){const o=t[s],a=n(o[0],!1,!0);let u=o[1];e?u===void 0&&(u=null):u=i(o[1],!1,!0,void 0,void 0,r),super.set(a,u)}}oa(t=n4){if(this.size!==0)return this.Y(t)}Y(t=n4){const e=[],n=super.entries();for(var i;!(i=n.next()).done;)(i=i.value)[0]=t(i[0]),i[1]=t(i[1]),e.push(i);return e}clear(){l_(this),super.clear()}delete(t){return l_(this),super.delete(this.S(t,!0,!1))}entries(){var t=this.na();return new h0(t,DH,this)}keys(){return this.Ia()}values(){var t=this.na();return new h0(t,os.prototype.get,this)}forEach(t,e){super.forEach((n,i)=>{t.call(e,this.get(i),i,this)})}set(t,e){return l_(this),(t=this.S(t,!0,!1))==null?this:e==null?(super.delete(t),this):super.set(t,this.Z(e,!0,!0,this.U,!1,this.N))}Oa(t){const e=this.S(t[0],!1,!0);t=t[1],t=this.U?t===void 0?null:t:this.Z(t,!1,!0,void 0,!1,this.N),super.set(e,t)}has(t){return super.has(this.S(t,!1,!1))}get(t){t=this.S(t,!1,!1);const e=super.get(t);if(e!==void 0){var n=this.U;return n?((n=this.Z(e,!1,!0,n,this.ta,this.N))!==e&&super.set(t,n),n):e}}na(){return Array.from(super.keys())}Ia(){return super.keys()}[Symbol.iterator](){return this.entries()}};function NH(t,e,n,i,r,s){return t=T3(t,i,n,s),r&&(t=m1(t)),t}function n4(t){return t}function DH(t){return[t,this.get(t)]}let kH;function i4(){return kH||(kH=new os(ah([]),void 0,void 0,void 0,PH))}function C3(t,e,n,i,r){if(t!=null){if(Array.isArray(t))t=u0(t,void 0,0)?void 0:r&&2&In(t)?t:p1(t,e,n,i!==void 0,r);else if(S3(t)){const s={};for(let o in t)s[o]=C3(t[o],e,n,i,r);t=s}else t=e(t,i);return t}}function p1(t,e,n,i,r){const s=i||n?In(t):0;i=i?!!(32&s):void 0;const o=Ir(t);for(let a=0;a<o.length;a++)o[a]=C3(o[a],e,n,i,r);return n&&(rI(o,t),n(s,o)),o}function UH(t){return C3(t,b3,void 0,void 0,!1)}function b3(t){return t.X===Fd?t.toJSON():t instanceof os?t.oa(UH):function(e){switch(typeof e){case"number":return isFinite(e)?e:String(e);case"boolean":return e?1:0;case"object":if(e)if(Array.isArray(e)){if(u0(e,void 0,0))return}else{if(kd(e))return VA(e);if(e instanceof Oo){const n=e.g;return n==null?"":typeof n=="string"?n:e.g=VA(n)}if(e instanceof os)return e.oa()}}return e}(t)}function o2(t,e,n=r2){if(t!=null){if(WL&&t instanceof Uint8Array)return e?t:new Uint8Array(t);if(Array.isArray(t)){var i=In(t);return 2&i||(e&&(e=i===0||!!(32&i)&&!(64&i||!(16&i))),t=e?Pn(t,-12293&(34|i)):p1(t,o2,4&i?r2:n,!0,!0)),t}return t.X===Fd?(n=t.s,t=2&(i=jt(n))?t:R3(t,n,i,!0)):t instanceof os&&!(2&t.N)&&(n=ah(t.Y(o2)),t=new os(n,t.U,t.S,t.Z)),t}}function R3(t,e,n,i){return t=t.constructor,d0=e=uI(e,n,i),e=new t(e),d0=void 0,e}function uI(t,e,n){const i=n||2&e?r2:wH,r=!!(32&e);return t=function(s,o,a){const u=Ir(s);var h=u.length;const f=256&o?u[h-1]:void 0;for(h+=f?-1:0,o=512&o?1:0;o<h;o++)u[o]=a(u[o]);if(f){o=u[o]={};for(const d in f)o[d]=a(f[d])}return rI(u,s),u}(t,e,s=>o2(s,r,i)),_3(t,32|(n?2:0)),t}function m1(t){const e=t.s,n=jt(e);return 2&n?R3(t,e,n,!1):t}function hI(t,e,n,i){return!(4&e)||n!=null&&(!i&&n===0&&(4096&e||8192&e)&&5>(t.constructor[KA]=1+(0|t.constructor[KA]))&&oI(),n!==0&&!(n&e))}function Wa(t,e){return co(t=t.s,jt(t),e)}function r4(t,e,n,i){if(!(0>(e=i+(+!!(512&e)-1))||e>=t.length||e>=n))return t[e]}function co(t,e,n,i){if(n===-1)return null;const r=nI(e);if(!(n>=r)){var s=t.length;return i&&256&e&&(i=t[s-1][n])!=null?(r4(t,e,r,n)&&o_!=null&&(4<=(e=(t=TH??(TH={}))[o_]||0)||(t[o_]=e+1,oI())),i):r4(t,e,r,n)}return 256&e?t[t.length-1][n]:void 0}function tn(t,e,n,i){const r=t.s;let s=jt(r);return lo(s),cn(r,s,e,n,i),t}function cn(t,e,n,i,r){const s=nI(e);if(n>=s||r){let o=e;if(256&e)r=t[t.length-1];else{if(i==null)return o;r=t[s+(+!!(512&e)-1)]={},o|=256}return r[n]=i,n<s&&(t[n+(+!!(512&e)-1)]=void 0),o!==e&&Pn(t,o),o}return t[n+(+!!(512&e)-1)]=i,256&e&&n in(t=t[t.length-1])&&delete t[n],e}function uh(t,e,n,i,r){var s=2&e;let o=co(t,e,n,r);Array.isArray(o)||(o=x3);const a=!(2&i);i=!(1&i);const u=!!(32&e);let h=In(o);return h!==0||!u||s||a?1&h||(h|=1,Pn(o,h)):(h|=33,Pn(o,h)),s?(t=!1,2&h||(ah(o),t=!!(4&h)),(i||t)&&Object.freeze(o)):(s=!!(2&h)||!!(2048&h),i&&s?(o=Ir(o),i=1,u&&!a&&(i|=32),Pn(o,i),cn(t,e,n,o,r)):a&&32&h&&!s&&c0(o,32)),o}function wg(t,e){t=t.s;let n=jt(t);const i=co(t,n,e),r=el(i);return r!=null&&r!==i&&cn(t,n,e,r),r}function fI(t){t=t.s;let e=jt(t);const n=co(t,e,1),i=M3(n,!0,!!(34&e));return i!=null&&i!==n&&cn(t,e,1,i),i}function Su(t,e,n){const i=t.s;let r=jt(i);const s=2&r?1:2;let o=dI(i,r,e);var a=In(o);if(hI(t,a,void 0,!1)){(4&a||Object.isFrozen(o))&&(o=Ir(o),a=sc(a,r),r=cn(i,r,e,o));let u=t=0;for(;t<o.length;t++){const h=n(o[t]);h!=null&&(o[u++]=h)}u<t&&(o.length=u),a=bi(a=pI(a,r),20,!0),a=bi(a,4096,!1),a=bi(a,8192,!1),Pn(o,a),2&a&&Object.freeze(o)}return Tf(a)||(n=a,(a=(t=s===1||s===4&&!!(32&a))?bi(a,2,!0):Wu(a,r,!1))!==n&&Pn(o,a),t&&Object.freeze(o)),s===2&&Tf(a)&&(o=Ir(o),a=Wu(a=sc(a,r),r,!1),Pn(o,a),cn(i,r,e,o)),o}function dI(t,e,n){return t=co(t,e,n),Array.isArray(t)?t:x3}function pI(t,e){return t===0&&(t=sc(t,e)),bi(t,1,!0)}function Tf(t){return!!(2&t)&&!!(4&t)||!!(2048&t)}function mI(t){t=Ir(t);for(let e=0;e<t.length;e++){const n=t[e]=Ir(t[e]);Array.isArray(n[1])&&(n[1]=ah(n[1]))}return t}function m0(t,e,n){{const a=t.s;let u=jt(a);if(lo(u),n==null)cn(a,u,e);else{var i,r=In(n),s=r,o=!!(2&r)||Object.isFrozen(n);if((i=!o)&&(i=!1),hI(t,r))for(r=21,o&&(n=Ir(n),s=0,r=Wu(r=sc(r,u),u,!0)),t=0;t<n.length;t++)n[t]=zd(n[t]);i&&(n=Ir(n),s=0,r=Wu(r=sc(r,u),u,!0)),r!==s&&Pn(n,r),cn(a,u,e,n)}}}function a2(t,e,n,i){t=t.s;let r=jt(t);lo(r),cn(t,r,e,(i==="0"?Number(n)===0:n===i)?void 0:n)}function Bd(t,e,n,i){const r=jt(t);lo(r),t=uh(t,r,e,2),i=n(i,!!(4&(e=In(t)))&&!!(4096&e)),t.push(i)}function OH(t){return t}function c_(t,e){return P3(t=t.s,jt(t),QI)===e?e:-1}function P3(t,e,n){let i=0;for(let r=0;r<n.length;r++){const s=n[r];co(t,e,s)!=null&&(i!==0&&(e=cn(t,e,i)),i=s)}return i}function L3(t,e,n,i){let r=jt(t);lo(r);const s=co(t,r,n,i);let o;if(s!=null&&s.X===Fd)return(e=m1(s))!==s&&cn(t,r,n,e,i),e.s;if(Array.isArray(s)){const a=In(s);o=2&a?uI(s,a,!1):s,o=ql(o,e)}else o=ql(void 0,e);return o!==s&&cn(t,r,n,o,i),o}function gI(t,e,n,i){t=t.s;let r=jt(t);const s=co(t,r,n,i);return(e=T3(s,e,!1,r))!==s&&e!=null&&cn(t,r,n,e,i),e}function Ot(t,e,n,i=!1){if((e=gI(t,e,n,i))==null)return e;t=t.s;let r=jt(t);if(!(2&r)){const s=m1(e);s!==e&&cn(t,r,n,e=s,i)}return e}function vI(t,e,n,i,r,s){var o=2,a=!!(2&e);o=a?1:o,r=!!r,s&&(s=!a),a=dI(t,e,i);var u=In(a);const h=!!(4&u);if(!h){var f=a,d=e;const p=!!(2&(u=pI(u,e)));p&&(d=bi(d,2,!0));let v=!p,y=!0,w=0,S=0;for(;w<f.length;w++){const g=T3(f[w],n,!1,d);if(g instanceof n){if(!p){const x=!!(2&In(g.s));v&&(v=!x),y&&(y=x)}f[S++]=g}}S<w&&(f.length=S),u=bi(u,4,!0),u=bi(u,16,y),u=bi(u,8,v),Pn(f,u),p&&Object.freeze(f)}if(s&&!(8&u||!a.length&&(o===1||o===4&&32&u))){for(Tf(u)&&(a=Ir(a),u=sc(u,e),e=cn(t,e,i,a)),n=a,s=u,f=0;f<n.length;f++)(u=n[f])!==(d=m1(u))&&(n[f]=d);s=bi(s,8,!0),s=bi(s,16,!n.length),Pn(n,s),u=s}return Tf(u)||(n=u,(u=(s=o===1||o===4&&!!(32&u))?bi(u,!a.length||16&u&&(!h||32&u)?2:2048,!0):Wu(u,e,r))!==n&&Pn(a,u),s&&Object.freeze(a)),o===2&&Tf(u)&&(a=Ir(a),u=Wu(u=sc(u,e),e,r),Pn(a,u),cn(t,e,i,a)),a}function Yo(t,e,n){t=t.s;const i=jt(t);return vI(t,i,e,n,!1,!(2&i))}function nt(t,e,n,i,r){return i==null&&(i=void 0),tn(t,n,i,r)}function Af(t,e,n,i){i==null&&(i=void 0),t=t.s;let r=jt(t);lo(r),(n=P3(t,r,n))&&n!==e&&i!=null&&(r=cn(t,r,n)),cn(t,r,e,i)}function sc(t,e){return t=bi(t,2,!!(2&e)),t=bi(t,32,!0),bi(t,2048,!1)}function Wu(t,e,n){return 32&e&&n||(t=bi(t,32,!1)),t}function g0(t,e,n,i){t=t.s;const r=jt(t);lo(r),e=vI(t,r,n,e,!0),n=i??new n,e.push(n),2&In(n.s)?c0(e,8):c0(e,16)}function ns(t,e){return lh(Wa(t,e))}function bs(t,e){return t??e}function Un(t,e){return bs(wg(t,e),0)}function ro(t,e){return bs($l(Wa(t,e)),"")}function vd(t,e,n){if(n!=null&&typeof n!="boolean")throw t=typeof n,Error(`Expected boolean but got ${t!="object"?t:n?Array.isArray(n)?"array":t:"null"}: ${n}`);tn(t,e,n)}function so(t,e,n){if(n!=null){if(typeof n!="number"||!Number.isFinite(n))throw s2("int32");n|=0}tn(t,e,n)}function qe(t,e,n){if(n!=null&&typeof n!="number")throw Error(`Value of float/double field must be a number, found ${typeof n}: ${n}`);tn(t,e,n)}function Is(t,e,n){e.g?e.m(t,e.g,e.h,n,!0):e.m(t,e.h,n,!0)}os.prototype.toJSON=void 0,os.prototype.Ja=iI;var je=class{constructor(t,e){this.s=cI(t,e)}toJSON(){return yI(this,p1(this.s,b3,void 0,void 0,!1),!0)}l(){var t=GV;return t.g?t.l(this,t.g,t.h,!0):t.l(this,t.h,t.defaultValue,!0)}clone(){const t=this.s;return R3(this,t,jt(t),!1)}P(){return!!(2&In(this.s))}};function yI(t,e,n){var i=fH?void 0:t.constructor.B;const r=jt(n?t.s:e);if(!(t=e.length))return e;let s,o;if(S3(n=e[t-1])){e:{var a=n;let f={},d=!1;for(var u in a){let p=a[u];if(Array.isArray(p)){let v=p;(u0(p,i,+u)||JA(p)&&p.size===0)&&(p=null),p!=v&&(d=!0)}p!=null?f[u]=p:d=!0}if(d){for(var h in f){a=f;break e}a=null}}a!=n&&(s=!0),t--}for(u=+!!(512&r)-1;0<t&&(n=e[h=t-1],h-=u,n==null||u0(n,i,h)||JA(n)&&n.size===0);t--)o=!0;return(s||o)&&(e=Array.prototype.slice.call(e,0,t),a&&e.push(a)),e}function _I(t){return Array.isArray(t)?t[0]instanceof oh?t:[$H,t]:[t,void 0]}function hh(t,e){if(Array.isArray(e)){var n=In(e);if(4&n)return e;for(var i=0,r=0;i<e.length;i++){const s=t(e[i]);s!=null&&(e[r++]=s)}return r<i&&(e.length=r),Pn(e,-12289&(5|n)),2&n&&Object.freeze(e),e}}je.prototype.X=Fd,je.prototype.toString=function(){return yI(this,this.s,!1).toString()};const s4=Symbol();function I3(t){let e=t[s4];if(!e){const n=SI(t),i=D3(t),r=i.l;e=r?(s,o)=>r(s,o,i):(s,o)=>{for(;eI(o)&&o.h!=4;){var a=o.m,u=i[a];if(!u){var h=i.ea;h&&(h=h[a])&&(u=i[a]=FH(h))}u&&u(o,s,a)||(a=(u=o).l,Mg(u),u.ia?u=void 0:(h=u.g.g-a,u.g.g=a,u=QL(u.g,h)),a=s,u&&(Oa||(Oa=Symbol()),(h=a[Oa])?h.push(u):a[Oa]=[u]))}n===xI||n===Eg||n.j||(s[EH||(EH=Symbol())]=n)},t[s4]=e}return e}function FH(t){const e=(t=_I(t))[0].g;if(t=t[1]){const n=I3(t),i=D3(t).T;return(r,s,o)=>e(r,s,o,i,n)}return e}class u_{}let xI,Eg;const Cf=Symbol();function zH(t,e,n){const i=n[1];let r;if(i){const s=i[Cf];r=s?s.T:p0(i[0]),t[e]=s??i}r&&r===A3?(t.g||(t.g=new Set)).add(e):n[0]&&(t.h||(t.h=new Set)).add(e)}function o4(t,e){return[t.l,!e||0<e[0]?void 0:e]}function SI(t){var e=t[Cf];if(e)return e;if(!(e=N3(t,t[Cf]=new u_,o4,o4,zH)).ea&&!e.h&&!e.g){let n=!0;for(let i in e)isNaN(i)||(n=!1);n?(p0(t[0])===A3?Eg?e=Eg:((e=new u_).T=p0(!0),e=Eg=e):e=xI||(xI=new u_),e=t[Cf]=e):e.j=!0}return e}function BH(t,e,n){t[e]=n}function N3(t,e,n,i,r=BH){e.T=p0(t[0]);let s=0;var o=t[++s];o&&o.constructor===Object&&(e.ea=o,typeof(o=t[++s])=="function"&&(e.l=o,e.m=t[++s],o=t[++s]));const a={};for(;Array.isArray(o)&&typeof o[0]=="number"&&0<o[0];){for(var u=0;u<o.length;u++)a[o[u]]=o;o=t[++s]}for(u=1;o!==void 0;){let d;typeof o=="number"&&(u+=o,o=t[++s]);var h=void 0;if(o instanceof oh?d=o:(d=qH,s--),d.pa){o=t[++s],h=t;var f=s;typeof o=="function"&&(o=o(),h[f]=o),h=o}for(f=u+1,typeof(o=t[++s])=="number"&&0>o&&(f-=o,o=t[++s]);u<f;u++){const p=a[u];r(e,u,h?i(d,h,p):n(d,p))}}return e}const a4=Symbol();function MI(t){let e=t[a4];if(!e){const n=g1(t);e=(i,r)=>EI(i,r,n),t[a4]=e}return e}const l2=Symbol();function HH(t){return t.h}function VH(t,e){let n,i;const r=t.h;return(s,o,a)=>r(s,o,a,i||(i=g1(e).T),n||(n=MI(e)))}function g1(t){let e=t[l2];return e||(e=N3(t,t[l2]={},HH,VH),wI(t),e)}const c2=Symbol();function GH(t,e){const n=t.g;return e?(i,r,s)=>n(i,r,s,e):n}function WH(t,e,n){const i=t.g;let r,s;return(o,a,u)=>i(o,a,u,s||(s=D3(e).T),r||(r=I3(e)),n)}function D3(t){let e=t[c2];return e||(SI(t),e=N3(t,t[c2]={},GH,WH),wI(t),e)}function wI(t){c2 in t&&Cf in t&&l2 in t&&(t.length=0)}function l4(t,e){var n=t[e];if(n)return n;if((n=t.ea)&&(n=n[e])){var i=(n=_I(n))[0].h;if(n=n[1]){const r=MI(n),s=g1(n).T;n=(n=t.m)?n(s,r):(o,a,u)=>i(o,a,u,s,r)}else n=i;return t[e]=n}}function EI(t,e,n){for(var i=jt(t),r=+!!(512&i)-1,s=t.length,o=512&i?1:0,a=s+(256&i?-1:0);o<a;o++){const u=t[o];if(u==null)continue;const h=o-r,f=l4(n,h);f&&f(e,u,h)}if(256&i){i=t[s-1];for(let u in i)r=+u,Number.isNaN(r)||(s=i[u])!=null&&(a=l4(n,r))&&a(e,s,r)}if(t=Oa?t[Oa]:void 0)for(Gu(e,e.g.end()),n=0;n<t.length;n++)Gu(e,a3(t[n])||a1())}function fr(t,e){return new oh(t,e,!1,!1)}function fh(t,e){return new oh(t,e,!0,!1)}function v1(t,e){return new oh(t,e,!1,!0)}function dr(t,e,n){cn(t,jt(t),e,n)}var XH=v1(function(t,e,n,i,r){return t.h===2&&(t=Ud(t,ql([void 0,void 0],i),r),lo(i=jt(e)),(r=co(e,i,n))instanceof os?2&r.N?((r=r.Y()).push(t),cn(e,i,n,r)):r.Oa(t):Array.isArray(r)?(2&In(r)&&cn(e,i,n,r=mI(r)),r.push(t)):cn(e,i,n,[t]),!0)},function(t,e,n,i,r){if(e instanceof os)e.forEach((s,o)=>{i2(t,n,ql([o,s],i),r)});else if(Array.isArray(e))for(let s=0;s<e.length;s++){const o=e[s];Array.isArray(o)&&i2(t,n,ql(o,i),r)}});function TI(t,e,n){e:if(e!=null){if(d1(e)){if(typeof e=="string"){e=E3(e);break e}if(typeof e=="number"){e=w3(e);break e}}e=void 0}e!=null&&(typeof e=="string"&&$A(e),e!=null&&(as(t,n,0),typeof e=="number"?(t=t.g,jl(e),l0(t,an,jn)):(n=$A(e),l0(t.g,n.h,n.g))))}function AI(t,e,n){(e=lh(e))!=null&&e!=null&&(as(t,n,0),u1(t.g,e))}function CI(t,e,n){(e=aI(e))!=null&&(as(t,n,0),t.g.g.push(e?1:0))}function bI(t,e,n){(e=$l(e))!=null&&h1(t,n,BL(e))}function y1(t,e,n,i,r){i2(t,n,e instanceof je?e.s:Array.isArray(e)?ql(e,i):void 0,r)}function RI(t,e,n){(e=e==null||typeof e=="string"||kd(e)||e instanceof Oo?e:void 0)!=null&&h1(t,n,c3(e).buffer)}function PI(t,e,n){return(t.h===5||t.h===2)&&(e=uh(e,jt(e),n,2,!1),t.h==2?c1(t,n2,e):e.push(n2(t.g)),!0)}var Yn,Fo=fr(function(t,e,n){if(t.h!==1)return!1;var i=t.g;t=t2(i);const r=t2(i);i=2*(r>>31)+1;const s=r>>>20&2047;return t=4294967296*(1048575&r)+t,dr(e,n,s==2047?t?NaN:1/0*i:s==0?i*Math.pow(2,-1074)*t:i*Math.pow(2,s-1075)*(t+4503599627370496)),!0},function(t,e,n){(e=el(e))!=null&&(as(t,n,1),t=t.g,(n=ZL||(ZL=new DataView(new ArrayBuffer(8)))).setFloat64(0,+e,!0),an=n.getUint32(0,!0),jn=n.getUint32(4,!0),gd(t,an),gd(t,jn))}),ri=fr(function(t,e,n){return t.h===5&&(dr(e,n,n2(t.g)),!0)},function(t,e,n){(e=el(e))!=null&&(as(t,n,5),t=t.g,h3(e),gd(t,an))}),jH=fh(PI,function(t,e,n){if((e=hh(el,e))!=null)for(let o=0;o<e.length;o++){var i=t,r=n,s=e[o];s!=null&&(as(i,r,5),i=i.g,h3(s),gd(i,an))}}),k3=fh(PI,function(t,e,n){if((e=hh(el,e))!=null&&e.length){as(t,n,2),Od(t.g,4*e.length);for(let i=0;i<e.length;i++)n=t.g,h3(e[i]),gd(n,an)}}),Xa=fr(function(t,e,n){return t.h===0&&(dr(e,n,p3(t.g,f3)),!0)},TI),h_=fr(function(t,e,n){return t.h===0&&(dr(e,n,(t=p3(t.g,f3))===0?void 0:t),!0)},TI),YH=fr(function(t,e,n){return t.h===0&&(dr(e,n,p3(t.g,e2)),!0)},function(t,e,n){e:if(e!=null){if(d1(e)){if(typeof e=="string"){var i=Math.trunc(Number(e));Number.isSafeInteger(i)&&0<=i?e=String(i):((i=e.indexOf("."))!==-1&&(e=e.substring(0,i)),e4(e)||(l1(e),e=a0(an,jn)));break e}if(typeof e=="number"){e=0<=(e=Math.trunc(e))&&Number.isSafeInteger(e)?e:function(r){if(0>r){jl(r);const s=a0(an,jn);return r=Number(s),Number.isSafeInteger(r)?r:s}return e4(String(r))?r:(jl(r),e2(an,jn))}(e);break e}}e=void 0}e!=null&&(typeof e=="string"&&jA(e),e!=null&&(as(t,n,0),typeof e=="number"?(t=t.g,jl(e),l0(t,an,jn)):(n=jA(e),l0(t.g,n.h,n.g))))}),Nn=fr(function(t,e,n){return t.h===0&&(dr(e,n,Va(t.g)),!0)},AI),_1=fh(function(t,e,n){return(t.h===0||t.h===2)&&(e=uh(e,jt(e),n,2,!1),t.h==2?c1(t,Va,e):e.push(Va(t.g)),!0)},function(t,e,n){if((e=hh(lh,e))!=null&&e.length){n=v3(t,n);for(let i=0;i<e.length;i++)u1(t.g,e[i]);y3(t,n)}}),Xu=fr(function(t,e,n){return t.h===0&&(dr(e,n,(t=Va(t.g))===0?void 0:t),!0)},AI),zn=fr(function(t,e,n){return t.h===0&&(dr(e,n,m3(t.g)),!0)},CI),bf=fr(function(t,e,n){return t.h===0&&(dr(e,n,(t=m3(t.g))===!1?void 0:t),!0)},CI),Ii=fh(function(t,e,n){return t.h===2&&(Bd(e,n,OH,t=g3(t)),!0)},function(t,e,n){if((e=hh($l,e))!=null)for(let o=0;o<e.length;o++){var i=t,r=n,s=e[o];s!=null&&h1(i,r,BL(s))}}),ja=fr(function(t,e,n){return t.h===2&&(dr(e,n,(t=g3(t))===""?void 0:t),!0)},bI),Kt=fr(function(t,e,n){return t.h===2&&(dr(e,n,g3(t)),!0)},bI),$H=v1(function(t,e,n,i,r){return t.h===2&&(Ud(t,L3(e,i,n,!0),r),!0)},y1),qH=v1(function(t,e,n,i,r){return t.h===2&&(Ud(t,L3(e,i,n),r),!0)},y1);Yn=new oh(function(t,e,n,i,r){if(t.h!==2)return!1;i=ql(void 0,i);let s=jt(e);lo(s);let o=uh(e,s,n,3);return s=jt(e),4&In(o)&&(o=Ir(o),Pn(o,-2079&(1|In(o))),cn(e,s,n,o)),o.push(i),Ud(t,i,r),!0},function(t,e,n,i,r){if(Array.isArray(e))for(let s=0;s<e.length;s++)y1(t,e[s],n,i,r)},!0,!0);var Qt=v1(function(t,e,n,i,r,s){if(t.h!==2)return!1;let o=jt(e);return lo(o),(s=P3(e,o,s))&&n!==s&&cn(e,o,s),Ud(t,e=L3(e,i,n),r),!0},y1),LI=fr(function(t,e,n){return t.h===2&&(dr(e,n,tI(t)),!0)},RI),ZH=fh(function(t,e,n){return(t.h===0||t.h===2)&&(e=uh(e,jt(e),n,2,!1),t.h==2?c1(t,Ga,e):e.push(Ga(t.g)),!0)},function(t,e,n){if((e=hh(CH,e))!=null)for(let o=0;o<e.length;o++){var i=t,r=n,s=e[o];s!=null&&(as(i,r,0),Od(i.g,s))}}),oo=fr(function(t,e,n){return t.h===0&&(dr(e,n,Va(t.g)),!0)},function(t,e,n){(e=lh(e))!=null&&(e=parseInt(e,10),as(t,n,0),u1(t.g,e))}),KH=fh(function(t,e,n){return(t.h===0||t.h===2)&&(e=uh(e,jt(e),n,2,!1),t.h==2?c1(t,xH,e):e.push(Va(t.g)),!0)},function(t,e,n){if((e=hh(lh,e))!=null&&e.length){n=v3(t,n);for(let i=0;i<e.length;i++)u1(t.g,e[i]);y3(t,n)}});class JH{constructor(e,n){this.h=e,this.g=n,this.l=Ot,this.m=nt,this.defaultValue=void 0}}function Ns(t,e){return new JH(t,e)}function tl(t,e){return(n,i)=>{if(Km.length){const s=Km.pop();s.o(i),s_(s.g,n,i),n=s}else n=new class{constructor(s,o){if(XA.length){const a=XA.pop();s_(a,s,o),s=a}else s=new class{constructor(a,u){this.h=null,this.m=!1,this.g=this.l=this.j=0,s_(this,a,u)}clear(){this.h=null,this.m=!1,this.g=this.l=this.j=0,this.ca=!1}}(s,o);this.g=s,this.l=this.g.g,this.h=this.m=-1,this.o(o)}o({ia:s=!1}={}){this.ia=s}}(n,i);try{const s=new t,o=s.s;I3(e)(o,n);var r=s}finally{n.g.clear(),n.m=-1,n.h=-1,100>Km.length&&Km.push(n)}return r}}function x1(t){return function(){const e=new class{constructor(){this.l=[],this.h=0,this.g=new class{constructor(){this.g=[]}length(){return this.g.length}end(){const o=this.g;return this.g=[],o}}}};EI(this.s,e,g1(t)),Gu(e,e.g.end());const n=new Uint8Array(e.h),i=e.l,r=i.length;let s=0;for(let o=0;o<r;o++){const a=i[o];n.set(a,s),s+=a.length}return e.l=[n],n}}var c4=class extends je{constructor(t){super(t)}},II=[0,ja,fr(function(t,e,n){return t.h===2&&(dr(e,n,(t=tI(t))===rc()?void 0:t),!0)},function(t,e,n){if(e!=null){if(e instanceof je){const i=e.Qa;return void(i&&(e=i(e),e!=null&&h1(t,n,c3(e).buffer)))}if(Array.isArray(e))return}RI(t,e,n)})],QH=[0,Kt],NI=[0,Nn,oo,zn,-1,_1,oo,-1],eV=[0,zn,-1],DI=class extends je{constructor(){super()}};DI.B=[6];var kI=[0,zn,Kt,zn,oo,-1,KH,Kt,-1,eV,oo],UI=[0,Kt,-2],u4=class extends je{constructor(){super()}},OI=[0],FI=[0,Nn,zn,-4],Nr=class extends je{constructor(t){super(t,2)}},gn={},tV=[-2,gn,zn];gn[336783863]=[0,Kt,zn,-1,Nn,[0,[1,2,3,4,5,6],Qt,OI,Qt,kI,Qt,UI,Qt,FI,Qt,NI,Qt,[0,Kt]],QH,zn,[0,[1,3],[2,4],Qt,[0,_1],-1,Qt,[0,Ii],-1,Yn,[0,Kt,-1]],Kt];var nV=[0,ja,bf],zI=[0,h_,-1,bf,-3,h_,_1,ja,Xu,h_,-1,bf,Xu,bf,-2,ja],Hd=[-1,{}],BI=[0,Kt,1,Hd],HI=[0,Kt,Ii,Hd];function Ur(t,e){a2(t,2,ch(e),"")}function rn(t,e){Bd(t.s,3,zd,e)}function Dt(t,e){Bd(t.s,4,zd,e)}var Di=class extends je{constructor(t){super(t,500)}o(t){return nt(this,0,7,t)}};Di.B=[3,4,5,6,8,13,17,1005];var iV=[-500,ja,-1,Ii,-3,tV,Yn,II,Xu,-1,BI,HI,Yn,nV,ja,zI,Xu,Ii,987,Ii],rV=[0,ja,-1,Hd],sV=[-500,Kt,-1,[-1,{}],998,Kt],oV=[-500,Kt,Ii,-1,[-2,{},zn],997,Ii,-1],aV=[-500,Kt,Ii,Hd,998,Ii];function Or(t,e){g0(t,1,Di,e)}function un(t,e){Bd(t.s,10,zd,e)}function Ht(t,e){Bd(t.s,15,zd,e)}var Zi=class extends je{constructor(t){super(t,500)}o(t){return nt(this,0,1001,t)}};Zi.B=[1,6,7,9,10,15,16,17,14,1002];var VI=[-500,Yn,iV,4,Yn,sV,Yn,oV,Xu,Yn,aV,Ii,Xu,BI,HI,Yn,rV,Ii,-2,zI,ja,-1,bf,979,Hd,Yn,II],lV=tl(Zi,VI);Zi.prototype.g=x1(VI);var cV=[0,Yn,[0,Nn,-2]],uV=class extends je{constructor(t){super(t)}},hV=[0,Nn,ri,Kt,-1],U3=class extends je{constructor(t){super(t)}g(){return Yo(this,uV,1)}};U3.B=[1];var GI=[0,Yn,hV],S1=tl(U3,GI),fV=[0,Nn,ri],dV=[0,Nn,-1,cV],pV=class extends je{constructor(t){super(t)}},mV=[0,Nn,-3],gV=[0,ri,-3],vV=class extends je{constructor(t){super(t)}},yV=[0,ri,-1,Kt,ri],Tg=class extends je{constructor(t){super(t)}h(){return Ot(this,pV,2)}g(){return Yo(this,vV,5)}};Tg.B=[5];var _V=[0,oo,mV,gV,dV,Yn,yV],WI=class extends je{constructor(t){super(t)}};WI.B=[1,2,3,8,9];var XI=tl(WI,[0,Ii,_1,k3,_V,Kt,-1,Xa,Yn,fV,Ii,Xa]),jI=class extends je{constructor(t){super(t)}},xV=[0,ri,-4],YI=class extends je{constructor(t){super(t)}};YI.B=[1];var Ru=tl(YI,[0,Yn,xV]),$I=class extends je{constructor(t){super(t)}},SV=[0,ri,-4],qI=class extends je{constructor(t){super(t)}};qI.B=[1];var Vd=tl(qI,[0,Yn,SV]),ZI=class extends je{constructor(t){super(t)}};ZI.B=[3];var MV=[0,Nn,-1,k3,oo],KI=class extends je{constructor(){super()}};KI.prototype.g=x1([0,ri,-4,Xa]);var wV=class extends je{constructor(t){super(t)}},EV=[0,1,Nn,Kt,GI],JI=class extends je{constructor(t){super(t)}};JI.B=[1];var TV=tl(JI,[0,Yn,EV,Xa]),u2=class extends je{constructor(t){super(t)}};u2.B=[1];var AV=class extends je{constructor(t){super(t)}qa(){const t=fI(this);return t??rc()}},CV=class extends je{constructor(t){super(t)}},QI=[1,2],bV=[0,QI,Qt,[0,k3],Qt,[0,LI],Nn,Kt],e5=class extends je{constructor(t){super(t)}};e5.B=[1];var RV=tl(e5,[0,Yn,bV,Xa]),M1=class extends je{constructor(t){super(t)}};M1.B=[4,5];var t5=[0,Kt,Nn,ri,Ii,-1],h4=class extends je{constructor(t){super(t)}},PV=[0,zn,-1],f4=class extends je{constructor(t){super(t)}},Ag=[1,2,3,4,5],v0=class extends je{constructor(t){super(t)}g(){return fI(this)!=null}h(){return $l(Wa(this,2))!=null}},n5=[0,LI,Kt,[0,Nn,Xa,-1],[0,YH,Xa]],vn=class extends je{constructor(t){super(t)}g(){return aI(Wa(this,2))??!1}},Bn=[0,n5,zn,[0,Ag,Qt,FI,Qt,kI,Qt,NI,Qt,OI,Qt,UI],oo],w1=class extends je{constructor(t){super(t)}},O3=[0,Bn,ri,-1,Nn],LV=Ns(502141897,w1);gn[502141897]=O3;var i5=[0,n5];gn[512499200]=i5;var r5=[0,i5];gn[515723506]=r5;var IV=tl(class extends je{constructor(t){super(t)}},[0,[0,oo,-1,jH,ZH],MV]),s5=[0,Bn];gn[508981768]=s5;var o5=class extends je{constructor(t){super(t)}},F3=[0,Bn,ri,s5,zn],a5=class extends je{constructor(t){super(t)}},l5=[0,Bn,O3,F3,ri,r5];gn[508968149]=F3;var NV=Ns(508968150,a5);gn[508968150]=l5;var c5=class extends je{constructor(t){super(t)}},DV=Ns(513916220,c5);gn[513916220]=[0,Bn,l5,Nn];var eu=class extends je{constructor(t){super(t)}h(){return Ot(this,M1,2)}g(){tn(this,2)}},u5=[0,Bn,t5];gn[478825465]=u5;var h5=[0,Bn];gn[478825422]=h5;var kV=class extends je{constructor(t){super(t)}},f5=[0,Bn,h5,u5,-1],d5=class extends je{constructor(t){super(t)}},p5=[0,Bn,ri,Nn],z3=class extends je{constructor(t){super(t)}},B3=[0,Bn,ri],H3=class extends je{constructor(t){super(t)}},m5=[0,Bn,p5,B3,ri],g5=class extends je{constructor(t){super(t)}},UV=[0,Bn,m5,f5];gn[463370452]=f5,gn[464864288]=p5,gn[474472470]=B3;var OV=Ns(462713202,H3);gn[462713202]=m5;var FV=Ns(479097054,g5);gn[479097054]=UV;var zV=class extends je{constructor(t){super(t)}},BV=[0,Bn],v5=class extends je{constructor(t){super(t)}},V3=[0,Bn,ri,-1,Nn];gn[514774813]=V3;var y5=class extends je{constructor(t){super(t)}},G3=[0,Bn,ri,zn];gn[518928384]=G3;var _5=class extends je{constructor(){super()}};_5.prototype.g=x1([0,Bn,B3,BV,O3,F3,V3,G3]);var x5=class extends je{constructor(t){super(t)}},HV=Ns(456383383,x5);gn[456383383]=[0,Bn,t5];var S5=class extends je{constructor(t){super(t)}},VV=Ns(476348187,S5);gn[476348187]=[0,Bn,PV];var M5=class extends je{constructor(t){super(t)}},w5=[0,oo,-1],h2=class extends je{constructor(t){super(t)}};h2.B=[3];var GV=Ns(458105876,class extends je{constructor(t){super(t)}g(){var t=this.s;const e=jt(t);var n=2&e;return t=function(i,r,s){var o=h2;const a=2&r;let u=!1;if(s==null){if(a)return i4();s=[]}else if(s.constructor===os){if(!(2&s.N)||a)return s;s=s.Y()}else Array.isArray(s)?u=!!(2&In(s)):s=[];if(a){if(!s.length)return i4();u||(u=!0,ah(s))}else u&&(u=!1,s=mI(s));return u||(64&In(s)?c0(s,32):32&r&&_3(s,32)),cn(i,r,2,o=new os(s,o,bH,void 0),!1),o}(t,e,co(t,e,2)),t==null||!n&&h2&&(t.ta=!0),n=t}});gn[458105876]=[0,w5,XH,[!0,Xa,[0,Kt,-1,Ii]]];var W3=class extends je{constructor(t){super(t)}},E5=Ns(458105758,W3);gn[458105758]=[0,Bn,Kt,w5];var X3=class extends je{constructor(t){super(t)}};X3.B=[5,6];var WV=Ns(443442058,X3);gn[443442058]=[0,Bn,Kt,Nn,ri,Ii,-1];var T5=class extends je{constructor(t){super(t)}},XV=Ns(516587230,T5);function f2(t,e){return e=e?e.clone():new M1,t.displayNamesLocale!==void 0?tn(e,1,ch(t.displayNamesLocale)):t.displayNamesLocale===void 0&&tn(e,1),t.maxResults!==void 0?so(e,2,t.maxResults):"maxResults"in t&&tn(e,2),t.scoreThreshold!==void 0?qe(e,3,t.scoreThreshold):"scoreThreshold"in t&&tn(e,3),t.categoryAllowlist!==void 0?m0(e,4,t.categoryAllowlist):"categoryAllowlist"in t&&tn(e,4),t.categoryDenylist!==void 0?m0(e,5,t.categoryDenylist):"categoryDenylist"in t&&tn(e,5),e}function j3(t,e=-1,n=""){return{categories:t.map(i=>({index:bs(ns(i,1),0)??-1,score:Un(i,2)??0,categoryName:ro(i,3)??"",displayName:ro(i,4)??""})),headIndex:e,headName:n}}function A5(t){var o,a;var e=Su(t,3,el),n=Su(t,2,lh),i=Su(t,1,$l),r=Su(t,9,$l);const s={categories:[],keypoints:[]};for(let u=0;u<e.length;u++)s.categories.push({score:e[u],index:n[u]??-1,categoryName:i[u]??"",displayName:r[u]??""});if((e=(o=Ot(t,Tg,4))==null?void 0:o.h())&&(s.boundingBox={originX:ns(e,1)??0,originY:ns(e,2)??0,width:ns(e,3)??0,height:ns(e,4)??0,angle:0}),(a=Ot(t,Tg,4))==null?void 0:a.g().length)for(const u of Ot(t,Tg,4).g())s.keypoints.push({x:wg(u,1)??0,y:wg(u,2)??0,score:wg(u,4)??0,label:$l(Wa(u,3))??""});return s}function E1(t){const e=[];for(const n of Yo(t,$I,1))e.push({x:Un(n,1)??0,y:Un(n,2)??0,z:Un(n,3)??0,visibility:Un(n,4)??0});return e}function Rf(t){const e=[];for(const n of Yo(t,jI,1))e.push({x:Un(n,1)??0,y:Un(n,2)??0,z:Un(n,3)??0,visibility:Un(n,4)??0});return e}function d4(t){return Array.from(t,e=>127<e?e-256:e)}function p4(t,e){if(t.length!==e.length)throw Error(`Cannot compute cosine similarity between embeddings of different sizes (${t.length} vs. ${e.length}).`);let n=0,i=0,r=0;for(let s=0;s<t.length;s++)n+=t[s]*e[s],i+=t[s]*t[s],r+=e[s]*e[s];if(0>=i||0>=r)throw Error("Cannot compute cosine similarity on embedding with 0 norm.");return n/Math.sqrt(i*r)}let Jm;gn[516587230]=[0,Bn,V3,G3,ri];const jV=new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]);async function C5(){if(Jm===void 0)try{await WebAssembly.instantiate(jV),Jm=!0}catch{Jm=!1}return Jm}async function tf(t,e=""){const n=await C5()?"wasm_internal":"wasm_nosimd_internal";return{wasmLoaderPath:`${e}/${t}_${n}.js`,wasmBinaryPath:`${e}/${t}_${n}.wasm`}}var Ll=class{};function b5(){var t=navigator;return typeof OffscreenCanvas<"u"&&(!function(e=navigator){return(e=e.userAgent).includes("Safari")&&!e.includes("Chrome")}(t)||!!((t=t.userAgent.match(/Version\/([\d]+).*Safari/))&&1<=t.length&&17<=Number(t[1])))}async function m4(t){if(typeof importScripts!="function"){const e=document.createElement("script");return e.src=t.toString(),e.crossOrigin="anonymous",new Promise((n,i)=>{e.addEventListener("load",()=>{n()},!1),e.addEventListener("error",r=>{i(r)},!1),document.body.appendChild(e)})}importScripts(t.toString())}function R5(t){return t.videoWidth!==void 0?[t.videoWidth,t.videoHeight]:t.naturalWidth!==void 0?[t.naturalWidth,t.naturalHeight]:t.displayWidth!==void 0?[t.displayWidth,t.displayHeight]:[t.width,t.height]}function tt(t,e,n){t.m||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target"),n(e=t.i.stringToNewUTF8(e)),t.i._free(e)}function g4(t,e,n){if(!t.i.canvas)throw Error("No OpenGL canvas configured.");if(n?t.i._bindTextureToStream(n):t.i._bindTextureToCanvas(),!(n=t.i.canvas.getContext("webgl2")||t.i.canvas.getContext("webgl")))throw Error("Failed to obtain WebGL context from the provided canvas. `getContext()` should only be invoked with `webgl` or `webgl2`.");t.i.gpuOriginForWebTexturesIsBottomLeft&&n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!0),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,e),t.i.gpuOriginForWebTexturesIsBottomLeft&&n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1);const[i,r]=R5(e);return!t.l||i===t.i.canvas.width&&r===t.i.canvas.height||(t.i.canvas.width=i,t.i.canvas.height=r),[i,r]}function v4(t,e,n){t.m||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target");const i=new Uint32Array(e.length);for(let r=0;r<e.length;r++)i[r]=t.i.stringToNewUTF8(e[r]);e=t.i._malloc(4*i.length),t.i.HEAPU32.set(i,e>>2),n(e);for(const r of i)t.i._free(r);t.i._free(e)}function Gs(t,e,n){t.i.simpleListeners=t.i.simpleListeners||{},t.i.simpleListeners[e]=n}function va(t,e,n){let i=[];t.i.simpleListeners=t.i.simpleListeners||{},t.i.simpleListeners[e]=(r,s,o)=>{s?(n(i,o),i=[]):i.push(r)}}Ll.forVisionTasks=function(t){return tf("vision",t)},Ll.forTextTasks=function(t){return tf("text",t)},Ll.forGenAiExperimentalTasks=function(t){return tf("genai_experimental",t)},Ll.forGenAiTasks=function(t){return tf("genai",t)},Ll.forAudioTasks=function(t){return tf("audio",t)},Ll.isSimdSupported=function(){return C5()};async function YV(t,e,n,i){return t=await(async(r,s,o,a,u)=>{if(s&&await m4(s),!self.ModuleFactory||o&&(await m4(o),!self.ModuleFactory))throw Error("ModuleFactory not set.");return self.Module&&u&&((s=self.Module).locateFile=u.locateFile,u.mainScriptUrlOrBlob&&(s.mainScriptUrlOrBlob=u.mainScriptUrlOrBlob)),u=await self.ModuleFactory(self.Module||u),self.ModuleFactory=self.Module=void 0,new r(u,a)})(t,n.wasmLoaderPath,n.assetLoaderPath,e,{locateFile:r=>r.endsWith(".wasm")?n.wasmBinaryPath.toString():n.assetBinaryPath&&r.endsWith(".data")?n.assetBinaryPath.toString():r}),await t.o(i),t}function f_(t,e){const n=Ot(t.baseOptions,v0,1)||new v0;typeof e=="string"?(tn(n,2,ch(e)),tn(n,1)):e instanceof Uint8Array&&(tn(n,1,M3(e,!1,!1)),tn(n,2)),nt(t.baseOptions,0,1,n)}function y4(t){try{const e=t.K.length;if(e===1)throw Error(t.K[0].message);if(1<e)throw Error("Encountered multiple errors: "+t.K.map(n=>n.message).join(", "))}finally{t.K=[]}}function Ge(t,e){t.J=Math.max(t.J,e)}function T1(t,e){t.C=new Di,Ur(t.C,"PassThroughCalculator"),rn(t.C,"free_memory"),Dt(t.C,"free_memory_unused_out"),un(e,"free_memory"),Or(e,t.C)}function ju(t,e){rn(t.C,e),Dt(t.C,e+"_unused_out")}function A1(t){t.g.addBoolToStream(!0,"free_memory",t.J)}var Cg=class{constructor(t){this.g=t,this.K=[],this.J=0,this.g.setAutoRenderToScreen(!1)}l(t,e=!0){var n,i,r,s,o,a;if(e){const u=t.baseOptions||{};if((n=t.baseOptions)!=null&&n.modelAssetBuffer&&((i=t.baseOptions)!=null&&i.modelAssetPath))throw Error("Cannot set both baseOptions.modelAssetPath and baseOptions.modelAssetBuffer");if(!((r=Ot(this.baseOptions,v0,1))!=null&&r.g()||(s=Ot(this.baseOptions,v0,1))!=null&&s.h()||(o=t.baseOptions)!=null&&o.modelAssetBuffer||(a=t.baseOptions)!=null&&a.modelAssetPath))throw Error("Either baseOptions.modelAssetPath or baseOptions.modelAssetBuffer must be set");if(function(h,f){let d=Ot(h.baseOptions,f4,3);if(!d){var p=d=new f4,v=new u4;Af(p,4,Ag,v)}"delegate"in f&&(f.delegate==="GPU"?(f=d,p=new DI,Af(f,2,Ag,p)):(f=d,p=new u4,Af(f,4,Ag,p))),nt(h.baseOptions,0,3,d)}(this,u),u.modelAssetPath)return fetch(u.modelAssetPath.toString()).then(h=>{if(h.ok)return h.arrayBuffer();throw Error(`Failed to fetch model: ${u.modelAssetPath} (${h.status})`)}).then(h=>{try{this.g.i.FS_unlink("/model.dat")}catch{}this.g.i.FS_createDataFile("/","model.dat",new Uint8Array(h),!0,!1,!1),f_(this,"/model.dat"),this.m(),this.L()});if(u.modelAssetBuffer instanceof Uint8Array)f_(this,u.modelAssetBuffer);else if(u.modelAssetBuffer)return async function(h){const f=[];for(var d=0;;){const{done:p,value:v}=await h.read();if(p)break;f.push(v),d+=v.length}if(f.length===0)return new Uint8Array(0);if(f.length===1)return f[0];h=new Uint8Array(d),d=0;for(const p of f)h.set(p,d),d+=p.length;return h}(u.modelAssetBuffer).then(h=>{f_(this,h),this.m(),this.L()})}return this.m(),this.L(),Promise.resolve()}L(){}fa(){let t;if(this.g.fa(e=>{t=lV(e)}),!t)throw Error("Failed to retrieve CalculatorGraphConfig");return t}setGraph(t,e){this.g.attachErrorListener((n,i)=>{this.K.push(Error(i))}),this.g.Ma(),this.g.setGraph(t,e),this.C=void 0,y4(this)}finishProcessing(){this.g.finishProcessing(),y4(this)}close(){this.C=void 0,this.g.closeGraph()}};function zo(t,e){if(!t)throw Error(`Unable to obtain required WebGL resource: ${e}`);return t}Cg.prototype.close=Cg.prototype.close,function(t,e){t=t.split(".");var n,i=Dd;for((t[0]in i)||i.execScript===void 0||i.execScript("var "+t[0]);t.length&&(n=t.shift());)t.length||e===void 0?i=i[n]&&i[n]!==Object.prototype[n]?i[n]:i[n]={}:i[n]=e}("TaskRunner",Cg);class $V{constructor(e,n,i,r){this.g=e,this.h=n,this.m=i,this.l=r}bind(){this.g.bindVertexArray(this.h)}close(){this.g.deleteVertexArray(this.h),this.g.deleteBuffer(this.m),this.g.deleteBuffer(this.l)}}function _4(t,e,n){const i=t.g;if(n=zo(i.createShader(n),"Failed to create WebGL shader"),i.shaderSource(n,e),i.compileShader(n),!i.getShaderParameter(n,i.COMPILE_STATUS))throw Error(`Could not compile WebGL shader: ${i.getShaderInfoLog(n)}`);return i.attachShader(t.h,n),n}function x4(t,e){const n=t.g,i=zo(n.createVertexArray(),"Failed to create vertex array");n.bindVertexArray(i);const r=zo(n.createBuffer(),"Failed to create buffer");n.bindBuffer(n.ARRAY_BUFFER,r),n.enableVertexAttribArray(t.K),n.vertexAttribPointer(t.K,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),n.STATIC_DRAW);const s=zo(n.createBuffer(),"Failed to create buffer");return n.bindBuffer(n.ARRAY_BUFFER,s),n.enableVertexAttribArray(t.J),n.vertexAttribPointer(t.J,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array(e?[0,1,0,0,1,0,1,1]:[0,0,0,1,1,1,1,0]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),n.bindVertexArray(null),new $V(n,i,r,s)}function Y3(t,e){if(t.g){if(e!==t.g)throw Error("Cannot change GL context once initialized")}else t.g=e}function $3(t,e,n,i){return Y3(t,e),t.h||(t.m(),t.D()),n?(t.v||(t.v=x4(t,!0)),n=t.v):(t.A||(t.A=x4(t,!1)),n=t.A),e.useProgram(t.h),n.bind(),t.l(),t=i(),n.g.bindVertexArray(null),t}function C1(t,e,n){return Y3(t,e),t=zo(e.createTexture(),"Failed to create texture"),e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,n??e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,n??e.LINEAR),e.bindTexture(e.TEXTURE_2D,null),t}function b1(t,e,n){Y3(t,e),t.u||(t.u=zo(e.createFramebuffer(),"Failed to create framebuffe.")),e.bindFramebuffer(e.FRAMEBUFFER,t.u),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0)}function q3(t){var e;(e=t.g)==null||e.bindFramebuffer(t.g.FRAMEBUFFER,null)}var Z3=class{H(){return`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D inputTexture;
  void main() {
    gl_FragColor = texture2D(inputTexture, vTex);
  }
 `}m(){const t=this.g;if(this.h=zo(t.createProgram(),"Failed to create WebGL program"),this.ba=_4(this,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,t.VERTEX_SHADER),this.aa=_4(this,this.H(),t.FRAGMENT_SHADER),t.linkProgram(this.h),!t.getProgramParameter(this.h,t.LINK_STATUS))throw Error(`Error during program linking: ${t.getProgramInfoLog(this.h)}`);this.K=t.getAttribLocation(this.h,"aVertex"),this.J=t.getAttribLocation(this.h,"aTex")}D(){}l(){}close(){if(this.h){const t=this.g;t.deleteProgram(this.h),t.deleteShader(this.ba),t.deleteShader(this.aa)}this.u&&this.g.deleteFramebuffer(this.u),this.A&&this.A.close(),this.v&&this.v.close()}};function Po(t,e){switch(e){case 0:return t.g.find(n=>n instanceof Uint8Array);case 1:return t.g.find(n=>n instanceof Float32Array);case 2:return t.g.find(n=>typeof WebGLTexture<"u"&&n instanceof WebGLTexture);default:throw Error(`Type is not supported: ${e}`)}}function d2(t){var e=Po(t,1);if(!e){if(e=Po(t,0))e=new Float32Array(e).map(i=>i/255);else{e=new Float32Array(t.width*t.height);const i=Yu(t);var n=K3(t);if(b1(n,i,P5(t)),"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in self.document){n=new Float32Array(t.width*t.height*4),i.readPixels(0,0,t.width,t.height,i.RGBA,i.FLOAT,n);for(let r=0,s=0;r<e.length;++r,s+=4)e[r]=n[s]}else i.readPixels(0,0,t.width,t.height,i.RED,i.FLOAT,e)}t.g.push(e)}return e}function P5(t){let e=Po(t,2);if(!e){const n=Yu(t);e=I5(t);const i=d2(t),r=L5(t);n.texImage2D(n.TEXTURE_2D,0,r,t.width,t.height,0,n.RED,n.FLOAT,i),p2(t)}return e}function Yu(t){if(!t.canvas)throw Error("Conversion to different image formats require that a canvas is passed when initializing the image.");return t.h||(t.h=zo(t.canvas.getContext("webgl2"),"You cannot use a canvas that is already bound to a different type of rendering context.")),t.h}function L5(t){if(t=Yu(t),!Qm)if(t.getExtension("EXT_color_buffer_float")&&t.getExtension("OES_texture_float_linear")&&t.getExtension("EXT_float_blend"))Qm=t.R32F;else{if(!t.getExtension("EXT_color_buffer_half_float"))throw Error("GPU does not fully support 4-channel float32 or float16 formats");Qm=t.R16F}return Qm}function K3(t){return t.l||(t.l=new Z3),t.l}function I5(t){const e=Yu(t);e.viewport(0,0,t.width,t.height),e.activeTexture(e.TEXTURE0);let n=Po(t,2);return n||(n=C1(K3(t),e,t.m?e.LINEAR:e.NEAREST),t.g.push(n),t.j=!0),e.bindTexture(e.TEXTURE_2D,n),n}function p2(t){t.h.bindTexture(t.h.TEXTURE_2D,null)}var Qm,ci=class{constructor(t,e,n,i,r,s,o){this.g=t,this.m=e,this.j=n,this.canvas=i,this.l=r,this.width=s,this.height=o,this.j&&--S4===0&&console.error("You seem to be creating MPMask instances without invoking .close(). This leaks resources.")}Ha(){return!!Po(this,0)}la(){return!!Po(this,1)}R(){return!!Po(this,2)}ka(){return(e=Po(t=this,0))||(e=d2(t),e=new Uint8Array(e.map(n=>255*n)),t.g.push(e)),e;var t,e}ja(){return d2(this)}O(){return P5(this)}clone(){const t=[];for(const e of this.g){let n;if(e instanceof Uint8Array)n=new Uint8Array(e);else if(e instanceof Float32Array)n=new Float32Array(e);else{if(!(e instanceof WebGLTexture))throw Error(`Type is not supported: ${e}`);{const i=Yu(this),r=K3(this);i.activeTexture(i.TEXTURE1),n=C1(r,i,this.m?i.LINEAR:i.NEAREST),i.bindTexture(i.TEXTURE_2D,n);const s=L5(this);i.texImage2D(i.TEXTURE_2D,0,s,this.width,this.height,0,i.RED,i.FLOAT,null),i.bindTexture(i.TEXTURE_2D,null),b1(r,i,n),$3(r,i,!1,()=>{I5(this),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.drawArrays(i.TRIANGLE_FAN,0,4),p2(this)}),q3(r),p2(this)}}t.push(n)}return new ci(t,this.m,this.R(),this.canvas,this.l,this.width,this.height)}close(){this.j&&Yu(this).deleteTexture(Po(this,2)),S4=-1}};ci.prototype.close=ci.prototype.close,ci.prototype.clone=ci.prototype.clone,ci.prototype.getAsWebGLTexture=ci.prototype.O,ci.prototype.getAsFloat32Array=ci.prototype.ja,ci.prototype.getAsUint8Array=ci.prototype.ka,ci.prototype.hasWebGLTexture=ci.prototype.R,ci.prototype.hasFloat32Array=ci.prototype.la,ci.prototype.hasUint8Array=ci.prototype.Ha;var S4=250;function Ys(t,e){switch(e){case 0:return t.g.find(n=>n instanceof ImageData);case 1:return t.g.find(n=>typeof ImageBitmap<"u"&&n instanceof ImageBitmap);case 2:return t.g.find(n=>typeof WebGLTexture<"u"&&n instanceof WebGLTexture);default:throw Error(`Type is not supported: ${e}`)}}function N5(t){var e=Ys(t,0);if(!e){e=$u(t);const n=R1(t),i=new Uint8Array(t.width*t.height*4);b1(n,e,bg(t)),e.readPixels(0,0,t.width,t.height,e.RGBA,e.UNSIGNED_BYTE,i),q3(n),e=new ImageData(new Uint8ClampedArray(i.buffer),t.width,t.height),t.g.push(e)}return e}function bg(t){let e=Ys(t,2);if(!e){const n=$u(t);e=Rg(t);const i=Ys(t,1)||N5(t);n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,i),uf(t)}return e}function $u(t){if(!t.canvas)throw Error("Conversion to different image formats require that a canvas is passed when iniitializing the image.");return t.h||(t.h=zo(t.canvas.getContext("webgl2"),"You cannot use a canvas that is already bound to a different type of rendering context.")),t.h}function R1(t){return t.l||(t.l=new Z3),t.l}function Rg(t){const e=$u(t);e.viewport(0,0,t.width,t.height),e.activeTexture(e.TEXTURE0);let n=Ys(t,2);return n||(n=C1(R1(t),e),t.g.push(n),t.m=!0),e.bindTexture(e.TEXTURE_2D,n),n}function uf(t){t.h.bindTexture(t.h.TEXTURE_2D,null)}function M4(t){const e=$u(t);return $3(R1(t),e,!0,()=>function(n,i){const r=n.canvas;if(r.width===n.width&&r.height===n.height)return i();const s=r.width,o=r.height;return r.width=n.width,r.height=n.height,n=i(),r.width=s,r.height=o,n}(t,()=>{if(e.bindFramebuffer(e.FRAMEBUFFER,null),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.drawArrays(e.TRIANGLE_FAN,0,4),!(t.canvas instanceof OffscreenCanvas))throw Error("Conversion to ImageBitmap requires that the MediaPipe Tasks is initialized with an OffscreenCanvas");return t.canvas.transferToImageBitmap()}))}var ui=class{constructor(t,e,n,i,r,s,o){this.g=t,this.j=e,this.m=n,this.canvas=i,this.l=r,this.width=s,this.height=o,(this.j||this.m)&&--w4===0&&console.error("You seem to be creating MPImage instances without invoking .close(). This leaks resources.")}Ga(){return!!Ys(this,0)}ma(){return!!Ys(this,1)}R(){return!!Ys(this,2)}Ea(){return N5(this)}Da(){var t=Ys(this,1);return t||(bg(this),Rg(this),t=M4(this),uf(this),this.g.push(t),this.j=!0),t}O(){return bg(this)}clone(){const t=[];for(const e of this.g){let n;if(e instanceof ImageData)n=new ImageData(e.data,this.width,this.height);else if(e instanceof WebGLTexture){const i=$u(this),r=R1(this);i.activeTexture(i.TEXTURE1),n=C1(r,i),i.bindTexture(i.TEXTURE_2D,n),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,this.width,this.height,0,i.RGBA,i.UNSIGNED_BYTE,null),i.bindTexture(i.TEXTURE_2D,null),b1(r,i,n),$3(r,i,!1,()=>{Rg(this),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.drawArrays(i.TRIANGLE_FAN,0,4),uf(this)}),q3(r),uf(this)}else{if(!(e instanceof ImageBitmap))throw Error(`Type is not supported: ${e}`);bg(this),Rg(this),n=M4(this),uf(this)}t.push(n)}return new ui(t,this.ma(),this.R(),this.canvas,this.l,this.width,this.height)}close(){this.j&&Ys(this,1).close(),this.m&&$u(this).deleteTexture(Ys(this,2)),w4=-1}};ui.prototype.close=ui.prototype.close,ui.prototype.clone=ui.prototype.clone,ui.prototype.getAsWebGLTexture=ui.prototype.O,ui.prototype.getAsImageBitmap=ui.prototype.Da,ui.prototype.getAsImageData=ui.prototype.Ea,ui.prototype.hasWebGLTexture=ui.prototype.R,ui.prototype.hasImageBitmap=ui.prototype.ma,ui.prototype.hasImageData=ui.prototype.Ga;var w4=250;function Ds(...t){return t.map(([e,n])=>({start:e,end:n}))}const qV=function(t){return class extends t{Ma(){this.i._registerModelResourcesGraphService()}}}((E4=class{constructor(t,e){this.l=!0,this.i=t,this.g=null,this.h=0,this.m=typeof this.i._addIntToInputStream=="function",e!==void 0?this.i.canvas=e:b5()?this.i.canvas=new OffscreenCanvas(1,1):(console.warn("OffscreenCanvas not supported and GraphRunner constructor glCanvas parameter is undefined. Creating backup canvas."),this.i.canvas=document.createElement("canvas"))}async initializeGraph(t){const e=await(await fetch(t)).arrayBuffer();t=!(t.endsWith(".pbtxt")||t.endsWith(".textproto")),this.setGraph(new Uint8Array(e),t)}setGraphFromString(t){this.setGraph(new TextEncoder().encode(t),!1)}setGraph(t,e){const n=t.length,i=this.i._malloc(n);this.i.HEAPU8.set(t,i),e?this.i._changeBinaryGraph(n,i):this.i._changeTextGraph(n,i),this.i._free(i)}configureAudio(t,e,n,i,r){this.i._configureAudio||console.warn('Attempting to use configureAudio without support for input audio. Is build dep ":gl_graph_runner_audio" missing?'),tt(this,i||"input_audio",s=>{tt(this,r=r||"audio_header",o=>{this.i._configureAudio(s,o,t,e,n)})})}setAutoResizeCanvas(t){this.l=t}setAutoRenderToScreen(t){this.i._setAutoRenderToScreen(t)}setGpuBufferVerticalFlip(t){this.i.gpuOriginForWebTexturesIsBottomLeft=t}fa(t){Gs(this,"__graph_config__",e=>{t(e)}),tt(this,"__graph_config__",e=>{this.i._getGraphConfig(e,void 0)}),delete this.i.simpleListeners.__graph_config__}attachErrorListener(t){this.i.errorListener=t}attachEmptyPacketListener(t,e){this.i.emptyPacketListeners=this.i.emptyPacketListeners||{},this.i.emptyPacketListeners[t]=e}addAudioToStream(t,e,n){this.addAudioToStreamWithShape(t,0,0,e,n)}addAudioToStreamWithShape(t,e,n,i,r){const s=4*t.length;this.h!==s&&(this.g&&this.i._free(this.g),this.g=this.i._malloc(s),this.h=s),this.i.HEAPF32.set(t,this.g/4),tt(this,i,o=>{this.i._addAudioToInputStream(this.g,e,n,o,r)})}addGpuBufferToStream(t,e,n){tt(this,e,i=>{const[r,s]=g4(this,t,i);this.i._addBoundTextureToStream(i,r,s,n)})}addBoolToStream(t,e,n){tt(this,e,i=>{this.i._addBoolToInputStream(t,i,n)})}addDoubleToStream(t,e,n){tt(this,e,i=>{this.i._addDoubleToInputStream(t,i,n)})}addFloatToStream(t,e,n){tt(this,e,i=>{this.i._addFloatToInputStream(t,i,n)})}addIntToStream(t,e,n){tt(this,e,i=>{this.i._addIntToInputStream(t,i,n)})}addUintToStream(t,e,n){tt(this,e,i=>{this.i._addUintToInputStream(t,i,n)})}addStringToStream(t,e,n){tt(this,e,i=>{tt(this,t,r=>{this.i._addStringToInputStream(r,i,n)})})}addStringRecordToStream(t,e,n){tt(this,e,i=>{v4(this,Object.keys(t),r=>{v4(this,Object.values(t),s=>{this.i._addFlatHashMapToInputStream(r,s,Object.keys(t).length,i,n)})})})}addProtoToStream(t,e,n,i){tt(this,n,r=>{tt(this,e,s=>{const o=this.i._malloc(t.length);this.i.HEAPU8.set(t,o),this.i._addProtoToInputStream(o,t.length,s,r,i),this.i._free(o)})})}addEmptyPacketToStream(t,e){tt(this,t,n=>{this.i._addEmptyPacketToInputStream(n,e)})}addBoolVectorToStream(t,e,n){tt(this,e,i=>{const r=this.i._allocateBoolVector(t.length);if(!r)throw Error("Unable to allocate new bool vector on heap.");for(const s of t)this.i._addBoolVectorEntry(r,s);this.i._addBoolVectorToInputStream(r,i,n)})}addDoubleVectorToStream(t,e,n){tt(this,e,i=>{const r=this.i._allocateDoubleVector(t.length);if(!r)throw Error("Unable to allocate new double vector on heap.");for(const s of t)this.i._addDoubleVectorEntry(r,s);this.i._addDoubleVectorToInputStream(r,i,n)})}addFloatVectorToStream(t,e,n){tt(this,e,i=>{const r=this.i._allocateFloatVector(t.length);if(!r)throw Error("Unable to allocate new float vector on heap.");for(const s of t)this.i._addFloatVectorEntry(r,s);this.i._addFloatVectorToInputStream(r,i,n)})}addIntVectorToStream(t,e,n){tt(this,e,i=>{const r=this.i._allocateIntVector(t.length);if(!r)throw Error("Unable to allocate new int vector on heap.");for(const s of t)this.i._addIntVectorEntry(r,s);this.i._addIntVectorToInputStream(r,i,n)})}addUintVectorToStream(t,e,n){tt(this,e,i=>{const r=this.i._allocateUintVector(t.length);if(!r)throw Error("Unable to allocate new unsigned int vector on heap.");for(const s of t)this.i._addUintVectorEntry(r,s);this.i._addUintVectorToInputStream(r,i,n)})}addStringVectorToStream(t,e,n){tt(this,e,i=>{const r=this.i._allocateStringVector(t.length);if(!r)throw Error("Unable to allocate new string vector on heap.");for(const s of t)tt(this,s,o=>{this.i._addStringVectorEntry(r,o)});this.i._addStringVectorToInputStream(r,i,n)})}addBoolToInputSidePacket(t,e){tt(this,e,n=>{this.i._addBoolToInputSidePacket(t,n)})}addDoubleToInputSidePacket(t,e){tt(this,e,n=>{this.i._addDoubleToInputSidePacket(t,n)})}addFloatToInputSidePacket(t,e){tt(this,e,n=>{this.i._addFloatToInputSidePacket(t,n)})}addIntToInputSidePacket(t,e){tt(this,e,n=>{this.i._addIntToInputSidePacket(t,n)})}addUintToInputSidePacket(t,e){tt(this,e,n=>{this.i._addUintToInputSidePacket(t,n)})}addStringToInputSidePacket(t,e){tt(this,e,n=>{tt(this,t,i=>{this.i._addStringToInputSidePacket(i,n)})})}addProtoToInputSidePacket(t,e,n){tt(this,n,i=>{tt(this,e,r=>{const s=this.i._malloc(t.length);this.i.HEAPU8.set(t,s),this.i._addProtoToInputSidePacket(s,t.length,r,i),this.i._free(s)})})}addBoolVectorToInputSidePacket(t,e){tt(this,e,n=>{const i=this.i._allocateBoolVector(t.length);if(!i)throw Error("Unable to allocate new bool vector on heap.");for(const r of t)this.i._addBoolVectorEntry(i,r);this.i._addBoolVectorToInputSidePacket(i,n)})}addDoubleVectorToInputSidePacket(t,e){tt(this,e,n=>{const i=this.i._allocateDoubleVector(t.length);if(!i)throw Error("Unable to allocate new double vector on heap.");for(const r of t)this.i._addDoubleVectorEntry(i,r);this.i._addDoubleVectorToInputSidePacket(i,n)})}addFloatVectorToInputSidePacket(t,e){tt(this,e,n=>{const i=this.i._allocateFloatVector(t.length);if(!i)throw Error("Unable to allocate new float vector on heap.");for(const r of t)this.i._addFloatVectorEntry(i,r);this.i._addFloatVectorToInputSidePacket(i,n)})}addIntVectorToInputSidePacket(t,e){tt(this,e,n=>{const i=this.i._allocateIntVector(t.length);if(!i)throw Error("Unable to allocate new int vector on heap.");for(const r of t)this.i._addIntVectorEntry(i,r);this.i._addIntVectorToInputSidePacket(i,n)})}addUintVectorToInputSidePacket(t,e){tt(this,e,n=>{const i=this.i._allocateUintVector(t.length);if(!i)throw Error("Unable to allocate new unsigned int vector on heap.");for(const r of t)this.i._addUintVectorEntry(i,r);this.i._addUintVectorToInputSidePacket(i,n)})}addStringVectorToInputSidePacket(t,e){tt(this,e,n=>{const i=this.i._allocateStringVector(t.length);if(!i)throw Error("Unable to allocate new string vector on heap.");for(const r of t)tt(this,r,s=>{this.i._addStringVectorEntry(i,s)});this.i._addStringVectorToInputSidePacket(i,n)})}attachBoolListener(t,e){Gs(this,t,e),tt(this,t,n=>{this.i._attachBoolListener(n)})}attachBoolVectorListener(t,e){va(this,t,e),tt(this,t,n=>{this.i._attachBoolVectorListener(n)})}attachIntListener(t,e){Gs(this,t,e),tt(this,t,n=>{this.i._attachIntListener(n)})}attachIntVectorListener(t,e){va(this,t,e),tt(this,t,n=>{this.i._attachIntVectorListener(n)})}attachUintListener(t,e){Gs(this,t,e),tt(this,t,n=>{this.i._attachUintListener(n)})}attachUintVectorListener(t,e){va(this,t,e),tt(this,t,n=>{this.i._attachUintVectorListener(n)})}attachDoubleListener(t,e){Gs(this,t,e),tt(this,t,n=>{this.i._attachDoubleListener(n)})}attachDoubleVectorListener(t,e){va(this,t,e),tt(this,t,n=>{this.i._attachDoubleVectorListener(n)})}attachFloatListener(t,e){Gs(this,t,e),tt(this,t,n=>{this.i._attachFloatListener(n)})}attachFloatVectorListener(t,e){va(this,t,e),tt(this,t,n=>{this.i._attachFloatVectorListener(n)})}attachStringListener(t,e){Gs(this,t,e),tt(this,t,n=>{this.i._attachStringListener(n)})}attachStringVectorListener(t,e){va(this,t,e),tt(this,t,n=>{this.i._attachStringVectorListener(n)})}attachProtoListener(t,e,n){Gs(this,t,e),tt(this,t,i=>{this.i._attachProtoListener(i,n||!1)})}attachProtoVectorListener(t,e,n){va(this,t,e),tt(this,t,i=>{this.i._attachProtoVectorListener(i,n||!1)})}attachAudioListener(t,e,n){this.i._attachAudioListener||console.warn('Attempting to use attachAudioListener without support for output audio. Is build dep ":gl_graph_runner_audio_out" missing?'),Gs(this,t,(i,r)=>{i=new Float32Array(i.buffer,i.byteOffset,i.length/4),e(i,r)}),tt(this,t,i=>{this.i._attachAudioListener(i,n||!1)})}finishProcessing(){this.i._waitUntilIdle()}closeGraph(){this.i._closeGraph(),this.i.simpleListeners=void 0,this.i.emptyPacketListeners=void 0}},class extends E4{get ha(){return this.i}sa(t,e,n){tt(this,e,i=>{const[r,s]=g4(this,t,i);this.ha._addBoundTextureAsImageToStream(i,r,s,n)})}W(t,e){Gs(this,t,e),tt(this,t,n=>{this.ha._attachImageListener(n)})}da(t,e){va(this,t,e),tt(this,t,n=>{this.ha._attachImageVectorListener(n)})}}));var E4,ls=class extends qV{};async function Lt(t,e,n){return async function(i,r,s,o){return YV(i,r,s,o)}(t,n.canvas??(b5()?void 0:document.createElement("canvas")),e,n)}function D5(t,e,n,i){if(t.V){const s=new KI;if(n!=null&&n.regionOfInterest){if(!t.ra)throw Error("This task doesn't support region-of-interest.");var r=n.regionOfInterest;if(r.left>=r.right||r.top>=r.bottom)throw Error("Expected RectF with left < right and top < bottom.");if(0>r.left||0>r.top||1<r.right||1<r.bottom)throw Error("Expected RectF values to be in [0,1].");qe(s,1,(r.left+r.right)/2),qe(s,2,(r.top+r.bottom)/2),qe(s,4,r.right-r.left),qe(s,3,r.bottom-r.top)}else qe(s,1,.5),qe(s,2,.5),qe(s,4,1),qe(s,3,1);if(n!=null&&n.rotationDegrees){if((n==null?void 0:n.rotationDegrees)%90!=0)throw Error("Expected rotation to be a multiple of 90.");if(qe(s,5,-Math.PI*n.rotationDegrees/180),(n==null?void 0:n.rotationDegrees)%180!=0){const[o,a]=R5(e);n=Un(s,3)*a/o,r=Un(s,4)*o/a,qe(s,4,n),qe(s,3,r)}}t.g.addProtoToStream(s.g(),"mediapipe.NormalizedRect",t.V,i)}t.g.sa(e,t.ba,i??performance.now()),t.finishProcessing()}function cs(t,e,n){var i;if((i=t.baseOptions)!=null&&i.g())throw Error("Task is not initialized with image mode. 'runningMode' must be set to 'IMAGE'.");D5(t,e,n,t.J+1)}function uo(t,e,n,i){var r;if(!((r=t.baseOptions)!=null&&r.g()))throw Error("Task is not initialized with video mode. 'runningMode' must be set to 'VIDEO'.");D5(t,e,n,i)}function qu(t,e,n,i){var r=e.data;const s=e.width,o=s*(e=e.height);if((r instanceof Uint8Array||r instanceof Float32Array)&&r.length!==o)throw Error("Unsupported channel count: "+r.length/o);return t=new ci([r],n,!1,t.g.i.canvas,t.M,s,e),i?t.clone():t}var ur=class extends Cg{constructor(t,e,n,i){super(t),this.g=t,this.ba=e,this.V=n,this.ra=i,this.M=new Z3}l(t,e=!0){if("runningMode"in t&&vd(this.baseOptions,2,!!t.runningMode&&t.runningMode!=="IMAGE"),t.canvas!==void 0&&this.g.i.canvas!==t.canvas)throw Error("You must create a new task to reset the canvas.");return super.l(t,e)}close(){this.M.close(),super.close()}};ur.prototype.close=ur.prototype.close;var Yr=class extends ur{constructor(t,e){super(new ls(t,e),"image_in","norm_rect_in",!1),this.j={detections:[]},nt(t=this.h=new w1,0,1,e=new vn),qe(this.h,2,.5),qe(this.h,3,.3)}get baseOptions(){return Ot(this.h,vn,1)}set baseOptions(t){nt(this.h,0,1,t)}o(t){return"minDetectionConfidence"in t&&qe(this.h,2,t.minDetectionConfidence??.5),"minSuppressionThreshold"in t&&qe(this.h,3,t.minSuppressionThreshold??.3),this.l(t)}F(t,e){return this.j={detections:[]},cs(this,t,e),this.j}G(t,e,n){return this.j={detections:[]},uo(this,t,n,e),this.j}m(){var t=new Zi;un(t,"image_in"),un(t,"norm_rect_in"),Ht(t,"detections");const e=new Nr;Is(e,LV,this.h);const n=new Di;Ur(n,"mediapipe.tasks.vision.face_detector.FaceDetectorGraph"),rn(n,"IMAGE:image_in"),rn(n,"NORM_RECT:norm_rect_in"),Dt(n,"DETECTIONS:detections"),n.o(e),Or(t,n),this.g.attachProtoVectorListener("detections",(i,r)=>{for(const s of i)i=XI(s),this.j.detections.push(A5(i));Ge(this,r)}),this.g.attachEmptyPacketListener("detections",i=>{Ge(this,i)}),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};Yr.prototype.detectForVideo=Yr.prototype.G,Yr.prototype.detect=Yr.prototype.F,Yr.prototype.setOptions=Yr.prototype.o,Yr.createFromModelPath=async function(t,e){return Lt(Yr,t,{baseOptions:{modelAssetPath:e}})},Yr.createFromModelBuffer=function(t,e){return Lt(Yr,t,{baseOptions:{modelAssetBuffer:e}})},Yr.createFromOptions=function(t,e){return Lt(Yr,t,e)};var J3=Ds([61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]),Q3=Ds([263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]),eM=Ds([276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]),k5=Ds([474,475],[475,476],[476,477],[477,474]),tM=Ds([33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]),nM=Ds([46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]),U5=Ds([469,470],[470,471],[471,472],[472,469]),iM=Ds([10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]),O5=[...J3,...Q3,...eM,...tM,...nM,...iM],F5=Ds([127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]);function T4(t){t.u={faceLandmarks:[],faceBlendshapes:[],facialTransformationMatrixes:[]}}var Cn=class extends ur{constructor(t,e){super(new ls(t,e),"image_in","norm_rect",!1),this.u={faceLandmarks:[],faceBlendshapes:[],facialTransformationMatrixes:[]},this.outputFacialTransformationMatrixes=this.outputFaceBlendshapes=!1,nt(t=this.h=new a5,0,1,e=new vn),this.H=new o5,nt(this.h,0,3,this.H),this.j=new w1,nt(this.h,0,2,this.j),so(this.j,4,1),qe(this.j,2,.5),qe(this.H,2,.5),qe(this.h,4,.5)}get baseOptions(){return Ot(this.h,vn,1)}set baseOptions(t){nt(this.h,0,1,t)}o(t){return"numFaces"in t&&so(this.j,4,t.numFaces??1),"minFaceDetectionConfidence"in t&&qe(this.j,2,t.minFaceDetectionConfidence??.5),"minTrackingConfidence"in t&&qe(this.h,4,t.minTrackingConfidence??.5),"minFacePresenceConfidence"in t&&qe(this.H,2,t.minFacePresenceConfidence??.5),"outputFaceBlendshapes"in t&&(this.outputFaceBlendshapes=!!t.outputFaceBlendshapes),"outputFacialTransformationMatrixes"in t&&(this.outputFacialTransformationMatrixes=!!t.outputFacialTransformationMatrixes),this.l(t)}F(t,e){return T4(this),cs(this,t,e),this.u}G(t,e,n){return T4(this),uo(this,t,n,e),this.u}m(){var t=new Zi;un(t,"image_in"),un(t,"norm_rect"),Ht(t,"face_landmarks");const e=new Nr;Is(e,NV,this.h);const n=new Di;Ur(n,"mediapipe.tasks.vision.face_landmarker.FaceLandmarkerGraph"),rn(n,"IMAGE:image_in"),rn(n,"NORM_RECT:norm_rect"),Dt(n,"NORM_LANDMARKS:face_landmarks"),n.o(e),Or(t,n),this.g.attachProtoVectorListener("face_landmarks",(i,r)=>{for(const s of i)i=Vd(s),this.u.faceLandmarks.push(E1(i));Ge(this,r)}),this.g.attachEmptyPacketListener("face_landmarks",i=>{Ge(this,i)}),this.outputFaceBlendshapes&&(Ht(t,"blendshapes"),Dt(n,"BLENDSHAPES:blendshapes"),this.g.attachProtoVectorListener("blendshapes",(i,r)=>{if(this.outputFaceBlendshapes)for(const s of i)i=S1(s),this.u.faceBlendshapes.push(j3(i.g()??[]));Ge(this,r)}),this.g.attachEmptyPacketListener("blendshapes",i=>{Ge(this,i)})),this.outputFacialTransformationMatrixes&&(Ht(t,"face_geometry"),Dt(n,"FACE_GEOMETRY:face_geometry"),this.g.attachProtoVectorListener("face_geometry",(i,r)=>{if(this.outputFacialTransformationMatrixes)for(const s of i)(i=Ot(IV(s),ZI,2))&&this.u.facialTransformationMatrixes.push({rows:bs(ns(i,1),0)??0,columns:bs(ns(i,2),0)??0,data:Su(i,3,el).slice()??[]});Ge(this,r)}),this.g.attachEmptyPacketListener("face_geometry",i=>{Ge(this,i)})),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};Cn.prototype.detectForVideo=Cn.prototype.G,Cn.prototype.detect=Cn.prototype.F,Cn.prototype.setOptions=Cn.prototype.o,Cn.createFromModelPath=function(t,e){return Lt(Cn,t,{baseOptions:{modelAssetPath:e}})},Cn.createFromModelBuffer=function(t,e){return Lt(Cn,t,{baseOptions:{modelAssetBuffer:e}})},Cn.createFromOptions=function(t,e){return Lt(Cn,t,e)},Cn.FACE_LANDMARKS_LIPS=J3,Cn.FACE_LANDMARKS_LEFT_EYE=Q3,Cn.FACE_LANDMARKS_LEFT_EYEBROW=eM,Cn.FACE_LANDMARKS_LEFT_IRIS=k5,Cn.FACE_LANDMARKS_RIGHT_EYE=tM,Cn.FACE_LANDMARKS_RIGHT_EYEBROW=nM,Cn.FACE_LANDMARKS_RIGHT_IRIS=U5,Cn.FACE_LANDMARKS_FACE_OVAL=iM,Cn.FACE_LANDMARKS_CONTOURS=O5,Cn.FACE_LANDMARKS_TESSELATION=F5;var Ws=class extends ur{constructor(t,e){super(new ls(t,e),"image_in","norm_rect",!0),nt(t=this.j=new c5,0,1,e=new vn)}get baseOptions(){return Ot(this.j,vn,1)}set baseOptions(t){nt(this.j,0,1,t)}o(t){return super.l(t)}Pa(t,e,n){const i=typeof e!="function"?e:{};if(this.h=typeof e=="function"?e:n,cs(this,t,i??{}),!this.h)return this.u}m(){var t=new Zi;un(t,"image_in"),un(t,"norm_rect"),Ht(t,"stylized_image");const e=new Nr;Is(e,DV,this.j);const n=new Di;Ur(n,"mediapipe.tasks.vision.face_stylizer.FaceStylizerGraph"),rn(n,"IMAGE:image_in"),rn(n,"NORM_RECT:norm_rect"),Dt(n,"STYLIZED_IMAGE:stylized_image"),n.o(e),Or(t,n),this.g.W("stylized_image",(i,r)=>{var s=!this.h,o=i.data,a=i.width;const u=a*(i=i.height);if(o instanceof Uint8Array)if(o.length===3*u){const h=new Uint8ClampedArray(4*u);for(let f=0;f<u;++f)h[4*f]=o[3*f],h[4*f+1]=o[3*f+1],h[4*f+2]=o[3*f+2],h[4*f+3]=255;o=new ImageData(h,a,i)}else{if(o.length!==4*u)throw Error("Unsupported channel count: "+o.length/u);o=new ImageData(new Uint8ClampedArray(o.buffer,o.byteOffset,o.length),a,i)}else if(!(o instanceof WebGLTexture))throw Error(`Unsupported format: ${o.constructor.name}`);a=new ui([o],!1,!1,this.g.i.canvas,this.M,a,i),this.u=s=s?a.clone():a,this.h&&this.h(s),Ge(this,r)}),this.g.attachEmptyPacketListener("stylized_image",i=>{this.u=null,this.h&&this.h(null),Ge(this,i)}),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};Ws.prototype.stylize=Ws.prototype.Pa,Ws.prototype.setOptions=Ws.prototype.o,Ws.createFromModelPath=function(t,e){return Lt(Ws,t,{baseOptions:{modelAssetPath:e}})},Ws.createFromModelBuffer=function(t,e){return Lt(Ws,t,{baseOptions:{modelAssetBuffer:e}})},Ws.createFromOptions=function(t,e){return Lt(Ws,t,e)};var rM=Ds([0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]);function A4(t){t.gestures=[],t.landmarks=[],t.worldLandmarks=[],t.handedness=[]}function C4(t){return t.gestures.length===0?{gestures:[],landmarks:[],worldLandmarks:[],handedness:[],handednesses:[]}:{gestures:t.gestures,landmarks:t.landmarks,worldLandmarks:t.worldLandmarks,handedness:t.handedness,handednesses:t.handedness}}function b4(t,e=!0){const n=[];for(const r of t){var i=S1(r);t=[];for(const s of i.g())i=e&&ns(s,1)!=null?bs(ns(s,1),0):-1,t.push({score:Un(s,2)??0,index:i,categoryName:ro(s,3)??"",displayName:ro(s,4)??""});n.push(t)}return n}var Sr=class extends ur{constructor(t,e){super(new ls(t,e),"image_in","norm_rect",!1),this.gestures=[],this.landmarks=[],this.worldLandmarks=[],this.handedness=[],nt(t=this.v=new g5,0,1,e=new vn),this.A=new H3,nt(this.v,0,2,this.A),this.u=new z3,nt(this.A,0,3,this.u),this.h=new d5,nt(this.A,0,2,this.h),this.j=new kV,nt(this.v,0,3,this.j),qe(this.h,2,.5),qe(this.A,4,.5),qe(this.u,2,.5)}get baseOptions(){return Ot(this.v,vn,1)}set baseOptions(t){nt(this.v,0,1,t)}o(t){var r,s,o,a;if(so(this.h,3,t.numHands??1),"minHandDetectionConfidence"in t&&qe(this.h,2,t.minHandDetectionConfidence??.5),"minTrackingConfidence"in t&&qe(this.A,4,t.minTrackingConfidence??.5),"minHandPresenceConfidence"in t&&qe(this.u,2,t.minHandPresenceConfidence??.5),t.cannedGesturesClassifierOptions){var e=new eu,n=e,i=f2(t.cannedGesturesClassifierOptions,(r=Ot(this.j,eu,3))==null?void 0:r.h());nt(n,0,2,i),nt(this.j,0,3,e)}else t.cannedGesturesClassifierOptions===void 0&&((s=Ot(this.j,eu,3))==null||s.g());return t.customGesturesClassifierOptions?(nt(n=e=new eu,0,2,i=f2(t.customGesturesClassifierOptions,(o=Ot(this.j,eu,4))==null?void 0:o.h())),nt(this.j,0,4,e)):t.customGesturesClassifierOptions===void 0&&((a=Ot(this.j,eu,4))==null||a.g()),this.l(t)}Ka(t,e){return A4(this),cs(this,t,e),C4(this)}La(t,e,n){return A4(this),uo(this,t,n,e),C4(this)}m(){var t=new Zi;un(t,"image_in"),un(t,"norm_rect"),Ht(t,"hand_gestures"),Ht(t,"hand_landmarks"),Ht(t,"world_hand_landmarks"),Ht(t,"handedness");const e=new Nr;Is(e,FV,this.v);const n=new Di;Ur(n,"mediapipe.tasks.vision.gesture_recognizer.GestureRecognizerGraph"),rn(n,"IMAGE:image_in"),rn(n,"NORM_RECT:norm_rect"),Dt(n,"HAND_GESTURES:hand_gestures"),Dt(n,"LANDMARKS:hand_landmarks"),Dt(n,"WORLD_LANDMARKS:world_hand_landmarks"),Dt(n,"HANDEDNESS:handedness"),n.o(e),Or(t,n),this.g.attachProtoVectorListener("hand_landmarks",(i,r)=>{for(const s of i){i=Vd(s);const o=[];for(const a of Yo(i,$I,1))o.push({x:Un(a,1)??0,y:Un(a,2)??0,z:Un(a,3)??0,visibility:Un(a,4)??0});this.landmarks.push(o)}Ge(this,r)}),this.g.attachEmptyPacketListener("hand_landmarks",i=>{Ge(this,i)}),this.g.attachProtoVectorListener("world_hand_landmarks",(i,r)=>{for(const s of i){i=Ru(s);const o=[];for(const a of Yo(i,jI,1))o.push({x:Un(a,1)??0,y:Un(a,2)??0,z:Un(a,3)??0,visibility:Un(a,4)??0});this.worldLandmarks.push(o)}Ge(this,r)}),this.g.attachEmptyPacketListener("world_hand_landmarks",i=>{Ge(this,i)}),this.g.attachProtoVectorListener("hand_gestures",(i,r)=>{this.gestures.push(...b4(i,!1)),Ge(this,r)}),this.g.attachEmptyPacketListener("hand_gestures",i=>{Ge(this,i)}),this.g.attachProtoVectorListener("handedness",(i,r)=>{this.handedness.push(...b4(i)),Ge(this,r)}),this.g.attachEmptyPacketListener("handedness",i=>{Ge(this,i)}),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};function R4(t){return{landmarks:t.landmarks,worldLandmarks:t.worldLandmarks,handednesses:t.handedness,handedness:t.handedness}}Sr.prototype.recognizeForVideo=Sr.prototype.La,Sr.prototype.recognize=Sr.prototype.Ka,Sr.prototype.setOptions=Sr.prototype.o,Sr.createFromModelPath=function(t,e){return Lt(Sr,t,{baseOptions:{modelAssetPath:e}})},Sr.createFromModelBuffer=function(t,e){return Lt(Sr,t,{baseOptions:{modelAssetBuffer:e}})},Sr.createFromOptions=function(t,e){return Lt(Sr,t,e)},Sr.HAND_CONNECTIONS=rM;var nr=class extends ur{constructor(t,e){super(new ls(t,e),"image_in","norm_rect",!1),this.landmarks=[],this.worldLandmarks=[],this.handedness=[],nt(t=this.j=new H3,0,1,e=new vn),this.u=new z3,nt(this.j,0,3,this.u),this.h=new d5,nt(this.j,0,2,this.h),so(this.h,3,1),qe(this.h,2,.5),qe(this.u,2,.5),qe(this.j,4,.5)}get baseOptions(){return Ot(this.j,vn,1)}set baseOptions(t){nt(this.j,0,1,t)}o(t){return"numHands"in t&&so(this.h,3,t.numHands??1),"minHandDetectionConfidence"in t&&qe(this.h,2,t.minHandDetectionConfidence??.5),"minTrackingConfidence"in t&&qe(this.j,4,t.minTrackingConfidence??.5),"minHandPresenceConfidence"in t&&qe(this.u,2,t.minHandPresenceConfidence??.5),this.l(t)}F(t,e){return this.landmarks=[],this.worldLandmarks=[],this.handedness=[],cs(this,t,e),R4(this)}G(t,e,n){return this.landmarks=[],this.worldLandmarks=[],this.handedness=[],uo(this,t,n,e),R4(this)}m(){var t=new Zi;un(t,"image_in"),un(t,"norm_rect"),Ht(t,"hand_landmarks"),Ht(t,"world_hand_landmarks"),Ht(t,"handedness");const e=new Nr;Is(e,OV,this.j);const n=new Di;Ur(n,"mediapipe.tasks.vision.hand_landmarker.HandLandmarkerGraph"),rn(n,"IMAGE:image_in"),rn(n,"NORM_RECT:norm_rect"),Dt(n,"LANDMARKS:hand_landmarks"),Dt(n,"WORLD_LANDMARKS:world_hand_landmarks"),Dt(n,"HANDEDNESS:handedness"),n.o(e),Or(t,n),this.g.attachProtoVectorListener("hand_landmarks",(i,r)=>{for(const s of i)i=Vd(s),this.landmarks.push(E1(i));Ge(this,r)}),this.g.attachEmptyPacketListener("hand_landmarks",i=>{Ge(this,i)}),this.g.attachProtoVectorListener("world_hand_landmarks",(i,r)=>{for(const s of i)i=Ru(s),this.worldLandmarks.push(Rf(i));Ge(this,r)}),this.g.attachEmptyPacketListener("world_hand_landmarks",i=>{Ge(this,i)}),this.g.attachProtoVectorListener("handedness",(i,r)=>{var s=this.handedness,o=s.push;const a=[];for(const u of i){i=S1(u);const h=[];for(const f of i.g())h.push({score:Un(f,2)??0,index:bs(ns(f,1),0)??-1,categoryName:ro(f,3)??"",displayName:ro(f,4)??""});a.push(h)}o.call(s,...a),Ge(this,r)}),this.g.attachEmptyPacketListener("handedness",i=>{Ge(this,i)}),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};nr.prototype.detectForVideo=nr.prototype.G,nr.prototype.detect=nr.prototype.F,nr.prototype.setOptions=nr.prototype.o,nr.createFromModelPath=function(t,e){return Lt(nr,t,{baseOptions:{modelAssetPath:e}})},nr.createFromModelBuffer=function(t,e){return Lt(nr,t,{baseOptions:{modelAssetBuffer:e}})},nr.createFromOptions=function(t,e){return Lt(nr,t,e)},nr.HAND_CONNECTIONS=rM;var z5=Ds([0,1],[1,2],[2,3],[3,7],[0,4],[4,5],[5,6],[6,8],[9,10],[11,12],[11,13],[13,15],[15,17],[15,19],[15,21],[17,19],[12,14],[14,16],[16,18],[16,20],[16,22],[18,20],[11,23],[12,24],[23,24],[23,25],[24,26],[25,27],[26,28],[27,29],[28,30],[29,31],[30,32],[27,31],[28,32]);function P4(t){t.h={faceLandmarks:[],faceBlendshapes:[],poseLandmarks:[],poseWorldLandmarks:[],poseSegmentationMasks:[],leftHandLandmarks:[],leftHandWorldLandmarks:[],rightHandLandmarks:[],rightHandWorldLandmarks:[]}}function L4(t){try{if(!t.I)return t.h;t.I(t.h)}finally{A1(t)}}function eg(t,e){t=Vd(t),e.push(E1(t))}var pn=class extends ur{constructor(t,e){super(new ls(t,e),"input_frames_image",null,!1),this.h={faceLandmarks:[],faceBlendshapes:[],poseLandmarks:[],poseWorldLandmarks:[],poseSegmentationMasks:[],leftHandLandmarks:[],leftHandWorldLandmarks:[],rightHandLandmarks:[],rightHandWorldLandmarks:[]},this.outputPoseSegmentationMasks=this.outputFaceBlendshapes=!1,nt(t=this.A=new _5,0,1,e=new vn),this.u=new z3,nt(this.A,0,2,this.u),this.aa=new zV,nt(this.A,0,3,this.aa),this.j=new w1,nt(this.A,0,4,this.j),this.H=new o5,nt(this.A,0,5,this.H),this.v=new v5,nt(this.A,0,6,this.v),this.D=new y5,nt(this.A,0,7,this.D),qe(this.j,2,.5),qe(this.j,3,.3),qe(this.H,2,.5),qe(this.v,2,.5),qe(this.v,3,.3),qe(this.D,2,.5),qe(this.u,2,.5)}get baseOptions(){return Ot(this.A,vn,1)}set baseOptions(t){nt(this.A,0,1,t)}o(t){return"minFaceDetectionConfidence"in t&&qe(this.j,2,t.minFaceDetectionConfidence??.5),"minFaceSuppressionThreshold"in t&&qe(this.j,3,t.minFaceSuppressionThreshold??.3),"minFacePresenceConfidence"in t&&qe(this.H,2,t.minFacePresenceConfidence??.5),"outputFaceBlendshapes"in t&&(this.outputFaceBlendshapes=!!t.outputFaceBlendshapes),"minPoseDetectionConfidence"in t&&qe(this.v,2,t.minPoseDetectionConfidence??.5),"minPoseSuppressionThreshold"in t&&qe(this.v,3,t.minPoseSuppressionThreshold??.3),"minPosePresenceConfidence"in t&&qe(this.D,2,t.minPosePresenceConfidence??.5),"outputPoseSegmentationMasks"in t&&(this.outputPoseSegmentationMasks=!!t.outputPoseSegmentationMasks),"minHandLandmarksConfidence"in t&&qe(this.u,2,t.minHandLandmarksConfidence??.5),this.l(t)}F(t,e,n){const i=typeof e!="function"?e:{};return this.I=typeof e=="function"?e:n,P4(this),cs(this,t,i),L4(this)}G(t,e,n,i){const r=typeof n!="function"?n:{};return this.I=typeof n=="function"?n:i,P4(this),uo(this,t,r,e),L4(this)}m(){var t=new Zi;un(t,"input_frames_image"),Ht(t,"pose_landmarks"),Ht(t,"pose_world_landmarks"),Ht(t,"face_landmarks"),Ht(t,"left_hand_landmarks"),Ht(t,"left_hand_world_landmarks"),Ht(t,"right_hand_landmarks"),Ht(t,"right_hand_world_landmarks");const e=new Nr,n=new c4;a2(n,1,ch("type.googleapis.com/mediapipe.tasks.vision.holistic_landmarker.proto.HolisticLandmarkerGraphOptions"),""),function(r,s){if(s!=null)if(Array.isArray(s))tn(r,2,p1(s,b3,void 0,void 0,!1));else{if(!(typeof s=="string"||s instanceof Oo||kd(s)))throw Error("invalid value in Any.value field: "+s+" expected a ByteString, a base64 encoded string, a Uint8Array or a jspb array");a2(r,2,M3(s,!1,!1),rc())}}(n,this.A.g());const i=new Di;Ur(i,"mediapipe.tasks.vision.holistic_landmarker.HolisticLandmarkerGraph"),g0(i,8,c4,n),rn(i,"IMAGE:input_frames_image"),Dt(i,"POSE_LANDMARKS:pose_landmarks"),Dt(i,"POSE_WORLD_LANDMARKS:pose_world_landmarks"),Dt(i,"FACE_LANDMARKS:face_landmarks"),Dt(i,"LEFT_HAND_LANDMARKS:left_hand_landmarks"),Dt(i,"LEFT_HAND_WORLD_LANDMARKS:left_hand_world_landmarks"),Dt(i,"RIGHT_HAND_LANDMARKS:right_hand_landmarks"),Dt(i,"RIGHT_HAND_WORLD_LANDMARKS:right_hand_world_landmarks"),i.o(e),Or(t,i),T1(this,t),this.g.attachProtoListener("pose_landmarks",(r,s)=>{eg(r,this.h.poseLandmarks),Ge(this,s)}),this.g.attachEmptyPacketListener("pose_landmarks",r=>{Ge(this,r)}),this.g.attachProtoListener("pose_world_landmarks",(r,s)=>{var o=this.h.poseWorldLandmarks;r=Ru(r),o.push(Rf(r)),Ge(this,s)}),this.g.attachEmptyPacketListener("pose_world_landmarks",r=>{Ge(this,r)}),this.outputPoseSegmentationMasks&&(Dt(i,"POSE_SEGMENTATION_MASK:pose_segmentation_mask"),ju(this,"pose_segmentation_mask"),this.g.W("pose_segmentation_mask",(r,s)=>{this.h.poseSegmentationMasks=[qu(this,r,!0,!this.I)],Ge(this,s)}),this.g.attachEmptyPacketListener("pose_segmentation_mask",r=>{this.h.poseSegmentationMasks=[],Ge(this,r)})),this.g.attachProtoListener("face_landmarks",(r,s)=>{eg(r,this.h.faceLandmarks),Ge(this,s)}),this.g.attachEmptyPacketListener("face_landmarks",r=>{Ge(this,r)}),this.outputFaceBlendshapes&&(Ht(t,"extra_blendshapes"),Dt(i,"FACE_BLENDSHAPES:extra_blendshapes"),this.g.attachProtoListener("extra_blendshapes",(r,s)=>{var o=this.h.faceBlendshapes;this.outputFaceBlendshapes&&(r=S1(r),o.push(j3(r.g()??[]))),Ge(this,s)}),this.g.attachEmptyPacketListener("extra_blendshapes",r=>{Ge(this,r)})),this.g.attachProtoListener("left_hand_landmarks",(r,s)=>{eg(r,this.h.leftHandLandmarks),Ge(this,s)}),this.g.attachEmptyPacketListener("left_hand_landmarks",r=>{Ge(this,r)}),this.g.attachProtoListener("left_hand_world_landmarks",(r,s)=>{var o=this.h.leftHandWorldLandmarks;r=Ru(r),o.push(Rf(r)),Ge(this,s)}),this.g.attachEmptyPacketListener("left_hand_world_landmarks",r=>{Ge(this,r)}),this.g.attachProtoListener("right_hand_landmarks",(r,s)=>{eg(r,this.h.rightHandLandmarks),Ge(this,s)}),this.g.attachEmptyPacketListener("right_hand_landmarks",r=>{Ge(this,r)}),this.g.attachProtoListener("right_hand_world_landmarks",(r,s)=>{var o=this.h.rightHandWorldLandmarks;r=Ru(r),o.push(Rf(r)),Ge(this,s)}),this.g.attachEmptyPacketListener("right_hand_world_landmarks",r=>{Ge(this,r)}),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};pn.prototype.detectForVideo=pn.prototype.G,pn.prototype.detect=pn.prototype.F,pn.prototype.setOptions=pn.prototype.o,pn.createFromModelPath=function(t,e){return Lt(pn,t,{baseOptions:{modelAssetPath:e}})},pn.createFromModelBuffer=function(t,e){return Lt(pn,t,{baseOptions:{modelAssetBuffer:e}})},pn.createFromOptions=function(t,e){return Lt(pn,t,e)},pn.HAND_CONNECTIONS=rM,pn.POSE_CONNECTIONS=z5,pn.FACE_LANDMARKS_LIPS=J3,pn.FACE_LANDMARKS_LEFT_EYE=Q3,pn.FACE_LANDMARKS_LEFT_EYEBROW=eM,pn.FACE_LANDMARKS_LEFT_IRIS=k5,pn.FACE_LANDMARKS_RIGHT_EYE=tM,pn.FACE_LANDMARKS_RIGHT_EYEBROW=nM,pn.FACE_LANDMARKS_RIGHT_IRIS=U5,pn.FACE_LANDMARKS_FACE_OVAL=iM,pn.FACE_LANDMARKS_CONTOURS=O5,pn.FACE_LANDMARKS_TESSELATION=F5;var $r=class extends ur{constructor(t,e){super(new ls(t,e),"input_image","norm_rect",!0),this.j={classifications:[]},nt(t=this.h=new x5,0,1,e=new vn)}get baseOptions(){return Ot(this.h,vn,1)}set baseOptions(t){nt(this.h,0,1,t)}o(t){return nt(this.h,0,2,f2(t,Ot(this.h,M1,2))),this.l(t)}ua(t,e){return this.j={classifications:[]},cs(this,t,e),this.j}va(t,e,n){return this.j={classifications:[]},uo(this,t,n,e),this.j}m(){var t=new Zi;un(t,"input_image"),un(t,"norm_rect"),Ht(t,"classifications");const e=new Nr;Is(e,HV,this.h);const n=new Di;Ur(n,"mediapipe.tasks.vision.image_classifier.ImageClassifierGraph"),rn(n,"IMAGE:input_image"),rn(n,"NORM_RECT:norm_rect"),Dt(n,"CLASSIFICATIONS:classifications"),n.o(e),Or(t,n),this.g.attachProtoListener("classifications",(i,r)=>{this.j=function(s){const o={classifications:Yo(s,wV,1).map(a=>{var u;return j3(((u=Ot(a,U3,4))==null?void 0:u.g())??[],bs(ns(a,2),0),ro(a,3))})};return f0(Wa(s,2))!=null&&(o.timestampMs=bs(f0(Wa(s,2)),0)),o}(TV(i)),Ge(this,r)}),this.g.attachEmptyPacketListener("classifications",i=>{Ge(this,i)}),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};$r.prototype.classifyForVideo=$r.prototype.va,$r.prototype.classify=$r.prototype.ua,$r.prototype.setOptions=$r.prototype.o,$r.createFromModelPath=function(t,e){return Lt($r,t,{baseOptions:{modelAssetPath:e}})},$r.createFromModelBuffer=function(t,e){return Lt($r,t,{baseOptions:{modelAssetBuffer:e}})},$r.createFromOptions=function(t,e){return Lt($r,t,e)};var Mr=class extends ur{constructor(t,e){super(new ls(t,e),"image_in","norm_rect",!0),this.h=new S5,this.embeddings={embeddings:[]},nt(t=this.h,0,1,e=new vn)}get baseOptions(){return Ot(this.h,vn,1)}set baseOptions(t){nt(this.h,0,1,t)}o(t){var e=this.h,n=Ot(this.h,h4,2);return n=n?n.clone():new h4,t.l2Normalize!==void 0?vd(n,1,t.l2Normalize):"l2Normalize"in t&&tn(n,1),t.quantize!==void 0?vd(n,2,t.quantize):"quantize"in t&&tn(n,2),nt(e,0,2,n),this.l(t)}Ba(t,e){return cs(this,t,e),this.embeddings}Ca(t,e,n){return uo(this,t,n,e),this.embeddings}m(){var t=new Zi;un(t,"image_in"),un(t,"norm_rect"),Ht(t,"embeddings_out");const e=new Nr;Is(e,VV,this.h);const n=new Di;Ur(n,"mediapipe.tasks.vision.image_embedder.ImageEmbedderGraph"),rn(n,"IMAGE:image_in"),rn(n,"NORM_RECT:norm_rect"),Dt(n,"EMBEDDINGS:embeddings_out"),n.o(e),Or(t,n),this.g.attachProtoListener("embeddings_out",(i,r)=>{i=RV(i),this.embeddings=function(s){return{embeddings:Yo(s,CV,1).map(o=>{var u,h;const a={headIndex:bs(ns(o,3),0)??-1,headName:ro(o,4)??""};if(gI(o,u2,c_(o,1))!==void 0)o=Su(o=Ot(o,u2,c_(o,1)),1,el),a.floatEmbedding=o.slice();else{const f=new Uint8Array(0);a.quantizedEmbedding=((h=(u=Ot(o,AV,c_(o,2)))==null?void 0:u.qa())==null?void 0:h.h())??f}return a}),timestampMs:bs(f0(Wa(s,2)),0)}}(i),Ge(this,r)}),this.g.attachEmptyPacketListener("embeddings_out",i=>{Ge(this,i)}),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};Mr.cosineSimilarity=function(t,e){if(t.floatEmbedding&&e.floatEmbedding)t=p4(t.floatEmbedding,e.floatEmbedding);else{if(!t.quantizedEmbedding||!e.quantizedEmbedding)throw Error("Cannot compute cosine similarity between quantized and float embeddings.");t=p4(d4(t.quantizedEmbedding),d4(e.quantizedEmbedding))}return t},Mr.prototype.embedForVideo=Mr.prototype.Ca,Mr.prototype.embed=Mr.prototype.Ba,Mr.prototype.setOptions=Mr.prototype.o,Mr.createFromModelPath=function(t,e){return Lt(Mr,t,{baseOptions:{modelAssetPath:e}})},Mr.createFromModelBuffer=function(t,e){return Lt(Mr,t,{baseOptions:{modelAssetBuffer:e}})},Mr.createFromOptions=function(t,e){return Lt(Mr,t,e)};var m2=class{constructor(t,e,n){this.confidenceMasks=t,this.categoryMask=e,this.qualityScores=n}close(){var t,e;(t=this.confidenceMasks)==null||t.forEach(n=>{n.close()}),(e=this.categoryMask)==null||e.close()}};function I4(t){t.categoryMask=void 0,t.confidenceMasks=void 0,t.qualityScores=void 0}function N4(t){try{const e=new m2(t.confidenceMasks,t.categoryMask,t.qualityScores);if(!t.j)return e;t.j(e)}finally{A1(t)}}m2.prototype.close=m2.prototype.close;var er=class extends ur{constructor(t,e){super(new ls(t,e),"image_in","norm_rect",!1),this.u=[],this.outputCategoryMask=!1,this.outputConfidenceMasks=!0,this.h=new W3,this.v=new M5,nt(this.h,0,3,this.v),nt(t=this.h,0,1,e=new vn)}get baseOptions(){return Ot(this.h,vn,1)}set baseOptions(t){nt(this.h,0,1,t)}o(t){return t.displayNamesLocale!==void 0?tn(this.h,2,ch(t.displayNamesLocale)):"displayNamesLocale"in t&&tn(this.h,2),"outputCategoryMask"in t&&(this.outputCategoryMask=t.outputCategoryMask??!1),"outputConfidenceMasks"in t&&(this.outputConfidenceMasks=t.outputConfidenceMasks??!0),super.l(t)}L(){(function(t){var n,i;const e=Yo(t.fa(),Di,1).filter(r=>ro(r,1).includes("mediapipe.tasks.TensorsToSegmentationCalculator"));if(t.u=[],1<e.length)throw Error("The graph has more than one mediapipe.tasks.TensorsToSegmentationCalculator.");e.length===1&&(((i=(n=Ot(e[0],Nr,7))==null?void 0:n.l())==null?void 0:i.g())??new Map).forEach((r,s)=>{t.u[Number(s)]=ro(r,1)})})(this)}ga(t,e,n){const i=typeof e!="function"?e:{};return this.j=typeof e=="function"?e:n,I4(this),cs(this,t,i),N4(this)}Na(t,e,n,i){const r=typeof n!="function"?n:{};return this.j=typeof n=="function"?n:i,I4(this),uo(this,t,r,e),N4(this)}Fa(){return this.u}m(){var t=new Zi;un(t,"image_in"),un(t,"norm_rect");const e=new Nr;Is(e,E5,this.h);const n=new Di;Ur(n,"mediapipe.tasks.vision.image_segmenter.ImageSegmenterGraph"),rn(n,"IMAGE:image_in"),rn(n,"NORM_RECT:norm_rect"),n.o(e),Or(t,n),T1(this,t),this.outputConfidenceMasks&&(Ht(t,"confidence_masks"),Dt(n,"CONFIDENCE_MASKS:confidence_masks"),ju(this,"confidence_masks"),this.g.da("confidence_masks",(i,r)=>{this.confidenceMasks=i.map(s=>qu(this,s,!0,!this.j)),Ge(this,r)}),this.g.attachEmptyPacketListener("confidence_masks",i=>{this.confidenceMasks=[],Ge(this,i)})),this.outputCategoryMask&&(Ht(t,"category_mask"),Dt(n,"CATEGORY_MASK:category_mask"),ju(this,"category_mask"),this.g.W("category_mask",(i,r)=>{this.categoryMask=qu(this,i,!1,!this.j),Ge(this,r)}),this.g.attachEmptyPacketListener("category_mask",i=>{this.categoryMask=void 0,Ge(this,i)})),Ht(t,"quality_scores"),Dt(n,"QUALITY_SCORES:quality_scores"),this.g.attachFloatVectorListener("quality_scores",(i,r)=>{this.qualityScores=i,Ge(this,r)}),this.g.attachEmptyPacketListener("quality_scores",i=>{this.categoryMask=void 0,Ge(this,i)}),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};er.prototype.getLabels=er.prototype.Fa,er.prototype.segmentForVideo=er.prototype.Na,er.prototype.segment=er.prototype.ga,er.prototype.setOptions=er.prototype.o,er.createFromModelPath=function(t,e){return Lt(er,t,{baseOptions:{modelAssetPath:e}})},er.createFromModelBuffer=function(t,e){return Lt(er,t,{baseOptions:{modelAssetBuffer:e}})},er.createFromOptions=function(t,e){return Lt(er,t,e)};var g2=class{constructor(t,e,n){this.confidenceMasks=t,this.categoryMask=e,this.qualityScores=n}close(){var t,e;(t=this.confidenceMasks)==null||t.forEach(n=>{n.close()}),(e=this.categoryMask)==null||e.close()}};g2.prototype.close=g2.prototype.close;var ZV=class extends je{constructor(t){super(t)}},Zu=[0,Nn,-2],KV=[0,Fo,-3,zn],P1=[0,Fo,-3,zn,Fo,-1],B5=[0,P1],JV=[0,B5,Zu],QV=[0,P1,Zu],H5=[0,P1,Nn,-1],eG=[0,H5,Zu],tG=[0,Fo,-3,zn,Zu,-1],nG=[0,Fo,-3,zn,oo],d_=class extends je{constructor(t){super(t)}},D4=[0,Fo,-1,zn],V5=class extends je{constructor(){super()}};V5.B=[1];var k4=class extends je{constructor(t){super(t)}},v2=[1,2,3,4,5,6,7,8,9,10,14,15],iG=[0,v2,Qt,P1,Qt,QV,Qt,B5,Qt,JV,Qt,D4,Qt,nG,Qt,KV,Qt,[0,Kt,Fo,-2,zn,Nn,zn,-1,2,Fo,Zu],Qt,H5,Qt,eG,Fo,Zu,Kt,Qt,tG,Qt,[0,Yn,D4]],rG=[0,Kt,Nn,-1,zn],y2=class extends je{constructor(){super()}};y2.B=[1],y2.prototype.g=x1([0,Yn,iG,Kt,rG]);var Xs=class extends ur{constructor(t,e){super(new ls(t,e),"image_in","norm_rect_in",!1),this.outputCategoryMask=!1,this.outputConfidenceMasks=!0,this.h=new W3,this.v=new M5,nt(this.h,0,3,this.v),nt(t=this.h,0,1,e=new vn)}get baseOptions(){return Ot(this.h,vn,1)}set baseOptions(t){nt(this.h,0,1,t)}o(t){return"outputCategoryMask"in t&&(this.outputCategoryMask=t.outputCategoryMask??!1),"outputConfidenceMasks"in t&&(this.outputConfidenceMasks=t.outputConfidenceMasks??!0),super.l(t)}ga(t,e,n,i){const r=typeof n!="function"?n:{};this.j=typeof n=="function"?n:i,this.qualityScores=this.categoryMask=this.confidenceMasks=void 0,n=this.J+1,i=new y2;const s=new k4;var o=new ZV;if(so(o,1,255),nt(s,0,12,o),e.keypoint&&e.scribble)throw Error("Cannot provide both keypoint and scribble.");if(e.keypoint){var a=new d_;vd(a,3,!0),qe(a,1,e.keypoint.x),qe(a,2,e.keypoint.y),Af(s,5,v2,a)}else{if(!e.scribble)throw Error("Must provide either a keypoint or a scribble.");for(a of(o=new V5,e.scribble))vd(e=new d_,3,!0),qe(e,1,a.x),qe(e,2,a.y),g0(o,1,d_,e);Af(s,15,v2,o)}g0(i,1,k4,s),this.g.addProtoToStream(i.g(),"drishti.RenderData","roi_in",n),cs(this,t,r);e:{try{const h=new g2(this.confidenceMasks,this.categoryMask,this.qualityScores);if(!this.j){var u=h;break e}this.j(h)}finally{A1(this)}u=void 0}return u}m(){var t=new Zi;un(t,"image_in"),un(t,"roi_in"),un(t,"norm_rect_in");const e=new Nr;Is(e,E5,this.h);const n=new Di;Ur(n,"mediapipe.tasks.vision.interactive_segmenter.InteractiveSegmenterGraph"),rn(n,"IMAGE:image_in"),rn(n,"ROI:roi_in"),rn(n,"NORM_RECT:norm_rect_in"),n.o(e),Or(t,n),T1(this,t),this.outputConfidenceMasks&&(Ht(t,"confidence_masks"),Dt(n,"CONFIDENCE_MASKS:confidence_masks"),ju(this,"confidence_masks"),this.g.da("confidence_masks",(i,r)=>{this.confidenceMasks=i.map(s=>qu(this,s,!0,!this.j)),Ge(this,r)}),this.g.attachEmptyPacketListener("confidence_masks",i=>{this.confidenceMasks=[],Ge(this,i)})),this.outputCategoryMask&&(Ht(t,"category_mask"),Dt(n,"CATEGORY_MASK:category_mask"),ju(this,"category_mask"),this.g.W("category_mask",(i,r)=>{this.categoryMask=qu(this,i,!1,!this.j),Ge(this,r)}),this.g.attachEmptyPacketListener("category_mask",i=>{this.categoryMask=void 0,Ge(this,i)})),Ht(t,"quality_scores"),Dt(n,"QUALITY_SCORES:quality_scores"),this.g.attachFloatVectorListener("quality_scores",(i,r)=>{this.qualityScores=i,Ge(this,r)}),this.g.attachEmptyPacketListener("quality_scores",i=>{this.categoryMask=void 0,Ge(this,i)}),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};Xs.prototype.segment=Xs.prototype.ga,Xs.prototype.setOptions=Xs.prototype.o,Xs.createFromModelPath=function(t,e){return Lt(Xs,t,{baseOptions:{modelAssetPath:e}})},Xs.createFromModelBuffer=function(t,e){return Lt(Xs,t,{baseOptions:{modelAssetBuffer:e}})},Xs.createFromOptions=function(t,e){return Lt(Xs,t,e)};var qr=class extends ur{constructor(t,e){super(new ls(t,e),"input_frame_gpu","norm_rect",!1),this.j={detections:[]},nt(t=this.h=new X3,0,1,e=new vn)}get baseOptions(){return Ot(this.h,vn,1)}set baseOptions(t){nt(this.h,0,1,t)}o(t){return t.displayNamesLocale!==void 0?tn(this.h,2,ch(t.displayNamesLocale)):"displayNamesLocale"in t&&tn(this.h,2),t.maxResults!==void 0?so(this.h,3,t.maxResults):"maxResults"in t&&tn(this.h,3),t.scoreThreshold!==void 0?qe(this.h,4,t.scoreThreshold):"scoreThreshold"in t&&tn(this.h,4),t.categoryAllowlist!==void 0?m0(this.h,5,t.categoryAllowlist):"categoryAllowlist"in t&&tn(this.h,5),t.categoryDenylist!==void 0?m0(this.h,6,t.categoryDenylist):"categoryDenylist"in t&&tn(this.h,6),this.l(t)}F(t,e){return this.j={detections:[]},cs(this,t,e),this.j}G(t,e,n){return this.j={detections:[]},uo(this,t,n,e),this.j}m(){var t=new Zi;un(t,"input_frame_gpu"),un(t,"norm_rect"),Ht(t,"detections");const e=new Nr;Is(e,WV,this.h);const n=new Di;Ur(n,"mediapipe.tasks.vision.ObjectDetectorGraph"),rn(n,"IMAGE:input_frame_gpu"),rn(n,"NORM_RECT:norm_rect"),Dt(n,"DETECTIONS:detections"),n.o(e),Or(t,n),this.g.attachProtoVectorListener("detections",(i,r)=>{for(const s of i)i=XI(s),this.j.detections.push(A5(i));Ge(this,r)}),this.g.attachEmptyPacketListener("detections",i=>{Ge(this,i)}),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};qr.prototype.detectForVideo=qr.prototype.G,qr.prototype.detect=qr.prototype.F,qr.prototype.setOptions=qr.prototype.o,qr.createFromModelPath=async function(t,e){return Lt(qr,t,{baseOptions:{modelAssetPath:e}})},qr.createFromModelBuffer=function(t,e){return Lt(qr,t,{baseOptions:{modelAssetBuffer:e}})},qr.createFromOptions=function(t,e){return Lt(qr,t,e)};var _2=class{constructor(t,e,n){this.landmarks=t,this.worldLandmarks=e,this.segmentationMasks=n}close(){var t;(t=this.segmentationMasks)==null||t.forEach(e=>{e.close()})}};function U4(t){t.landmarks=[],t.worldLandmarks=[],t.segmentationMasks=void 0}function O4(t){try{const e=new _2(t.landmarks,t.worldLandmarks,t.segmentationMasks);if(!t.j)return e;t.j(e)}finally{A1(t)}}_2.prototype.close=_2.prototype.close;var wr=class extends ur{constructor(t,e){super(new ls(t,e),"image_in","norm_rect",!1),this.landmarks=[],this.worldLandmarks=[],this.outputSegmentationMasks=!1,nt(t=this.h=new T5,0,1,e=new vn),this.D=new y5,nt(this.h,0,3,this.D),this.v=new v5,nt(this.h,0,2,this.v),so(this.v,4,1),qe(this.v,2,.5),qe(this.D,2,.5),qe(this.h,4,.5)}get baseOptions(){return Ot(this.h,vn,1)}set baseOptions(t){nt(this.h,0,1,t)}o(t){return"numPoses"in t&&so(this.v,4,t.numPoses??1),"minPoseDetectionConfidence"in t&&qe(this.v,2,t.minPoseDetectionConfidence??.5),"minTrackingConfidence"in t&&qe(this.h,4,t.minTrackingConfidence??.5),"minPosePresenceConfidence"in t&&qe(this.D,2,t.minPosePresenceConfidence??.5),"outputSegmentationMasks"in t&&(this.outputSegmentationMasks=t.outputSegmentationMasks??!1),this.l(t)}F(t,e,n){const i=typeof e!="function"?e:{};return this.j=typeof e=="function"?e:n,U4(this),cs(this,t,i),O4(this)}G(t,e,n,i){const r=typeof n!="function"?n:{};return this.j=typeof n=="function"?n:i,U4(this),uo(this,t,r,e),O4(this)}m(){var t=new Zi;un(t,"image_in"),un(t,"norm_rect"),Ht(t,"normalized_landmarks"),Ht(t,"world_landmarks"),Ht(t,"segmentation_masks");const e=new Nr;Is(e,XV,this.h);const n=new Di;Ur(n,"mediapipe.tasks.vision.pose_landmarker.PoseLandmarkerGraph"),rn(n,"IMAGE:image_in"),rn(n,"NORM_RECT:norm_rect"),Dt(n,"NORM_LANDMARKS:normalized_landmarks"),Dt(n,"WORLD_LANDMARKS:world_landmarks"),n.o(e),Or(t,n),T1(this,t),this.g.attachProtoVectorListener("normalized_landmarks",(i,r)=>{this.landmarks=[];for(const s of i)i=Vd(s),this.landmarks.push(E1(i));Ge(this,r)}),this.g.attachEmptyPacketListener("normalized_landmarks",i=>{this.landmarks=[],Ge(this,i)}),this.g.attachProtoVectorListener("world_landmarks",(i,r)=>{this.worldLandmarks=[];for(const s of i)i=Ru(s),this.worldLandmarks.push(Rf(i));Ge(this,r)}),this.g.attachEmptyPacketListener("world_landmarks",i=>{this.worldLandmarks=[],Ge(this,i)}),this.outputSegmentationMasks&&(Dt(n,"SEGMENTATION_MASK:segmentation_masks"),ju(this,"segmentation_masks"),this.g.da("segmentation_masks",(i,r)=>{this.segmentationMasks=i.map(s=>qu(this,s,!0,!this.j)),Ge(this,r)}),this.g.attachEmptyPacketListener("segmentation_masks",i=>{this.segmentationMasks=[],Ge(this,i)})),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};wr.prototype.detectForVideo=wr.prototype.G,wr.prototype.detect=wr.prototype.F,wr.prototype.setOptions=wr.prototype.o,wr.createFromModelPath=function(t,e){return Lt(wr,t,{baseOptions:{modelAssetPath:e}})},wr.createFromModelBuffer=function(t,e){return Lt(wr,t,{baseOptions:{modelAssetBuffer:e}})},wr.createFromOptions=function(t,e){return Lt(wr,t,e)},wr.POSE_CONNECTIONS=z5;const sG=({onHandUpdate:t,isEnabled:e})=>{const n=_e.useRef(null),[i,r]=_e.useState(!1),[s,o]=_e.useState(null),[a,u]=_e.useState(!1),[h,f]=_e.useState(null),d=_e.useRef(null),p=_e.useRef(),v=_e.useRef(null),y=_e.useRef(0);_e.useEffect(()=>{const x=async()=>{u(!0),f("..."),o(null),console.log("[HandTracker]  AI ..."),console.log("[HandTracker] :",navigator.userAgent),console.log("[HandTracker] URL:",window.location.href);try{const M=window.isSecureContext,T=window.location.hostname;!M&&!(T==="localhost"||T==="127.0.0.1")&&console.warn("[HandTracker] "),f(" WASM ..."),console.log("[HandTracker]  WASM ");const b=["./wasm","wasm","/wasm"];let L=null,N="";for(const j of b)try{N=j,L=await Ll.forVisionTasks(N),console.log(`[HandTracker]  WASM : ${j}`);break}catch{console.warn(`[HandTracker]  ${j}  WASM `)}if(!L)throw new Error(" WASM  wasm ");f(" AI ..."),console.log("[HandTracker]  AI ");const R=["./hand_landmarker.task","hand_landmarker.task","/hand_landmarker.task"];let C=null,O="";for(const j of R)try{O=j;const J={baseOptions:{modelAssetPath:j,delegate:"CPU"},runningMode:"VIDEO",numHands:1,minDetectionConfidence:.5,minTrackingConfidence:.5};C=await nr.createFromOptions(L,J),console.log(`[HandTracker]  AI : ${j}`);break}catch{console.warn(`[HandTracker]  ${j} `)}if(!C)throw new Error(" AI  hand_landmarker.task ");d.current=C,r(!0),console.log("[HandTracker]  AI ")}catch(M){console.error("[HandTracker]  AI :",M);const T=M.message||M.toString();let P="";if(T.includes("WASM")||T.includes("WebAssembly")?P=" WebAssembly Chrome  Edge ":T.includes("fetch")||T.includes("NetworkError")?P="":T.includes("CORS")?P=" HTTPS ":T.includes("NotAllowedError")?P="":P=`: ${T.slice(0,80)}...`,o(P),y.current<2){y.current++,console.log(`[HandTracker]  ${y.current} ...`),setTimeout(()=>{x()},2e3);return}}finally{u(!1),f(null)}};return x(),()=>{d.current&&d.current.close()}},[]),_e.useEffect(()=>{if(i)return e?w():S(),()=>{S()}},[e,i]);const w=async()=>{if(n.current&&!v.current)try{console.log("[HandTracker] ...");const x=window.isSecureContext,M=window.location.hostname,T=M==="localhost"||M==="127.0.0.1";if(!navigator.mediaDevices)throw new Error(" API");if(!navigator.mediaDevices.getUserMedia)throw!x&&!T?new Error(" HTTP  API HTTPS  HTTPS "):new Error(" API Chrome/Firefox/Edge");const P={video:{width:{min:320,ideal:480,max:640},height:{min:240,ideal:360,max:480},facingMode:{ideal:"user"},frameRate:{ideal:15,max:20}},audio:!1};console.log("[HandTracker] :",P);const b=await navigator.mediaDevices.getUserMedia(P);v.current=b,n.current&&(n.current.srcObject=b,n.current.addEventListener("loadeddata",g)),console.log("[HandTracker]  "),o(null)}catch(x){console.error("[HandTracker]  :",x);const M=x.name||"",T=x.message||"";let P="";M==="NotAllowedError"||M==="PermissionDeniedError"?P="":M==="NotFoundError"||M==="DevicesNotFoundError"?P="":M==="NotReadableError"||M==="TrackStartError"?P="":T.includes("HTTP")||T.includes("")||T.includes("HTTPS")?P=" HTTPS 1)  HTTPS2)  Netlify/Vercel  HTTPS 3)  localhost ":P=`: ${T}`,o(P)}},S=()=>{p.current&&(cancelAnimationFrame(p.current),p.current=void 0),v.current&&(v.current.getTracks().forEach(x=>x.stop()),v.current=null),n.current&&(n.current.srcObject=null,n.current.removeEventListener("loadeddata",g)),t({isPresent:!1,gestureValue:.5,tiltX:0,tiltY:0})},g=()=>{if(!d.current||!n.current||!v.current)return;if(n.current.paused||n.current.ended||n.current.readyState<2){p.current=requestAnimationFrame(g);return}const x=performance.now();if(n.current.videoWidth>0&&n.current.videoHeight>0)try{const M=d.current.detectForVideo(n.current,x);if(M.landmarks&&M.landmarks.length>0){const T=M.landmarks[0],P=T[4],b=T[8],L=Math.sqrt(Math.pow(P.x-b.x,2)+Math.pow(P.y-b.y,2)+Math.pow(P.z-b.z,2)),N=Math.min(Math.max((L-.05)/.2,0),1),R=T[9],C=(R.x-.5)*2,O=(R.y-.5)*2;t({isPresent:!0,gestureValue:N,tiltX:-C,tiltY:-O})}else t({isPresent:!1,gestureValue:.5,tiltX:0,tiltY:0})}catch{}v.current&&(p.current=requestAnimationFrame(g))};return e?Te.jsx("div",{className:"absolute bottom-20 right-4 z-40 pointer-events-none md:top-4 md:left-4",children:Te.jsxs("div",{className:"relative w-24 h-18 md:w-64 md:h-48 rounded-lg overflow-hidden border border-white/20 bg-black/50 shadow-lg transition-all pointer-events-auto",children:[Te.jsx("video",{ref:n,className:"w-full h-full object-cover transform scale-x-[-1]",autoPlay:!0,playsInline:!0,muted:!0}),a&&!s&&Te.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/80 text-white text-[10px] md:text-xs z-10",children:[Te.jsx(rH,{className:"w-4 h-4 animate-spin mb-1"}),Te.jsx("span",{children:h}),Te.jsx("div",{className:"w-16 h-1 bg-white/20 rounded-full mt-1 overflow-hidden",children:Te.jsx("div",{className:"h-full bg-white/80 transition-all duration-300 animate-pulse",style:{width:"100%"}})})]}),s&&Te.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-red-900/90 text-white text-[10px] text-center p-1 leading-tight z-20",children:[Te.jsx("span",{className:"mb-1",children:s}),Te.jsxs("button",{onClick:()=>{y.current=0,window.location.reload()},className:"flex items-center gap-1 bg-white/20 hover:bg-white/30 px-2 py-0.5 rounded text-[9px] uppercase tracking-wider mt-1",children:[Te.jsx(sH,{size:8})," "]})]}),Te.jsx("div",{className:"absolute bottom-1 right-1 z-10",children:s?Te.jsx(aH,{className:"w-3 h-3 text-white/50"}):Te.jsx(FL,{className:"w-3 h-3 text-white/50"})})]})}):null};var ir=(t=>(t.SPHERE="Sphere",t.HEART="Heart",t.FLOWER="Flower",t.SATURN="Saturn",t.BUDDHA="Buddha",t.FIREWORKS="Fireworks",t.CHRISTMAS_TREE="Christmas Tree",t))(ir||{});const x2=3e3,F4=1500,p_=t=>{const e=Math.random(),n=Math.random(),i=2*Math.PI*e,r=Math.acos(2*n-1),s=Math.cbrt(Math.random())*t,o=Math.sin(r);return new k(s*o*Math.cos(i),s*o*Math.sin(i),s*Math.cos(r))},tg=(t,e=x2)=>{const n=new Float32Array(e*3),i=new k;for(let r=0;r<e;r++){let s=0,o=0,a=0;switch(t){case ir.SPHERE:{const u=p_(4);s=u.x,o=u.y,a=u.z;break}case ir.HEART:{const u=Math.random()*Math.PI*2,h=.25,f=Math.sqrt(Math.random());s=h*16*Math.pow(Math.sin(u),3),o=h*(13*Math.cos(u)-5*Math.cos(2*u)-2*Math.cos(3*u)-Math.cos(4*u)),a=(Math.random()-.5)*2,s*=f,o*=f,a*=Math.random()*2;break}case ir.FLOWER:{const u=Math.random()*Math.PI*2,h=Math.random()*Math.PI,d=3*Math.cos(3*u)+1;s=d*Math.cos(u)*Math.sin(h),a=d*Math.sin(u)*Math.sin(h),o=d*Math.cos(h)*.5;break}case ir.SATURN:{if(Math.random()<.4){const h=p_(2.5);s=h.x,o=h.y,a=h.z}else{const h=Math.random()*Math.PI*2,f=3.5+Math.random()*2.5;s=Math.cos(h)*f,a=Math.sin(h)*f,o=(Math.random()-.5)*.2}i.set(s,o,a),i.applyAxisAngle(new k(1,0,1).normalize(),Math.PI/6),s=i.x,o=i.y,a=i.z;break}case ir.BUDDHA:{const u=Math.random();if(u<.2){const h=p_(.9);s=h.x,o=h.y+2.5,a=h.z}else if(u<.6){const h=Math.random()*3,f=1.5*(1-h/3.5)+.2,d=Math.random()*Math.PI*2;s=Math.cos(d)*f,a=Math.sin(d)*f,o=h-.5}else{const h=Math.random()*Math.PI*2,f=2+Math.random()*.8,d=.8*Math.random();s=(f+d*Math.cos(h*5))*Math.cos(h),a=(f+d*Math.cos(h*5))*Math.sin(h),o=d*Math.sin(h*5)-1}break}case ir.FIREWORKS:{const u=6*(1-Math.pow(Math.random(),4)),h=Math.random()*Math.PI*2,f=Math.acos(2*Math.random()-1);s=u*Math.sin(f)*Math.cos(h),o=u*Math.sin(f)*Math.sin(h),a=u*Math.cos(f);break}case ir.CHRISTMAS_TREE:{const d=Math.random();if(d>.95)s=(Math.random()-.5)*.4,a=(Math.random()-.5)*.4,o=6/2+Math.random()*.5;else if(d<.1){const y=Math.random()*Math.PI*2,w=Math.sqrt(Math.random())*.4;s=Math.cos(y)*w,a=Math.sin(y)*w,o=-6/2+Math.random()*1.5}else{const p=Math.floor(Math.random()*5),v=p/(5-1),y=Math.random();o=-6/2+1.5+p*(6-1.5)/5+y*(6/5);const g=2.5*(1-v*.8)*(1-y)*Math.sqrt(Math.random()),x=Math.random()*Math.PI*2;s=Math.cos(x)*g,a=Math.sin(x)*g}break}}n[r*3]=s,n[r*3+1]=o,n[r*3+2]=a}return n},oG=17,aG=({handData:t,isVisible:e})=>{const n=_e.useRef(null),i=_e.useMemo(()=>{const r=[];for(let u=0;u<oG;u++){const h=u%5,f=h/(5-1),p=-6/2+1.5+h*(6-1.5)/5+.2,v=2.5*(1-f*.8)+.1,y=u*Math.PI*2*.618,w=Math.cos(y)*v,S=Math.sin(y)*v;r.push({position:new k(w,p,S),url:`photos/${u+1}.jpg`})}return r},[]);return r3((r,s)=>{if(!n.current)return;const o=e?1:0;n.current.scale.lerp(new k(o,o,o),s*2);const a=.4,u=1.8;n.current.children.forEach((h,f)=>{const d=h,p=i[f].position;if(t.isPresent){const v=t.gestureValue,y=No.lerp(a,u,v),w=d.scale.x,S=No.lerp(w,y,s*3);d.scale.setScalar(S);const g=p.clone().setY(0).normalize(),M=p.length()+v*3.5,T=p.y+v*(f%2===0?1:-1),P=new k(g.x*M,T,g.z*M);v>.5&&P.applyAxisAngle(new k(0,1,0),r.clock.elapsedTime*.1),d.position.lerp(P,s*3);const b=d.material;b.opacity=No.lerp(.8,1,v)}else d.scale.setScalar(No.lerp(d.scale.x,a,s*3)),d.position.lerp(p,s*3),d.position.y+=Math.sin(r.clock.elapsedTime*2+f)*.002})}),Te.jsx("group",{ref:n,children:i.map((r,s)=>Te.jsx(lG,{url:r.url,position:r.position},s))})},lG=({url:t,position:e})=>{const[n,i]=_e.useState(null);_e.useEffect(()=>{new tL().load(t,o=>{o.colorSpace=Tr,i(o)},void 0,()=>{})},[t]);const r=_e.useMemo(()=>{const s=document.createElement("canvas");s.width=64,s.height=64;const o=s.getContext("2d");if(o){const a=o.createRadialGradient(32,32,2,32,32,30);a.addColorStop(0,"rgba(255, 223, 0, 1)"),a.addColorStop(.5,"rgba(255, 180, 0, 0.8)"),a.addColorStop(1,"rgba(255, 100, 0, 0)"),o.fillStyle=a,o.fillRect(0,0,64,64)}return new zS(s)},[]);return Te.jsx("sprite",{position:e,children:Te.jsx("spriteMaterial",{map:n||r,transparent:!0,blending:Da})})},cG=({handData:t,config:e,isMobile:n})=>{const i=_e.useRef(null),r=_e.useRef(null),s=_e.useMemo(()=>n?F4:x2,[n]),o=_e.useRef(new Float32Array(s*3)),a=_e.useRef(new Float32Array(s*3)),u=_e.useRef(new ze(e.color)),h=_e.useRef(new ze(e.color));_e.useEffect(()=>{const d=n?F4:x2;if(o.current=new Float32Array(d*3),a.current=tg(e.shape,d),i.current){const p=tg(ir.SPHERE,d);o.current.set(p),i.current.geometry.setAttribute("position",new Xt(o.current,3))}},[n]),_e.useEffect(()=>{a.current=tg(e.shape,s),h.current.set(e.color)},[e.shape,e.color,s]),_e.useEffect(()=>{const d=tg(ir.SPHERE,s);o.current.set(d),i.current&&i.current.geometry.setAttribute("position",new Xt(o.current,3))},[s]),r3((d,p)=>{if(!i.current||!r.current)return;if(t.isPresent){let x=t.tiltX;Math.abs(x)<.1&&(x=0),r.current.rotation.y+=x*p*2.5,r.current.rotation.x=No.lerp(r.current.rotation.x,t.tiltY*.5,p*2)}else r.current.rotation.y+=p*.1,r.current.rotation.x=No.lerp(r.current.rotation.x,0,p);const y=i.current.geometry.getAttribute("position"),w=y.array,S=t.isPresent?4:2,g=Math.min(p*S,1);for(let x=0;x<s;x++){const M=x*3,T=x*3+1,P=x*3+2;let b=w[M],L=w[T],N=w[P];const R=a.current[M],C=a.current[T],O=a.current[P];b+=(R-b)*g,L+=(C-L)*g,N+=(O-N)*g,w[M]=b,w[T]=L,w[P]=N}if(y.needsUpdate=!0,t.isPresent){const x=.8+t.gestureValue*1;i.current.scale.setScalar(No.lerp(i.current.scale.x,x,.1))}else{const x=1+Math.sin(d.clock.elapsedTime)*.05;i.current.scale.setScalar(No.lerp(i.current.scale.x,x,.05))}u.current.lerp(h.current,p*2),i.current.material.color.set(u.current)});const f=_e.useMemo(()=>{const d=document.createElement("canvas");d.width=32,d.height=32;const p=d.getContext("2d");return p&&(p.beginPath(),p.arc(16,16,14,0,Math.PI*2),p.fillStyle="white",p.fill()),new zS(d)},[]);return Te.jsxs("group",{ref:r,children:[Te.jsxs("points",{ref:i,children:[Te.jsx("bufferGeometry",{children:Te.jsx("bufferAttribute",{attach:"attributes-position",count:s,array:o.current,itemSize:3})}),Te.jsx("pointsMaterial",{size:n?.15:.12,map:f,transparent:!0,opacity:.8,vertexColors:!1,color:e.color,sizeAttenuation:!0,blending:e0,depthWrite:!1})]}),Te.jsx(aG,{handData:t,isVisible:e.shape===ir.CHRISTMAS_TREE})]})},uG=["#33FF57","#FFD700","#FF5733","#3357FF","#FF33F6","#33FFF6","#FFFFFF"],hG=Object.values(ir),fG=()=>{const[t,e]=_e.useState({isPresent:!1,gestureValue:.5,tiltX:0,tiltY:0}),[n,i]=_e.useState(!1),[r,s]=_e.useState(!0),[o,a]=_e.useState(!1),[u,h]=_e.useState(null),[f,d]=_e.useState({count:3e3,color:"#33FF57",shape:ir.CHRISTMAS_TREE});_e.useEffect(()=>{const v=()=>{const y=window.innerWidth<768;i(y),d(w=>({...w,count:y?2e3:3e3}))};return v(),window.addEventListener("resize",v),()=>window.removeEventListener("resize",v)},[]),_e.useEffect(()=>{const v=S=>{S.preventDefault(),console.error("[WebGL] ..."),h("3D ...")},y=()=>{console.log("[WebGL] "),h(null)},w=document.querySelector("canvas");if(w)return w.addEventListener("webglcontextlost",v),w.addEventListener("webglcontextrestored",y),()=>{w.removeEventListener("webglcontextlost",v),w.removeEventListener("webglcontextrestored",y)}},[]);const p=()=>{document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen().catch(v=>{console.log("Fullscreen blocked",v)})};return Te.jsxs("div",{className:"relative w-full h-full bg-black overflow-hidden select-none",children:[Te.jsx(sG,{onHandUpdate:e,isEnabled:o}),u&&Te.jsxs("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50 bg-red-900/90 text-white px-6 py-4 rounded-lg shadow-lg",children:[Te.jsxs("p",{className:"font-semibold mb-2",children:[" ",u]}),Te.jsx("button",{onClick:()=>window.location.reload(),className:"bg-white/20 hover:bg-white/30 px-4 py-2 rounded text-sm",children:""})]}),Te.jsxs(B7,{camera:{position:[0,0,8],fov:60},dpr:[1,n?1.5:2],gl:{antialias:!1,alpha:!1,powerPreference:"high-performance",preserveDrawingBuffer:!1,failIfMajorPerformanceCaveat:!1},className:"w-full h-full block touch-none",onCreated:({gl:v})=>{v.domElement.addEventListener("webglcontextlost",w=>{w.preventDefault(),console.log("[Canvas] WebGL ")})},children:[Te.jsx("color",{attach:"background",args:["#050505"]}),Te.jsx("fog",{attach:"fog",args:["#050505",5,20]}),Te.jsx("ambientLight",{intensity:.3}),Te.jsx("pointLight",{position:[10,10,10],intensity:.5}),Te.jsx("pointLight",{position:[-10,-10,-10],intensity:.3,color:"#4080ff"}),Te.jsxs(_e.Suspense,{fallback:null,children:[Te.jsx(cG,{handData:t,config:f,isMobile:n}),Te.jsx(q7,{enableZoom:!t.isPresent,enableRotate:!t.isPresent,enablePan:!1,autoRotate:!t.isPresent,autoRotateSpeed:.5,rotateSpeed:.5})]})]}),Te.jsx("button",{onClick:()=>s(!r),className:"absolute top-6 right-6 z-50 p-3 bg-white/10 hover:bg-white/20 text-white rounded-full backdrop-blur-md transition-colors",children:r?Te.jsx(lH,{size:24}):Te.jsx(oH,{size:24})}),Te.jsxs("button",{onClick:()=>a(!o),className:`absolute top-6 right-24 z-50 p-3 rounded-full backdrop-blur-md transition-colors flex items-center gap-2 px-4 ${o?"bg-red-500/20 text-red-200 hover:bg-red-500/30":"bg-green-500/20 text-green-200 hover:bg-green-500/30"}`,children:[o?Te.jsx(eH,{size:22}):Te.jsx(FL,{size:22}),Te.jsx("span",{className:"text-xs font-semibold hidden md:inline",children:o?"STOP CAM":"START CAM"})]}),Te.jsxs("div",{className:`absolute transition-all duration-500 ease-in-out z-40
          ${r?"translate-y-0 opacity-100":"translate-y-full opacity-0 md:translate-y-0 md:translate-x-full md:opacity-0"}
          
          /* Mobile: Bottom Sheet */
          bottom-0 left-0 right-0 w-full 
          bg-gradient-to-t from-black/95 via-black/90 to-transparent
          p-5 pb-10 flex flex-col gap-5

          /* Desktop: Right Sidebar */
          md:top-0 md:bottom-auto md:left-auto md:right-0 md:w-80 md:h-full md:bg-black/40 md:bg-none
          md:justify-center md:pb-6
        `,children:[Te.jsx("div",{className:"hidden md:block absolute inset-0 bg-black/40 backdrop-blur-md -z-10"}),Te.jsxs("div",{className:"flex flex-col gap-5 md:gap-6 overflow-y-auto no-scrollbar max-h-[60vh] md:max-h-full",children:[Te.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-xl p-4 md:p-4",children:[Te.jsxs("div",{className:"flex items-center gap-2 mb-3 text-white/80",children:[Te.jsx(tH,{size:16,className:"md:w-4 md:h-4"}),Te.jsx("span",{className:"text-sm md:text-sm font-semibold tracking-wider",children:"STATUS"})]}),o?Te.jsxs("div",{className:"space-y-3",children:[Te.jsxs("div",{className:"flex justify-between text-xs md:text-xs text-white/60",children:[Te.jsx("span",{children:"Hand Tracking"}),Te.jsx("span",{className:t.isPresent?"text-green-400":"text-yellow-500",children:t.isPresent?"Active":"Scanning..."})]}),t.isPresent&&Te.jsx("div",{className:"w-full bg-white/10 rounded-full h-2",children:Te.jsx("div",{className:"bg-green-400 h-2 rounded-full transition-all duration-100",style:{width:`${t.gestureValue*100}%`}})}),Te.jsx("p",{className:"text-xs text-white/40 pt-1 leading-tight",children:t.isPresent?"Open hand to reveal photos.":"Bring hand into view."})]}):Te.jsx("p",{className:"text-xs md:text-xs text-white/40",children:"Camera is off. Enable camera to interact."})]}),Te.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-xl p-4 md:p-4",children:[Te.jsxs("div",{className:"flex items-center gap-2 mb-4 text-white/80",children:[Te.jsx(Q7,{size:16,className:"md:w-4 md:h-4"}),Te.jsx("span",{className:"text-sm md:text-sm font-semibold tracking-wider",children:"GEOMETRY"})]}),Te.jsx("div",{className:"grid grid-cols-3 gap-3",children:hG.map(v=>Te.jsx("button",{onClick:()=>d(y=>({...y,shape:v})),className:`text-xs md:text-xs px-3 py-3 rounded-md transition-all duration-300 text-center truncate ${f.shape===v?"bg-white text-black font-bold shadow-lg scale-105":"bg-white/5 text-white/60 hover:bg-white/10"}`,children:v===ir.CHRISTMAS_TREE?" Tree":v},v))})]}),Te.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-xl p-4 md:p-4",children:[Te.jsxs("div",{className:"flex items-center gap-2 mb-4 text-white/80",children:[Te.jsx(iH,{size:16,className:"md:w-4 md:h-4"}),Te.jsx("span",{className:"text-sm md:text-sm font-semibold tracking-wider",children:"COLOR"})]}),Te.jsx("div",{className:"flex flex-wrap gap-4 justify-start",children:uG.map(v=>Te.jsx("button",{onClick:()=>d(y=>({...y,color:v})),className:`w-8 h-8 md:w-8 md:h-8 rounded-full transition-transform duration-300 border-2 ${f.color===v?"border-white scale-110":"border-transparent hover:scale-110"}`,style:{backgroundColor:v,boxShadow:`0 0 10px ${v}40`}},v))})]})]})]}),Te.jsx("button",{onClick:p,className:"hidden md:flex absolute bottom-6 left-6 p-3 bg-white/10 hover:bg-white/20 text-white rounded-full backdrop-blur-md transition-colors",title:"Toggle Fullscreen",children:Te.jsx(nH,{size:20})}),Te.jsx("div",{className:`absolute top-6 left-6 md:left-1/2 md:-translate-x-1/2 pointer-events-none transition-opacity duration-500 z-30
        ${t.isPresent&&o?"opacity-20":"opacity-100"}`,children:Te.jsx("h1",{className:"text-white font-light text-base md:text-2xl tracking-[0.2em] uppercase opacity-90 drop-shadow-lg",children:"Zen Particles"})})]})},G5=document.getElementById("root");if(!G5)throw new Error("Could not find root element to mount to");const dG=m_.createRoot(G5);dG.render(Te.jsx(ZN.StrictMode,{children:Te.jsx(fG,{})}));
